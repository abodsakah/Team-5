/*! For license information please see main.d368f6df.js.LICENSE.txt */
!function(){var g={5318:function(g){g.exports=function(g){return g&&g.__esModule?g:{default:g}},g.exports.__esModule=!0,g.exports.default=g.exports},5299:function(g,I,e){var C=n("en");function n(g){return e(9259)("./".concat(g,".json"))}g.exports={setLang:function(g){switch(g){case"en":default:C=n("en");break;case"sv":C=n("sv")}},getLanguageFile:n,t:function(g){return C[g]}}},8677:function(g,I,e){"use strict";e.d(I,{Z:function(){return ng}});var C=e(6567),n=Math.abs,t=String.fromCharCode,l=Object.assign;function o(g){return g.trim()}function a(g,I,e){return g.replace(I,e)}function i(g,I){return g.indexOf(I)}function r(g,I){return 0|g.charCodeAt(I)}function c(g,I,e){return g.slice(I,e)}function A(g){return g.length}function d(g){return g.length}function u(g,I){return I.push(g),g}var s=1,m=1,Z=0,b=0,p=0,G="";function h(g,I,e,C,n,t,l){return{value:g,root:I,parent:e,type:C,props:n,children:t,line:s,column:m,length:l,return:""}}function y(g,I){return l(h("",null,null,"",null,null,0),g,{length:-g.length},I)}function B(){return p=b>0?r(G,--b):0,m--,10===p&&(m=1,s--),p}function W(){return p=b<Z?r(G,b++):0,m++,10===p&&(m=1,s++),p}function S(){return r(G,b)}function V(){return b}function v(g,I){return c(G,g,I)}function R(g){switch(g){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function X(g){return s=m=1,Z=A(G=g),b=0,[]}function f(g){return G="",g}function k(g){return o(v(b-1,H(91===g?g+2:40===g?g+1:g)))}function J(g){for(;(p=S())&&p<33;)W();return R(g)>2||R(p)>3?"":" "}function Y(g,I){for(;--I&&W()&&!(p<48||p>102||p>57&&p<65||p>70&&p<97););return v(g,V()+(I<6&&32==S()&&32==W()))}function H(g){for(;W();)switch(p){case g:return b;case 34:case 39:34!==g&&39!==g&&H(p);break;case 40:41===g&&H(g);break;case 92:W()}return b}function w(g,I){for(;W()&&g+p!==57&&(g+p!==84||47!==S()););return"/*"+v(I,b-1)+"*"+t(47===g?g:W())}function K(g){for(;!R(S());)W();return v(g,b)}var F="-ms-",N="-moz-",x="-webkit-",z="comm",M="rule",E="decl",U="@keyframes";function Q(g,I){for(var e="",C=d(g),n=0;n<C;n++)e+=I(g[n],n,g,I)||"";return e}function L(g,I,e,C){switch(g.type){case"@import":case E:return g.return=g.return||g.value;case z:return"";case U:return g.return=g.value+"{"+Q(g.children,C)+"}";case M:g.value=g.props.join(",")}return A(e=Q(g.children,C))?g.return=g.value+"{"+e+"}":""}function T(g,I){switch(function(g,I){return(((I<<2^r(g,0))<<2^r(g,1))<<2^r(g,2))<<2^r(g,3)}(g,I)){case 5103:return x+"print-"+g+g;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return x+g+g;case 5349:case 4246:case 4810:case 6968:case 2756:return x+g+N+g+F+g+g;case 6828:case 4268:return x+g+F+g+g;case 6165:return x+g+F+"flex-"+g+g;case 5187:return x+g+a(g,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+g;case 5443:return x+g+F+"flex-item-"+a(g,/flex-|-self/,"")+g;case 4675:return x+g+F+"flex-line-pack"+a(g,/align-content|flex-|-self/,"")+g;case 5548:return x+g+F+a(g,"shrink","negative")+g;case 5292:return x+g+F+a(g,"basis","preferred-size")+g;case 6060:return x+"box-"+a(g,"-grow","")+x+g+F+a(g,"grow","positive")+g;case 4554:return x+a(g,/([^-])(transform)/g,"$1-webkit-$2")+g;case 6187:return a(a(a(g,/(zoom-|grab)/,x+"$1"),/(image-set)/,x+"$1"),g,"")+g;case 5495:case 3959:return a(g,/(image-set\([^]*)/,x+"$1$`$1");case 4968:return a(a(g,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+x+g+g;case 4095:case 3583:case 4068:case 2532:return a(g,/(.+)-inline(.+)/,x+"$1$2")+g;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(A(g)-1-I>6)switch(r(g,I+1)){case 109:if(45!==r(g,I+4))break;case 102:return a(g,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+N+(108==r(g,I+3)?"$3":"$2-$3"))+g;case 115:return~i(g,"stretch")?T(a(g,"stretch","fill-available"),I)+g:g}break;case 4949:if(115!==r(g,I+1))break;case 6444:switch(r(g,A(g)-3-(~i(g,"!important")&&10))){case 107:return a(g,":",":"+x)+g;case 101:return a(g,/(.+:)([^;!]+)(;|!.+)?/,"$1"+x+(45===r(g,14)?"inline-":"")+"box$3$1"+x+"$2$3$1"+F+"$2box$3")+g}break;case 5936:switch(r(g,I+11)){case 114:return x+g+F+a(g,/[svh]\w+-[tblr]{2}/,"tb")+g;case 108:return x+g+F+a(g,/[svh]\w+-[tblr]{2}/,"tb-rl")+g;case 45:return x+g+F+a(g,/[svh]\w+-[tblr]{2}/,"lr")+g}return x+g+F+g+g}return g}function D(g){return f(j("",null,null,null,[""],g=X(g),0,[0],g))}function j(g,I,e,C,n,l,o,r,c){for(var d=0,s=0,m=o,Z=0,b=0,p=0,G=1,h=1,y=1,v=0,R="",X=n,f=l,H=C,F=R;h;)switch(p=v,v=W()){case 40:if(108!=p&&58==F.charCodeAt(m-1)){-1!=i(F+=a(k(v),"&","&\f"),"&\f")&&(y=-1);break}case 34:case 39:case 91:F+=k(v);break;case 9:case 10:case 13:case 32:F+=J(p);break;case 92:F+=Y(V()-1,7);continue;case 47:switch(S()){case 42:case 47:u(O(w(W(),V()),I,e),c);break;default:F+="/"}break;case 123*G:r[d++]=A(F)*y;case 125*G:case 59:case 0:switch(v){case 0:case 125:h=0;case 59+s:b>0&&A(F)-m&&u(b>32?q(F+";",C,e,m-1):q(a(F," ","")+";",C,e,m-2),c);break;case 59:F+=";";default:if(u(H=P(F,I,e,d,s,n,r,R,X=[],f=[],m),l),123===v)if(0===s)j(F,I,H,H,X,l,m,r,f);else switch(Z){case 100:case 109:case 115:j(g,H,H,C&&u(P(g,H,H,0,0,n,r,R,n,X=[],m),f),n,f,m,r,C?X:f);break;default:j(F,H,H,H,[""],f,0,r,f)}}d=s=b=0,G=y=1,R=F="",m=o;break;case 58:m=1+A(F),b=p;default:if(G<1)if(123==v)--G;else if(125==v&&0==G++&&125==B())continue;switch(F+=t(v),v*G){case 38:y=s>0?1:(F+="\f",-1);break;case 44:r[d++]=(A(F)-1)*y,y=1;break;case 64:45===S()&&(F+=k(W())),Z=S(),s=m=A(R=F+=K(V())),v++;break;case 45:45===p&&2==A(F)&&(G=0)}}return l}function P(g,I,e,C,t,l,i,r,A,u,s){for(var m=t-1,Z=0===t?l:[""],b=d(Z),p=0,G=0,y=0;p<C;++p)for(var B=0,W=c(g,m+1,m=n(G=i[p])),S=g;B<b;++B)(S=o(G>0?Z[B]+" "+W:a(W,/&\f/g,Z[B])))&&(A[y++]=S);return h(g,I,e,0===t?M:r,A,u,s)}function O(g,I,e){return h(g,I,e,z,t(p),c(g,2,-2),0)}function q(g,I,e,C){return h(g,I,e,E,c(g,0,C),c(g,C+1,-1),C)}var _=function(g,I,e){for(var C=0,n=0;C=n,n=S(),38===C&&12===n&&(I[e]=1),!R(n);)W();return v(g,b)},$=function(g,I){return f(function(g,I){var e=-1,C=44;do{switch(R(C)){case 0:38===C&&12===S()&&(I[e]=1),g[e]+=_(b-1,I,e);break;case 2:g[e]+=k(C);break;case 4:if(44===C){g[++e]=58===S()?"&\f":"",I[e]=g[e].length;break}default:g[e]+=t(C)}}while(C=W());return g}(X(g),I))},gg=new WeakMap,Ig=function(g){if("rule"===g.type&&g.parent&&!(g.length<1)){for(var I=g.value,e=g.parent,C=g.column===e.column&&g.line===e.line;"rule"!==e.type;)if(!(e=e.parent))return;if((1!==g.props.length||58===I.charCodeAt(0)||gg.get(e))&&!C){gg.set(g,!0);for(var n=[],t=$(I,n),l=e.props,o=0,a=0;o<t.length;o++)for(var i=0;i<l.length;i++,a++)g.props[a]=n[o]?t[o].replace(/&\f/g,l[i]):l[i]+" "+t[o]}}},eg=function(g){if("decl"===g.type){var I=g.value;108===I.charCodeAt(0)&&98===I.charCodeAt(2)&&(g.return="",g.value="")}},Cg=[function(g,I,e,C){if(g.length>-1&&!g.return)switch(g.type){case E:g.return=T(g.value,g.length);break;case U:return Q([y(g,{value:a(g.value,"@","@"+x)})],C);case M:if(g.length)return function(g,I){return g.map(I).join("")}(g.props,(function(I){switch(function(g,I){return(g=I.exec(g))?g[0]:g}(I,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Q([y(g,{props:[a(I,/:(read-\w+)/,":-moz-$1")]})],C);case"::placeholder":return Q([y(g,{props:[a(I,/:(plac\w+)/,":-webkit-input-$1")]}),y(g,{props:[a(I,/:(plac\w+)/,":-moz-$1")]}),y(g,{props:[a(I,/:(plac\w+)/,F+"input-$1")]})],C)}return""}))}}],ng=function(g){var I=g.key;if("css"===I){var e=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(e,(function(g){-1!==g.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(g),g.setAttribute("data-s",""))}))}var n=g.stylisPlugins||Cg;var t,l,o={},a=[];t=g.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+I+' "]'),(function(g){for(var I=g.getAttribute("data-emotion").split(" "),e=1;e<I.length;e++)o[I[e]]=!0;a.push(g)}));var i,r,c=[L,(r=function(g){i.insert(g)},function(g){g.root||(g=g.return)&&r(g)})],A=function(g){var I=d(g);return function(e,C,n,t){for(var l="",o=0;o<I;o++)l+=g[o](e,C,n,t)||"";return l}}([Ig,eg].concat(n,c));l=function(g,I,e,C){i=e,Q(D(g?g+"{"+I.styles+"}":I.styles),A),C&&(u.inserted[I.name]=!0)};var u={key:I,sheet:new C.m({key:I,container:t,nonce:g.nonce,speedy:g.speedy,prepend:g.prepend,insertionPoint:g.insertionPoint}),nonce:g.nonce,inserted:o,registered:{},insert:l};return u.sheet.hydrate(a),u}},3782:function(g,I){"use strict";I.Z=function(g){var I=Object.create(null);return function(e){return void 0===I[e]&&(I[e]=g(e)),I[e]}}},1688:function(g,I,e){"use strict";var C;e.d(I,{T:function(){return a},w:function(){return o}});var n=e(2791),t=e(8677),l=(e(1346),(0,n.createContext)("undefined"!==typeof HTMLElement?(0,t.Z)({key:"css"}):null));l.Provider;var o=function(g){return(0,n.forwardRef)((function(I,e){var C=(0,n.useContext)(l);return g(I,C,e)}))},a=(0,n.createContext)({});(C||(C=e.t(n,2))).useInsertionEffect&&(C||(C=e.t(n,2))).useInsertionEffect},1346:function(g,I,e){"use strict";e.d(I,{O:function(){return s}});var C=function(g){for(var I,e=0,C=0,n=g.length;n>=4;++C,n-=4)I=1540483477*(65535&(I=255&g.charCodeAt(C)|(255&g.charCodeAt(++C))<<8|(255&g.charCodeAt(++C))<<16|(255&g.charCodeAt(++C))<<24))+(59797*(I>>>16)<<16),e=1540483477*(65535&(I^=I>>>24))+(59797*(I>>>16)<<16)^1540483477*(65535&e)+(59797*(e>>>16)<<16);switch(n){case 3:e^=(255&g.charCodeAt(C+2))<<16;case 2:e^=(255&g.charCodeAt(C+1))<<8;case 1:e=1540483477*(65535&(e^=255&g.charCodeAt(C)))+(59797*(e>>>16)<<16)}return(((e=1540483477*(65535&(e^=e>>>13))+(59797*(e>>>16)<<16))^e>>>15)>>>0).toString(36)},n={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},t=e(3782),l=/[A-Z]|^ms/g,o=/_EMO_([^_]+?)_([^]*?)_EMO_/g,a=function(g){return 45===g.charCodeAt(1)},i=function(g){return null!=g&&"boolean"!==typeof g},r=(0,t.Z)((function(g){return a(g)?g:g.replace(l,"-$&").toLowerCase()})),c=function(g,I){switch(g){case"animation":case"animationName":if("string"===typeof I)return I.replace(o,(function(g,I,e){return d={name:I,styles:e,next:d},I}))}return 1===n[g]||a(g)||"number"!==typeof I||0===I?I:I+"px"};function A(g,I,e){if(null==e)return"";if(void 0!==e.__emotion_styles)return e;switch(typeof e){case"boolean":return"";case"object":if(1===e.anim)return d={name:e.name,styles:e.styles,next:d},e.name;if(void 0!==e.styles){var C=e.next;if(void 0!==C)for(;void 0!==C;)d={name:C.name,styles:C.styles,next:d},C=C.next;return e.styles+";"}return function(g,I,e){var C="";if(Array.isArray(e))for(var n=0;n<e.length;n++)C+=A(g,I,e[n])+";";else for(var t in e){var l=e[t];if("object"!==typeof l)null!=I&&void 0!==I[l]?C+=t+"{"+I[l]+"}":i(l)&&(C+=r(t)+":"+c(t,l)+";");else if(!Array.isArray(l)||"string"!==typeof l[0]||null!=I&&void 0!==I[l[0]]){var o=A(g,I,l);switch(t){case"animation":case"animationName":C+=r(t)+":"+o+";";break;default:C+=t+"{"+o+"}"}}else for(var a=0;a<l.length;a++)i(l[a])&&(C+=r(t)+":"+c(t,l[a])+";")}return C}(g,I,e);case"function":if(void 0!==g){var n=d,t=e(g);return d=n,A(g,I,t)}}if(null==I)return e;var l=I[e];return void 0!==l?l:e}var d,u=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var s=function(g,I,e){if(1===g.length&&"object"===typeof g[0]&&null!==g[0]&&void 0!==g[0].styles)return g[0];var n=!0,t="";d=void 0;var l=g[0];null==l||void 0===l.raw?(n=!1,t+=A(e,I,l)):t+=l[0];for(var o=1;o<g.length;o++)t+=A(e,I,g[o]),n&&(t+=l[o]);u.lastIndex=0;for(var a,i="";null!==(a=u.exec(t));)i+="-"+a[1];return{name:C(t)+i,styles:t,next:d}}},6567:function(g,I,e){"use strict";e.d(I,{m:function(){return C}});var C=function(){function g(g){var I=this;this._insertTag=function(g){var e;e=0===I.tags.length?I.insertionPoint?I.insertionPoint.nextSibling:I.prepend?I.container.firstChild:I.before:I.tags[I.tags.length-1].nextSibling,I.container.insertBefore(g,e),I.tags.push(g)},this.isSpeedy=void 0===g.speedy||g.speedy,this.tags=[],this.ctr=0,this.nonce=g.nonce,this.key=g.key,this.container=g.container,this.prepend=g.prepend,this.insertionPoint=g.insertionPoint,this.before=null}var I=g.prototype;return I.hydrate=function(g){g.forEach(this._insertTag)},I.insert=function(g){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(function(g){var I=document.createElement("style");return I.setAttribute("data-emotion",g.key),void 0!==g.nonce&&I.setAttribute("nonce",g.nonce),I.appendChild(document.createTextNode("")),I.setAttribute("data-s",""),I}(this));var I=this.tags[this.tags.length-1];if(this.isSpeedy){var e=function(g){if(g.sheet)return g.sheet;for(var I=0;I<document.styleSheets.length;I++)if(document.styleSheets[I].ownerNode===g)return document.styleSheets[I]}(I);try{e.insertRule(g,e.cssRules.length)}catch(C){0}}else I.appendChild(document.createTextNode(g));this.ctr++},I.flush=function(){this.tags.forEach((function(g){return g.parentNode&&g.parentNode.removeChild(g)})),this.tags=[],this.ctr=0},g}()},5438:function(g,I,e){"use strict";e.d(I,{fp:function(){return C},My:function(){return t},hC:function(){return n}});function C(g,I,e){var C="";return e.split(" ").forEach((function(e){void 0!==g[e]?I.push(g[e]+";"):C+=e+" "})),C}var n=function(g,I,e){var C=g.key+"-"+I.name;!1===e&&void 0===g.registered[C]&&(g.registered[C]=I.styles)},t=function(g,I,e){n(g,I,e);var C=g.key+"-"+I.name;if(void 0===g.inserted[I.name]){var t=I;do{g.insert(I===t?"."+C:"",t,g.sheet,!0);t=t.next}while(void 0!==t)}}},767:function(g,I,e){"use strict";function C(g,I,e){var C={};return Object.keys(g).forEach((function(n){C[n]=g[n].reduce((function(g,C){return C&&(e&&e[C]&&g.push(e[C]),g.push(I(C))),g}),[]).join(" ")})),C}e.d(I,{Z:function(){return C}})},7125:function(g,I){"use strict";var e=function(g){return g},C=function(){var g=e;return{configure:function(I){g=I},generate:function(I){return g(I)},reset:function(){g=e}}}();I.Z=C},5159:function(g,I,e){"use strict";e.d(I,{Z:function(){return t}});var C=e(7125),n={active:"Mui-active",checked:"Mui-checked",completed:"Mui-completed",disabled:"Mui-disabled",error:"Mui-error",expanded:"Mui-expanded",focused:"Mui-focused",focusVisible:"Mui-focusVisible",required:"Mui-required",selected:"Mui-selected"};function t(g,I){return n[I]||"".concat(C.Z.generate(g),"-").concat(I)}},208:function(g,I,e){"use strict";e.d(I,{Z:function(){return n}});var C=e(5159);function n(g,I){var e={};return I.forEach((function(I){e[I]=(0,C.Z)(g,I)})),e}},2419:function(g,I,e){"use strict";var C=e(5318);I.Z=void 0;var n=C(e(5649)),t=e(184),l=(0,n.default)((0,t.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"}),"Add");I.Z=l},9265:function(g,I,e){"use strict";var C=e(5318);I.Z=void 0;var n=C(e(5649)),t=e(184),l=(0,n.default)((0,t.jsx)("path",{d:"M11 9h2V6h3V4h-3V1h-2v3H8v2h3v3zm-4 9c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zm10 0c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2zm-9.83-3.25.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.86-7.01L19.42 4h-.01l-1.1 2-2.76 5H8.53l-.13-.27L6.16 6l-.95-2-.94-2H1v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.13 0-.25-.11-.25-.25z"}),"AddShoppingCart");I.Z=l},872:function(g,I,e){"use strict";var C=e(5318);I.Z=void 0;var n=C(e(5649)),t=e(184),l=(0,n.default)((0,t.jsx)("path",{d:"M9 16.17 4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"}),"Check");I.Z=l},1009:function(g,I,e){"use strict";var C=e(5318);I.Z=void 0;var n=C(e(5649)),t=e(184),l=(0,n.default)((0,t.jsx)("path",{d:"M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"ChevronLeft");I.Z=l},5875:function(g,I,e){"use strict";var C=e(5318);I.Z=void 0;var n=C(e(5649)),t=e(184),l=(0,n.default)((0,t.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2z"}),"CircleRounded");I.Z=l},9823:function(g,I,e){"use strict";var C=e(5318);I.Z=void 0;var n=C(e(5649)),t=e(184),l=(0,n.default)((0,t.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");I.Z=l},2338:function(g,I,e){"use strict";var C=e(5318);I.Z=void 0;var n=C(e(5649)),t=e(184),l=(0,n.default)((0,t.jsx)("path",{d:"M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"}),"Dashboard");I.Z=l},7247:function(g,I,e){"use strict";var C=e(5318);I.Z=void 0;var n=C(e(5649)),t=e(184),l=(0,n.default)((0,t.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");I.Z=l},3607:function(g,I,e){"use strict";var C=e(5318);I.Z=void 0;var n=C(e(5649)),t=e(184),l=(0,n.default)((0,t.jsx)("path",{d:"m17 16-4-4V8.82C14.16 8.4 15 7.3 15 6c0-1.66-1.34-3-3-3S9 4.34 9 6c0 1.3.84 2.4 2 2.82V12l-4 4H3v5h5v-3.05l4-4.2 4 4.2V21h5v-5h-4z"}),"DeviceHub");I.Z=l},1286:function(g,I,e){"use strict";var C=e(5318);I.Z=void 0;var n=C(e(5649)),t=e(184),l=(0,n.default)((0,t.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75 1.83-1.83z"}),"Edit");I.Z=l},8994:function(g,I,e){"use strict";var C=e(5318);I.Z=void 0;var n=C(e(5649)),t=e(184),l=(0,n.default)((0,t.jsx)("path",{d:"M21 3H3c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h18c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-9 8H3V9h9v2zm0-4H3V5h9v2z"}),"FeaturedPlayList");I.Z=l},2793:function(g,I,e){"use strict";var C=e(5318);I.Z=void 0;var n=C(e(5649)),t=e(184),l=(0,n.default)((0,t.jsx)("path",{d:"M15 9H9v6h6V9zm-2 4h-2v-2h2v2zm8-2V9h-2V7c0-1.1-.9-2-2-2h-2V3h-2v2h-2V3H9v2H7c-1.1 0-2 .9-2 2v2H3v2h2v2H3v2h2v2c0 1.1.9 2 2 2h2v2h2v-2h2v2h2v-2h2c1.1 0 2-.9 2-2v-2h2v-2h-2v-2h2zm-4 6H7V7h10v10z"}),"Memory");I.Z=l},8008:function(g,I,e){"use strict";var C=e(5318);I.Z=void 0;var n=C(e(5649)),t=e(184),l=(0,n.default)((0,t.jsx)("path",{d:"M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"}),"Menu");I.Z=l},7781:function(g,I,e){"use strict";var C=e(5318);I.Z=void 0;var n=C(e(5649)),t=e(184),l=(0,n.default)((0,t.jsx)("path",{d:"M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"}),"MoreVertRounded");I.Z=l},7449:function(g,I,e){"use strict";var C=e(5318);I.Z=void 0;var n=C(e(5649)),t=e(184),l=(0,n.default)((0,t.jsx)("path",{d:"M16.54 11 13 7.46l1.41-1.41 2.12 2.12 4.24-4.24 1.41 1.41L16.54 11zM11 7H2v2h9V7zm10 6.41L19.59 12 17 14.59 14.41 12 13 13.41 15.59 16 13 18.59 14.41 20 17 17.41 19.59 20 21 18.59 18.41 16 21 13.41zM11 15H2v2h9v-2z"}),"Rule");I.Z=l},1960:function(g,I,e){"use strict";var C=e(5318);I.Z=void 0;var n=C(e(5649)),t=e(184),l=(0,n.default)((0,t.jsx)("path",{d:"M7.76 16.24C6.67 15.16 6 13.66 6 12s.67-3.16 1.76-4.24l1.42 1.42C8.45 9.9 8 10.9 8 12c0 1.1.45 2.1 1.17 2.83l-1.41 1.41zm8.48 0C17.33 15.16 18 13.66 18 12s-.67-3.16-1.76-4.24l-1.42 1.42C15.55 9.9 16 10.9 16 12c0 1.1-.45 2.1-1.17 2.83l1.41 1.41zM12 10c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm8 2c0 2.21-.9 4.21-2.35 5.65l1.42 1.42C20.88 17.26 22 14.76 22 12s-1.12-5.26-2.93-7.07l-1.42 1.42C19.1 7.79 20 9.79 20 12zM6.35 6.35 4.93 4.93C3.12 6.74 2 9.24 2 12s1.12 5.26 2.93 7.07l1.42-1.42C4.9 16.21 4 14.21 4 12s.9-4.21 2.35-5.65z"}),"Sensors");I.Z=l},8114:function(g,I,e){"use strict";var C=e(5318);I.Z=void 0;var n=C(e(5649)),t=e(184),l=(0,n.default)((0,t.jsx)("path",{d:"M11.99 2c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10zm3.61 6.34c1.07 0 1.93.86 1.93 1.93 0 1.07-.86 1.93-1.93 1.93-1.07 0-1.93-.86-1.93-1.93-.01-1.07.86-1.93 1.93-1.93zm-6-1.58c1.3 0 2.36 1.06 2.36 2.36 0 1.3-1.06 2.36-2.36 2.36s-2.36-1.06-2.36-2.36c0-1.31 1.05-2.36 2.36-2.36zm0 9.13v3.75c-2.4-.75-4.3-2.6-5.14-4.96 1.05-1.12 3.67-1.69 5.14-1.69.53 0 1.2.08 1.9.22-1.64.87-1.9 2.02-1.9 2.68zM11.99 20c-.27 0-.53-.01-.79-.04v-4.07c0-1.42 2.94-2.13 4.4-2.13 1.07 0 2.92.39 3.84 1.15-1.17 2.97-4.06 5.09-7.45 5.09z"}),"SupervisedUserCircle");I.Z=l},5649:function(g,I,e){"use strict";Object.defineProperty(I,"__esModule",{value:!0}),Object.defineProperty(I,"default",{enumerable:!0,get:function(){return C.createSvgIcon}});var C=e(4454)},6532:function(g,I){"use strict";var e=60103,C=60106,n=60107,t=60108,l=60114,o=60109,a=60110,i=60112,r=60113,c=60120,A=60115,d=60116,u=60121,s=60122,m=60117,Z=60129,b=60131;if("function"===typeof Symbol&&Symbol.for){var p=Symbol.for;e=p("react.element"),C=p("react.portal"),n=p("react.fragment"),t=p("react.strict_mode"),l=p("react.profiler"),o=p("react.provider"),a=p("react.context"),i=p("react.forward_ref"),r=p("react.suspense"),c=p("react.suspense_list"),A=p("react.memo"),d=p("react.lazy"),u=p("react.block"),s=p("react.server.block"),m=p("react.fundamental"),Z=p("react.debug_trace_mode"),b=p("react.legacy_hidden")}function G(g){if("object"===typeof g&&null!==g){var I=g.$$typeof;switch(I){case e:switch(g=g.type){case n:case l:case t:case r:case c:return g;default:switch(g=g&&g.$$typeof){case a:case i:case d:case A:case o:return g;default:return I}}case C:return I}}}},8457:function(g,I,e){"use strict";e(6532)},7107:function(g,I,e){"use strict";e.d(I,{Z:function(){return x}});var C=e(7462),n=e(3366),t=e(2466),l=e(5080),o=e(4942);function a(g,I,e){var n;return(0,C.Z)({toolbar:(n={minHeight:56},(0,o.Z)(n,"".concat(g.up("xs")," and (orientation: landscape)"),{minHeight:48}),(0,o.Z)(n,g.up("sm"),{minHeight:64}),n)},e)}var i=e(6189),r=e(2065),c={black:"#000",white:"#fff"},A={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},d={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},u={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},s={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},m={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},Z={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},b={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},p=["mode","contrastThreshold","tonalOffset"],G={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:c.white,default:c.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},h={text:{primary:c.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:c.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function y(g,I,e,C){var n=C.light||C,t=C.dark||1.5*C;g[I]||(g.hasOwnProperty(e)?g[I]=g[e]:"light"===I?g.light=(0,r.$n)(g.main,n):"dark"===I&&(g.dark=(0,r._j)(g.main,t)))}function B(g){var I=g.mode,e=void 0===I?"light":I,l=g.contrastThreshold,o=void 0===l?3:l,a=g.tonalOffset,B=void 0===a?.2:a,W=(0,n.Z)(g,p),S=g.primary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:m[200],light:m[50],dark:m[400]}:{main:m[700],light:m[400],dark:m[800]}}(e),V=g.secondary||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:d[200],light:d[50],dark:d[400]}:{main:d[500],light:d[300],dark:d[700]}}(e),v=g.error||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:u[500],light:u[300],dark:u[700]}:{main:u[700],light:u[400],dark:u[800]}}(e),R=g.info||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:Z[400],light:Z[300],dark:Z[700]}:{main:Z[700],light:Z[500],dark:Z[900]}}(e),X=g.success||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:b[400],light:b[300],dark:b[700]}:{main:b[800],light:b[500],dark:b[900]}}(e),f=g.warning||function(){return"dark"===(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"light")?{main:s[400],light:s[300],dark:s[700]}:{main:"#ed6c02",light:s[500],dark:s[900]}}(e);function k(g){return(0,r.mi)(g,h.text.primary)>=o?h.text.primary:G.text.primary}var J=function(g){var I=g.color,e=g.name,n=g.mainShade,t=void 0===n?500:n,l=g.lightShade,o=void 0===l?300:l,a=g.darkShade,r=void 0===a?700:a;if(!(I=(0,C.Z)({},I)).main&&I[t]&&(I.main=I[t]),!I.hasOwnProperty("main"))throw new Error((0,i.Z)(11,e?" (".concat(e,")"):"",t));if("string"!==typeof I.main)throw new Error((0,i.Z)(12,e?" (".concat(e,")"):"",JSON.stringify(I.main)));return y(I,"light",o,B),y(I,"dark",r,B),I.contrastText||(I.contrastText=k(I.main)),I},Y={dark:h,light:G};return(0,t.Z)((0,C.Z)({common:c,mode:e,primary:J({color:S,name:"primary"}),secondary:J({color:V,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:J({color:v,name:"error"}),warning:J({color:f,name:"warning"}),info:J({color:R,name:"info"}),success:J({color:X,name:"success"}),grey:A,contrastThreshold:o,getContrastText:k,augmentColor:J,tonalOffset:B},Y[e]),W)}var W=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];var S={textTransform:"uppercase"},V='"Roboto", "Helvetica", "Arial", sans-serif';function v(g,I){var e="function"===typeof I?I(g):I,l=e.fontFamily,o=void 0===l?V:l,a=e.fontSize,i=void 0===a?14:a,r=e.fontWeightLight,c=void 0===r?300:r,A=e.fontWeightRegular,d=void 0===A?400:A,u=e.fontWeightMedium,s=void 0===u?500:u,m=e.fontWeightBold,Z=void 0===m?700:m,b=e.htmlFontSize,p=void 0===b?16:b,G=e.allVariants,h=e.pxToRem,y=(0,n.Z)(e,W);var B=i/14,v=h||function(g){return"".concat(g/p*B,"rem")},R=function(g,I,e,n,t){return(0,C.Z)({fontFamily:o,fontWeight:g,fontSize:v(I),lineHeight:e},o===V?{letterSpacing:"".concat((l=n/I,Math.round(1e5*l)/1e5),"em")}:{},t,G);var l},X={h1:R(c,96,1.167,-1.5),h2:R(c,60,1.2,-.5),h3:R(d,48,1.167,0),h4:R(d,34,1.235,.25),h5:R(d,24,1.334,0),h6:R(s,20,1.6,.15),subtitle1:R(d,16,1.75,.15),subtitle2:R(s,14,1.57,.1),body1:R(d,16,1.5,.15),body2:R(d,14,1.43,.15),button:R(s,14,1.75,.4,S),caption:R(d,12,1.66,.4),overline:R(d,12,2.66,1,S)};return(0,t.Z)((0,C.Z)({htmlFontSize:p,pxToRem:v,fontFamily:o,fontSize:i,fontWeightLight:c,fontWeightRegular:d,fontWeightMedium:s,fontWeightBold:Z},X),y,{clone:!1})}function R(){return["".concat(arguments.length<=0?void 0:arguments[0],"px ").concat(arguments.length<=1?void 0:arguments[1],"px ").concat(arguments.length<=2?void 0:arguments[2],"px ").concat(arguments.length<=3?void 0:arguments[3],"px rgba(0,0,0,").concat(.2,")"),"".concat(arguments.length<=4?void 0:arguments[4],"px ").concat(arguments.length<=5?void 0:arguments[5],"px ").concat(arguments.length<=6?void 0:arguments[6],"px ").concat(arguments.length<=7?void 0:arguments[7],"px rgba(0,0,0,").concat(.14,")"),"".concat(arguments.length<=8?void 0:arguments[8],"px ").concat(arguments.length<=9?void 0:arguments[9],"px ").concat(arguments.length<=10?void 0:arguments[10],"px ").concat(arguments.length<=11?void 0:arguments[11],"px rgba(0,0,0,").concat(.12,")")].join(",")}var X=["none",R(0,2,1,-1,0,1,1,0,0,1,3,0),R(0,3,1,-2,0,2,2,0,0,1,5,0),R(0,3,3,-2,0,3,4,0,0,1,8,0),R(0,2,4,-1,0,4,5,0,0,1,10,0),R(0,3,5,-1,0,5,8,0,0,1,14,0),R(0,3,5,-1,0,6,10,0,0,1,18,0),R(0,4,5,-2,0,7,10,1,0,2,16,1),R(0,5,5,-3,0,8,10,1,0,3,14,2),R(0,5,6,-3,0,9,12,1,0,3,16,2),R(0,6,6,-3,0,10,14,1,0,4,18,3),R(0,6,7,-4,0,11,15,1,0,4,20,3),R(0,7,8,-4,0,12,17,2,0,5,22,4),R(0,7,8,-4,0,13,19,2,0,5,24,4),R(0,7,9,-4,0,14,21,2,0,5,26,4),R(0,8,9,-5,0,15,22,2,0,6,28,5),R(0,8,10,-5,0,16,24,2,0,6,30,5),R(0,8,11,-5,0,17,26,2,0,6,32,5),R(0,9,11,-5,0,18,28,2,0,7,34,6),R(0,9,12,-6,0,19,29,2,0,7,36,6),R(0,10,13,-6,0,20,31,3,0,8,38,7),R(0,10,13,-6,0,21,33,3,0,8,40,7),R(0,10,14,-6,0,22,35,3,0,8,42,7),R(0,11,14,-7,0,23,36,3,0,9,44,8),R(0,11,15,-7,0,24,38,3,0,9,46,8)],f=["duration","easing","delay"],k={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},J={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Y(g){return"".concat(Math.round(g),"ms")}function H(g){if(!g)return 0;var I=g/36;return Math.round(10*(4+15*Math.pow(I,.25)+I/5))}function w(g){var I=(0,C.Z)({},k,g.easing),e=(0,C.Z)({},J,g.duration);return(0,C.Z)({getAutoHeightDuration:H,create:function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["all"],C=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=C.duration,l=void 0===t?e.standard:t,o=C.easing,a=void 0===o?I.easeInOut:o,i=C.delay,r=void 0===i?0:i;(0,n.Z)(C,f);return(Array.isArray(g)?g:[g]).map((function(g){return"".concat(g," ").concat("string"===typeof l?l:Y(l)," ").concat(a," ").concat("string"===typeof r?r:Y(r))})).join(",")}},g,{easing:I,duration:e})}var K={mobileStepper:1e3,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},F=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function N(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},I=g.mixins,e=void 0===I?{}:I,o=g.palette,i=void 0===o?{}:o,r=g.transitions,c=void 0===r?{}:r,A=g.typography,d=void 0===A?{}:A,u=(0,n.Z)(g,F),s=B(i),m=(0,l.Z)(g),Z=(0,t.Z)(m,{mixins:a(m.breakpoints,m.spacing,e),palette:s,shadows:X.slice(),typography:v(s,d),transitions:w(c),zIndex:(0,C.Z)({},K)});Z=(0,t.Z)(Z,u);for(var b=arguments.length,p=new Array(b>1?b-1:0),G=1;G<b;G++)p[G-1]=arguments[G];return Z=p.reduce((function(g,I){return(0,t.Z)(g,I)}),Z)}var x=N},6482:function(g,I,e){"use strict";var C=(0,e(7107).Z)();I.Z=C},6934:function(g,I,e){"use strict";e.d(I,{FO:function(){return t},Dz:function(){return l}});var C=e(4046),n=e(6482),t=function(g){return(0,C.x9)(g)&&"classes"!==g},l=C.x9,o=(0,C.ZP)({defaultTheme:n.Z,rootShouldForwardProp:t});I.ZP=o},1402:function(g,I,e){"use strict";e.d(I,{Z:function(){return t}});var C=e(7078),n=e(6482);function t(g){var I=g.props,e=g.name;return(0,C.Z)({props:I,name:e,defaultTheme:n.Z})}},4036:function(g,I,e){"use strict";var C=e(7312);I.Z=C.Z},9201:function(g,I,e){"use strict";e.d(I,{Z:function(){return b}});var C=e(7462),n=e(2791),t=e(3366),l=e(8182),o=e(767),a=e(4036),i=e(1402),r=e(6934),c=e(5159);function A(g){return(0,c.Z)("MuiSvgIcon",g)}(0,e(208).Z)("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);var d=e(184),u=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],s=(0,r.ZP)("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,"inherit"!==e.color&&I["color".concat((0,a.Z)(e.color))],I["fontSize".concat((0,a.Z)(e.fontSize))]]}})((function(g){var I,e,C,n,t,l,o,a,i,r,c,A,d,u,s,m,Z,b=g.theme,p=g.ownerState;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:null==(I=b.transitions)||null==(e=I.create)?void 0:e.call(I,"fill",{duration:null==(C=b.transitions)||null==(n=C.duration)?void 0:n.shorter}),fontSize:{inherit:"inherit",small:(null==(t=b.typography)||null==(l=t.pxToRem)?void 0:l.call(t,20))||"1.25rem",medium:(null==(o=b.typography)||null==(a=o.pxToRem)?void 0:a.call(o,24))||"1.5rem",large:(null==(i=b.typography)||null==(r=i.pxToRem)?void 0:r.call(i,35))||"2.1875"}[p.fontSize],color:null!=(c=null==(A=b.palette)||null==(d=A[p.color])?void 0:d.main)?c:{action:null==(u=b.palette)||null==(s=u.action)?void 0:s.active,disabled:null==(m=b.palette)||null==(Z=m.action)?void 0:Z.disabled,inherit:void 0}[p.color]}})),m=n.forwardRef((function(g,I){var e=(0,i.Z)({props:g,name:"MuiSvgIcon"}),n=e.children,r=e.className,c=e.color,m=void 0===c?"inherit":c,Z=e.component,b=void 0===Z?"svg":Z,p=e.fontSize,G=void 0===p?"medium":p,h=e.htmlColor,y=e.inheritViewBox,B=void 0!==y&&y,W=e.titleAccess,S=e.viewBox,V=void 0===S?"0 0 24 24":S,v=(0,t.Z)(e,u),R=(0,C.Z)({},e,{color:m,component:b,fontSize:G,inheritViewBox:B,viewBox:V}),X={};B||(X.viewBox=V);var f=function(g){var I=g.color,e=g.fontSize,C=g.classes,n={root:["root","inherit"!==I&&"color".concat((0,a.Z)(I)),"fontSize".concat((0,a.Z)(e))]};return(0,o.Z)(n,A,C)}(R);return(0,d.jsxs)(s,(0,C.Z)({as:b,className:(0,l.Z)(f.root,r),ownerState:R,focusable:"false",color:h,"aria-hidden":!W||void 0,role:W?"img":void 0,ref:I},X,v,{children:[n,W?(0,d.jsx)("title",{children:W}):null]}))}));m.muiName="SvgIcon";var Z=m;function b(g,I){var e=function(e,n){return(0,d.jsx)(Z,(0,C.Z)({"data-testid":"".concat(I,"Icon"),ref:n},e,{children:g}))};return e.muiName=Z.muiName,n.memo(n.forwardRef(e))}},3199:function(g,I,e){"use strict";var C=e(3981);I.Z=C.Z},4454:function(g,I,e){"use strict";e.r(I),e.d(I,{capitalize:function(){return C.Z},createChainedFunction:function(){return n},createSvgIcon:function(){return t.Z},debounce:function(){return l.Z},deprecatedPropType:function(){return o},isMuiElement:function(){return a.Z},ownerDocument:function(){return i.Z},ownerWindow:function(){return r.Z},requirePropFactory:function(){return c},setRef:function(){return A},unstable_ClassNameGenerator:function(){return G.Z},unstable_useEnhancedEffect:function(){return d.Z},unstable_useId:function(){return u},unsupportedProp:function(){return s},useControlled:function(){return m.Z},useEventCallback:function(){return Z.Z},useForkRef:function(){return b.Z},useIsFocusVisible:function(){return p.Z}});var C=e(4036),n=e(8949).Z,t=e(9201),l=e(3199);var o=function(g,I){return function(){return null}},a=e(9103),i=e(8301),r=e(7602);e(7462);var c=function(g,I){return function(){return null}},A=e(2971).Z,d=e(162),u=e(6248).Z;var s=function(g,I,e,C,n){return null},m=e(8278),Z=e(9683),b=e(2071),p=e(8221),G=e(7125)},9103:function(g,I,e){"use strict";e.d(I,{Z:function(){return n}});var C=e(2791);var n=function(g,I){return C.isValidElement(g)&&-1!==I.indexOf(g.type.muiName)}},8301:function(g,I,e){"use strict";var C=e(9723);I.Z=C.Z},7602:function(g,I,e){"use strict";var C=e(7979);I.Z=C.Z},8278:function(g,I,e){"use strict";var C=e(8959);I.Z=C.Z},162:function(g,I,e){"use strict";var C=e(5721);I.Z=C.Z},9683:function(g,I,e){"use strict";var C=e(8956);I.Z=C.Z},2071:function(g,I,e){"use strict";var C=e(7563);I.Z=C.Z},8221:function(g,I,e){"use strict";var C=e(5372);I.Z=C.Z},594:function(g,I,e){"use strict";e.d(I,{ZP:function(){return h}});var C=e(2791),n=e.t(C,2),t=e(7462),l=e(3782),o=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,a=(0,l.Z)((function(g){return o.test(g)||111===g.charCodeAt(0)&&110===g.charCodeAt(1)&&g.charCodeAt(2)<91})),i=e(1688),r=e(5438),c=e(1346),A=a,d=function(g){return"theme"!==g},u=function(g){return"string"===typeof g&&g.charCodeAt(0)>96?A:d},s=function(g,I,e){var C;if(I){var n=I.shouldForwardProp;C=g.__emotion_forwardProp&&n?function(I){return g.__emotion_forwardProp(I)&&n(I)}:n}return"function"!==typeof C&&e&&(C=g.__emotion_forwardProp),C},m=n.useInsertionEffect?n.useInsertionEffect:function(g){g()};var Z=function(g){var I=g.cache,e=g.serialized,C=g.isStringTag;(0,r.hC)(I,e,C);m((function(){return(0,r.My)(I,e,C)}));return null},b=function g(I,e){var n,l,o=I.__emotion_real===I,a=o&&I.__emotion_base||I;void 0!==e&&(n=e.label,l=e.target);var A=s(I,e,o),d=A||u(a),m=!d("as");return function(){var b=arguments,p=o&&void 0!==I.__emotion_styles?I.__emotion_styles.slice(0):[];if(void 0!==n&&p.push("label:"+n+";"),null==b[0]||void 0===b[0].raw)p.push.apply(p,b);else{0,p.push(b[0][0]);for(var G=b.length,h=1;h<G;h++)p.push(b[h],b[0][h])}var y=(0,i.w)((function(g,I,e){var n=m&&g.as||a,t="",o=[],s=g;if(null==g.theme){for(var b in s={},g)s[b]=g[b];s.theme=(0,C.useContext)(i.T)}"string"===typeof g.className?t=(0,r.fp)(I.registered,o,g.className):null!=g.className&&(t=g.className+" ");var G=(0,c.O)(p.concat(o),I.registered,s);t+=I.key+"-"+G.name,void 0!==l&&(t+=" "+l);var h=m&&void 0===A?u(n):d,y={};for(var B in g)m&&"as"===B||h(B)&&(y[B]=g[B]);return y.className=t,y.ref=e,(0,C.createElement)(C.Fragment,null,(0,C.createElement)(Z,{cache:I,serialized:G,isStringTag:"string"===typeof n}),(0,C.createElement)(n,y))}));return y.displayName=void 0!==n?n:"Styled("+("string"===typeof a?a:a.displayName||a.name||"Component")+")",y.defaultProps=I.defaultProps,y.__emotion_real=y,y.__emotion_base=a,y.__emotion_styles=p,y.__emotion_forwardProp=A,Object.defineProperty(y,"toString",{value:function(){return"."+l}}),y.withComponent=function(I,C){return g(I,(0,t.Z)({},e,C,{shouldForwardProp:s(y,C,!0)})).apply(void 0,p)},y}},p=b.bind();["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"].forEach((function(g){p[g]=p(g)}));var G=p;function h(g,I){return G(g,I)}},1184:function(g,I,e){"use strict";e.d(I,{VO:function(){return C},k9:function(){return t},W8:function(){return l},L7:function(){return o},P$:function(){return a}});var C={xs:0,sm:600,md:900,lg:1200,xl:1536},n={keys:["xs","sm","md","lg","xl"],up:function(g){return"@media (min-width:".concat(C[g],"px)")}};function t(g,I,e){var t=g.theme||{};if(Array.isArray(I)){var l=t.breakpoints||n;return I.reduce((function(g,C,n){return g[l.up(l.keys[n])]=e(I[n]),g}),{})}if("object"===typeof I){var o=t.breakpoints||n;return Object.keys(I).reduce((function(g,n){if(-1!==Object.keys(o.values||C).indexOf(n)){g[o.up(n)]=e(I[n],n)}else{var t=n;g[t]=I[t]}return g}),{})}return e(I)}function l(){var g,I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=null==I||null==(g=I.keys)?void 0:g.reduce((function(g,e){return g[I.up(e)]={},g}),{});return e||{}}function o(g,I){return g.reduce((function(g,I){var e=g[I];return(!e||0===Object.keys(e).length)&&delete g[I],g}),I)}function a(g){var I,e=g.values,C=g.breakpoints,n=g.base||function(g,I){if("object"!==typeof g)return{};var e={},C=Object.keys(I);return Array.isArray(g)?C.forEach((function(I,C){C<g.length&&(e[I]=!0)})):C.forEach((function(I){null!=g[I]&&(e[I]=!0)})),e}(e,C),t=Object.keys(n);return 0===t.length?e:t.reduce((function(g,C,n){return Array.isArray(e)?(g[C]=null!=e[n]?e[n]:e[I],I=n):(g[C]=null!=e[C]?e[C]:e[I]||e,I=C),g}),{})}},2065:function(g,I,e){"use strict";e.d(I,{mi:function(){return a},Fq:function(){return i},_j:function(){return r},$n:function(){return c}});var C=e(6189);function n(g){var I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return Math.min(Math.max(I,g),e)}function t(g){if(g.type)return g;if("#"===g.charAt(0))return t(function(g){g=g.substr(1);var I=new RegExp(".{1,".concat(g.length>=6?2:1,"}"),"g"),e=g.match(I);return e&&1===e[0].length&&(e=e.map((function(g){return g+g}))),e?"rgb".concat(4===e.length?"a":"","(").concat(e.map((function(g,I){return I<3?parseInt(g,16):Math.round(parseInt(g,16)/255*1e3)/1e3})).join(", "),")"):""}(g));var I=g.indexOf("("),e=g.substring(0,I);if(-1===["rgb","rgba","hsl","hsla","color"].indexOf(e))throw new Error((0,C.Z)(9,g));var n,l=g.substring(I+1,g.length-1);if("color"===e){if(n=(l=l.split(" ")).shift(),4===l.length&&"/"===l[3].charAt(0)&&(l[3]=l[3].substr(1)),-1===["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(n))throw new Error((0,C.Z)(10,n))}else l=l.split(",");return{type:e,values:l=l.map((function(g){return parseFloat(g)})),colorSpace:n}}function l(g){var I=g.type,e=g.colorSpace,C=g.values;return-1!==I.indexOf("rgb")?C=C.map((function(g,I){return I<3?parseInt(g,10):g})):-1!==I.indexOf("hsl")&&(C[1]="".concat(C[1],"%"),C[2]="".concat(C[2],"%")),C=-1!==I.indexOf("color")?"".concat(e," ").concat(C.join(" ")):"".concat(C.join(", ")),"".concat(I,"(").concat(C,")")}function o(g){var I="hsl"===(g=t(g)).type?t(function(g){var I=(g=t(g)).values,e=I[0],C=I[1]/100,n=I[2]/100,o=C*Math.min(n,1-n),a=function(g){var I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(g+e/30)%12;return n-o*Math.max(Math.min(I-3,9-I,1),-1)},i="rgb",r=[Math.round(255*a(0)),Math.round(255*a(8)),Math.round(255*a(4))];return"hsla"===g.type&&(i+="a",r.push(I[3])),l({type:i,values:r})}(g)).values:g.values;return I=I.map((function(I){return"color"!==g.type&&(I/=255),I<=.03928?I/12.92:Math.pow((I+.055)/1.055,2.4)})),Number((.2126*I[0]+.7152*I[1]+.0722*I[2]).toFixed(3))}function a(g,I){var e=o(g),C=o(I);return(Math.max(e,C)+.05)/(Math.min(e,C)+.05)}function i(g,I){return g=t(g),I=n(I),"rgb"!==g.type&&"hsl"!==g.type||(g.type+="a"),"color"===g.type?g.values[3]="/".concat(I):g.values[3]=I,l(g)}function r(g,I){if(g=t(g),I=n(I),-1!==g.type.indexOf("hsl"))g.values[2]*=1-I;else if(-1!==g.type.indexOf("rgb")||-1!==g.type.indexOf("color"))for(var e=0;e<3;e+=1)g.values[e]*=1-I;return l(g)}function c(g,I){if(g=t(g),I=n(I),-1!==g.type.indexOf("hsl"))g.values[2]+=(100-g.values[2])*I;else if(-1!==g.type.indexOf("rgb"))for(var e=0;e<3;e+=1)g.values[e]+=(255-g.values[e])*I;else if(-1!==g.type.indexOf("color"))for(var C=0;C<3;C+=1)g.values[C]+=(1-g.values[C])*I;return l(g)}},4046:function(g,I,e){"use strict";e.d(I,{ZP:function(){return B},x9:function(){return h}});var C=e(2982),n=e(885),t=e(7462),l=e(3366),o=e(594),a=e(5080),i=e(7312),r=["variant"];function c(g){return 0===g.length}function A(g){var I=g.variant,e=(0,l.Z)(g,r),C=I||"";return Object.keys(e).sort().forEach((function(I){C+="color"===I?c(C)?g[I]:(0,i.Z)(g[I]):"".concat(c(C)?I:(0,i.Z)(I)).concat((0,i.Z)(g[I].toString()))})),C}var d=e(104),u=["name","slot","skipVariantsResolver","skipSx","overridesResolver"],s=["theme"],m=["theme"];function Z(g){return 0===Object.keys(g).length}var b=function(g,I){return I.components&&I.components[g]&&I.components[g].styleOverrides?I.components[g].styleOverrides:null},p=function(g,I){var e=[];I&&I.components&&I.components[g]&&I.components[g].variants&&(e=I.components[g].variants);var C={};return e.forEach((function(g){var I=A(g.props);C[I]=g.style})),C},G=function(g,I,e,C){var n,t,l=g.ownerState,o=void 0===l?{}:l,a=[],i=null==e||null==(n=e.components)||null==(t=n[C])?void 0:t.variants;return i&&i.forEach((function(e){var C=!0;Object.keys(e.props).forEach((function(I){o[I]!==e.props[I]&&g[I]!==e.props[I]&&(C=!1)})),C&&a.push(I[A(e.props)])})),a};function h(g){return"ownerState"!==g&&"theme"!==g&&"sx"!==g&&"as"!==g}var y=(0,a.Z)();function B(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},I=g.defaultTheme,e=void 0===I?y:I,a=g.rootShouldForwardProp,i=void 0===a?h:a,r=g.slotShouldForwardProp,c=void 0===r?h:r,A=g.styleFunctionSx,B=void 0===A?d.Z:A;return function(g){var I,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a.name,A=a.slot,d=a.skipVariantsResolver,y=a.skipSx,W=a.overridesResolver,S=(0,l.Z)(a,u),V=void 0!==d?d:A&&"Root"!==A||!1,v=y||!1;var R=h;"Root"===A?R=i:A&&(R=c);var X=(0,o.ZP)(g,(0,t.Z)({shouldForwardProp:R,label:I},S)),f=function(g){for(var I=arguments.length,o=new Array(I>1?I-1:0),a=1;a<I;a++)o[a-1]=arguments[a];var i=o?o.map((function(g){return"function"===typeof g&&g.__emotion_real!==g?function(I){var C=I.theme,n=(0,l.Z)(I,s);return g((0,t.Z)({theme:Z(C)?e:C},n))}:g})):[],c=g;r&&W&&i.push((function(g){var I=Z(g.theme)?e:g.theme,C=b(r,I);if(C){var t={};return Object.entries(C).forEach((function(I){var e=(0,n.Z)(I,2),C=e[0],l=e[1];t[C]="function"===typeof l?l(g):l})),W(g,t)}return null})),r&&!V&&i.push((function(g){var I=Z(g.theme)?e:g.theme;return G(g,p(r,I),I,r)})),v||i.push((function(g){var I=Z(g.theme)?e:g.theme;return B((0,t.Z)({},g,{theme:I}))}));var A=i.length-o.length;if(Array.isArray(g)&&A>0){var d=new Array(A).fill("");(c=[].concat((0,C.Z)(g),(0,C.Z)(d))).raw=[].concat((0,C.Z)(g.raw),(0,C.Z)(d))}else"function"===typeof g&&(c=function(I){var C=I.theme,n=(0,l.Z)(I,m);return g((0,t.Z)({theme:Z(C)?e:C},n))});var u=X.apply(void 0,[c].concat((0,C.Z)(i)));return u};return X.withConfig&&(f.withConfig=X.withConfig),f}}},5080:function(g,I,e){"use strict";e.d(I,{Z:function(){return d}});var C=e(7462),n=e(3366),t=e(2466),l=e(4942),o=["values","unit","step"];function a(g){var I=g.values,e=void 0===I?{xs:0,sm:600,md:900,lg:1200,xl:1536}:I,t=g.unit,a=void 0===t?"px":t,i=g.step,r=void 0===i?5:i,c=(0,n.Z)(g,o),A=function(g){var I=Object.keys(g).map((function(I){return{key:I,val:g[I]}}))||[];return I.sort((function(g,I){return g.val-I.val})),I.reduce((function(g,I){return(0,C.Z)({},g,(0,l.Z)({},I.key,I.val))}),{})}(e),d=Object.keys(A);function u(g){var I="number"===typeof e[g]?e[g]:g;return"@media (min-width:".concat(I).concat(a,")")}function s(g){var I="number"===typeof e[g]?e[g]:g;return"@media (max-width:".concat(I-r/100).concat(a,")")}function m(g,I){var C=d.indexOf(I);return"@media (min-width:".concat("number"===typeof e[g]?e[g]:g).concat(a,") and ")+"(max-width:".concat((-1!==C&&"number"===typeof e[d[C]]?e[d[C]]:I)-r/100).concat(a,")")}return(0,C.Z)({keys:d,values:A,up:u,down:s,between:m,only:function(g){return d.indexOf(g)+1<d.length?m(g,d[d.indexOf(g)+1]):u(g)},not:function(g){var I=d.indexOf(g);return 0===I?u(d[1]):I===d.length-1?s(d[I]):m(g,d[d.indexOf(g)+1]).replace("@media","@media not all and")},unit:a},c)}var i={borderRadius:4},r=e(5682);function c(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;if(g.mui)return g;var I=(0,r.hB)({spacing:g}),e=function(){for(var g=arguments.length,e=new Array(g),C=0;C<g;C++)e[C]=arguments[C];var n=0===e.length?[1]:e;return n.map((function(g){var e=I(g);return"number"===typeof e?"".concat(e,"px"):e})).join(" ")};return e.mui=!0,e}var A=["breakpoints","palette","spacing","shape"];var d=function(){for(var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},I=g.breakpoints,e=void 0===I?{}:I,l=g.palette,o=void 0===l?{}:l,r=g.spacing,d=g.shape,u=void 0===d?{}:d,s=(0,n.Z)(g,A),m=a(e),Z=c(r),b=(0,t.Z)({breakpoints:m,direction:"ltr",components:{},palette:(0,C.Z)({mode:"light"},o),spacing:Z,shape:(0,C.Z)({},i,u)},s),p=arguments.length,G=new Array(p>1?p-1:0),h=1;h<p;h++)G[h-1]=arguments[h];return b=G.reduce((function(g,I){return(0,t.Z)(g,I)}),b)}},6001:function(g,I,e){"use strict";e.d(I,{Gc:function(){return P},G$:function(){return j}});var C=e(8529),n=e(8247);var t=function(){for(var g=arguments.length,I=new Array(g),e=0;e<g;e++)I[e]=arguments[e];var C=I.reduce((function(g,I){return I.filterProps.forEach((function(e){g[e]=I})),g}),{}),t=function(g){return Object.keys(g).reduce((function(I,e){return C[e]?(0,n.Z)(I,C[e](g)):I}),{})};return t.propTypes={},t.filterProps=I.reduce((function(g,I){return g.concat(I.filterProps)}),[]),t},l=e(5682),o=e(1184);function a(g){return"number"!==typeof g?g:"".concat(g,"px solid")}var i=(0,C.Z)({prop:"border",themeKey:"borders",transform:a}),r=(0,C.Z)({prop:"borderTop",themeKey:"borders",transform:a}),c=(0,C.Z)({prop:"borderRight",themeKey:"borders",transform:a}),A=(0,C.Z)({prop:"borderBottom",themeKey:"borders",transform:a}),d=(0,C.Z)({prop:"borderLeft",themeKey:"borders",transform:a}),u=(0,C.Z)({prop:"borderColor",themeKey:"palette"}),s=(0,C.Z)({prop:"borderTopColor",themeKey:"palette"}),m=(0,C.Z)({prop:"borderRightColor",themeKey:"palette"}),Z=(0,C.Z)({prop:"borderBottomColor",themeKey:"palette"}),b=(0,C.Z)({prop:"borderLeftColor",themeKey:"palette"}),p=function(g){if(void 0!==g.borderRadius&&null!==g.borderRadius){var I=(0,l.eI)(g.theme,"shape.borderRadius",4,"borderRadius");return(0,o.k9)(g,g.borderRadius,(function(g){return{borderRadius:(0,l.NA)(I,g)}}))}return null};p.propTypes={},p.filterProps=["borderRadius"];var G=t(i,r,c,A,d,u,s,m,Z,b,p),h=t((0,C.Z)({prop:"displayPrint",cssProperty:!1,transform:function(g){return{"@media print":{display:g}}}}),(0,C.Z)({prop:"display"}),(0,C.Z)({prop:"overflow"}),(0,C.Z)({prop:"textOverflow"}),(0,C.Z)({prop:"visibility"}),(0,C.Z)({prop:"whiteSpace"})),y=t((0,C.Z)({prop:"flexBasis"}),(0,C.Z)({prop:"flexDirection"}),(0,C.Z)({prop:"flexWrap"}),(0,C.Z)({prop:"justifyContent"}),(0,C.Z)({prop:"alignItems"}),(0,C.Z)({prop:"alignContent"}),(0,C.Z)({prop:"order"}),(0,C.Z)({prop:"flex"}),(0,C.Z)({prop:"flexGrow"}),(0,C.Z)({prop:"flexShrink"}),(0,C.Z)({prop:"alignSelf"}),(0,C.Z)({prop:"justifyItems"}),(0,C.Z)({prop:"justifySelf"})),B=function(g){if(void 0!==g.gap&&null!==g.gap){var I=(0,l.eI)(g.theme,"spacing",8,"gap");return(0,o.k9)(g,g.gap,(function(g){return{gap:(0,l.NA)(I,g)}}))}return null};B.propTypes={},B.filterProps=["gap"];var W=function(g){if(void 0!==g.columnGap&&null!==g.columnGap){var I=(0,l.eI)(g.theme,"spacing",8,"columnGap");return(0,o.k9)(g,g.columnGap,(function(g){return{columnGap:(0,l.NA)(I,g)}}))}return null};W.propTypes={},W.filterProps=["columnGap"];var S=function(g){if(void 0!==g.rowGap&&null!==g.rowGap){var I=(0,l.eI)(g.theme,"spacing",8,"rowGap");return(0,o.k9)(g,g.rowGap,(function(g){return{rowGap:(0,l.NA)(I,g)}}))}return null};S.propTypes={},S.filterProps=["rowGap"];var V=t(B,W,S,(0,C.Z)({prop:"gridColumn"}),(0,C.Z)({prop:"gridRow"}),(0,C.Z)({prop:"gridAutoFlow"}),(0,C.Z)({prop:"gridAutoColumns"}),(0,C.Z)({prop:"gridAutoRows"}),(0,C.Z)({prop:"gridTemplateColumns"}),(0,C.Z)({prop:"gridTemplateRows"}),(0,C.Z)({prop:"gridTemplateAreas"}),(0,C.Z)({prop:"gridArea"})),v=t((0,C.Z)({prop:"position"}),(0,C.Z)({prop:"zIndex",themeKey:"zIndex"}),(0,C.Z)({prop:"top"}),(0,C.Z)({prop:"right"}),(0,C.Z)({prop:"bottom"}),(0,C.Z)({prop:"left"})),R=t((0,C.Z)({prop:"color",themeKey:"palette"}),(0,C.Z)({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette"}),(0,C.Z)({prop:"backgroundColor",themeKey:"palette"})),X=(0,C.Z)({prop:"boxShadow",themeKey:"shadows"});function f(g){return g<=1&&0!==g?"".concat(100*g,"%"):g}var k=(0,C.Z)({prop:"width",transform:f}),J=function(g){if(void 0!==g.maxWidth&&null!==g.maxWidth){return(0,o.k9)(g,g.maxWidth,(function(I){var e,C,n;return{maxWidth:(null==(e=g.theme)||null==(C=e.breakpoints)||null==(n=C.values)?void 0:n[I])||o.VO[I]||f(I)}}))}return null};J.filterProps=["maxWidth"];var Y=(0,C.Z)({prop:"minWidth",transform:f}),H=(0,C.Z)({prop:"height",transform:f}),w=(0,C.Z)({prop:"maxHeight",transform:f}),K=(0,C.Z)({prop:"minHeight",transform:f}),F=((0,C.Z)({prop:"size",cssProperty:"width",transform:f}),(0,C.Z)({prop:"size",cssProperty:"height",transform:f}),t(k,J,Y,H,w,K,(0,C.Z)({prop:"boxSizing"}))),N=(0,C.Z)({prop:"fontFamily",themeKey:"typography"}),x=(0,C.Z)({prop:"fontSize",themeKey:"typography"}),z=(0,C.Z)({prop:"fontStyle",themeKey:"typography"}),M=(0,C.Z)({prop:"fontWeight",themeKey:"typography"}),E=(0,C.Z)({prop:"letterSpacing"}),U=(0,C.Z)({prop:"textTransform"}),Q=(0,C.Z)({prop:"lineHeight"}),L=(0,C.Z)({prop:"textAlign"}),T=t((0,C.Z)({prop:"typography",cssProperty:!1,themeKey:"typography"}),N,x,z,M,E,Q,L,U),D={borders:G.filterProps,display:h.filterProps,flexbox:y.filterProps,grid:V.filterProps,positions:v.filterProps,palette:R.filterProps,shadows:X.filterProps,sizing:F.filterProps,spacing:l.ZP.filterProps,typography:T.filterProps},j={borders:G,display:h,flexbox:y,grid:V,positions:v,palette:R,shadows:X,sizing:F,spacing:l.ZP,typography:T},P=Object.keys(D).reduce((function(g,I){return D[I].forEach((function(e){g[e]=j[I]})),g}),{})},8247:function(g,I,e){"use strict";var C=e(2466);I.Z=function(g,I){return I?(0,C.Z)(g,I,{clone:!1}):g}},5682:function(g,I,e){"use strict";e.d(I,{hB:function(){return s},eI:function(){return u},ZP:function(){return y},NA:function(){return m}});var C=e(885),n=e(1184),t=e(8529),l=e(8247);var o={m:"margin",p:"padding"},a={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},i={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},r=function(g){var I={};return function(e){return void 0===I[e]&&(I[e]=g(e)),I[e]}}((function(g){if(g.length>2){if(!i[g])return[g];g=i[g]}var I=g.split(""),e=(0,C.Z)(I,2),n=e[0],t=e[1],l=o[n],r=a[t]||"";return Array.isArray(r)?r.map((function(g){return l+g})):[l+r]})),c=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],A=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"],d=[].concat(c,A);function u(g,I,e,C){var n=(0,t.D)(g,I)||e;return"number"===typeof n?function(g){return"string"===typeof g?g:n*g}:Array.isArray(n)?function(g){return"string"===typeof g?g:n[g]}:"function"===typeof n?n:function(){}}function s(g){return u(g,"spacing",8)}function m(g,I){if("string"===typeof I||null==I)return I;var e=g(Math.abs(I));return I>=0?e:"number"===typeof e?-e:"-".concat(e)}function Z(g,I,e,C){if(-1===I.indexOf(e))return null;var t=function(g,I){return function(e){return g.reduce((function(g,C){return g[C]=m(I,e),g}),{})}}(r(e),C),l=g[e];return(0,n.k9)(g,l,t)}function b(g,I){var e=s(g.theme);return Object.keys(g).map((function(C){return Z(g,I,C,e)})).reduce(l.Z,{})}function p(g){return b(g,c)}function G(g){return b(g,A)}function h(g){return b(g,d)}p.propTypes={},p.filterProps=c,G.propTypes={},G.filterProps=A,h.propTypes={},h.filterProps=d;var y=h},8529:function(g,I,e){"use strict";e.d(I,{D:function(){return l}});var C=e(4942),n=e(7312),t=e(1184);function l(g,I){return I&&"string"===typeof I?I.split(".").reduce((function(g,I){return g&&g[I]?g[I]:null}),g):null}function o(g,I,e){var C,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;return C="function"===typeof g?g(e):Array.isArray(g)?g[e]||n:l(g,e)||n,I&&(C=I(C)),C}I.Z=function(g){var I=g.prop,e=g.cssProperty,a=void 0===e?g.prop:e,i=g.themeKey,r=g.transform,c=function(g){if(null==g[I])return null;var e=g[I],c=l(g.theme,i)||{};return(0,t.k9)(g,e,(function(g){var e=o(c,r,g);return g===e&&"string"===typeof g&&(e=o(c,r,"".concat(I).concat("default"===g?"":(0,n.Z)(g)),g)),!1===a?e:(0,C.Z)({},a,e)}))};return c.propTypes={},c.filterProps=[I],c}},104:function(g,I,e){"use strict";var C=e(4942),n=e(8247),t=e(6001),l=e(1184);function o(){for(var g=arguments.length,I=new Array(g),e=0;e<g;e++)I[e]=arguments[e];var C=I.reduce((function(g,I){return g.concat(Object.keys(I))}),[]),n=new Set(C);return I.every((function(g){return n.size===Object.keys(g).length}))}function a(g,I){return"function"===typeof g?g(I):g}var i=function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.G$,I=Object.keys(g).reduce((function(I,e){return g[e].filterProps.forEach((function(C){I[C]=g[e]})),I}),{});function e(g,e,n){var t,l=(t={},(0,C.Z)(t,g,e),(0,C.Z)(t,"theme",n),t),o=I[g];return o?o(l):(0,C.Z)({},g,e)}function i(g){var t=g||{},r=t.sx,c=t.theme,A=void 0===c?{}:c;if(!r)return null;function d(g){var t=g;if("function"===typeof g)t=g(A);else if("object"!==typeof g)return g;if(!t)return null;var r=(0,l.W8)(A.breakpoints),c=Object.keys(r),d=r;return Object.keys(t).forEach((function(g){var r=a(t[g],A);if(null!==r&&void 0!==r)if("object"===typeof r)if(I[g])d=(0,n.Z)(d,e(g,r,A));else{var c=(0,l.k9)({theme:A},r,(function(I){return(0,C.Z)({},g,I)}));o(c,r)?d[g]=i({sx:r,theme:A}):d=(0,n.Z)(d,c)}else d=(0,n.Z)(d,e(g,r,A))})),(0,l.L7)(c,d)}return Array.isArray(r)?r.map(d):d(r)}return i}();i.filterProps=["sx"],I.Z=i},886:function(g,I,e){"use strict";e.d(I,{Z:function(){return r}});var C=e(5080),n=e(2791);var t=n.createContext(null);function l(){return n.useContext(t)}function o(g){return 0===Object.keys(g).length}var a=function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,I=l();return!I||o(I)?g:I},i=(0,C.Z)();var r=function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:i;return a(g)}},7078:function(g,I,e){"use strict";e.d(I,{Z:function(){return t}});var C=e(5735);var n=e(886);function t(g){var I=g.props,e=g.name,t=g.defaultTheme,l=function(g){var I=g.theme,e=g.name,n=g.props;return I&&I.components&&I.components[e]&&I.components[e].defaultProps?(0,C.Z)(I.components[e].defaultProps,n):n}({theme:(0,n.Z)(t),name:e,props:I});return l}},7312:function(g,I,e){"use strict";e.d(I,{Z:function(){return n}});var C=e(6189);function n(g){if("string"!==typeof g)throw new Error((0,C.Z)(7));return g.charAt(0).toUpperCase()+g.slice(1)}},8949:function(g,I,e){"use strict";function C(){for(var g=arguments.length,I=new Array(g),e=0;e<g;e++)I[e]=arguments[e];return I.reduce((function(g,I){return null==I?g:function(){for(var e=arguments.length,C=new Array(e),n=0;n<e;n++)C[n]=arguments[n];g.apply(this,C),I.apply(this,C)}}),(function(){}))}e.d(I,{Z:function(){return C}})},3981:function(g,I,e){"use strict";function C(g){var I,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:166;function C(){for(var C=this,n=arguments.length,t=new Array(n),l=0;l<n;l++)t[l]=arguments[l];var o=function(){g.apply(C,t)};clearTimeout(I),I=setTimeout(o,e)}return C.clear=function(){clearTimeout(I)},C}e.d(I,{Z:function(){return C}})},2466:function(g,I,e){"use strict";e.d(I,{P:function(){return n},Z:function(){return t}});var C=e(7462);function n(g){return null!==g&&"object"===typeof g&&g.constructor===Object}function t(g,I){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{clone:!0},l=e.clone?(0,C.Z)({},g):g;return n(g)&&n(I)&&Object.keys(I).forEach((function(C){"__proto__"!==C&&(n(I[C])&&C in g&&n(g[C])?l[C]=t(g[C],I[C],e):l[C]=I[C])})),l}},6189:function(g,I,e){"use strict";function C(g){for(var I="https://mui.com/production-error/?code="+g,e=1;e<arguments.length;e+=1)I+="&args[]="+encodeURIComponent(arguments[e]);return"Minified MUI error #"+g+"; visit "+I+" for the full message."}e.d(I,{Z:function(){return C}})},9723:function(g,I,e){"use strict";function C(g){return g&&g.ownerDocument||document}e.d(I,{Z:function(){return C}})},7979:function(g,I,e){"use strict";e.d(I,{Z:function(){return n}});var C=e(9723);function n(g){return(0,C.Z)(g).defaultView||window}},5735:function(g,I,e){"use strict";e.d(I,{Z:function(){return n}});var C=e(7462);function n(g,I){var e=(0,C.Z)({},I);return Object.keys(g).forEach((function(I){void 0===e[I]&&(e[I]=g[I])})),e}},2971:function(g,I,e){"use strict";function C(g,I){"function"===typeof g?g(I):g&&(g.current=I)}e.d(I,{Z:function(){return C}})},8959:function(g,I,e){"use strict";e.d(I,{Z:function(){return t}});var C=e(885),n=e(2791);function t(g){var I=g.controlled,e=g.default,t=(g.name,g.state,n.useRef(void 0!==I).current),l=n.useState(e),o=(0,C.Z)(l,2),a=o[0],i=o[1];return[t?I:a,n.useCallback((function(g){t||i(g)}),[])]}},5721:function(g,I,e){"use strict";var C=e(2791),n="undefined"!==typeof window?C.useLayoutEffect:C.useEffect;I.Z=n},8956:function(g,I,e){"use strict";e.d(I,{Z:function(){return t}});var C=e(2791),n=e(5721);function t(g){var I=C.useRef(g);return(0,n.Z)((function(){I.current=g})),C.useCallback((function(){return I.current.apply(void 0,arguments)}),[])}},7563:function(g,I,e){"use strict";e.d(I,{Z:function(){return t}});var C=e(2791),n=e(2971);function t(g,I){return C.useMemo((function(){return null==g&&null==I?null:function(e){(0,n.Z)(g,e),(0,n.Z)(I,e)}}),[g,I])}},6248:function(g,I,e){"use strict";var C;e.d(I,{Z:function(){return a}});var n=e(885),t=e(2791),l=0;var o=(C||(C=e.t(t,2))).useId;function a(g){if(void 0!==o){var I=o();return null!=g?g:I}return function(g){var I=t.useState(g),e=(0,n.Z)(I,2),C=e[0],o=e[1],a=g||C;return t.useEffect((function(){null==C&&o("mui-".concat(l+=1))}),[C]),a}(g)}},5372:function(g,I,e){"use strict";e.d(I,{Z:function(){return A}});var C,n=e(2791),t=!0,l=!1,o={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function a(g){g.metaKey||g.altKey||g.ctrlKey||(t=!0)}function i(){t=!1}function r(){"hidden"===this.visibilityState&&l&&(t=!0)}function c(g){var I=g.target;try{return I.matches(":focus-visible")}catch(e){}return t||function(g){var I=g.type,e=g.tagName;return!("INPUT"!==e||!o[I]||g.readOnly)||"TEXTAREA"===e&&!g.readOnly||!!g.isContentEditable}(I)}function A(){var g=n.useCallback((function(g){var I;null!=g&&((I=g.ownerDocument).addEventListener("keydown",a,!0),I.addEventListener("mousedown",i,!0),I.addEventListener("pointerdown",i,!0),I.addEventListener("touchstart",i,!0),I.addEventListener("visibilitychange",r,!0))}),[]),I=n.useRef(!1);return{isFocusVisibleRef:I,onFocus:function(g){return!!c(g)&&(I.current=!0,!0)},onBlur:function(){return!!I.current&&(l=!0,window.clearTimeout(C),C=window.setTimeout((function(){l=!1}),100),I.current=!1,!0)},ref:g}}},8182:function(g,I,e){"use strict";function C(g){var I,e,n="";if("string"===typeof g||"number"===typeof g)n+=g;else if("object"===typeof g)if(Array.isArray(g))for(I=0;I<g.length;I++)g[I]&&(e=C(g[I]))&&(n&&(n+=" "),n+=e);else for(I in g)g[I]&&(n&&(n+=" "),n+=I);return n}function n(){for(var g,I,e=0,n="";e<arguments.length;)(g=arguments[e++])&&(I=C(g))&&(n&&(n+=" "),n+=I);return n}e.d(I,{Z:function(){return n}})},9702:function(g,I){"use strict";I.Q=function(g,I){if("string"!==typeof g)throw new TypeError("argument str must be a string");for(var C={},n=I||{},l=g.split(";"),o=n.decode||e,a=0;a<l.length;a++){var i=l[a],r=i.indexOf("=");if(!(r<0)){var c=i.substring(0,r).trim();if(void 0==C[c]){var A=i.substring(r+1,i.length).trim();'"'===A[0]&&(A=A.slice(1,-1)),C[c]=t(A,o)}}}return C},I.q=function(g,I,e){var t=e||{},l=t.encode||C;if("function"!==typeof l)throw new TypeError("option encode is invalid");if(!n.test(g))throw new TypeError("argument name is invalid");var o=l(I);if(o&&!n.test(o))throw new TypeError("argument val is invalid");var a=g+"="+o;if(null!=t.maxAge){var i=t.maxAge-0;if(isNaN(i)||!isFinite(i))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+Math.floor(i)}if(t.domain){if(!n.test(t.domain))throw new TypeError("option domain is invalid");a+="; Domain="+t.domain}if(t.path){if(!n.test(t.path))throw new TypeError("option path is invalid");a+="; Path="+t.path}if(t.expires){if("function"!==typeof t.expires.toUTCString)throw new TypeError("option expires is invalid");a+="; Expires="+t.expires.toUTCString()}t.httpOnly&&(a+="; HttpOnly");t.secure&&(a+="; Secure");if(t.sameSite){switch("string"===typeof t.sameSite?t.sameSite.toLowerCase():t.sameSite){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a};var e=decodeURIComponent,C=encodeURIComponent,n=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function t(g,I){try{return I(g)}catch(e){return g}}},2110:function(g,I,e){"use strict";var C=e(7441),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},t={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},l={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},o={};function a(g){return C.isMemo(g)?l:o[g.$$typeof]||n}o[C.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o[C.Memo]=l;var i=Object.defineProperty,r=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,A=Object.getOwnPropertyDescriptor,d=Object.getPrototypeOf,u=Object.prototype;g.exports=function g(I,e,C){if("string"!==typeof e){if(u){var n=d(e);n&&n!==u&&g(I,n,C)}var l=r(e);c&&(l=l.concat(c(e)));for(var o=a(I),s=a(e),m=0;m<l.length;++m){var Z=l[m];if(!t[Z]&&(!C||!C[Z])&&(!s||!s[Z])&&(!o||!o[Z])){var b=A(e,Z);try{i(I,Z,b)}catch(p){}}}}return I}},1725:function(g){"use strict";var I=Object.getOwnPropertySymbols,e=Object.prototype.hasOwnProperty,C=Object.prototype.propertyIsEnumerable;function n(g){if(null===g||void 0===g)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(g)}g.exports=function(){try{if(!Object.assign)return!1;var g=new String("abc");if(g[5]="de","5"===Object.getOwnPropertyNames(g)[0])return!1;for(var I={},e=0;e<10;e++)I["_"+String.fromCharCode(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(I).map((function(g){return I[g]})).join(""))return!1;var C={};return"abcdefghijklmnopqrst".split("").forEach((function(g){C[g]=g})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},C)).join("")}catch(n){return!1}}()?Object.assign:function(g,t){for(var l,o,a=n(g),i=1;i<arguments.length;i++){for(var r in l=Object(arguments[i]))e.call(l,r)&&(a[r]=l[r]);if(I){o=I(l);for(var c=0;c<o.length;c++)C.call(l,o[c])&&(a[o[c]]=l[o[c]])}}return a}},888:function(g,I,e){"use strict";var C=e(9047);function n(){}function t(){}t.resetWarningCache=n,g.exports=function(){function g(g,I,e,n,t,l){if(l!==C){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function I(){return g}g.isRequired=g;var e={array:g,bigint:g,bool:g,func:g,number:g,object:g,string:g,symbol:g,any:g,arrayOf:I,element:g,elementType:g,instanceOf:I,node:g,objectOf:I,oneOf:I,oneOfType:I,shape:I,exact:I,checkPropTypes:t,resetWarningCache:n};return e.PropTypes=e,e}},2007:function(g,I,e){g.exports=e(888)()},9047:function(g){"use strict";g.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},4463:function(g,I,e){"use strict";var C=e(2791),n=e(1725),t=e(5296);function l(g){for(var I="https://reactjs.org/docs/error-decoder.html?invariant="+g,e=1;e<arguments.length;e++)I+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+g+"; visit "+I+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}if(!C)throw Error(l(227));var o=new Set,a={};function i(g,I){r(g,I),r(g+"Capture",I)}function r(g,I){for(a[g]=I,g=0;g<I.length;g++)o.add(I[g])}var c=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),A=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d=Object.prototype.hasOwnProperty,u={},s={};function m(g,I,e,C,n,t,l){this.acceptsBooleans=2===I||3===I||4===I,this.attributeName=C,this.attributeNamespace=n,this.mustUseProperty=e,this.propertyName=g,this.type=I,this.sanitizeURL=t,this.removeEmptyString=l}var Z={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach((function(g){Z[g]=new m(g,0,!1,g,null,!1,!1)})),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach((function(g){var I=g[0];Z[I]=new m(I,1,!1,g[1],null,!1,!1)})),["contentEditable","draggable","spellCheck","value"].forEach((function(g){Z[g]=new m(g,2,!1,g.toLowerCase(),null,!1,!1)})),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach((function(g){Z[g]=new m(g,2,!1,g,null,!1,!1)})),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach((function(g){Z[g]=new m(g,3,!1,g.toLowerCase(),null,!1,!1)})),["checked","multiple","muted","selected"].forEach((function(g){Z[g]=new m(g,3,!0,g,null,!1,!1)})),["capture","download"].forEach((function(g){Z[g]=new m(g,4,!1,g,null,!1,!1)})),["cols","rows","size","span"].forEach((function(g){Z[g]=new m(g,6,!1,g,null,!1,!1)})),["rowSpan","start"].forEach((function(g){Z[g]=new m(g,5,!1,g.toLowerCase(),null,!1,!1)}));var b=/[\-:]([a-z])/g;function p(g){return g[1].toUpperCase()}function G(g,I,e,C){var n=Z.hasOwnProperty(I)?Z[I]:null;(null!==n?0===n.type:!C&&(2<I.length&&("o"===I[0]||"O"===I[0])&&("n"===I[1]||"N"===I[1])))||(function(g,I,e,C){if(null===I||"undefined"===typeof I||function(g,I,e,C){if(null!==e&&0===e.type)return!1;switch(typeof I){case"function":case"symbol":return!0;case"boolean":return!C&&(null!==e?!e.acceptsBooleans:"data-"!==(g=g.toLowerCase().slice(0,5))&&"aria-"!==g);default:return!1}}(g,I,e,C))return!0;if(C)return!1;if(null!==e)switch(e.type){case 3:return!I;case 4:return!1===I;case 5:return isNaN(I);case 6:return isNaN(I)||1>I}return!1}(I,e,n,C)&&(e=null),C||null===n?function(g){return!!d.call(s,g)||!d.call(u,g)&&(A.test(g)?s[g]=!0:(u[g]=!0,!1))}(I)&&(null===e?g.removeAttribute(I):g.setAttribute(I,""+e)):n.mustUseProperty?g[n.propertyName]=null===e?3!==n.type&&"":e:(I=n.attributeName,C=n.attributeNamespace,null===e?g.removeAttribute(I):(e=3===(n=n.type)||4===n&&!0===e?"":""+e,C?g.setAttributeNS(C,I,e):g.setAttribute(I,e))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach((function(g){var I=g.replace(b,p);Z[I]=new m(I,1,!1,g,null,!1,!1)})),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach((function(g){var I=g.replace(b,p);Z[I]=new m(I,1,!1,g,"http://www.w3.org/1999/xlink",!1,!1)})),["xml:base","xml:lang","xml:space"].forEach((function(g){var I=g.replace(b,p);Z[I]=new m(I,1,!1,g,"http://www.w3.org/XML/1998/namespace",!1,!1)})),["tabIndex","crossOrigin"].forEach((function(g){Z[g]=new m(g,1,!1,g.toLowerCase(),null,!1,!1)})),Z.xlinkHref=new m("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach((function(g){Z[g]=new m(g,1,!1,g.toLowerCase(),null,!0,!0)}));var h=C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,y=60103,B=60106,W=60107,S=60108,V=60114,v=60109,R=60110,X=60112,f=60113,k=60120,J=60115,Y=60116,H=60121,w=60128,K=60129,F=60130,N=60131;if("function"===typeof Symbol&&Symbol.for){var x=Symbol.for;y=x("react.element"),B=x("react.portal"),W=x("react.fragment"),S=x("react.strict_mode"),V=x("react.profiler"),v=x("react.provider"),R=x("react.context"),X=x("react.forward_ref"),f=x("react.suspense"),k=x("react.suspense_list"),J=x("react.memo"),Y=x("react.lazy"),H=x("react.block"),x("react.scope"),w=x("react.opaque.id"),K=x("react.debug_trace_mode"),F=x("react.offscreen"),N=x("react.legacy_hidden")}var z,M="function"===typeof Symbol&&Symbol.iterator;function E(g){return null===g||"object"!==typeof g?null:"function"===typeof(g=M&&g[M]||g["@@iterator"])?g:null}function U(g){if(void 0===z)try{throw Error()}catch(e){var I=e.stack.trim().match(/\n( *(at )?)/);z=I&&I[1]||""}return"\n"+z+g}var Q=!1;function L(g,I){if(!g||Q)return"";Q=!0;var e=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(I)if(I=function(){throw Error()},Object.defineProperty(I.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(I,[])}catch(a){var C=a}Reflect.construct(g,[],I)}else{try{I.call()}catch(a){C=a}g.call(I.prototype)}else{try{throw Error()}catch(a){C=a}g()}}catch(a){if(a&&C&&"string"===typeof a.stack){for(var n=a.stack.split("\n"),t=C.stack.split("\n"),l=n.length-1,o=t.length-1;1<=l&&0<=o&&n[l]!==t[o];)o--;for(;1<=l&&0<=o;l--,o--)if(n[l]!==t[o]){if(1!==l||1!==o)do{if(l--,0>--o||n[l]!==t[o])return"\n"+n[l].replace(" at new "," at ")}while(1<=l&&0<=o);break}}}finally{Q=!1,Error.prepareStackTrace=e}return(g=g?g.displayName||g.name:"")?U(g):""}function T(g){switch(g.tag){case 5:return U(g.type);case 16:return U("Lazy");case 13:return U("Suspense");case 19:return U("SuspenseList");case 0:case 2:case 15:return g=L(g.type,!1);case 11:return g=L(g.type.render,!1);case 22:return g=L(g.type._render,!1);case 1:return g=L(g.type,!0);default:return""}}function D(g){if(null==g)return null;if("function"===typeof g)return g.displayName||g.name||null;if("string"===typeof g)return g;switch(g){case W:return"Fragment";case B:return"Portal";case V:return"Profiler";case S:return"StrictMode";case f:return"Suspense";case k:return"SuspenseList"}if("object"===typeof g)switch(g.$$typeof){case R:return(g.displayName||"Context")+".Consumer";case v:return(g._context.displayName||"Context")+".Provider";case X:var I=g.render;return I=I.displayName||I.name||"",g.displayName||(""!==I?"ForwardRef("+I+")":"ForwardRef");case J:return D(g.type);case H:return D(g._render);case Y:I=g._payload,g=g._init;try{return D(g(I))}catch(e){}}return null}function j(g){switch(typeof g){case"boolean":case"number":case"object":case"string":case"undefined":return g;default:return""}}function P(g){var I=g.type;return(g=g.nodeName)&&"input"===g.toLowerCase()&&("checkbox"===I||"radio"===I)}function O(g){g._valueTracker||(g._valueTracker=function(g){var I=P(g)?"checked":"value",e=Object.getOwnPropertyDescriptor(g.constructor.prototype,I),C=""+g[I];if(!g.hasOwnProperty(I)&&"undefined"!==typeof e&&"function"===typeof e.get&&"function"===typeof e.set){var n=e.get,t=e.set;return Object.defineProperty(g,I,{configurable:!0,get:function(){return n.call(this)},set:function(g){C=""+g,t.call(this,g)}}),Object.defineProperty(g,I,{enumerable:e.enumerable}),{getValue:function(){return C},setValue:function(g){C=""+g},stopTracking:function(){g._valueTracker=null,delete g[I]}}}}(g))}function q(g){if(!g)return!1;var I=g._valueTracker;if(!I)return!0;var e=I.getValue(),C="";return g&&(C=P(g)?g.checked?"true":"false":g.value),(g=C)!==e&&(I.setValue(g),!0)}function _(g){if("undefined"===typeof(g=g||("undefined"!==typeof document?document:void 0)))return null;try{return g.activeElement||g.body}catch(I){return g.body}}function $(g,I){var e=I.checked;return n({},I,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=e?e:g._wrapperState.initialChecked})}function gg(g,I){var e=null==I.defaultValue?"":I.defaultValue,C=null!=I.checked?I.checked:I.defaultChecked;e=j(null!=I.value?I.value:e),g._wrapperState={initialChecked:C,initialValue:e,controlled:"checkbox"===I.type||"radio"===I.type?null!=I.checked:null!=I.value}}function Ig(g,I){null!=(I=I.checked)&&G(g,"checked",I,!1)}function eg(g,I){Ig(g,I);var e=j(I.value),C=I.type;if(null!=e)"number"===C?(0===e&&""===g.value||g.value!=e)&&(g.value=""+e):g.value!==""+e&&(g.value=""+e);else if("submit"===C||"reset"===C)return void g.removeAttribute("value");I.hasOwnProperty("value")?ng(g,I.type,e):I.hasOwnProperty("defaultValue")&&ng(g,I.type,j(I.defaultValue)),null==I.checked&&null!=I.defaultChecked&&(g.defaultChecked=!!I.defaultChecked)}function Cg(g,I,e){if(I.hasOwnProperty("value")||I.hasOwnProperty("defaultValue")){var C=I.type;if(!("submit"!==C&&"reset"!==C||void 0!==I.value&&null!==I.value))return;I=""+g._wrapperState.initialValue,e||I===g.value||(g.value=I),g.defaultValue=I}""!==(e=g.name)&&(g.name=""),g.defaultChecked=!!g._wrapperState.initialChecked,""!==e&&(g.name=e)}function ng(g,I,e){"number"===I&&_(g.ownerDocument)===g||(null==e?g.defaultValue=""+g._wrapperState.initialValue:g.defaultValue!==""+e&&(g.defaultValue=""+e))}function tg(g,I){return g=n({children:void 0},I),(I=function(g){var I="";return C.Children.forEach(g,(function(g){null!=g&&(I+=g)})),I}(I.children))&&(g.children=I),g}function lg(g,I,e,C){if(g=g.options,I){I={};for(var n=0;n<e.length;n++)I["$"+e[n]]=!0;for(e=0;e<g.length;e++)n=I.hasOwnProperty("$"+g[e].value),g[e].selected!==n&&(g[e].selected=n),n&&C&&(g[e].defaultSelected=!0)}else{for(e=""+j(e),I=null,n=0;n<g.length;n++){if(g[n].value===e)return g[n].selected=!0,void(C&&(g[n].defaultSelected=!0));null!==I||g[n].disabled||(I=g[n])}null!==I&&(I.selected=!0)}}function og(g,I){if(null!=I.dangerouslySetInnerHTML)throw Error(l(91));return n({},I,{value:void 0,defaultValue:void 0,children:""+g._wrapperState.initialValue})}function ag(g,I){var e=I.value;if(null==e){if(e=I.children,I=I.defaultValue,null!=e){if(null!=I)throw Error(l(92));if(Array.isArray(e)){if(!(1>=e.length))throw Error(l(93));e=e[0]}I=e}null==I&&(I=""),e=I}g._wrapperState={initialValue:j(e)}}function ig(g,I){var e=j(I.value),C=j(I.defaultValue);null!=e&&((e=""+e)!==g.value&&(g.value=e),null==I.defaultValue&&g.defaultValue!==e&&(g.defaultValue=e)),null!=C&&(g.defaultValue=""+C)}function rg(g){var I=g.textContent;I===g._wrapperState.initialValue&&""!==I&&null!==I&&(g.value=I)}var cg="http://www.w3.org/1999/xhtml",Ag="http://www.w3.org/2000/svg";function dg(g){switch(g){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ug(g,I){return null==g||"http://www.w3.org/1999/xhtml"===g?dg(I):"http://www.w3.org/2000/svg"===g&&"foreignObject"===I?"http://www.w3.org/1999/xhtml":g}var sg,mg,Zg=(mg=function(g,I){if(g.namespaceURI!==Ag||"innerHTML"in g)g.innerHTML=I;else{for((sg=sg||document.createElement("div")).innerHTML="<svg>"+I.valueOf().toString()+"</svg>",I=sg.firstChild;g.firstChild;)g.removeChild(g.firstChild);for(;I.firstChild;)g.appendChild(I.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(g,I,e,C){MSApp.execUnsafeLocalFunction((function(){return mg(g,I)}))}:mg);function bg(g,I){if(I){var e=g.firstChild;if(e&&e===g.lastChild&&3===e.nodeType)return void(e.nodeValue=I)}g.textContent=I}var pg={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Gg=["Webkit","ms","Moz","O"];function hg(g,I,e){return null==I||"boolean"===typeof I||""===I?"":e||"number"!==typeof I||0===I||pg.hasOwnProperty(g)&&pg[g]?(""+I).trim():I+"px"}function yg(g,I){for(var e in g=g.style,I)if(I.hasOwnProperty(e)){var C=0===e.indexOf("--"),n=hg(e,I[e],C);"float"===e&&(e="cssFloat"),C?g.setProperty(e,n):g[e]=n}}Object.keys(pg).forEach((function(g){Gg.forEach((function(I){I=I+g.charAt(0).toUpperCase()+g.substring(1),pg[I]=pg[g]}))}));var Bg=n({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wg(g,I){if(I){if(Bg[g]&&(null!=I.children||null!=I.dangerouslySetInnerHTML))throw Error(l(137,g));if(null!=I.dangerouslySetInnerHTML){if(null!=I.children)throw Error(l(60));if("object"!==typeof I.dangerouslySetInnerHTML||!("__html"in I.dangerouslySetInnerHTML))throw Error(l(61))}if(null!=I.style&&"object"!==typeof I.style)throw Error(l(62))}}function Sg(g,I){if(-1===g.indexOf("-"))return"string"===typeof I.is;switch(g){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}function Vg(g){return(g=g.target||g.srcElement||window).correspondingUseElement&&(g=g.correspondingUseElement),3===g.nodeType?g.parentNode:g}var vg=null,Rg=null,Xg=null;function fg(g){if(g=en(g)){if("function"!==typeof vg)throw Error(l(280));var I=g.stateNode;I&&(I=nn(I),vg(g.stateNode,g.type,I))}}function kg(g){Rg?Xg?Xg.push(g):Xg=[g]:Rg=g}function Jg(){if(Rg){var g=Rg,I=Xg;if(Xg=Rg=null,fg(g),I)for(g=0;g<I.length;g++)fg(I[g])}}function Yg(g,I){return g(I)}function Hg(g,I,e,C,n){return g(I,e,C,n)}function wg(){}var Kg=Yg,Fg=!1,Ng=!1;function xg(){null===Rg&&null===Xg||(wg(),Jg())}function zg(g,I){var e=g.stateNode;if(null===e)return null;var C=nn(e);if(null===C)return null;e=C[I];g:switch(I){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(C=!C.disabled)||(C=!("button"===(g=g.type)||"input"===g||"select"===g||"textarea"===g)),g=!C;break g;default:g=!1}if(g)return null;if(e&&"function"!==typeof e)throw Error(l(231,I,typeof e));return e}var Mg=!1;if(c)try{var Eg={};Object.defineProperty(Eg,"passive",{get:function(){Mg=!0}}),window.addEventListener("test",Eg,Eg),window.removeEventListener("test",Eg,Eg)}catch(mg){Mg=!1}function Ug(g,I,e,C,n,t,l,o,a){var i=Array.prototype.slice.call(arguments,3);try{I.apply(e,i)}catch(r){this.onError(r)}}var Qg=!1,Lg=null,Tg=!1,Dg=null,jg={onError:function(g){Qg=!0,Lg=g}};function Pg(g,I,e,C,n,t,l,o,a){Qg=!1,Lg=null,Ug.apply(jg,arguments)}function Og(g){var I=g,e=g;if(g.alternate)for(;I.return;)I=I.return;else{g=I;do{0!==(1026&(I=g).flags)&&(e=I.return),g=I.return}while(g)}return 3===I.tag?e:null}function qg(g){if(13===g.tag){var I=g.memoizedState;if(null===I&&(null!==(g=g.alternate)&&(I=g.memoizedState)),null!==I)return I.dehydrated}return null}function _g(g){if(Og(g)!==g)throw Error(l(188))}function $g(g){if(g=function(g){var I=g.alternate;if(!I){if(null===(I=Og(g)))throw Error(l(188));return I!==g?null:g}for(var e=g,C=I;;){var n=e.return;if(null===n)break;var t=n.alternate;if(null===t){if(null!==(C=n.return)){e=C;continue}break}if(n.child===t.child){for(t=n.child;t;){if(t===e)return _g(n),g;if(t===C)return _g(n),I;t=t.sibling}throw Error(l(188))}if(e.return!==C.return)e=n,C=t;else{for(var o=!1,a=n.child;a;){if(a===e){o=!0,e=n,C=t;break}if(a===C){o=!0,C=n,e=t;break}a=a.sibling}if(!o){for(a=t.child;a;){if(a===e){o=!0,e=t,C=n;break}if(a===C){o=!0,C=t,e=n;break}a=a.sibling}if(!o)throw Error(l(189))}}if(e.alternate!==C)throw Error(l(190))}if(3!==e.tag)throw Error(l(188));return e.stateNode.current===e?g:I}(g),!g)return null;for(var I=g;;){if(5===I.tag||6===I.tag)return I;if(I.child)I.child.return=I,I=I.child;else{if(I===g)break;for(;!I.sibling;){if(!I.return||I.return===g)return null;I=I.return}I.sibling.return=I.return,I=I.sibling}}return null}function gI(g,I){for(var e=g.alternate;null!==I;){if(I===g||I===e)return!0;I=I.return}return!1}var II,eI,CI,nI,tI=!1,lI=[],oI=null,aI=null,iI=null,rI=new Map,cI=new Map,AI=[],dI="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function uI(g,I,e,C,n){return{blockedOn:g,domEventName:I,eventSystemFlags:16|e,nativeEvent:n,targetContainers:[C]}}function sI(g,I){switch(g){case"focusin":case"focusout":oI=null;break;case"dragenter":case"dragleave":aI=null;break;case"mouseover":case"mouseout":iI=null;break;case"pointerover":case"pointerout":rI.delete(I.pointerId);break;case"gotpointercapture":case"lostpointercapture":cI.delete(I.pointerId)}}function mI(g,I,e,C,n,t){return null===g||g.nativeEvent!==t?(g=uI(I,e,C,n,t),null!==I&&(null!==(I=en(I))&&eI(I)),g):(g.eventSystemFlags|=C,I=g.targetContainers,null!==n&&-1===I.indexOf(n)&&I.push(n),g)}function ZI(g){var I=In(g.target);if(null!==I){var e=Og(I);if(null!==e)if(13===(I=e.tag)){if(null!==(I=qg(e)))return g.blockedOn=I,void nI(g.lanePriority,(function(){t.unstable_runWithPriority(g.priority,(function(){CI(e)}))}))}else if(3===I&&e.stateNode.hydrate)return void(g.blockedOn=3===e.tag?e.stateNode.containerInfo:null)}g.blockedOn=null}function bI(g){if(null!==g.blockedOn)return!1;for(var I=g.targetContainers;0<I.length;){var e=$I(g.domEventName,g.eventSystemFlags,I[0],g.nativeEvent);if(null!==e)return null!==(I=en(e))&&eI(I),g.blockedOn=e,!1;I.shift()}return!0}function pI(g,I,e){bI(g)&&e.delete(I)}function GI(){for(tI=!1;0<lI.length;){var g=lI[0];if(null!==g.blockedOn){null!==(g=en(g.blockedOn))&&II(g);break}for(var I=g.targetContainers;0<I.length;){var e=$I(g.domEventName,g.eventSystemFlags,I[0],g.nativeEvent);if(null!==e){g.blockedOn=e;break}I.shift()}null===g.blockedOn&&lI.shift()}null!==oI&&bI(oI)&&(oI=null),null!==aI&&bI(aI)&&(aI=null),null!==iI&&bI(iI)&&(iI=null),rI.forEach(pI),cI.forEach(pI)}function hI(g,I){g.blockedOn===I&&(g.blockedOn=null,tI||(tI=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,GI)))}function yI(g){function I(I){return hI(I,g)}if(0<lI.length){hI(lI[0],g);for(var e=1;e<lI.length;e++){var C=lI[e];C.blockedOn===g&&(C.blockedOn=null)}}for(null!==oI&&hI(oI,g),null!==aI&&hI(aI,g),null!==iI&&hI(iI,g),rI.forEach(I),cI.forEach(I),e=0;e<AI.length;e++)(C=AI[e]).blockedOn===g&&(C.blockedOn=null);for(;0<AI.length&&null===(e=AI[0]).blockedOn;)ZI(e),null===e.blockedOn&&AI.shift()}function BI(g,I){var e={};return e[g.toLowerCase()]=I.toLowerCase(),e["Webkit"+g]="webkit"+I,e["Moz"+g]="moz"+I,e}var WI={animationend:BI("Animation","AnimationEnd"),animationiteration:BI("Animation","AnimationIteration"),animationstart:BI("Animation","AnimationStart"),transitionend:BI("Transition","TransitionEnd")},SI={},VI={};function vI(g){if(SI[g])return SI[g];if(!WI[g])return g;var I,e=WI[g];for(I in e)if(e.hasOwnProperty(I)&&I in VI)return SI[g]=e[I];return g}c&&(VI=document.createElement("div").style,"AnimationEvent"in window||(delete WI.animationend.animation,delete WI.animationiteration.animation,delete WI.animationstart.animation),"TransitionEvent"in window||delete WI.transitionend.transition);var RI=vI("animationend"),XI=vI("animationiteration"),fI=vI("animationstart"),kI=vI("transitionend"),JI=new Map,YI=new Map,HI=["abort","abort",RI,"animationEnd",XI,"animationIteration",fI,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata","loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",kI,"transitionEnd","waiting","waiting"];function wI(g,I){for(var e=0;e<g.length;e+=2){var C=g[e],n=g[e+1];n="on"+(n[0].toUpperCase()+n.slice(1)),YI.set(C,I),JI.set(C,n),i(n,[C])}}(0,t.unstable_now)();var KI=8;function FI(g){if(0!==(1&g))return KI=15,1;if(0!==(2&g))return KI=14,2;if(0!==(4&g))return KI=13,4;var I=24&g;return 0!==I?(KI=12,I):0!==(32&g)?(KI=11,32):0!==(I=192&g)?(KI=10,I):0!==(256&g)?(KI=9,256):0!==(I=3584&g)?(KI=8,I):0!==(4096&g)?(KI=7,4096):0!==(I=4186112&g)?(KI=6,I):0!==(I=62914560&g)?(KI=5,I):67108864&g?(KI=4,67108864):0!==(134217728&g)?(KI=3,134217728):0!==(I=805306368&g)?(KI=2,I):0!==(1073741824&g)?(KI=1,1073741824):(KI=8,g)}function NI(g,I){var e=g.pendingLanes;if(0===e)return KI=0;var C=0,n=0,t=g.expiredLanes,l=g.suspendedLanes,o=g.pingedLanes;if(0!==t)C=t,n=KI=15;else if(0!==(t=134217727&e)){var a=t&~l;0!==a?(C=FI(a),n=KI):0!==(o&=t)&&(C=FI(o),n=KI)}else 0!==(t=e&~l)?(C=FI(t),n=KI):0!==o&&(C=FI(o),n=KI);if(0===C)return 0;if(C=e&((0>(C=31-QI(C))?0:1<<C)<<1)-1,0!==I&&I!==C&&0===(I&l)){if(FI(I),n<=KI)return I;KI=n}if(0!==(I=g.entangledLanes))for(g=g.entanglements,I&=C;0<I;)n=1<<(e=31-QI(I)),C|=g[e],I&=~n;return C}function xI(g){return 0!==(g=-1073741825&g.pendingLanes)?g:1073741824&g?1073741824:0}function zI(g,I){switch(g){case 15:return 1;case 14:return 2;case 12:return 0===(g=MI(24&~I))?zI(10,I):g;case 10:return 0===(g=MI(192&~I))?zI(8,I):g;case 8:return 0===(g=MI(3584&~I))&&(0===(g=MI(4186112&~I))&&(g=512)),g;case 2:return 0===(I=MI(805306368&~I))&&(I=268435456),I}throw Error(l(358,g))}function MI(g){return g&-g}function EI(g){for(var I=[],e=0;31>e;e++)I.push(g);return I}function UI(g,I,e){g.pendingLanes|=I;var C=I-1;g.suspendedLanes&=C,g.pingedLanes&=C,(g=g.eventTimes)[I=31-QI(I)]=e}var QI=Math.clz32?Math.clz32:function(g){return 0===g?32:31-(LI(g)/TI|0)|0},LI=Math.log,TI=Math.LN2;var DI=t.unstable_UserBlockingPriority,jI=t.unstable_runWithPriority,PI=!0;function OI(g,I,e,C){Fg||wg();var n=_I,t=Fg;Fg=!0;try{Hg(n,g,I,e,C)}finally{(Fg=t)||xg()}}function qI(g,I,e,C){jI(DI,_I.bind(null,g,I,e,C))}function _I(g,I,e,C){var n;if(PI)if((n=0===(4&I))&&0<lI.length&&-1<dI.indexOf(g))g=uI(null,g,I,e,C),lI.push(g);else{var t=$I(g,I,e,C);if(null===t)n&&sI(g,C);else{if(n){if(-1<dI.indexOf(g))return g=uI(t,g,I,e,C),void lI.push(g);if(function(g,I,e,C,n){switch(I){case"focusin":return oI=mI(oI,g,I,e,C,n),!0;case"dragenter":return aI=mI(aI,g,I,e,C,n),!0;case"mouseover":return iI=mI(iI,g,I,e,C,n),!0;case"pointerover":var t=n.pointerId;return rI.set(t,mI(rI.get(t)||null,g,I,e,C,n)),!0;case"gotpointercapture":return t=n.pointerId,cI.set(t,mI(cI.get(t)||null,g,I,e,C,n)),!0}return!1}(t,g,I,e,C))return;sI(g,C)}HC(g,I,C,null,e)}}}function $I(g,I,e,C){var n=Vg(C);if(null!==(n=In(n))){var t=Og(n);if(null===t)n=null;else{var l=t.tag;if(13===l){if(null!==(n=qg(t)))return n;n=null}else if(3===l){if(t.stateNode.hydrate)return 3===t.tag?t.stateNode.containerInfo:null;n=null}else t!==n&&(n=null)}}return HC(g,I,C,n,e),null}var ge=null,Ie=null,ee=null;function Ce(){if(ee)return ee;var g,I,e=Ie,C=e.length,n="value"in ge?ge.value:ge.textContent,t=n.length;for(g=0;g<C&&e[g]===n[g];g++);var l=C-g;for(I=1;I<=l&&e[C-I]===n[t-I];I++);return ee=n.slice(g,1<I?1-I:void 0)}function ne(g){var I=g.keyCode;return"charCode"in g?0===(g=g.charCode)&&13===I&&(g=13):g=I,10===g&&(g=13),32<=g||13===g?g:0}function te(){return!0}function le(){return!1}function oe(g){function I(I,e,C,n,t){for(var l in this._reactName=I,this._targetInst=C,this.type=e,this.nativeEvent=n,this.target=t,this.currentTarget=null,g)g.hasOwnProperty(l)&&(I=g[l],this[l]=I?I(n):n[l]);return this.isDefaultPrevented=(null!=n.defaultPrevented?n.defaultPrevented:!1===n.returnValue)?te:le,this.isPropagationStopped=le,this}return n(I.prototype,{preventDefault:function(){this.defaultPrevented=!0;var g=this.nativeEvent;g&&(g.preventDefault?g.preventDefault():"unknown"!==typeof g.returnValue&&(g.returnValue=!1),this.isDefaultPrevented=te)},stopPropagation:function(){var g=this.nativeEvent;g&&(g.stopPropagation?g.stopPropagation():"unknown"!==typeof g.cancelBubble&&(g.cancelBubble=!0),this.isPropagationStopped=te)},persist:function(){},isPersistent:te}),I}var ae,ie,re,ce={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(g){return g.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ae=oe(ce),de=n({},ce,{view:0,detail:0}),ue=oe(de),se=n({},de,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ve,button:0,buttons:0,relatedTarget:function(g){return void 0===g.relatedTarget?g.fromElement===g.srcElement?g.toElement:g.fromElement:g.relatedTarget},movementX:function(g){return"movementX"in g?g.movementX:(g!==re&&(re&&"mousemove"===g.type?(ae=g.screenX-re.screenX,ie=g.screenY-re.screenY):ie=ae=0,re=g),ae)},movementY:function(g){return"movementY"in g?g.movementY:ie}}),me=oe(se),Ze=oe(n({},se,{dataTransfer:0})),be=oe(n({},de,{relatedTarget:0})),pe=oe(n({},ce,{animationName:0,elapsedTime:0,pseudoElement:0})),Ge=n({},ce,{clipboardData:function(g){return"clipboardData"in g?g.clipboardData:window.clipboardData}}),he=oe(Ge),ye=oe(n({},ce,{data:0})),Be={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},We={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Se={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ve(g){var I=this.nativeEvent;return I.getModifierState?I.getModifierState(g):!!(g=Se[g])&&!!I[g]}function ve(){return Ve}var Re=n({},de,{key:function(g){if(g.key){var I=Be[g.key]||g.key;if("Unidentified"!==I)return I}return"keypress"===g.type?13===(g=ne(g))?"Enter":String.fromCharCode(g):"keydown"===g.type||"keyup"===g.type?We[g.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ve,charCode:function(g){return"keypress"===g.type?ne(g):0},keyCode:function(g){return"keydown"===g.type||"keyup"===g.type?g.keyCode:0},which:function(g){return"keypress"===g.type?ne(g):"keydown"===g.type||"keyup"===g.type?g.keyCode:0}}),Xe=oe(Re),fe=oe(n({},se,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),ke=oe(n({},de,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ve})),Je=oe(n({},ce,{propertyName:0,elapsedTime:0,pseudoElement:0})),Ye=n({},se,{deltaX:function(g){return"deltaX"in g?g.deltaX:"wheelDeltaX"in g?-g.wheelDeltaX:0},deltaY:function(g){return"deltaY"in g?g.deltaY:"wheelDeltaY"in g?-g.wheelDeltaY:"wheelDelta"in g?-g.wheelDelta:0},deltaZ:0,deltaMode:0}),He=oe(Ye),we=[9,13,27,32],Ke=c&&"CompositionEvent"in window,Fe=null;c&&"documentMode"in document&&(Fe=document.documentMode);var Ne=c&&"TextEvent"in window&&!Fe,xe=c&&(!Ke||Fe&&8<Fe&&11>=Fe),ze=String.fromCharCode(32),Me=!1;function Ee(g,I){switch(g){case"keyup":return-1!==we.indexOf(I.keyCode);case"keydown":return 229!==I.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ue(g){return"object"===typeof(g=g.detail)&&"data"in g?g.data:null}var Qe=!1;var Le={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Te(g){var I=g&&g.nodeName&&g.nodeName.toLowerCase();return"input"===I?!!Le[g.type]:"textarea"===I}function De(g,I,e,C){kg(C),0<(I=KC(I,"onChange")).length&&(e=new Ae("onChange","change",null,e,C),g.push({event:e,listeners:I}))}var je=null,Pe=null;function Oe(g){RC(g,0)}function qe(g){if(q(Cn(g)))return g}function _e(g,I){if("change"===g)return I}var $e=!1;if(c){var gC;if(c){var IC="oninput"in document;if(!IC){var eC=document.createElement("div");eC.setAttribute("oninput","return;"),IC="function"===typeof eC.oninput}gC=IC}else gC=!1;$e=gC&&(!document.documentMode||9<document.documentMode)}function CC(){je&&(je.detachEvent("onpropertychange",nC),Pe=je=null)}function nC(g){if("value"===g.propertyName&&qe(Pe)){var I=[];if(De(I,Pe,g,Vg(g)),g=Oe,Fg)g(I);else{Fg=!0;try{Yg(g,I)}finally{Fg=!1,xg()}}}}function tC(g,I,e){"focusin"===g?(CC(),Pe=e,(je=I).attachEvent("onpropertychange",nC)):"focusout"===g&&CC()}function lC(g){if("selectionchange"===g||"keyup"===g||"keydown"===g)return qe(Pe)}function oC(g,I){if("click"===g)return qe(I)}function aC(g,I){if("input"===g||"change"===g)return qe(I)}var iC="function"===typeof Object.is?Object.is:function(g,I){return g===I&&(0!==g||1/g===1/I)||g!==g&&I!==I},rC=Object.prototype.hasOwnProperty;function cC(g,I){if(iC(g,I))return!0;if("object"!==typeof g||null===g||"object"!==typeof I||null===I)return!1;var e=Object.keys(g),C=Object.keys(I);if(e.length!==C.length)return!1;for(C=0;C<e.length;C++)if(!rC.call(I,e[C])||!iC(g[e[C]],I[e[C]]))return!1;return!0}function AC(g){for(;g&&g.firstChild;)g=g.firstChild;return g}function dC(g,I){var e,C=AC(g);for(g=0;C;){if(3===C.nodeType){if(e=g+C.textContent.length,g<=I&&e>=I)return{node:C,offset:I-g};g=e}g:{for(;C;){if(C.nextSibling){C=C.nextSibling;break g}C=C.parentNode}C=void 0}C=AC(C)}}function uC(g,I){return!(!g||!I)&&(g===I||(!g||3!==g.nodeType)&&(I&&3===I.nodeType?uC(g,I.parentNode):"contains"in g?g.contains(I):!!g.compareDocumentPosition&&!!(16&g.compareDocumentPosition(I))))}function sC(){for(var g=window,I=_();I instanceof g.HTMLIFrameElement;){try{var e="string"===typeof I.contentWindow.location.href}catch(C){e=!1}if(!e)break;I=_((g=I.contentWindow).document)}return I}function mC(g){var I=g&&g.nodeName&&g.nodeName.toLowerCase();return I&&("input"===I&&("text"===g.type||"search"===g.type||"tel"===g.type||"url"===g.type||"password"===g.type)||"textarea"===I||"true"===g.contentEditable)}var ZC=c&&"documentMode"in document&&11>=document.documentMode,bC=null,pC=null,GC=null,hC=!1;function yC(g,I,e){var C=e.window===e?e.document:9===e.nodeType?e:e.ownerDocument;hC||null==bC||bC!==_(C)||("selectionStart"in(C=bC)&&mC(C)?C={start:C.selectionStart,end:C.selectionEnd}:C={anchorNode:(C=(C.ownerDocument&&C.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:C.anchorOffset,focusNode:C.focusNode,focusOffset:C.focusOffset},GC&&cC(GC,C)||(GC=C,0<(C=KC(pC,"onSelect")).length&&(I=new Ae("onSelect","select",null,I,e),g.push({event:I,listeners:C}),I.target=bC)))}wI("cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focusin focus focusout blur input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),0),wI("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1),wI(HI,2);for(var BC="change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),WC=0;WC<BC.length;WC++)YI.set(BC[WC],0);r("onMouseEnter",["mouseout","mouseover"]),r("onMouseLeave",["mouseout","mouseover"]),r("onPointerEnter",["pointerout","pointerover"]),r("onPointerLeave",["pointerout","pointerover"]),i("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),i("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),i("onBeforeInput",["compositionend","keypress","textInput","paste"]),i("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),i("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var SC="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VC=new Set("cancel close invalid load scroll toggle".split(" ").concat(SC));function vC(g,I,e){var C=g.type||"unknown-event";g.currentTarget=e,function(g,I,e,C,n,t,o,a,i){if(Pg.apply(this,arguments),Qg){if(!Qg)throw Error(l(198));var r=Lg;Qg=!1,Lg=null,Tg||(Tg=!0,Dg=r)}}(C,I,void 0,g),g.currentTarget=null}function RC(g,I){I=0!==(4&I);for(var e=0;e<g.length;e++){var C=g[e],n=C.event;C=C.listeners;g:{var t=void 0;if(I)for(var l=C.length-1;0<=l;l--){var o=C[l],a=o.instance,i=o.currentTarget;if(o=o.listener,a!==t&&n.isPropagationStopped())break g;vC(n,o,i),t=a}else for(l=0;l<C.length;l++){if(a=(o=C[l]).instance,i=o.currentTarget,o=o.listener,a!==t&&n.isPropagationStopped())break g;vC(n,o,i),t=a}}}if(Tg)throw g=Dg,Tg=!1,Dg=null,g}function XC(g,I){var e=tn(I),C=g+"__bubble";e.has(C)||(YC(I,g,2,!1),e.add(C))}var fC="_reactListening"+Math.random().toString(36).slice(2);function kC(g){g[fC]||(g[fC]=!0,o.forEach((function(I){VC.has(I)||JC(I,!1,g,null),JC(I,!0,g,null)})))}function JC(g,I,e,C){var n=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,t=e;if("selectionchange"===g&&9!==e.nodeType&&(t=e.ownerDocument),null!==C&&!I&&VC.has(g)){if("scroll"!==g)return;n|=2,t=C}var l=tn(t),o=g+"__"+(I?"capture":"bubble");l.has(o)||(I&&(n|=4),YC(t,g,n,I),l.add(o))}function YC(g,I,e,C){var n=YI.get(I);switch(void 0===n?2:n){case 0:n=OI;break;case 1:n=qI;break;default:n=_I}e=n.bind(null,I,e,g),n=void 0,!Mg||"touchstart"!==I&&"touchmove"!==I&&"wheel"!==I||(n=!0),C?void 0!==n?g.addEventListener(I,e,{capture:!0,passive:n}):g.addEventListener(I,e,!0):void 0!==n?g.addEventListener(I,e,{passive:n}):g.addEventListener(I,e,!1)}function HC(g,I,e,C,n){var t=C;if(0===(1&I)&&0===(2&I)&&null!==C)g:for(;;){if(null===C)return;var l=C.tag;if(3===l||4===l){var o=C.stateNode.containerInfo;if(o===n||8===o.nodeType&&o.parentNode===n)break;if(4===l)for(l=C.return;null!==l;){var a=l.tag;if((3===a||4===a)&&((a=l.stateNode.containerInfo)===n||8===a.nodeType&&a.parentNode===n))return;l=l.return}for(;null!==o;){if(null===(l=In(o)))return;if(5===(a=l.tag)||6===a){C=t=l;continue g}o=o.parentNode}}C=C.return}!function(g,I,e){if(Ng)return g(I,e);Ng=!0;try{Kg(g,I,e)}finally{Ng=!1,xg()}}((function(){var C=t,n=Vg(e),l=[];g:{var o=JI.get(g);if(void 0!==o){var a=Ae,i=g;switch(g){case"keypress":if(0===ne(e))break g;case"keydown":case"keyup":a=Xe;break;case"focusin":i="focus",a=be;break;case"focusout":i="blur",a=be;break;case"beforeblur":case"afterblur":a=be;break;case"click":if(2===e.button)break g;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":a=me;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":a=Ze;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":a=ke;break;case RI:case XI:case fI:a=pe;break;case kI:a=Je;break;case"scroll":a=ue;break;case"wheel":a=He;break;case"copy":case"cut":case"paste":a=he;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":a=fe}var r=0!==(4&I),c=!r&&"scroll"===g,A=r?null!==o?o+"Capture":null:o;r=[];for(var d,u=C;null!==u;){var s=(d=u).stateNode;if(5===d.tag&&null!==s&&(d=s,null!==A&&(null!=(s=zg(u,A))&&r.push(wC(u,s,d)))),c)break;u=u.return}0<r.length&&(o=new a(o,i,null,e,n),l.push({event:o,listeners:r}))}}if(0===(7&I)){if(a="mouseout"===g||"pointerout"===g,(!(o="mouseover"===g||"pointerover"===g)||0!==(16&I)||!(i=e.relatedTarget||e.fromElement)||!In(i)&&!i[$C])&&(a||o)&&(o=n.window===n?n:(o=n.ownerDocument)?o.defaultView||o.parentWindow:window,a?(a=C,null!==(i=(i=e.relatedTarget||e.toElement)?In(i):null)&&(i!==(c=Og(i))||5!==i.tag&&6!==i.tag)&&(i=null)):(a=null,i=C),a!==i)){if(r=me,s="onMouseLeave",A="onMouseEnter",u="mouse","pointerout"!==g&&"pointerover"!==g||(r=fe,s="onPointerLeave",A="onPointerEnter",u="pointer"),c=null==a?o:Cn(a),d=null==i?o:Cn(i),(o=new r(s,u+"leave",a,e,n)).target=c,o.relatedTarget=d,s=null,In(n)===C&&((r=new r(A,u+"enter",i,e,n)).target=d,r.relatedTarget=c,s=r),c=s,a&&i)g:{for(A=i,u=0,d=r=a;d;d=FC(d))u++;for(d=0,s=A;s;s=FC(s))d++;for(;0<u-d;)r=FC(r),u--;for(;0<d-u;)A=FC(A),d--;for(;u--;){if(r===A||null!==A&&r===A.alternate)break g;r=FC(r),A=FC(A)}r=null}else r=null;null!==a&&NC(l,o,a,r,!1),null!==i&&null!==c&&NC(l,c,i,r,!0)}if("select"===(a=(o=C?Cn(C):window).nodeName&&o.nodeName.toLowerCase())||"input"===a&&"file"===o.type)var m=_e;else if(Te(o))if($e)m=aC;else{m=lC;var Z=tC}else(a=o.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=oC);switch(m&&(m=m(g,C))?De(l,m,e,n):(Z&&Z(g,o,C),"focusout"===g&&(Z=o._wrapperState)&&Z.controlled&&"number"===o.type&&ng(o,"number",o.value)),Z=C?Cn(C):window,g){case"focusin":(Te(Z)||"true"===Z.contentEditable)&&(bC=Z,pC=C,GC=null);break;case"focusout":GC=pC=bC=null;break;case"mousedown":hC=!0;break;case"contextmenu":case"mouseup":case"dragend":hC=!1,yC(l,e,n);break;case"selectionchange":if(ZC)break;case"keydown":case"keyup":yC(l,e,n)}var b;if(Ke)g:{switch(g){case"compositionstart":var p="onCompositionStart";break g;case"compositionend":p="onCompositionEnd";break g;case"compositionupdate":p="onCompositionUpdate";break g}p=void 0}else Qe?Ee(g,e)&&(p="onCompositionEnd"):"keydown"===g&&229===e.keyCode&&(p="onCompositionStart");p&&(xe&&"ko"!==e.locale&&(Qe||"onCompositionStart"!==p?"onCompositionEnd"===p&&Qe&&(b=Ce()):(Ie="value"in(ge=n)?ge.value:ge.textContent,Qe=!0)),0<(Z=KC(C,p)).length&&(p=new ye(p,g,null,e,n),l.push({event:p,listeners:Z}),b?p.data=b:null!==(b=Ue(e))&&(p.data=b))),(b=Ne?function(g,I){switch(g){case"compositionend":return Ue(I);case"keypress":return 32!==I.which?null:(Me=!0,ze);case"textInput":return(g=I.data)===ze&&Me?null:g;default:return null}}(g,e):function(g,I){if(Qe)return"compositionend"===g||!Ke&&Ee(g,I)?(g=Ce(),ee=Ie=ge=null,Qe=!1,g):null;switch(g){case"paste":default:return null;case"keypress":if(!(I.ctrlKey||I.altKey||I.metaKey)||I.ctrlKey&&I.altKey){if(I.char&&1<I.char.length)return I.char;if(I.which)return String.fromCharCode(I.which)}return null;case"compositionend":return xe&&"ko"!==I.locale?null:I.data}}(g,e))&&(0<(C=KC(C,"onBeforeInput")).length&&(n=new ye("onBeforeInput","beforeinput",null,e,n),l.push({event:n,listeners:C}),n.data=b))}RC(l,I)}))}function wC(g,I,e){return{instance:g,listener:I,currentTarget:e}}function KC(g,I){for(var e=I+"Capture",C=[];null!==g;){var n=g,t=n.stateNode;5===n.tag&&null!==t&&(n=t,null!=(t=zg(g,e))&&C.unshift(wC(g,t,n)),null!=(t=zg(g,I))&&C.push(wC(g,t,n))),g=g.return}return C}function FC(g){if(null===g)return null;do{g=g.return}while(g&&5!==g.tag);return g||null}function NC(g,I,e,C,n){for(var t=I._reactName,l=[];null!==e&&e!==C;){var o=e,a=o.alternate,i=o.stateNode;if(null!==a&&a===C)break;5===o.tag&&null!==i&&(o=i,n?null!=(a=zg(e,t))&&l.unshift(wC(e,a,o)):n||null!=(a=zg(e,t))&&l.push(wC(e,a,o))),e=e.return}0!==l.length&&g.push({event:I,listeners:l})}function xC(){}var zC=null,MC=null;function EC(g,I){switch(g){case"button":case"input":case"select":case"textarea":return!!I.autoFocus}return!1}function UC(g,I){return"textarea"===g||"option"===g||"noscript"===g||"string"===typeof I.children||"number"===typeof I.children||"object"===typeof I.dangerouslySetInnerHTML&&null!==I.dangerouslySetInnerHTML&&null!=I.dangerouslySetInnerHTML.__html}var QC="function"===typeof setTimeout?setTimeout:void 0,LC="function"===typeof clearTimeout?clearTimeout:void 0;function TC(g){1===g.nodeType?g.textContent="":9===g.nodeType&&(null!=(g=g.body)&&(g.textContent=""))}function DC(g){for(;null!=g;g=g.nextSibling){var I=g.nodeType;if(1===I||3===I)break}return g}function jC(g){g=g.previousSibling;for(var I=0;g;){if(8===g.nodeType){var e=g.data;if("$"===e||"$!"===e||"$?"===e){if(0===I)return g;I--}else"/$"===e&&I++}g=g.previousSibling}return null}var PC=0;var OC=Math.random().toString(36).slice(2),qC="__reactFiber$"+OC,_C="__reactProps$"+OC,$C="__reactContainer$"+OC,gn="__reactEvents$"+OC;function In(g){var I=g[qC];if(I)return I;for(var e=g.parentNode;e;){if(I=e[$C]||e[qC]){if(e=I.alternate,null!==I.child||null!==e&&null!==e.child)for(g=jC(g);null!==g;){if(e=g[qC])return e;g=jC(g)}return I}e=(g=e).parentNode}return null}function en(g){return!(g=g[qC]||g[$C])||5!==g.tag&&6!==g.tag&&13!==g.tag&&3!==g.tag?null:g}function Cn(g){if(5===g.tag||6===g.tag)return g.stateNode;throw Error(l(33))}function nn(g){return g[_C]||null}function tn(g){var I=g[gn];return void 0===I&&(I=g[gn]=new Set),I}var ln=[],on=-1;function an(g){return{current:g}}function rn(g){0>on||(g.current=ln[on],ln[on]=null,on--)}function cn(g,I){on++,ln[on]=g.current,g.current=I}var An={},dn=an(An),un=an(!1),sn=An;function mn(g,I){var e=g.type.contextTypes;if(!e)return An;var C=g.stateNode;if(C&&C.__reactInternalMemoizedUnmaskedChildContext===I)return C.__reactInternalMemoizedMaskedChildContext;var n,t={};for(n in e)t[n]=I[n];return C&&((g=g.stateNode).__reactInternalMemoizedUnmaskedChildContext=I,g.__reactInternalMemoizedMaskedChildContext=t),t}function Zn(g){return null!==(g=g.childContextTypes)&&void 0!==g}function bn(){rn(un),rn(dn)}function pn(g,I,e){if(dn.current!==An)throw Error(l(168));cn(dn,I),cn(un,e)}function Gn(g,I,e){var C=g.stateNode;if(g=I.childContextTypes,"function"!==typeof C.getChildContext)return e;for(var t in C=C.getChildContext())if(!(t in g))throw Error(l(108,D(I)||"Unknown",t));return n({},e,C)}function hn(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||An,sn=dn.current,cn(dn,g),cn(un,un.current),!0}function yn(g,I,e){var C=g.stateNode;if(!C)throw Error(l(169));e?(g=Gn(g,I,sn),C.__reactInternalMemoizedMergedChildContext=g,rn(un),rn(dn),cn(dn,g)):rn(un),cn(un,e)}var Bn=null,Wn=null,Sn=t.unstable_runWithPriority,Vn=t.unstable_scheduleCallback,vn=t.unstable_cancelCallback,Rn=t.unstable_shouldYield,Xn=t.unstable_requestPaint,fn=t.unstable_now,kn=t.unstable_getCurrentPriorityLevel,Jn=t.unstable_ImmediatePriority,Yn=t.unstable_UserBlockingPriority,Hn=t.unstable_NormalPriority,wn=t.unstable_LowPriority,Kn=t.unstable_IdlePriority,Fn={},Nn=void 0!==Xn?Xn:function(){},xn=null,zn=null,Mn=!1,En=fn(),Un=1e4>En?fn:function(){return fn()-En};function Qn(){switch(kn()){case Jn:return 99;case Yn:return 98;case Hn:return 97;case wn:return 96;case Kn:return 95;default:throw Error(l(332))}}function Ln(g){switch(g){case 99:return Jn;case 98:return Yn;case 97:return Hn;case 96:return wn;case 95:return Kn;default:throw Error(l(332))}}function Tn(g,I){return g=Ln(g),Sn(g,I)}function Dn(g,I,e){return g=Ln(g),Vn(g,I,e)}function jn(){if(null!==zn){var g=zn;zn=null,vn(g)}Pn()}function Pn(){if(!Mn&&null!==xn){Mn=!0;var g=0;try{var I=xn;Tn(99,(function(){for(;g<I.length;g++){var e=I[g];do{e=e(!0)}while(null!==e)}})),xn=null}catch(e){throw null!==xn&&(xn=xn.slice(g+1)),Vn(Jn,jn),e}finally{Mn=!1}}}var On=h.ReactCurrentBatchConfig;function qn(g,I){if(g&&g.defaultProps){for(var e in I=n({},I),g=g.defaultProps)void 0===I[e]&&(I[e]=g[e]);return I}return I}var _n=an(null),$n=null,gt=null,It=null;function et(){It=gt=$n=null}function Ct(g){var I=_n.current;rn(_n),g.type._context._currentValue=I}function nt(g,I){for(;null!==g;){var e=g.alternate;if((g.childLanes&I)===I){if(null===e||(e.childLanes&I)===I)break;e.childLanes|=I}else g.childLanes|=I,null!==e&&(e.childLanes|=I);g=g.return}}function tt(g,I){$n=g,It=gt=null,null!==(g=g.dependencies)&&null!==g.firstContext&&(0!==(g.lanes&I)&&(Kl=!0),g.firstContext=null)}function lt(g,I){if(It!==g&&!1!==I&&0!==I)if("number"===typeof I&&1073741823!==I||(It=g,I=1073741823),I={context:g,observedBits:I,next:null},null===gt){if(null===$n)throw Error(l(308));gt=I,$n.dependencies={lanes:0,firstContext:I,responders:null}}else gt=gt.next=I;return g._currentValue}var ot=!1;function at(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null},effects:null}}function it(g,I){g=g.updateQueue,I.updateQueue===g&&(I.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function rt(g,I){return{eventTime:g,lane:I,tag:0,payload:null,callback:null,next:null}}function ct(g,I){if(null!==(g=g.updateQueue)){var e=(g=g.shared).pending;null===e?I.next=I:(I.next=e.next,e.next=I),g.pending=I}}function At(g,I){var e=g.updateQueue,C=g.alternate;if(null!==C&&e===(C=C.updateQueue)){var n=null,t=null;if(null!==(e=e.firstBaseUpdate)){do{var l={eventTime:e.eventTime,lane:e.lane,tag:e.tag,payload:e.payload,callback:e.callback,next:null};null===t?n=t=l:t=t.next=l,e=e.next}while(null!==e);null===t?n=t=I:t=t.next=I}else n=t=I;return e={baseState:C.baseState,firstBaseUpdate:n,lastBaseUpdate:t,shared:C.shared,effects:C.effects},void(g.updateQueue=e)}null===(g=e.lastBaseUpdate)?e.firstBaseUpdate=I:g.next=I,e.lastBaseUpdate=I}function dt(g,I,e,C){var t=g.updateQueue;ot=!1;var l=t.firstBaseUpdate,o=t.lastBaseUpdate,a=t.shared.pending;if(null!==a){t.shared.pending=null;var i=a,r=i.next;i.next=null,null===o?l=r:o.next=r,o=i;var c=g.alternate;if(null!==c){var A=(c=c.updateQueue).lastBaseUpdate;A!==o&&(null===A?c.firstBaseUpdate=r:A.next=r,c.lastBaseUpdate=i)}}if(null!==l){for(A=t.baseState,o=0,c=r=i=null;;){a=l.lane;var d=l.eventTime;if((C&a)===a){null!==c&&(c=c.next={eventTime:d,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});g:{var u=g,s=l;switch(a=I,d=e,s.tag){case 1:if("function"===typeof(u=s.payload)){A=u.call(d,A,a);break g}A=u;break g;case 3:u.flags=-4097&u.flags|64;case 0:if(null===(a="function"===typeof(u=s.payload)?u.call(d,A,a):u)||void 0===a)break g;A=n({},A,a);break g;case 2:ot=!0}}null!==l.callback&&(g.flags|=32,null===(a=t.effects)?t.effects=[l]:a.push(l))}else d={eventTime:d,lane:a,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===c?(r=c=d,i=A):c=c.next=d,o|=a;if(null===(l=l.next)){if(null===(a=t.shared.pending))break;l=a.next,a.next=null,t.lastBaseUpdate=a,t.shared.pending=null}}null===c&&(i=A),t.baseState=i,t.firstBaseUpdate=r,t.lastBaseUpdate=c,Mo|=o,g.lanes=o,g.memoizedState=A}}function ut(g,I,e){if(g=I.effects,I.effects=null,null!==g)for(I=0;I<g.length;I++){var C=g[I],n=C.callback;if(null!==n){if(C.callback=null,C=e,"function"!==typeof n)throw Error(l(191,n));n.call(C)}}}var st=(new C.Component).refs;function mt(g,I,e,C){e=null===(e=e(C,I=g.memoizedState))||void 0===e?I:n({},I,e),g.memoizedState=e,0===g.lanes&&(g.updateQueue.baseState=e)}var Zt={isMounted:function(g){return!!(g=g._reactInternals)&&Og(g)===g},enqueueSetState:function(g,I,e){g=g._reactInternals;var C=Aa(),n=da(g),t=rt(C,n);t.payload=I,void 0!==e&&null!==e&&(t.callback=e),ct(g,t),ua(g,n,C)},enqueueReplaceState:function(g,I,e){g=g._reactInternals;var C=Aa(),n=da(g),t=rt(C,n);t.tag=1,t.payload=I,void 0!==e&&null!==e&&(t.callback=e),ct(g,t),ua(g,n,C)},enqueueForceUpdate:function(g,I){g=g._reactInternals;var e=Aa(),C=da(g),n=rt(e,C);n.tag=2,void 0!==I&&null!==I&&(n.callback=I),ct(g,n),ua(g,C,e)}};function bt(g,I,e,C,n,t,l){return"function"===typeof(g=g.stateNode).shouldComponentUpdate?g.shouldComponentUpdate(C,t,l):!I.prototype||!I.prototype.isPureReactComponent||(!cC(e,C)||!cC(n,t))}function pt(g,I,e){var C=!1,n=An,t=I.contextType;return"object"===typeof t&&null!==t?t=lt(t):(n=Zn(I)?sn:dn.current,t=(C=null!==(C=I.contextTypes)&&void 0!==C)?mn(g,n):An),I=new I(e,t),g.memoizedState=null!==I.state&&void 0!==I.state?I.state:null,I.updater=Zt,g.stateNode=I,I._reactInternals=g,C&&((g=g.stateNode).__reactInternalMemoizedUnmaskedChildContext=n,g.__reactInternalMemoizedMaskedChildContext=t),I}function Gt(g,I,e,C){g=I.state,"function"===typeof I.componentWillReceiveProps&&I.componentWillReceiveProps(e,C),"function"===typeof I.UNSAFE_componentWillReceiveProps&&I.UNSAFE_componentWillReceiveProps(e,C),I.state!==g&&Zt.enqueueReplaceState(I,I.state,null)}function ht(g,I,e,C){var n=g.stateNode;n.props=e,n.state=g.memoizedState,n.refs=st,at(g);var t=I.contextType;"object"===typeof t&&null!==t?n.context=lt(t):(t=Zn(I)?sn:dn.current,n.context=mn(g,t)),dt(g,e,n,C),n.state=g.memoizedState,"function"===typeof(t=I.getDerivedStateFromProps)&&(mt(g,I,t,e),n.state=g.memoizedState),"function"===typeof I.getDerivedStateFromProps||"function"===typeof n.getSnapshotBeforeUpdate||"function"!==typeof n.UNSAFE_componentWillMount&&"function"!==typeof n.componentWillMount||(I=n.state,"function"===typeof n.componentWillMount&&n.componentWillMount(),"function"===typeof n.UNSAFE_componentWillMount&&n.UNSAFE_componentWillMount(),I!==n.state&&Zt.enqueueReplaceState(n,n.state,null),dt(g,e,n,C),n.state=g.memoizedState),"function"===typeof n.componentDidMount&&(g.flags|=4)}var yt=Array.isArray;function Bt(g,I,e){if(null!==(g=e.ref)&&"function"!==typeof g&&"object"!==typeof g){if(e._owner){if(e=e._owner){if(1!==e.tag)throw Error(l(309));var C=e.stateNode}if(!C)throw Error(l(147,g));var n=""+g;return null!==I&&null!==I.ref&&"function"===typeof I.ref&&I.ref._stringRef===n?I.ref:(I=function(g){var I=C.refs;I===st&&(I=C.refs={}),null===g?delete I[n]:I[n]=g},I._stringRef=n,I)}if("string"!==typeof g)throw Error(l(284));if(!e._owner)throw Error(l(290,g))}return g}function Wt(g,I){if("textarea"!==g.type)throw Error(l(31,"[object Object]"===Object.prototype.toString.call(I)?"object with keys {"+Object.keys(I).join(", ")+"}":I))}function St(g){function I(I,e){if(g){var C=I.lastEffect;null!==C?(C.nextEffect=e,I.lastEffect=e):I.firstEffect=I.lastEffect=e,e.nextEffect=null,e.flags=8}}function e(e,C){if(!g)return null;for(;null!==C;)I(e,C),C=C.sibling;return null}function C(g,I){for(g=new Map;null!==I;)null!==I.key?g.set(I.key,I):g.set(I.index,I),I=I.sibling;return g}function n(g,I){return(g=Ta(g,I)).index=0,g.sibling=null,g}function t(I,e,C){return I.index=C,g?null!==(C=I.alternate)?(C=C.index)<e?(I.flags=2,e):C:(I.flags=2,e):e}function o(I){return g&&null===I.alternate&&(I.flags=2),I}function a(g,I,e,C){return null===I||6!==I.tag?((I=Oa(e,g.mode,C)).return=g,I):((I=n(I,e)).return=g,I)}function i(g,I,e,C){return null!==I&&I.elementType===e.type?((C=n(I,e.props)).ref=Bt(g,I,e),C.return=g,C):((C=Da(e.type,e.key,e.props,null,g.mode,C)).ref=Bt(g,I,e),C.return=g,C)}function r(g,I,e,C){return null===I||4!==I.tag||I.stateNode.containerInfo!==e.containerInfo||I.stateNode.implementation!==e.implementation?((I=qa(e,g.mode,C)).return=g,I):((I=n(I,e.children||[])).return=g,I)}function c(g,I,e,C,t){return null===I||7!==I.tag?((I=ja(e,g.mode,C,t)).return=g,I):((I=n(I,e)).return=g,I)}function A(g,I,e){if("string"===typeof I||"number"===typeof I)return(I=Oa(""+I,g.mode,e)).return=g,I;if("object"===typeof I&&null!==I){switch(I.$$typeof){case y:return(e=Da(I.type,I.key,I.props,null,g.mode,e)).ref=Bt(g,null,I),e.return=g,e;case B:return(I=qa(I,g.mode,e)).return=g,I}if(yt(I)||E(I))return(I=ja(I,g.mode,e,null)).return=g,I;Wt(g,I)}return null}function d(g,I,e,C){var n=null!==I?I.key:null;if("string"===typeof e||"number"===typeof e)return null!==n?null:a(g,I,""+e,C);if("object"===typeof e&&null!==e){switch(e.$$typeof){case y:return e.key===n?e.type===W?c(g,I,e.props.children,C,n):i(g,I,e,C):null;case B:return e.key===n?r(g,I,e,C):null}if(yt(e)||E(e))return null!==n?null:c(g,I,e,C,null);Wt(g,e)}return null}function u(g,I,e,C,n){if("string"===typeof C||"number"===typeof C)return a(I,g=g.get(e)||null,""+C,n);if("object"===typeof C&&null!==C){switch(C.$$typeof){case y:return g=g.get(null===C.key?e:C.key)||null,C.type===W?c(I,g,C.props.children,n,C.key):i(I,g,C,n);case B:return r(I,g=g.get(null===C.key?e:C.key)||null,C,n)}if(yt(C)||E(C))return c(I,g=g.get(e)||null,C,n,null);Wt(I,C)}return null}function s(n,l,o,a){for(var i=null,r=null,c=l,s=l=0,m=null;null!==c&&s<o.length;s++){c.index>s?(m=c,c=null):m=c.sibling;var Z=d(n,c,o[s],a);if(null===Z){null===c&&(c=m);break}g&&c&&null===Z.alternate&&I(n,c),l=t(Z,l,s),null===r?i=Z:r.sibling=Z,r=Z,c=m}if(s===o.length)return e(n,c),i;if(null===c){for(;s<o.length;s++)null!==(c=A(n,o[s],a))&&(l=t(c,l,s),null===r?i=c:r.sibling=c,r=c);return i}for(c=C(n,c);s<o.length;s++)null!==(m=u(c,n,s,o[s],a))&&(g&&null!==m.alternate&&c.delete(null===m.key?s:m.key),l=t(m,l,s),null===r?i=m:r.sibling=m,r=m);return g&&c.forEach((function(g){return I(n,g)})),i}function m(n,o,a,i){var r=E(a);if("function"!==typeof r)throw Error(l(150));if(null==(a=r.call(a)))throw Error(l(151));for(var c=r=null,s=o,m=o=0,Z=null,b=a.next();null!==s&&!b.done;m++,b=a.next()){s.index>m?(Z=s,s=null):Z=s.sibling;var p=d(n,s,b.value,i);if(null===p){null===s&&(s=Z);break}g&&s&&null===p.alternate&&I(n,s),o=t(p,o,m),null===c?r=p:c.sibling=p,c=p,s=Z}if(b.done)return e(n,s),r;if(null===s){for(;!b.done;m++,b=a.next())null!==(b=A(n,b.value,i))&&(o=t(b,o,m),null===c?r=b:c.sibling=b,c=b);return r}for(s=C(n,s);!b.done;m++,b=a.next())null!==(b=u(s,n,m,b.value,i))&&(g&&null!==b.alternate&&s.delete(null===b.key?m:b.key),o=t(b,o,m),null===c?r=b:c.sibling=b,c=b);return g&&s.forEach((function(g){return I(n,g)})),r}return function(g,C,t,a){var i="object"===typeof t&&null!==t&&t.type===W&&null===t.key;i&&(t=t.props.children);var r="object"===typeof t&&null!==t;if(r)switch(t.$$typeof){case y:g:{for(r=t.key,i=C;null!==i;){if(i.key===r){if(7===i.tag){if(t.type===W){e(g,i.sibling),(C=n(i,t.props.children)).return=g,g=C;break g}}else if(i.elementType===t.type){e(g,i.sibling),(C=n(i,t.props)).ref=Bt(g,i,t),C.return=g,g=C;break g}e(g,i);break}I(g,i),i=i.sibling}t.type===W?((C=ja(t.props.children,g.mode,a,t.key)).return=g,g=C):((a=Da(t.type,t.key,t.props,null,g.mode,a)).ref=Bt(g,C,t),a.return=g,g=a)}return o(g);case B:g:{for(i=t.key;null!==C;){if(C.key===i){if(4===C.tag&&C.stateNode.containerInfo===t.containerInfo&&C.stateNode.implementation===t.implementation){e(g,C.sibling),(C=n(C,t.children||[])).return=g,g=C;break g}e(g,C);break}I(g,C),C=C.sibling}(C=qa(t,g.mode,a)).return=g,g=C}return o(g)}if("string"===typeof t||"number"===typeof t)return t=""+t,null!==C&&6===C.tag?(e(g,C.sibling),(C=n(C,t)).return=g,g=C):(e(g,C),(C=Oa(t,g.mode,a)).return=g,g=C),o(g);if(yt(t))return s(g,C,t,a);if(E(t))return m(g,C,t,a);if(r&&Wt(g,t),"undefined"===typeof t&&!i)switch(g.tag){case 1:case 22:case 0:case 11:case 15:throw Error(l(152,D(g.type)||"Component"))}return e(g,C)}}var Vt=St(!0),vt=St(!1),Rt={},Xt=an(Rt),ft=an(Rt),kt=an(Rt);function Jt(g){if(g===Rt)throw Error(l(174));return g}function Yt(g,I){switch(cn(kt,I),cn(ft,g),cn(Xt,Rt),g=I.nodeType){case 9:case 11:I=(I=I.documentElement)?I.namespaceURI:ug(null,"");break;default:I=ug(I=(g=8===g?I.parentNode:I).namespaceURI||null,g=g.tagName)}rn(Xt),cn(Xt,I)}function Ht(){rn(Xt),rn(ft),rn(kt)}function wt(g){Jt(kt.current);var I=Jt(Xt.current),e=ug(I,g.type);I!==e&&(cn(ft,g),cn(Xt,e))}function Kt(g){ft.current===g&&(rn(Xt),rn(ft))}var Ft=an(0);function Nt(g){for(var I=g;null!==I;){if(13===I.tag){var e=I.memoizedState;if(null!==e&&(null===(e=e.dehydrated)||"$?"===e.data||"$!"===e.data))return I}else if(19===I.tag&&void 0!==I.memoizedProps.revealOrder){if(0!==(64&I.flags))return I}else if(null!==I.child){I.child.return=I,I=I.child;continue}if(I===g)break;for(;null===I.sibling;){if(null===I.return||I.return===g)return null;I=I.return}I.sibling.return=I.return,I=I.sibling}return null}var xt=null,zt=null,Mt=!1;function Et(g,I){var e=Qa(5,null,null,0);e.elementType="DELETED",e.type="DELETED",e.stateNode=I,e.return=g,e.flags=8,null!==g.lastEffect?(g.lastEffect.nextEffect=e,g.lastEffect=e):g.firstEffect=g.lastEffect=e}function Ut(g,I){switch(g.tag){case 5:var e=g.type;return null!==(I=1!==I.nodeType||e.toLowerCase()!==I.nodeName.toLowerCase()?null:I)&&(g.stateNode=I,!0);case 6:return null!==(I=""===g.pendingProps||3!==I.nodeType?null:I)&&(g.stateNode=I,!0);default:return!1}}function Qt(g){if(Mt){var I=zt;if(I){var e=I;if(!Ut(g,I)){if(!(I=DC(e.nextSibling))||!Ut(g,I))return g.flags=-1025&g.flags|2,Mt=!1,void(xt=g);Et(xt,e)}xt=g,zt=DC(I.firstChild)}else g.flags=-1025&g.flags|2,Mt=!1,xt=g}}function Lt(g){for(g=g.return;null!==g&&5!==g.tag&&3!==g.tag&&13!==g.tag;)g=g.return;xt=g}function Tt(g){if(g!==xt)return!1;if(!Mt)return Lt(g),Mt=!0,!1;var I=g.type;if(5!==g.tag||"head"!==I&&"body"!==I&&!UC(I,g.memoizedProps))for(I=zt;I;)Et(g,I),I=DC(I.nextSibling);if(Lt(g),13===g.tag){if(!(g=null!==(g=g.memoizedState)?g.dehydrated:null))throw Error(l(317));g:{for(g=g.nextSibling,I=0;g;){if(8===g.nodeType){var e=g.data;if("/$"===e){if(0===I){zt=DC(g.nextSibling);break g}I--}else"$"!==e&&"$!"!==e&&"$?"!==e||I++}g=g.nextSibling}zt=null}}else zt=xt?DC(g.stateNode.nextSibling):null;return!0}function Dt(){zt=xt=null,Mt=!1}var jt=[];function Pt(){for(var g=0;g<jt.length;g++)jt[g]._workInProgressVersionPrimary=null;jt.length=0}var Ot=h.ReactCurrentDispatcher,qt=h.ReactCurrentBatchConfig,_t=0,$t=null,gl=null,Il=null,el=!1,Cl=!1;function nl(){throw Error(l(321))}function tl(g,I){if(null===I)return!1;for(var e=0;e<I.length&&e<g.length;e++)if(!iC(g[e],I[e]))return!1;return!0}function ll(g,I,e,C,n,t){if(_t=t,$t=I,I.memoizedState=null,I.updateQueue=null,I.lanes=0,Ot.current=null===g||null===g.memoizedState?Jl:Yl,g=e(C,n),Cl){t=0;do{if(Cl=!1,!(25>t))throw Error(l(301));t+=1,Il=gl=null,I.updateQueue=null,Ot.current=Hl,g=e(C,n)}while(Cl)}if(Ot.current=kl,I=null!==gl&&null!==gl.next,_t=0,Il=gl=$t=null,el=!1,I)throw Error(l(300));return g}function ol(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Il?$t.memoizedState=Il=g:Il=Il.next=g,Il}function al(){if(null===gl){var g=$t.alternate;g=null!==g?g.memoizedState:null}else g=gl.next;var I=null===Il?$t.memoizedState:Il.next;if(null!==I)Il=I,gl=g;else{if(null===g)throw Error(l(310));g={memoizedState:(gl=g).memoizedState,baseState:gl.baseState,baseQueue:gl.baseQueue,queue:gl.queue,next:null},null===Il?$t.memoizedState=Il=g:Il=Il.next=g}return Il}function il(g,I){return"function"===typeof I?I(g):I}function rl(g){var I=al(),e=I.queue;if(null===e)throw Error(l(311));e.lastRenderedReducer=g;var C=gl,n=C.baseQueue,t=e.pending;if(null!==t){if(null!==n){var o=n.next;n.next=t.next,t.next=o}C.baseQueue=n=t,e.pending=null}if(null!==n){n=n.next,C=C.baseState;var a=o=t=null,i=n;do{var r=i.lane;if((_t&r)===r)null!==a&&(a=a.next={lane:0,action:i.action,eagerReducer:i.eagerReducer,eagerState:i.eagerState,next:null}),C=i.eagerReducer===g?i.eagerState:g(C,i.action);else{var c={lane:r,action:i.action,eagerReducer:i.eagerReducer,eagerState:i.eagerState,next:null};null===a?(o=a=c,t=C):a=a.next=c,$t.lanes|=r,Mo|=r}i=i.next}while(null!==i&&i!==n);null===a?t=C:a.next=o,iC(C,I.memoizedState)||(Kl=!0),I.memoizedState=C,I.baseState=t,I.baseQueue=a,e.lastRenderedState=C}return[I.memoizedState,e.dispatch]}function cl(g){var I=al(),e=I.queue;if(null===e)throw Error(l(311));e.lastRenderedReducer=g;var C=e.dispatch,n=e.pending,t=I.memoizedState;if(null!==n){e.pending=null;var o=n=n.next;do{t=g(t,o.action),o=o.next}while(o!==n);iC(t,I.memoizedState)||(Kl=!0),I.memoizedState=t,null===I.baseQueue&&(I.baseState=t),e.lastRenderedState=t}return[t,C]}function Al(g,I,e){var C=I._getVersion;C=C(I._source);var n=I._workInProgressVersionPrimary;if(null!==n?g=n===C:(g=g.mutableReadLanes,(g=(_t&g)===g)&&(I._workInProgressVersionPrimary=C,jt.push(I))),g)return e(I._source);throw jt.push(I),Error(l(350))}function dl(g,I,e,C){var n=Yo;if(null===n)throw Error(l(349));var t=I._getVersion,o=t(I._source),a=Ot.current,i=a.useState((function(){return Al(n,I,e)})),r=i[1],c=i[0];i=Il;var A=g.memoizedState,d=A.refs,u=d.getSnapshot,s=A.source;A=A.subscribe;var m=$t;return g.memoizedState={refs:d,source:I,subscribe:C},a.useEffect((function(){d.getSnapshot=e,d.setSnapshot=r;var g=t(I._source);if(!iC(o,g)){g=e(I._source),iC(c,g)||(r(g),g=da(m),n.mutableReadLanes|=g&n.pendingLanes),g=n.mutableReadLanes,n.entangledLanes|=g;for(var C=n.entanglements,l=g;0<l;){var a=31-QI(l),i=1<<a;C[a]|=g,l&=~i}}}),[e,I,C]),a.useEffect((function(){return C(I._source,(function(){var g=d.getSnapshot,e=d.setSnapshot;try{e(g(I._source));var C=da(m);n.mutableReadLanes|=C&n.pendingLanes}catch(t){e((function(){throw t}))}}))}),[I,C]),iC(u,e)&&iC(s,I)&&iC(A,C)||((g={pending:null,dispatch:null,lastRenderedReducer:il,lastRenderedState:c}).dispatch=r=fl.bind(null,$t,g),i.queue=g,i.baseQueue=null,c=Al(n,I,e),i.memoizedState=i.baseState=c),c}function ul(g,I,e){return dl(al(),g,I,e)}function sl(g){var I=ol();return"function"===typeof g&&(g=g()),I.memoizedState=I.baseState=g,g=(g=I.queue={pending:null,dispatch:null,lastRenderedReducer:il,lastRenderedState:g}).dispatch=fl.bind(null,$t,g),[I.memoizedState,g]}function ml(g,I,e,C){return g={tag:g,create:I,destroy:e,deps:C,next:null},null===(I=$t.updateQueue)?(I={lastEffect:null},$t.updateQueue=I,I.lastEffect=g.next=g):null===(e=I.lastEffect)?I.lastEffect=g.next=g:(C=e.next,e.next=g,g.next=C,I.lastEffect=g),g}function Zl(g){return g={current:g},ol().memoizedState=g}function bl(){return al().memoizedState}function pl(g,I,e,C){var n=ol();$t.flags|=g,n.memoizedState=ml(1|I,e,void 0,void 0===C?null:C)}function Gl(g,I,e,C){var n=al();C=void 0===C?null:C;var t=void 0;if(null!==gl){var l=gl.memoizedState;if(t=l.destroy,null!==C&&tl(C,l.deps))return void ml(I,e,t,C)}$t.flags|=g,n.memoizedState=ml(1|I,e,t,C)}function hl(g,I){return pl(516,4,g,I)}function yl(g,I){return Gl(516,4,g,I)}function Bl(g,I){return Gl(4,2,g,I)}function Wl(g,I){return"function"===typeof I?(g=g(),I(g),function(){I(null)}):null!==I&&void 0!==I?(g=g(),I.current=g,function(){I.current=null}):void 0}function Sl(g,I,e){return e=null!==e&&void 0!==e?e.concat([g]):null,Gl(4,2,Wl.bind(null,I,g),e)}function Vl(){}function vl(g,I){var e=al();I=void 0===I?null:I;var C=e.memoizedState;return null!==C&&null!==I&&tl(I,C[1])?C[0]:(e.memoizedState=[g,I],g)}function Rl(g,I){var e=al();I=void 0===I?null:I;var C=e.memoizedState;return null!==C&&null!==I&&tl(I,C[1])?C[0]:(g=g(),e.memoizedState=[g,I],g)}function Xl(g,I){var e=Qn();Tn(98>e?98:e,(function(){g(!0)})),Tn(97<e?97:e,(function(){var e=qt.transition;qt.transition=1;try{g(!1),I()}finally{qt.transition=e}}))}function fl(g,I,e){var C=Aa(),n=da(g),t={lane:n,action:e,eagerReducer:null,eagerState:null,next:null},l=I.pending;if(null===l?t.next=t:(t.next=l.next,l.next=t),I.pending=t,l=g.alternate,g===$t||null!==l&&l===$t)Cl=el=!0;else{if(0===g.lanes&&(null===l||0===l.lanes)&&null!==(l=I.lastRenderedReducer))try{var o=I.lastRenderedState,a=l(o,e);if(t.eagerReducer=l,t.eagerState=a,iC(a,o))return}catch(i){}ua(g,n,C)}}var kl={readContext:lt,useCallback:nl,useContext:nl,useEffect:nl,useImperativeHandle:nl,useLayoutEffect:nl,useMemo:nl,useReducer:nl,useRef:nl,useState:nl,useDebugValue:nl,useDeferredValue:nl,useTransition:nl,useMutableSource:nl,useOpaqueIdentifier:nl,unstable_isNewReconciler:!1},Jl={readContext:lt,useCallback:function(g,I){return ol().memoizedState=[g,void 0===I?null:I],g},useContext:lt,useEffect:hl,useImperativeHandle:function(g,I,e){return e=null!==e&&void 0!==e?e.concat([g]):null,pl(4,2,Wl.bind(null,I,g),e)},useLayoutEffect:function(g,I){return pl(4,2,g,I)},useMemo:function(g,I){var e=ol();return I=void 0===I?null:I,g=g(),e.memoizedState=[g,I],g},useReducer:function(g,I,e){var C=ol();return I=void 0!==e?e(I):I,C.memoizedState=C.baseState=I,g=(g=C.queue={pending:null,dispatch:null,lastRenderedReducer:g,lastRenderedState:I}).dispatch=fl.bind(null,$t,g),[C.memoizedState,g]},useRef:Zl,useState:sl,useDebugValue:Vl,useDeferredValue:function(g){var I=sl(g),e=I[0],C=I[1];return hl((function(){var I=qt.transition;qt.transition=1;try{C(g)}finally{qt.transition=I}}),[g]),e},useTransition:function(){var g=sl(!1),I=g[0];return Zl(g=Xl.bind(null,g[1])),[g,I]},useMutableSource:function(g,I,e){var C=ol();return C.memoizedState={refs:{getSnapshot:I,setSnapshot:null},source:g,subscribe:e},dl(C,g,I,e)},useOpaqueIdentifier:function(){if(Mt){var g=!1,I=function(g){return{$$typeof:w,toString:g,valueOf:g}}((function(){throw g||(g=!0,e("r:"+(PC++).toString(36))),Error(l(355))})),e=sl(I)[1];return 0===(2&$t.mode)&&($t.flags|=516,ml(5,(function(){e("r:"+(PC++).toString(36))}),void 0,null)),I}return sl(I="r:"+(PC++).toString(36)),I},unstable_isNewReconciler:!1},Yl={readContext:lt,useCallback:vl,useContext:lt,useEffect:yl,useImperativeHandle:Sl,useLayoutEffect:Bl,useMemo:Rl,useReducer:rl,useRef:bl,useState:function(){return rl(il)},useDebugValue:Vl,useDeferredValue:function(g){var I=rl(il),e=I[0],C=I[1];return yl((function(){var I=qt.transition;qt.transition=1;try{C(g)}finally{qt.transition=I}}),[g]),e},useTransition:function(){var g=rl(il)[0];return[bl().current,g]},useMutableSource:ul,useOpaqueIdentifier:function(){return rl(il)[0]},unstable_isNewReconciler:!1},Hl={readContext:lt,useCallback:vl,useContext:lt,useEffect:yl,useImperativeHandle:Sl,useLayoutEffect:Bl,useMemo:Rl,useReducer:cl,useRef:bl,useState:function(){return cl(il)},useDebugValue:Vl,useDeferredValue:function(g){var I=cl(il),e=I[0],C=I[1];return yl((function(){var I=qt.transition;qt.transition=1;try{C(g)}finally{qt.transition=I}}),[g]),e},useTransition:function(){var g=cl(il)[0];return[bl().current,g]},useMutableSource:ul,useOpaqueIdentifier:function(){return cl(il)[0]},unstable_isNewReconciler:!1},wl=h.ReactCurrentOwner,Kl=!1;function Fl(g,I,e,C){I.child=null===g?vt(I,null,e,C):Vt(I,g.child,e,C)}function Nl(g,I,e,C,n){e=e.render;var t=I.ref;return tt(I,n),C=ll(g,I,e,C,t,n),null===g||Kl?(I.flags|=1,Fl(g,I,C,n),I.child):(I.updateQueue=g.updateQueue,I.flags&=-517,g.lanes&=~n,no(g,I,n))}function xl(g,I,e,C,n,t){if(null===g){var l=e.type;return"function"!==typeof l||La(l)||void 0!==l.defaultProps||null!==e.compare||void 0!==e.defaultProps?((g=Da(e.type,null,C,I,I.mode,t)).ref=I.ref,g.return=I,I.child=g):(I.tag=15,I.type=l,zl(g,I,l,C,n,t))}return l=g.child,0===(n&t)&&(n=l.memoizedProps,(e=null!==(e=e.compare)?e:cC)(n,C)&&g.ref===I.ref)?no(g,I,t):(I.flags|=1,(g=Ta(l,C)).ref=I.ref,g.return=I,I.child=g)}function zl(g,I,e,C,n,t){if(null!==g&&cC(g.memoizedProps,C)&&g.ref===I.ref){if(Kl=!1,0===(t&n))return I.lanes=g.lanes,no(g,I,t);0!==(16384&g.flags)&&(Kl=!0)}return Ul(g,I,e,C,t)}function Ml(g,I,e){var C=I.pendingProps,n=C.children,t=null!==g?g.memoizedState:null;if("hidden"===C.mode||"unstable-defer-without-hiding"===C.mode)if(0===(4&I.mode))I.memoizedState={baseLanes:0},ya(I,e);else{if(0===(1073741824&e))return g=null!==t?t.baseLanes|e:e,I.lanes=I.childLanes=1073741824,I.memoizedState={baseLanes:g},ya(I,g),null;I.memoizedState={baseLanes:0},ya(I,null!==t?t.baseLanes:e)}else null!==t?(C=t.baseLanes|e,I.memoizedState=null):C=e,ya(I,C);return Fl(g,I,n,e),I.child}function El(g,I){var e=I.ref;(null===g&&null!==e||null!==g&&g.ref!==e)&&(I.flags|=128)}function Ul(g,I,e,C,n){var t=Zn(e)?sn:dn.current;return t=mn(I,t),tt(I,n),e=ll(g,I,e,C,t,n),null===g||Kl?(I.flags|=1,Fl(g,I,e,n),I.child):(I.updateQueue=g.updateQueue,I.flags&=-517,g.lanes&=~n,no(g,I,n))}function Ql(g,I,e,C,n){if(Zn(e)){var t=!0;hn(I)}else t=!1;if(tt(I,n),null===I.stateNode)null!==g&&(g.alternate=null,I.alternate=null,I.flags|=2),pt(I,e,C),ht(I,e,C,n),C=!0;else if(null===g){var l=I.stateNode,o=I.memoizedProps;l.props=o;var a=l.context,i=e.contextType;"object"===typeof i&&null!==i?i=lt(i):i=mn(I,i=Zn(e)?sn:dn.current);var r=e.getDerivedStateFromProps,c="function"===typeof r||"function"===typeof l.getSnapshotBeforeUpdate;c||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(o!==C||a!==i)&&Gt(I,l,C,i),ot=!1;var A=I.memoizedState;l.state=A,dt(I,C,l,n),a=I.memoizedState,o!==C||A!==a||un.current||ot?("function"===typeof r&&(mt(I,e,r,C),a=I.memoizedState),(o=ot||bt(I,e,o,C,A,a,i))?(c||"function"!==typeof l.UNSAFE_componentWillMount&&"function"!==typeof l.componentWillMount||("function"===typeof l.componentWillMount&&l.componentWillMount(),"function"===typeof l.UNSAFE_componentWillMount&&l.UNSAFE_componentWillMount()),"function"===typeof l.componentDidMount&&(I.flags|=4)):("function"===typeof l.componentDidMount&&(I.flags|=4),I.memoizedProps=C,I.memoizedState=a),l.props=C,l.state=a,l.context=i,C=o):("function"===typeof l.componentDidMount&&(I.flags|=4),C=!1)}else{l=I.stateNode,it(g,I),o=I.memoizedProps,i=I.type===I.elementType?o:qn(I.type,o),l.props=i,c=I.pendingProps,A=l.context,"object"===typeof(a=e.contextType)&&null!==a?a=lt(a):a=mn(I,a=Zn(e)?sn:dn.current);var d=e.getDerivedStateFromProps;(r="function"===typeof d||"function"===typeof l.getSnapshotBeforeUpdate)||"function"!==typeof l.UNSAFE_componentWillReceiveProps&&"function"!==typeof l.componentWillReceiveProps||(o!==c||A!==a)&&Gt(I,l,C,a),ot=!1,A=I.memoizedState,l.state=A,dt(I,C,l,n);var u=I.memoizedState;o!==c||A!==u||un.current||ot?("function"===typeof d&&(mt(I,e,d,C),u=I.memoizedState),(i=ot||bt(I,e,i,C,A,u,a))?(r||"function"!==typeof l.UNSAFE_componentWillUpdate&&"function"!==typeof l.componentWillUpdate||("function"===typeof l.componentWillUpdate&&l.componentWillUpdate(C,u,a),"function"===typeof l.UNSAFE_componentWillUpdate&&l.UNSAFE_componentWillUpdate(C,u,a)),"function"===typeof l.componentDidUpdate&&(I.flags|=4),"function"===typeof l.getSnapshotBeforeUpdate&&(I.flags|=256)):("function"!==typeof l.componentDidUpdate||o===g.memoizedProps&&A===g.memoizedState||(I.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||o===g.memoizedProps&&A===g.memoizedState||(I.flags|=256),I.memoizedProps=C,I.memoizedState=u),l.props=C,l.state=u,l.context=a,C=i):("function"!==typeof l.componentDidUpdate||o===g.memoizedProps&&A===g.memoizedState||(I.flags|=4),"function"!==typeof l.getSnapshotBeforeUpdate||o===g.memoizedProps&&A===g.memoizedState||(I.flags|=256),C=!1)}return Ll(g,I,e,C,t,n)}function Ll(g,I,e,C,n,t){El(g,I);var l=0!==(64&I.flags);if(!C&&!l)return n&&yn(I,e,!1),no(g,I,t);C=I.stateNode,wl.current=I;var o=l&&"function"!==typeof e.getDerivedStateFromError?null:C.render();return I.flags|=1,null!==g&&l?(I.child=Vt(I,g.child,null,t),I.child=Vt(I,null,o,t)):Fl(g,I,o,t),I.memoizedState=C.state,n&&yn(I,e,!0),I.child}function Tl(g){var I=g.stateNode;I.pendingContext?pn(0,I.pendingContext,I.pendingContext!==I.context):I.context&&pn(0,I.context,!1),Yt(g,I.containerInfo)}var Dl,jl,Pl,Ol={dehydrated:null,retryLane:0};function ql(g,I,e){var C,n=I.pendingProps,t=Ft.current,l=!1;return(C=0!==(64&I.flags))||(C=(null===g||null!==g.memoizedState)&&0!==(2&t)),C?(l=!0,I.flags&=-65):null!==g&&null===g.memoizedState||void 0===n.fallback||!0===n.unstable_avoidThisFallback||(t|=1),cn(Ft,1&t),null===g?(void 0!==n.fallback&&Qt(I),g=n.children,t=n.fallback,l?(g=_l(I,g,t,e),I.child.memoizedState={baseLanes:e},I.memoizedState=Ol,g):"number"===typeof n.unstable_expectedLoadTime?(g=_l(I,g,t,e),I.child.memoizedState={baseLanes:e},I.memoizedState=Ol,I.lanes=33554432,g):((e=Pa({mode:"visible",children:g},I.mode,e,null)).return=I,I.child=e)):(g.memoizedState,l?(n=go(g,I,n.children,n.fallback,e),l=I.child,t=g.child.memoizedState,l.memoizedState=null===t?{baseLanes:e}:{baseLanes:t.baseLanes|e},l.childLanes=g.childLanes&~e,I.memoizedState=Ol,n):(e=$l(g,I,n.children,e),I.memoizedState=null,e))}function _l(g,I,e,C){var n=g.mode,t=g.child;return I={mode:"hidden",children:I},0===(2&n)&&null!==t?(t.childLanes=0,t.pendingProps=I):t=Pa(I,n,0,null),e=ja(e,n,C,null),t.return=g,e.return=g,t.sibling=e,g.child=t,e}function $l(g,I,e,C){var n=g.child;return g=n.sibling,e=Ta(n,{mode:"visible",children:e}),0===(2&I.mode)&&(e.lanes=C),e.return=I,e.sibling=null,null!==g&&(g.nextEffect=null,g.flags=8,I.firstEffect=I.lastEffect=g),I.child=e}function go(g,I,e,C,n){var t=I.mode,l=g.child;g=l.sibling;var o={mode:"hidden",children:e};return 0===(2&t)&&I.child!==l?((e=I.child).childLanes=0,e.pendingProps=o,null!==(l=e.lastEffect)?(I.firstEffect=e.firstEffect,I.lastEffect=l,l.nextEffect=null):I.firstEffect=I.lastEffect=null):e=Ta(l,o),null!==g?C=Ta(g,C):(C=ja(C,t,n,null)).flags|=2,C.return=I,e.return=I,e.sibling=C,I.child=e,C}function Io(g,I){g.lanes|=I;var e=g.alternate;null!==e&&(e.lanes|=I),nt(g.return,I)}function eo(g,I,e,C,n,t){var l=g.memoizedState;null===l?g.memoizedState={isBackwards:I,rendering:null,renderingStartTime:0,last:C,tail:e,tailMode:n,lastEffect:t}:(l.isBackwards=I,l.rendering=null,l.renderingStartTime=0,l.last=C,l.tail=e,l.tailMode=n,l.lastEffect=t)}function Co(g,I,e){var C=I.pendingProps,n=C.revealOrder,t=C.tail;if(Fl(g,I,C.children,e),0!==(2&(C=Ft.current)))C=1&C|2,I.flags|=64;else{if(null!==g&&0!==(64&g.flags))g:for(g=I.child;null!==g;){if(13===g.tag)null!==g.memoizedState&&Io(g,e);else if(19===g.tag)Io(g,e);else if(null!==g.child){g.child.return=g,g=g.child;continue}if(g===I)break g;for(;null===g.sibling;){if(null===g.return||g.return===I)break g;g=g.return}g.sibling.return=g.return,g=g.sibling}C&=1}if(cn(Ft,C),0===(2&I.mode))I.memoizedState=null;else switch(n){case"forwards":for(e=I.child,n=null;null!==e;)null!==(g=e.alternate)&&null===Nt(g)&&(n=e),e=e.sibling;null===(e=n)?(n=I.child,I.child=null):(n=e.sibling,e.sibling=null),eo(I,!1,n,e,t,I.lastEffect);break;case"backwards":for(e=null,n=I.child,I.child=null;null!==n;){if(null!==(g=n.alternate)&&null===Nt(g)){I.child=n;break}g=n.sibling,n.sibling=e,e=n,n=g}eo(I,!0,e,null,t,I.lastEffect);break;case"together":eo(I,!1,null,null,void 0,I.lastEffect);break;default:I.memoizedState=null}return I.child}function no(g,I,e){if(null!==g&&(I.dependencies=g.dependencies),Mo|=I.lanes,0!==(e&I.childLanes)){if(null!==g&&I.child!==g.child)throw Error(l(153));if(null!==I.child){for(e=Ta(g=I.child,g.pendingProps),I.child=e,e.return=I;null!==g.sibling;)g=g.sibling,(e=e.sibling=Ta(g,g.pendingProps)).return=I;e.sibling=null}return I.child}return null}function to(g,I){if(!Mt)switch(g.tailMode){case"hidden":I=g.tail;for(var e=null;null!==I;)null!==I.alternate&&(e=I),I=I.sibling;null===e?g.tail=null:e.sibling=null;break;case"collapsed":e=g.tail;for(var C=null;null!==e;)null!==e.alternate&&(C=e),e=e.sibling;null===C?I||null===g.tail?g.tail=null:g.tail.sibling=null:C.sibling=null}}function lo(g,I,e){var C=I.pendingProps;switch(I.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:case 17:return Zn(I.type)&&bn(),null;case 3:return Ht(),rn(un),rn(dn),Pt(),(C=I.stateNode).pendingContext&&(C.context=C.pendingContext,C.pendingContext=null),null!==g&&null!==g.child||(Tt(I)?I.flags|=4:C.hydrate||(I.flags|=256)),null;case 5:Kt(I);var t=Jt(kt.current);if(e=I.type,null!==g&&null!=I.stateNode)jl(g,I,e,C),g.ref!==I.ref&&(I.flags|=128);else{if(!C){if(null===I.stateNode)throw Error(l(166));return null}if(g=Jt(Xt.current),Tt(I)){C=I.stateNode,e=I.type;var o=I.memoizedProps;switch(C[qC]=I,C[_C]=o,e){case"dialog":XC("cancel",C),XC("close",C);break;case"iframe":case"object":case"embed":XC("load",C);break;case"video":case"audio":for(g=0;g<SC.length;g++)XC(SC[g],C);break;case"source":XC("error",C);break;case"img":case"image":case"link":XC("error",C),XC("load",C);break;case"details":XC("toggle",C);break;case"input":gg(C,o),XC("invalid",C);break;case"select":C._wrapperState={wasMultiple:!!o.multiple},XC("invalid",C);break;case"textarea":ag(C,o),XC("invalid",C)}for(var i in Wg(e,o),g=null,o)o.hasOwnProperty(i)&&(t=o[i],"children"===i?"string"===typeof t?C.textContent!==t&&(g=["children",t]):"number"===typeof t&&C.textContent!==""+t&&(g=["children",""+t]):a.hasOwnProperty(i)&&null!=t&&"onScroll"===i&&XC("scroll",C));switch(e){case"input":O(C),Cg(C,o,!0);break;case"textarea":O(C),rg(C);break;case"select":case"option":break;default:"function"===typeof o.onClick&&(C.onclick=xC)}C=g,I.updateQueue=C,null!==C&&(I.flags|=4)}else{switch(i=9===t.nodeType?t:t.ownerDocument,g===cg&&(g=dg(e)),g===cg?"script"===e?((g=i.createElement("div")).innerHTML="<script><\/script>",g=g.removeChild(g.firstChild)):"string"===typeof C.is?g=i.createElement(e,{is:C.is}):(g=i.createElement(e),"select"===e&&(i=g,C.multiple?i.multiple=!0:C.size&&(i.size=C.size))):g=i.createElementNS(g,e),g[qC]=I,g[_C]=C,Dl(g,I),I.stateNode=g,i=Sg(e,C),e){case"dialog":XC("cancel",g),XC("close",g),t=C;break;case"iframe":case"object":case"embed":XC("load",g),t=C;break;case"video":case"audio":for(t=0;t<SC.length;t++)XC(SC[t],g);t=C;break;case"source":XC("error",g),t=C;break;case"img":case"image":case"link":XC("error",g),XC("load",g),t=C;break;case"details":XC("toggle",g),t=C;break;case"input":gg(g,C),t=$(g,C),XC("invalid",g);break;case"option":t=tg(g,C);break;case"select":g._wrapperState={wasMultiple:!!C.multiple},t=n({},C,{value:void 0}),XC("invalid",g);break;case"textarea":ag(g,C),t=og(g,C),XC("invalid",g);break;default:t=C}Wg(e,t);var r=t;for(o in r)if(r.hasOwnProperty(o)){var c=r[o];"style"===o?yg(g,c):"dangerouslySetInnerHTML"===o?null!=(c=c?c.__html:void 0)&&Zg(g,c):"children"===o?"string"===typeof c?("textarea"!==e||""!==c)&&bg(g,c):"number"===typeof c&&bg(g,""+c):"suppressContentEditableWarning"!==o&&"suppressHydrationWarning"!==o&&"autoFocus"!==o&&(a.hasOwnProperty(o)?null!=c&&"onScroll"===o&&XC("scroll",g):null!=c&&G(g,o,c,i))}switch(e){case"input":O(g),Cg(g,C,!1);break;case"textarea":O(g),rg(g);break;case"option":null!=C.value&&g.setAttribute("value",""+j(C.value));break;case"select":g.multiple=!!C.multiple,null!=(o=C.value)?lg(g,!!C.multiple,o,!1):null!=C.defaultValue&&lg(g,!!C.multiple,C.defaultValue,!0);break;default:"function"===typeof t.onClick&&(g.onclick=xC)}EC(e,C)&&(I.flags|=4)}null!==I.ref&&(I.flags|=128)}return null;case 6:if(g&&null!=I.stateNode)Pl(0,I,g.memoizedProps,C);else{if("string"!==typeof C&&null===I.stateNode)throw Error(l(166));e=Jt(kt.current),Jt(Xt.current),Tt(I)?(C=I.stateNode,e=I.memoizedProps,C[qC]=I,C.nodeValue!==e&&(I.flags|=4)):((C=(9===e.nodeType?e:e.ownerDocument).createTextNode(C))[qC]=I,I.stateNode=C)}return null;case 13:return rn(Ft),C=I.memoizedState,0!==(64&I.flags)?(I.lanes=e,I):(C=null!==C,e=!1,null===g?void 0!==I.memoizedProps.fallback&&Tt(I):e=null!==g.memoizedState,C&&!e&&0!==(2&I.mode)&&(null===g&&!0!==I.memoizedProps.unstable_avoidThisFallback||0!==(1&Ft.current)?0===No&&(No=3):(0!==No&&3!==No||(No=4),null===Yo||0===(134217727&Mo)&&0===(134217727&Eo)||ba(Yo,wo))),(C||e)&&(I.flags|=4),null);case 4:return Ht(),null===g&&kC(I.stateNode.containerInfo),null;case 10:return Ct(I),null;case 19:if(rn(Ft),null===(C=I.memoizedState))return null;if(o=0!==(64&I.flags),null===(i=C.rendering))if(o)to(C,!1);else{if(0!==No||null!==g&&0!==(64&g.flags))for(g=I.child;null!==g;){if(null!==(i=Nt(g))){for(I.flags|=64,to(C,!1),null!==(o=i.updateQueue)&&(I.updateQueue=o,I.flags|=4),null===C.lastEffect&&(I.firstEffect=null),I.lastEffect=C.lastEffect,C=e,e=I.child;null!==e;)g=C,(o=e).flags&=2,o.nextEffect=null,o.firstEffect=null,o.lastEffect=null,null===(i=o.alternate)?(o.childLanes=0,o.lanes=g,o.child=null,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=i.childLanes,o.lanes=i.lanes,o.child=i.child,o.memoizedProps=i.memoizedProps,o.memoizedState=i.memoizedState,o.updateQueue=i.updateQueue,o.type=i.type,g=i.dependencies,o.dependencies=null===g?null:{lanes:g.lanes,firstContext:g.firstContext}),e=e.sibling;return cn(Ft,1&Ft.current|2),I.child}g=g.sibling}null!==C.tail&&Un()>To&&(I.flags|=64,o=!0,to(C,!1),I.lanes=33554432)}else{if(!o)if(null!==(g=Nt(i))){if(I.flags|=64,o=!0,null!==(e=g.updateQueue)&&(I.updateQueue=e,I.flags|=4),to(C,!0),null===C.tail&&"hidden"===C.tailMode&&!i.alternate&&!Mt)return null!==(I=I.lastEffect=C.lastEffect)&&(I.nextEffect=null),null}else 2*Un()-C.renderingStartTime>To&&1073741824!==e&&(I.flags|=64,o=!0,to(C,!1),I.lanes=33554432);C.isBackwards?(i.sibling=I.child,I.child=i):(null!==(e=C.last)?e.sibling=i:I.child=i,C.last=i)}return null!==C.tail?(e=C.tail,C.rendering=e,C.tail=e.sibling,C.lastEffect=I.lastEffect,C.renderingStartTime=Un(),e.sibling=null,I=Ft.current,cn(Ft,o?1&I|2:1&I),e):null;case 23:case 24:return Ba(),null!==g&&null!==g.memoizedState!==(null!==I.memoizedState)&&"unstable-defer-without-hiding"!==C.mode&&(I.flags|=4),null}throw Error(l(156,I.tag))}function oo(g){switch(g.tag){case 1:Zn(g.type)&&bn();var I=g.flags;return 4096&I?(g.flags=-4097&I|64,g):null;case 3:if(Ht(),rn(un),rn(dn),Pt(),0!==(64&(I=g.flags)))throw Error(l(285));return g.flags=-4097&I|64,g;case 5:return Kt(g),null;case 13:return rn(Ft),4096&(I=g.flags)?(g.flags=-4097&I|64,g):null;case 19:return rn(Ft),null;case 4:return Ht(),null;case 10:return Ct(g),null;case 23:case 24:return Ba(),null;default:return null}}function ao(g,I){try{var e="",C=I;do{e+=T(C),C=C.return}while(C);var n=e}catch(t){n="\nError generating stack: "+t.message+"\n"+t.stack}return{value:g,source:I,stack:n}}function io(g,I){try{console.error(I.value)}catch(e){setTimeout((function(){throw e}))}}Dl=function(g,I){for(var e=I.child;null!==e;){if(5===e.tag||6===e.tag)g.appendChild(e.stateNode);else if(4!==e.tag&&null!==e.child){e.child.return=e,e=e.child;continue}if(e===I)break;for(;null===e.sibling;){if(null===e.return||e.return===I)return;e=e.return}e.sibling.return=e.return,e=e.sibling}},jl=function(g,I,e,C){var t=g.memoizedProps;if(t!==C){g=I.stateNode,Jt(Xt.current);var l,o=null;switch(e){case"input":t=$(g,t),C=$(g,C),o=[];break;case"option":t=tg(g,t),C=tg(g,C),o=[];break;case"select":t=n({},t,{value:void 0}),C=n({},C,{value:void 0}),o=[];break;case"textarea":t=og(g,t),C=og(g,C),o=[];break;default:"function"!==typeof t.onClick&&"function"===typeof C.onClick&&(g.onclick=xC)}for(c in Wg(e,C),e=null,t)if(!C.hasOwnProperty(c)&&t.hasOwnProperty(c)&&null!=t[c])if("style"===c){var i=t[c];for(l in i)i.hasOwnProperty(l)&&(e||(e={}),e[l]="")}else"dangerouslySetInnerHTML"!==c&&"children"!==c&&"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&"autoFocus"!==c&&(a.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in C){var r=C[c];if(i=null!=t?t[c]:void 0,C.hasOwnProperty(c)&&r!==i&&(null!=r||null!=i))if("style"===c)if(i){for(l in i)!i.hasOwnProperty(l)||r&&r.hasOwnProperty(l)||(e||(e={}),e[l]="");for(l in r)r.hasOwnProperty(l)&&i[l]!==r[l]&&(e||(e={}),e[l]=r[l])}else e||(o||(o=[]),o.push(c,e)),e=r;else"dangerouslySetInnerHTML"===c?(r=r?r.__html:void 0,i=i?i.__html:void 0,null!=r&&i!==r&&(o=o||[]).push(c,r)):"children"===c?"string"!==typeof r&&"number"!==typeof r||(o=o||[]).push(c,""+r):"suppressContentEditableWarning"!==c&&"suppressHydrationWarning"!==c&&(a.hasOwnProperty(c)?(null!=r&&"onScroll"===c&&XC("scroll",g),o||i===r||(o=[])):"object"===typeof r&&null!==r&&r.$$typeof===w?r.toString():(o=o||[]).push(c,r))}e&&(o=o||[]).push("style",e);var c=o;(I.updateQueue=c)&&(I.flags|=4)}},Pl=function(g,I,e,C){e!==C&&(I.flags|=4)};var ro="function"===typeof WeakMap?WeakMap:Map;function co(g,I,e){(e=rt(-1,e)).tag=3,e.payload={element:null};var C=I.value;return e.callback=function(){Oo||(Oo=!0,qo=C),io(0,I)},e}function Ao(g,I,e){(e=rt(-1,e)).tag=3;var C=g.type.getDerivedStateFromError;if("function"===typeof C){var n=I.value;e.payload=function(){return io(0,I),C(n)}}var t=g.stateNode;return null!==t&&"function"===typeof t.componentDidCatch&&(e.callback=function(){"function"!==typeof C&&(null===_o?_o=new Set([this]):_o.add(this),io(0,I));var g=I.stack;this.componentDidCatch(I.value,{componentStack:null!==g?g:""})}),e}var uo="function"===typeof WeakSet?WeakSet:Set;function so(g){var I=g.ref;if(null!==I)if("function"===typeof I)try{I(null)}catch(e){za(g,e)}else I.current=null}function mo(g,I){switch(I.tag){case 0:case 11:case 15:case 22:case 5:case 6:case 4:case 17:return;case 1:if(256&I.flags&&null!==g){var e=g.memoizedProps,C=g.memoizedState;I=(g=I.stateNode).getSnapshotBeforeUpdate(I.elementType===I.type?e:qn(I.type,e),C),g.__reactInternalSnapshotBeforeUpdate=I}return;case 3:return void(256&I.flags&&TC(I.stateNode.containerInfo))}throw Error(l(163))}function Zo(g,I,e){switch(e.tag){case 0:case 11:case 15:case 22:if(null!==(I=null!==(I=e.updateQueue)?I.lastEffect:null)){g=I=I.next;do{if(3===(3&g.tag)){var C=g.create;g.destroy=C()}g=g.next}while(g!==I)}if(null!==(I=null!==(I=e.updateQueue)?I.lastEffect:null)){g=I=I.next;do{var n=g;C=n.next,0!==(4&(n=n.tag))&&0!==(1&n)&&(Fa(e,g),Ka(e,g)),g=C}while(g!==I)}return;case 1:return g=e.stateNode,4&e.flags&&(null===I?g.componentDidMount():(C=e.elementType===e.type?I.memoizedProps:qn(e.type,I.memoizedProps),g.componentDidUpdate(C,I.memoizedState,g.__reactInternalSnapshotBeforeUpdate))),void(null!==(I=e.updateQueue)&&ut(e,I,g));case 3:if(null!==(I=e.updateQueue)){if(g=null,null!==e.child)switch(e.child.tag){case 5:case 1:g=e.child.stateNode}ut(e,I,g)}return;case 5:return g=e.stateNode,void(null===I&&4&e.flags&&EC(e.type,e.memoizedProps)&&g.focus());case 6:case 4:case 12:case 19:case 17:case 20:case 21:case 23:case 24:return;case 13:return void(null===e.memoizedState&&(e=e.alternate,null!==e&&(e=e.memoizedState,null!==e&&(e=e.dehydrated,null!==e&&yI(e)))))}throw Error(l(163))}function bo(g,I){for(var e=g;;){if(5===e.tag){var C=e.stateNode;if(I)"function"===typeof(C=C.style).setProperty?C.setProperty("display","none","important"):C.display="none";else{C=e.stateNode;var n=e.memoizedProps.style;n=void 0!==n&&null!==n&&n.hasOwnProperty("display")?n.display:null,C.style.display=hg("display",n)}}else if(6===e.tag)e.stateNode.nodeValue=I?"":e.memoizedProps;else if((23!==e.tag&&24!==e.tag||null===e.memoizedState||e===g)&&null!==e.child){e.child.return=e,e=e.child;continue}if(e===g)break;for(;null===e.sibling;){if(null===e.return||e.return===g)return;e=e.return}e.sibling.return=e.return,e=e.sibling}}function po(g,I){if(Wn&&"function"===typeof Wn.onCommitFiberUnmount)try{Wn.onCommitFiberUnmount(Bn,I)}catch(t){}switch(I.tag){case 0:case 11:case 14:case 15:case 22:if(null!==(g=I.updateQueue)&&null!==(g=g.lastEffect)){var e=g=g.next;do{var C=e,n=C.destroy;if(C=C.tag,void 0!==n)if(0!==(4&C))Fa(I,e);else{C=I;try{n()}catch(t){za(C,t)}}e=e.next}while(e!==g)}break;case 1:if(so(I),"function"===typeof(g=I.stateNode).componentWillUnmount)try{g.props=I.memoizedProps,g.state=I.memoizedState,g.componentWillUnmount()}catch(t){za(I,t)}break;case 5:so(I);break;case 4:So(g,I)}}function Go(g){g.alternate=null,g.child=null,g.dependencies=null,g.firstEffect=null,g.lastEffect=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.return=null,g.updateQueue=null}function ho(g){return 5===g.tag||3===g.tag||4===g.tag}function yo(g){g:{for(var I=g.return;null!==I;){if(ho(I))break g;I=I.return}throw Error(l(160))}var e=I;switch(I=e.stateNode,e.tag){case 5:var C=!1;break;case 3:case 4:I=I.containerInfo,C=!0;break;default:throw Error(l(161))}16&e.flags&&(bg(I,""),e.flags&=-17);g:I:for(e=g;;){for(;null===e.sibling;){if(null===e.return||ho(e.return)){e=null;break g}e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue I;if(null===e.child||4===e.tag)continue I;e.child.return=e,e=e.child}if(!(2&e.flags)){e=e.stateNode;break g}}C?Bo(g,e,I):Wo(g,e,I)}function Bo(g,I,e){var C=g.tag,n=5===C||6===C;if(n)g=n?g.stateNode:g.stateNode.instance,I?8===e.nodeType?e.parentNode.insertBefore(g,I):e.insertBefore(g,I):(8===e.nodeType?(I=e.parentNode).insertBefore(g,e):(I=e).appendChild(g),null!==(e=e._reactRootContainer)&&void 0!==e||null!==I.onclick||(I.onclick=xC));else if(4!==C&&null!==(g=g.child))for(Bo(g,I,e),g=g.sibling;null!==g;)Bo(g,I,e),g=g.sibling}function Wo(g,I,e){var C=g.tag,n=5===C||6===C;if(n)g=n?g.stateNode:g.stateNode.instance,I?e.insertBefore(g,I):e.appendChild(g);else if(4!==C&&null!==(g=g.child))for(Wo(g,I,e),g=g.sibling;null!==g;)Wo(g,I,e),g=g.sibling}function So(g,I){for(var e,C,n=I,t=!1;;){if(!t){t=n.return;g:for(;;){if(null===t)throw Error(l(160));switch(e=t.stateNode,t.tag){case 5:C=!1;break g;case 3:case 4:e=e.containerInfo,C=!0;break g}t=t.return}t=!0}if(5===n.tag||6===n.tag){g:for(var o=g,a=n,i=a;;)if(po(o,i),null!==i.child&&4!==i.tag)i.child.return=i,i=i.child;else{if(i===a)break g;for(;null===i.sibling;){if(null===i.return||i.return===a)break g;i=i.return}i.sibling.return=i.return,i=i.sibling}C?(o=e,a=n.stateNode,8===o.nodeType?o.parentNode.removeChild(a):o.removeChild(a)):e.removeChild(n.stateNode)}else if(4===n.tag){if(null!==n.child){e=n.stateNode.containerInfo,C=!0,n.child.return=n,n=n.child;continue}}else if(po(g,n),null!==n.child){n.child.return=n,n=n.child;continue}if(n===I)break;for(;null===n.sibling;){if(null===n.return||n.return===I)return;4===(n=n.return).tag&&(t=!1)}n.sibling.return=n.return,n=n.sibling}}function Vo(g,I){switch(I.tag){case 0:case 11:case 14:case 15:case 22:var e=I.updateQueue;if(null!==(e=null!==e?e.lastEffect:null)){var C=e=e.next;do{3===(3&C.tag)&&(g=C.destroy,C.destroy=void 0,void 0!==g&&g()),C=C.next}while(C!==e)}return;case 1:case 12:case 17:return;case 5:if(null!=(e=I.stateNode)){C=I.memoizedProps;var n=null!==g?g.memoizedProps:C;g=I.type;var t=I.updateQueue;if(I.updateQueue=null,null!==t){for(e[_C]=C,"input"===g&&"radio"===C.type&&null!=C.name&&Ig(e,C),Sg(g,n),I=Sg(g,C),n=0;n<t.length;n+=2){var o=t[n],a=t[n+1];"style"===o?yg(e,a):"dangerouslySetInnerHTML"===o?Zg(e,a):"children"===o?bg(e,a):G(e,o,a,I)}switch(g){case"input":eg(e,C);break;case"textarea":ig(e,C);break;case"select":g=e._wrapperState.wasMultiple,e._wrapperState.wasMultiple=!!C.multiple,null!=(t=C.value)?lg(e,!!C.multiple,t,!1):g!==!!C.multiple&&(null!=C.defaultValue?lg(e,!!C.multiple,C.defaultValue,!0):lg(e,!!C.multiple,C.multiple?[]:"",!1))}}}return;case 6:if(null===I.stateNode)throw Error(l(162));return void(I.stateNode.nodeValue=I.memoizedProps);case 3:return void((e=I.stateNode).hydrate&&(e.hydrate=!1,yI(e.containerInfo)));case 13:return null!==I.memoizedState&&(Lo=Un(),bo(I.child,!0)),void vo(I);case 19:return void vo(I);case 23:case 24:return void bo(I,null!==I.memoizedState)}throw Error(l(163))}function vo(g){var I=g.updateQueue;if(null!==I){g.updateQueue=null;var e=g.stateNode;null===e&&(e=g.stateNode=new uo),I.forEach((function(I){var C=Ea.bind(null,g,I);e.has(I)||(e.add(I),I.then(C,C))}))}}function Ro(g,I){return null!==g&&(null===(g=g.memoizedState)||null!==g.dehydrated)&&(null!==(I=I.memoizedState)&&null===I.dehydrated)}var Xo=Math.ceil,fo=h.ReactCurrentDispatcher,ko=h.ReactCurrentOwner,Jo=0,Yo=null,Ho=null,wo=0,Ko=0,Fo=an(0),No=0,xo=null,zo=0,Mo=0,Eo=0,Uo=0,Qo=null,Lo=0,To=1/0;function Do(){To=Un()+500}var jo,Po=null,Oo=!1,qo=null,_o=null,$o=!1,ga=null,Ia=90,ea=[],Ca=[],na=null,ta=0,la=null,oa=-1,aa=0,ia=0,ra=null,ca=!1;function Aa(){return 0!==(48&Jo)?Un():-1!==oa?oa:oa=Un()}function da(g){if(0===(2&(g=g.mode)))return 1;if(0===(4&g))return 99===Qn()?1:2;if(0===aa&&(aa=zo),0!==On.transition){0!==ia&&(ia=null!==Qo?Qo.pendingLanes:0),g=aa;var I=4186112&~ia;return 0===(I&=-I)&&(0===(I=(g=4186112&~g)&-g)&&(I=8192)),I}return g=Qn(),0!==(4&Jo)&&98===g?g=zI(12,aa):g=zI(g=function(g){switch(g){case 99:return 15;case 98:return 10;case 97:case 96:return 8;case 95:return 2;default:return 0}}(g),aa),g}function ua(g,I,e){if(50<ta)throw ta=0,la=null,Error(l(185));if(null===(g=sa(g,I)))return null;UI(g,I,e),g===Yo&&(Eo|=I,4===No&&ba(g,wo));var C=Qn();1===I?0!==(8&Jo)&&0===(48&Jo)?pa(g):(ma(g,e),0===Jo&&(Do(),jn())):(0===(4&Jo)||98!==C&&99!==C||(null===na?na=new Set([g]):na.add(g)),ma(g,e)),Qo=g}function sa(g,I){g.lanes|=I;var e=g.alternate;for(null!==e&&(e.lanes|=I),e=g,g=g.return;null!==g;)g.childLanes|=I,null!==(e=g.alternate)&&(e.childLanes|=I),e=g,g=g.return;return 3===e.tag?e.stateNode:null}function ma(g,I){for(var e=g.callbackNode,C=g.suspendedLanes,n=g.pingedLanes,t=g.expirationTimes,o=g.pendingLanes;0<o;){var a=31-QI(o),i=1<<a,r=t[a];if(-1===r){if(0===(i&C)||0!==(i&n)){r=I,FI(i);var c=KI;t[a]=10<=c?r+250:6<=c?r+5e3:-1}}else r<=I&&(g.expiredLanes|=i);o&=~i}if(C=NI(g,g===Yo?wo:0),I=KI,0===C)null!==e&&(e!==Fn&&vn(e),g.callbackNode=null,g.callbackPriority=0);else{if(null!==e){if(g.callbackPriority===I)return;e!==Fn&&vn(e)}15===I?(e=pa.bind(null,g),null===xn?(xn=[e],zn=Vn(Jn,Pn)):xn.push(e),e=Fn):14===I?e=Dn(99,pa.bind(null,g)):(e=function(g){switch(g){case 15:case 14:return 99;case 13:case 12:case 11:case 10:return 98;case 9:case 8:case 7:case 6:case 4:case 5:return 97;case 3:case 2:case 1:return 95;case 0:return 90;default:throw Error(l(358,g))}}(I),e=Dn(e,Za.bind(null,g))),g.callbackPriority=I,g.callbackNode=e}}function Za(g){if(oa=-1,ia=aa=0,0!==(48&Jo))throw Error(l(327));var I=g.callbackNode;if(wa()&&g.callbackNode!==I)return null;var e=NI(g,g===Yo?wo:0);if(0===e)return null;var C=e,n=Jo;Jo|=16;var t=Va();for(Yo===g&&wo===C||(Do(),Wa(g,C));;)try{Xa();break}catch(a){Sa(g,a)}if(et(),fo.current=t,Jo=n,null!==Ho?C=0:(Yo=null,wo=0,C=No),0!==(zo&Eo))Wa(g,0);else if(0!==C){if(2===C&&(Jo|=64,g.hydrate&&(g.hydrate=!1,TC(g.containerInfo)),0!==(e=xI(g))&&(C=va(g,e))),1===C)throw I=xo,Wa(g,0),ba(g,e),ma(g,Un()),I;switch(g.finishedWork=g.current.alternate,g.finishedLanes=e,C){case 0:case 1:throw Error(l(345));case 2:case 5:Ja(g);break;case 3:if(ba(g,e),(62914560&e)===e&&10<(C=Lo+500-Un())){if(0!==NI(g,0))break;if(((n=g.suspendedLanes)&e)!==e){Aa(),g.pingedLanes|=g.suspendedLanes&n;break}g.timeoutHandle=QC(Ja.bind(null,g),C);break}Ja(g);break;case 4:if(ba(g,e),(4186112&e)===e)break;for(C=g.eventTimes,n=-1;0<e;){var o=31-QI(e);t=1<<o,(o=C[o])>n&&(n=o),e&=~t}if(e=n,10<(e=(120>(e=Un()-e)?120:480>e?480:1080>e?1080:1920>e?1920:3e3>e?3e3:4320>e?4320:1960*Xo(e/1960))-e)){g.timeoutHandle=QC(Ja.bind(null,g),e);break}Ja(g);break;default:throw Error(l(329))}}return ma(g,Un()),g.callbackNode===I?Za.bind(null,g):null}function ba(g,I){for(I&=~Uo,I&=~Eo,g.suspendedLanes|=I,g.pingedLanes&=~I,g=g.expirationTimes;0<I;){var e=31-QI(I),C=1<<e;g[e]=-1,I&=~C}}function pa(g){if(0!==(48&Jo))throw Error(l(327));if(wa(),g===Yo&&0!==(g.expiredLanes&wo)){var I=wo,e=va(g,I);0!==(zo&Eo)&&(e=va(g,I=NI(g,I)))}else e=va(g,I=NI(g,0));if(0!==g.tag&&2===e&&(Jo|=64,g.hydrate&&(g.hydrate=!1,TC(g.containerInfo)),0!==(I=xI(g))&&(e=va(g,I))),1===e)throw e=xo,Wa(g,0),ba(g,I),ma(g,Un()),e;return g.finishedWork=g.current.alternate,g.finishedLanes=I,Ja(g),ma(g,Un()),null}function Ga(g,I){var e=Jo;Jo|=1;try{return g(I)}finally{0===(Jo=e)&&(Do(),jn())}}function ha(g,I){var e=Jo;Jo&=-2,Jo|=8;try{return g(I)}finally{0===(Jo=e)&&(Do(),jn())}}function ya(g,I){cn(Fo,Ko),Ko|=I,zo|=I}function Ba(){Ko=Fo.current,rn(Fo)}function Wa(g,I){g.finishedWork=null,g.finishedLanes=0;var e=g.timeoutHandle;if(-1!==e&&(g.timeoutHandle=-1,LC(e)),null!==Ho)for(e=Ho.return;null!==e;){var C=e;switch(C.tag){case 1:null!==(C=C.type.childContextTypes)&&void 0!==C&&bn();break;case 3:Ht(),rn(un),rn(dn),Pt();break;case 5:Kt(C);break;case 4:Ht();break;case 13:case 19:rn(Ft);break;case 10:Ct(C);break;case 23:case 24:Ba()}e=e.return}Yo=g,Ho=Ta(g.current,null),wo=Ko=zo=I,No=0,xo=null,Uo=Eo=Mo=0}function Sa(g,I){for(;;){var e=Ho;try{if(et(),Ot.current=kl,el){for(var C=$t.memoizedState;null!==C;){var n=C.queue;null!==n&&(n.pending=null),C=C.next}el=!1}if(_t=0,Il=gl=$t=null,Cl=!1,ko.current=null,null===e||null===e.return){No=1,xo=I,Ho=null;break}g:{var t=g,l=e.return,o=e,a=I;if(I=wo,o.flags|=2048,o.firstEffect=o.lastEffect=null,null!==a&&"object"===typeof a&&"function"===typeof a.then){var i=a;if(0===(2&o.mode)){var r=o.alternate;r?(o.updateQueue=r.updateQueue,o.memoizedState=r.memoizedState,o.lanes=r.lanes):(o.updateQueue=null,o.memoizedState=null)}var c=0!==(1&Ft.current),A=l;do{var d;if(d=13===A.tag){var u=A.memoizedState;if(null!==u)d=null!==u.dehydrated;else{var s=A.memoizedProps;d=void 0!==s.fallback&&(!0!==s.unstable_avoidThisFallback||!c)}}if(d){var m=A.updateQueue;if(null===m){var Z=new Set;Z.add(i),A.updateQueue=Z}else m.add(i);if(0===(2&A.mode)){if(A.flags|=64,o.flags|=16384,o.flags&=-2981,1===o.tag)if(null===o.alternate)o.tag=17;else{var b=rt(-1,1);b.tag=2,ct(o,b)}o.lanes|=1;break g}a=void 0,o=I;var p=t.pingCache;if(null===p?(p=t.pingCache=new ro,a=new Set,p.set(i,a)):void 0===(a=p.get(i))&&(a=new Set,p.set(i,a)),!a.has(o)){a.add(o);var G=Ma.bind(null,t,i,o);i.then(G,G)}A.flags|=4096,A.lanes=I;break g}A=A.return}while(null!==A);a=Error((D(o.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display.")}5!==No&&(No=2),a=ao(a,o),A=l;do{switch(A.tag){case 3:t=a,A.flags|=4096,I&=-I,A.lanes|=I,At(A,co(0,t,I));break g;case 1:t=a;var h=A.type,y=A.stateNode;if(0===(64&A.flags)&&("function"===typeof h.getDerivedStateFromError||null!==y&&"function"===typeof y.componentDidCatch&&(null===_o||!_o.has(y)))){A.flags|=4096,I&=-I,A.lanes|=I,At(A,Ao(A,t,I));break g}}A=A.return}while(null!==A)}ka(e)}catch(B){I=B,Ho===e&&null!==e&&(Ho=e=e.return);continue}break}}function Va(){var g=fo.current;return fo.current=kl,null===g?kl:g}function va(g,I){var e=Jo;Jo|=16;var C=Va();for(Yo===g&&wo===I||Wa(g,I);;)try{Ra();break}catch(n){Sa(g,n)}if(et(),Jo=e,fo.current=C,null!==Ho)throw Error(l(261));return Yo=null,wo=0,No}function Ra(){for(;null!==Ho;)fa(Ho)}function Xa(){for(;null!==Ho&&!Rn();)fa(Ho)}function fa(g){var I=jo(g.alternate,g,Ko);g.memoizedProps=g.pendingProps,null===I?ka(g):Ho=I,ko.current=null}function ka(g){var I=g;do{var e=I.alternate;if(g=I.return,0===(2048&I.flags)){if(null!==(e=lo(e,I,Ko)))return void(Ho=e);if(24!==(e=I).tag&&23!==e.tag||null===e.memoizedState||0!==(1073741824&Ko)||0===(4&e.mode)){for(var C=0,n=e.child;null!==n;)C|=n.lanes|n.childLanes,n=n.sibling;e.childLanes=C}null!==g&&0===(2048&g.flags)&&(null===g.firstEffect&&(g.firstEffect=I.firstEffect),null!==I.lastEffect&&(null!==g.lastEffect&&(g.lastEffect.nextEffect=I.firstEffect),g.lastEffect=I.lastEffect),1<I.flags&&(null!==g.lastEffect?g.lastEffect.nextEffect=I:g.firstEffect=I,g.lastEffect=I))}else{if(null!==(e=oo(I)))return e.flags&=2047,void(Ho=e);null!==g&&(g.firstEffect=g.lastEffect=null,g.flags|=2048)}if(null!==(I=I.sibling))return void(Ho=I);Ho=I=g}while(null!==I);0===No&&(No=5)}function Ja(g){var I=Qn();return Tn(99,Ya.bind(null,g,I)),null}function Ya(g,I){do{wa()}while(null!==ga);if(0!==(48&Jo))throw Error(l(327));var e=g.finishedWork;if(null===e)return null;if(g.finishedWork=null,g.finishedLanes=0,e===g.current)throw Error(l(177));g.callbackNode=null;var C=e.lanes|e.childLanes,n=C,t=g.pendingLanes&~n;g.pendingLanes=n,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=n,g.mutableReadLanes&=n,g.entangledLanes&=n,n=g.entanglements;for(var o=g.eventTimes,a=g.expirationTimes;0<t;){var i=31-QI(t),r=1<<i;n[i]=0,o[i]=-1,a[i]=-1,t&=~r}if(null!==na&&0===(24&C)&&na.has(g)&&na.delete(g),g===Yo&&(Ho=Yo=null,wo=0),1<e.flags?null!==e.lastEffect?(e.lastEffect.nextEffect=e,C=e.firstEffect):C=e:C=e.firstEffect,null!==C){if(n=Jo,Jo|=32,ko.current=null,zC=PI,mC(o=sC())){if("selectionStart"in o)a={start:o.selectionStart,end:o.selectionEnd};else g:if(a=(a=o.ownerDocument)&&a.defaultView||window,(r=a.getSelection&&a.getSelection())&&0!==r.rangeCount){a=r.anchorNode,t=r.anchorOffset,i=r.focusNode,r=r.focusOffset;try{a.nodeType,i.nodeType}catch(V){a=null;break g}var c=0,A=-1,d=-1,u=0,s=0,m=o,Z=null;I:for(;;){for(var b;m!==a||0!==t&&3!==m.nodeType||(A=c+t),m!==i||0!==r&&3!==m.nodeType||(d=c+r),3===m.nodeType&&(c+=m.nodeValue.length),null!==(b=m.firstChild);)Z=m,m=b;for(;;){if(m===o)break I;if(Z===a&&++u===t&&(A=c),Z===i&&++s===r&&(d=c),null!==(b=m.nextSibling))break;Z=(m=Z).parentNode}m=b}a=-1===A||-1===d?null:{start:A,end:d}}else a=null;a=a||{start:0,end:0}}else a=null;MC={focusedElem:o,selectionRange:a},PI=!1,ra=null,ca=!1,Po=C;do{try{Ha()}catch(V){if(null===Po)throw Error(l(330));za(Po,V),Po=Po.nextEffect}}while(null!==Po);ra=null,Po=C;do{try{for(o=g;null!==Po;){var p=Po.flags;if(16&p&&bg(Po.stateNode,""),128&p){var G=Po.alternate;if(null!==G){var h=G.ref;null!==h&&("function"===typeof h?h(null):h.current=null)}}switch(1038&p){case 2:yo(Po),Po.flags&=-3;break;case 6:yo(Po),Po.flags&=-3,Vo(Po.alternate,Po);break;case 1024:Po.flags&=-1025;break;case 1028:Po.flags&=-1025,Vo(Po.alternate,Po);break;case 4:Vo(Po.alternate,Po);break;case 8:So(o,a=Po);var y=a.alternate;Go(a),null!==y&&Go(y)}Po=Po.nextEffect}}catch(V){if(null===Po)throw Error(l(330));za(Po,V),Po=Po.nextEffect}}while(null!==Po);if(h=MC,G=sC(),p=h.focusedElem,o=h.selectionRange,G!==p&&p&&p.ownerDocument&&uC(p.ownerDocument.documentElement,p)){null!==o&&mC(p)&&(G=o.start,void 0===(h=o.end)&&(h=G),"selectionStart"in p?(p.selectionStart=G,p.selectionEnd=Math.min(h,p.value.length)):(h=(G=p.ownerDocument||document)&&G.defaultView||window).getSelection&&(h=h.getSelection(),a=p.textContent.length,y=Math.min(o.start,a),o=void 0===o.end?y:Math.min(o.end,a),!h.extend&&y>o&&(a=o,o=y,y=a),a=dC(p,y),t=dC(p,o),a&&t&&(1!==h.rangeCount||h.anchorNode!==a.node||h.anchorOffset!==a.offset||h.focusNode!==t.node||h.focusOffset!==t.offset)&&((G=G.createRange()).setStart(a.node,a.offset),h.removeAllRanges(),y>o?(h.addRange(G),h.extend(t.node,t.offset)):(G.setEnd(t.node,t.offset),h.addRange(G))))),G=[];for(h=p;h=h.parentNode;)1===h.nodeType&&G.push({element:h,left:h.scrollLeft,top:h.scrollTop});for("function"===typeof p.focus&&p.focus(),p=0;p<G.length;p++)(h=G[p]).element.scrollLeft=h.left,h.element.scrollTop=h.top}PI=!!zC,MC=zC=null,g.current=e,Po=C;do{try{for(p=g;null!==Po;){var B=Po.flags;if(36&B&&Zo(p,Po.alternate,Po),128&B){G=void 0;var W=Po.ref;if(null!==W){var S=Po.stateNode;Po.tag,G=S,"function"===typeof W?W(G):W.current=G}}Po=Po.nextEffect}}catch(V){if(null===Po)throw Error(l(330));za(Po,V),Po=Po.nextEffect}}while(null!==Po);Po=null,Nn(),Jo=n}else g.current=e;if($o)$o=!1,ga=g,Ia=I;else for(Po=C;null!==Po;)I=Po.nextEffect,Po.nextEffect=null,8&Po.flags&&((B=Po).sibling=null,B.stateNode=null),Po=I;if(0===(C=g.pendingLanes)&&(_o=null),1===C?g===la?ta++:(ta=0,la=g):ta=0,e=e.stateNode,Wn&&"function"===typeof Wn.onCommitFiberRoot)try{Wn.onCommitFiberRoot(Bn,e,void 0,64===(64&e.current.flags))}catch(V){}if(ma(g,Un()),Oo)throw Oo=!1,g=qo,qo=null,g;return 0!==(8&Jo)||jn(),null}function Ha(){for(;null!==Po;){var g=Po.alternate;ca||null===ra||(0!==(8&Po.flags)?gI(Po,ra)&&(ca=!0):13===Po.tag&&Ro(g,Po)&&gI(Po,ra)&&(ca=!0));var I=Po.flags;0!==(256&I)&&mo(g,Po),0===(512&I)||$o||($o=!0,Dn(97,(function(){return wa(),null}))),Po=Po.nextEffect}}function wa(){if(90!==Ia){var g=97<Ia?97:Ia;return Ia=90,Tn(g,Na)}return!1}function Ka(g,I){ea.push(I,g),$o||($o=!0,Dn(97,(function(){return wa(),null})))}function Fa(g,I){Ca.push(I,g),$o||($o=!0,Dn(97,(function(){return wa(),null})))}function Na(){if(null===ga)return!1;var g=ga;if(ga=null,0!==(48&Jo))throw Error(l(331));var I=Jo;Jo|=32;var e=Ca;Ca=[];for(var C=0;C<e.length;C+=2){var n=e[C],t=e[C+1],o=n.destroy;if(n.destroy=void 0,"function"===typeof o)try{o()}catch(i){if(null===t)throw Error(l(330));za(t,i)}}for(e=ea,ea=[],C=0;C<e.length;C+=2){n=e[C],t=e[C+1];try{var a=n.create;n.destroy=a()}catch(i){if(null===t)throw Error(l(330));za(t,i)}}for(a=g.current.firstEffect;null!==a;)g=a.nextEffect,a.nextEffect=null,8&a.flags&&(a.sibling=null,a.stateNode=null),a=g;return Jo=I,jn(),!0}function xa(g,I,e){ct(g,I=co(0,I=ao(e,I),1)),I=Aa(),null!==(g=sa(g,1))&&(UI(g,1,I),ma(g,I))}function za(g,I){if(3===g.tag)xa(g,g,I);else for(var e=g.return;null!==e;){if(3===e.tag){xa(e,g,I);break}if(1===e.tag){var C=e.stateNode;if("function"===typeof e.type.getDerivedStateFromError||"function"===typeof C.componentDidCatch&&(null===_o||!_o.has(C))){var n=Ao(e,g=ao(I,g),1);if(ct(e,n),n=Aa(),null!==(e=sa(e,1)))UI(e,1,n),ma(e,n);else if("function"===typeof C.componentDidCatch&&(null===_o||!_o.has(C)))try{C.componentDidCatch(I,g)}catch(t){}break}}e=e.return}}function Ma(g,I,e){var C=g.pingCache;null!==C&&C.delete(I),I=Aa(),g.pingedLanes|=g.suspendedLanes&e,Yo===g&&(wo&e)===e&&(4===No||3===No&&(62914560&wo)===wo&&500>Un()-Lo?Wa(g,0):Uo|=e),ma(g,I)}function Ea(g,I){var e=g.stateNode;null!==e&&e.delete(I),0===(I=0)&&(0===(2&(I=g.mode))?I=1:0===(4&I)?I=99===Qn()?1:2:(0===aa&&(aa=zo),0===(I=MI(62914560&~aa))&&(I=4194304))),e=Aa(),null!==(g=sa(g,I))&&(UI(g,I,e),ma(g,e))}function Ua(g,I,e,C){this.tag=g,this.key=e,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=I,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=C,this.flags=0,this.lastEffect=this.firstEffect=this.nextEffect=null,this.childLanes=this.lanes=0,this.alternate=null}function Qa(g,I,e,C){return new Ua(g,I,e,C)}function La(g){return!(!(g=g.prototype)||!g.isReactComponent)}function Ta(g,I){var e=g.alternate;return null===e?((e=Qa(g.tag,I,g.key,g.mode)).elementType=g.elementType,e.type=g.type,e.stateNode=g.stateNode,e.alternate=g,g.alternate=e):(e.pendingProps=I,e.type=g.type,e.flags=0,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null),e.childLanes=g.childLanes,e.lanes=g.lanes,e.child=g.child,e.memoizedProps=g.memoizedProps,e.memoizedState=g.memoizedState,e.updateQueue=g.updateQueue,I=g.dependencies,e.dependencies=null===I?null:{lanes:I.lanes,firstContext:I.firstContext},e.sibling=g.sibling,e.index=g.index,e.ref=g.ref,e}function Da(g,I,e,C,n,t){var o=2;if(C=g,"function"===typeof g)La(g)&&(o=1);else if("string"===typeof g)o=5;else g:switch(g){case W:return ja(e.children,n,t,I);case K:o=8,n|=16;break;case S:o=8,n|=1;break;case V:return(g=Qa(12,e,I,8|n)).elementType=V,g.type=V,g.lanes=t,g;case f:return(g=Qa(13,e,I,n)).type=f,g.elementType=f,g.lanes=t,g;case k:return(g=Qa(19,e,I,n)).elementType=k,g.lanes=t,g;case F:return Pa(e,n,t,I);case N:return(g=Qa(24,e,I,n)).elementType=N,g.lanes=t,g;default:if("object"===typeof g&&null!==g)switch(g.$$typeof){case v:o=10;break g;case R:o=9;break g;case X:o=11;break g;case J:o=14;break g;case Y:o=16,C=null;break g;case H:o=22;break g}throw Error(l(130,null==g?g:typeof g,""))}return(I=Qa(o,e,I,n)).elementType=g,I.type=C,I.lanes=t,I}function ja(g,I,e,C){return(g=Qa(7,g,C,I)).lanes=e,g}function Pa(g,I,e,C){return(g=Qa(23,g,C,I)).elementType=F,g.lanes=e,g}function Oa(g,I,e){return(g=Qa(6,g,null,I)).lanes=e,g}function qa(g,I,e){return(I=Qa(4,null!==g.children?g.children:[],g.key,I)).lanes=e,I.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},I}function _a(g,I,e){this.tag=I,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.pendingContext=this.context=null,this.hydrate=e,this.callbackNode=null,this.callbackPriority=0,this.eventTimes=EI(0),this.expirationTimes=EI(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=EI(0),this.mutableSourceEagerHydrationData=null}function $a(g,I,e){var C=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:B,key:null==C?null:""+C,children:g,containerInfo:I,implementation:e}}function gi(g,I,e,C){var n=I.current,t=Aa(),o=da(n);g:if(e){I:{if(Og(e=e._reactInternals)!==e||1!==e.tag)throw Error(l(170));var a=e;do{switch(a.tag){case 3:a=a.stateNode.context;break I;case 1:if(Zn(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break I}}a=a.return}while(null!==a);throw Error(l(171))}if(1===e.tag){var i=e.type;if(Zn(i)){e=Gn(e,i,a);break g}}e=a}else e=An;return null===I.context?I.context=e:I.pendingContext=e,(I=rt(t,o)).payload={element:g},null!==(C=void 0===C?null:C)&&(I.callback=C),ct(n,I),ua(n,o,t),o}function Ii(g){return(g=g.current).child?(g.child.tag,g.child.stateNode):null}function ei(g,I){if(null!==(g=g.memoizedState)&&null!==g.dehydrated){var e=g.retryLane;g.retryLane=0!==e&&e<I?e:I}}function Ci(g,I){ei(g,I),(g=g.alternate)&&ei(g,I)}function ni(g,I,e){var C=null!=e&&null!=e.hydrationOptions&&e.hydrationOptions.mutableSources||null;if(e=new _a(g,I,null!=e&&!0===e.hydrate),I=Qa(3,null,null,2===I?7:1===I?3:0),e.current=I,I.stateNode=e,at(I),g[$C]=e.current,kC(8===g.nodeType?g.parentNode:g),C)for(g=0;g<C.length;g++){var n=(I=C[g])._getVersion;n=n(I._source),null==e.mutableSourceEagerHydrationData?e.mutableSourceEagerHydrationData=[I,n]:e.mutableSourceEagerHydrationData.push(I,n)}this._internalRoot=e}function ti(g){return!(!g||1!==g.nodeType&&9!==g.nodeType&&11!==g.nodeType&&(8!==g.nodeType||" react-mount-point-unstable "!==g.nodeValue))}function li(g,I,e,C,n){var t=e._reactRootContainer;if(t){var l=t._internalRoot;if("function"===typeof n){var o=n;n=function(){var g=Ii(l);o.call(g)}}gi(I,l,g,n)}else{if(t=e._reactRootContainer=function(g,I){if(I||(I=!(!(I=g?9===g.nodeType?g.documentElement:g.firstChild:null)||1!==I.nodeType||!I.hasAttribute("data-reactroot"))),!I)for(var e;e=g.lastChild;)g.removeChild(e);return new ni(g,0,I?{hydrate:!0}:void 0)}(e,C),l=t._internalRoot,"function"===typeof n){var a=n;n=function(){var g=Ii(l);a.call(g)}}ha((function(){gi(I,l,g,n)}))}return Ii(l)}function oi(g,I){var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!ti(I))throw Error(l(200));return $a(g,I,null,e)}jo=function(g,I,e){var C=I.lanes;if(null!==g)if(g.memoizedProps!==I.pendingProps||un.current)Kl=!0;else{if(0===(e&C)){switch(Kl=!1,I.tag){case 3:Tl(I),Dt();break;case 5:wt(I);break;case 1:Zn(I.type)&&hn(I);break;case 4:Yt(I,I.stateNode.containerInfo);break;case 10:C=I.memoizedProps.value;var n=I.type._context;cn(_n,n._currentValue),n._currentValue=C;break;case 13:if(null!==I.memoizedState)return 0!==(e&I.child.childLanes)?ql(g,I,e):(cn(Ft,1&Ft.current),null!==(I=no(g,I,e))?I.sibling:null);cn(Ft,1&Ft.current);break;case 19:if(C=0!==(e&I.childLanes),0!==(64&g.flags)){if(C)return Co(g,I,e);I.flags|=64}if(null!==(n=I.memoizedState)&&(n.rendering=null,n.tail=null,n.lastEffect=null),cn(Ft,Ft.current),C)break;return null;case 23:case 24:return I.lanes=0,Ml(g,I,e)}return no(g,I,e)}Kl=0!==(16384&g.flags)}else Kl=!1;switch(I.lanes=0,I.tag){case 2:if(C=I.type,null!==g&&(g.alternate=null,I.alternate=null,I.flags|=2),g=I.pendingProps,n=mn(I,dn.current),tt(I,e),n=ll(null,I,C,g,n,e),I.flags|=1,"object"===typeof n&&null!==n&&"function"===typeof n.render&&void 0===n.$$typeof){if(I.tag=1,I.memoizedState=null,I.updateQueue=null,Zn(C)){var t=!0;hn(I)}else t=!1;I.memoizedState=null!==n.state&&void 0!==n.state?n.state:null,at(I);var o=C.getDerivedStateFromProps;"function"===typeof o&&mt(I,C,o,g),n.updater=Zt,I.stateNode=n,n._reactInternals=I,ht(I,C,g,e),I=Ll(null,I,C,!0,t,e)}else I.tag=0,Fl(null,I,n,e),I=I.child;return I;case 16:n=I.elementType;g:{switch(null!==g&&(g.alternate=null,I.alternate=null,I.flags|=2),g=I.pendingProps,n=(t=n._init)(n._payload),I.type=n,t=I.tag=function(g){if("function"===typeof g)return La(g)?1:0;if(void 0!==g&&null!==g){if((g=g.$$typeof)===X)return 11;if(g===J)return 14}return 2}(n),g=qn(n,g),t){case 0:I=Ul(null,I,n,g,e);break g;case 1:I=Ql(null,I,n,g,e);break g;case 11:I=Nl(null,I,n,g,e);break g;case 14:I=xl(null,I,n,qn(n.type,g),C,e);break g}throw Error(l(306,n,""))}return I;case 0:return C=I.type,n=I.pendingProps,Ul(g,I,C,n=I.elementType===C?n:qn(C,n),e);case 1:return C=I.type,n=I.pendingProps,Ql(g,I,C,n=I.elementType===C?n:qn(C,n),e);case 3:if(Tl(I),C=I.updateQueue,null===g||null===C)throw Error(l(282));if(C=I.pendingProps,n=null!==(n=I.memoizedState)?n.element:null,it(g,I),dt(I,C,null,e),(C=I.memoizedState.element)===n)Dt(),I=no(g,I,e);else{if((t=(n=I.stateNode).hydrate)&&(zt=DC(I.stateNode.containerInfo.firstChild),xt=I,t=Mt=!0),t){if(null!=(g=n.mutableSourceEagerHydrationData))for(n=0;n<g.length;n+=2)(t=g[n])._workInProgressVersionPrimary=g[n+1],jt.push(t);for(e=vt(I,null,C,e),I.child=e;e;)e.flags=-3&e.flags|1024,e=e.sibling}else Fl(g,I,C,e),Dt();I=I.child}return I;case 5:return wt(I),null===g&&Qt(I),C=I.type,n=I.pendingProps,t=null!==g?g.memoizedProps:null,o=n.children,UC(C,n)?o=null:null!==t&&UC(C,t)&&(I.flags|=16),El(g,I),Fl(g,I,o,e),I.child;case 6:return null===g&&Qt(I),null;case 13:return ql(g,I,e);case 4:return Yt(I,I.stateNode.containerInfo),C=I.pendingProps,null===g?I.child=Vt(I,null,C,e):Fl(g,I,C,e),I.child;case 11:return C=I.type,n=I.pendingProps,Nl(g,I,C,n=I.elementType===C?n:qn(C,n),e);case 7:return Fl(g,I,I.pendingProps,e),I.child;case 8:case 12:return Fl(g,I,I.pendingProps.children,e),I.child;case 10:g:{C=I.type._context,n=I.pendingProps,o=I.memoizedProps,t=n.value;var a=I.type._context;if(cn(_n,a._currentValue),a._currentValue=t,null!==o)if(a=o.value,0===(t=iC(a,t)?0:0|("function"===typeof C._calculateChangedBits?C._calculateChangedBits(a,t):1073741823))){if(o.children===n.children&&!un.current){I=no(g,I,e);break g}}else for(null!==(a=I.child)&&(a.return=I);null!==a;){var i=a.dependencies;if(null!==i){o=a.child;for(var r=i.firstContext;null!==r;){if(r.context===C&&0!==(r.observedBits&t)){1===a.tag&&((r=rt(-1,e&-e)).tag=2,ct(a,r)),a.lanes|=e,null!==(r=a.alternate)&&(r.lanes|=e),nt(a.return,e),i.lanes|=e;break}r=r.next}}else o=10===a.tag&&a.type===I.type?null:a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===I){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}Fl(g,I,n.children,e),I=I.child}return I;case 9:return n=I.type,C=(t=I.pendingProps).children,tt(I,e),C=C(n=lt(n,t.unstable_observedBits)),I.flags|=1,Fl(g,I,C,e),I.child;case 14:return t=qn(n=I.type,I.pendingProps),xl(g,I,n,t=qn(n.type,t),C,e);case 15:return zl(g,I,I.type,I.pendingProps,C,e);case 17:return C=I.type,n=I.pendingProps,n=I.elementType===C?n:qn(C,n),null!==g&&(g.alternate=null,I.alternate=null,I.flags|=2),I.tag=1,Zn(C)?(g=!0,hn(I)):g=!1,tt(I,e),pt(I,C,n),ht(I,C,n,e),Ll(null,I,C,!0,g,e);case 19:return Co(g,I,e);case 23:case 24:return Ml(g,I,e)}throw Error(l(156,I.tag))},ni.prototype.render=function(g){gi(g,this._internalRoot,null,null)},ni.prototype.unmount=function(){var g=this._internalRoot,I=g.containerInfo;gi(null,g,null,(function(){I[$C]=null}))},II=function(g){13===g.tag&&(ua(g,4,Aa()),Ci(g,4))},eI=function(g){13===g.tag&&(ua(g,67108864,Aa()),Ci(g,67108864))},CI=function(g){if(13===g.tag){var I=Aa(),e=da(g);ua(g,e,I),Ci(g,e)}},nI=function(g,I){return I()},vg=function(g,I,e){switch(I){case"input":if(eg(g,e),I=e.name,"radio"===e.type&&null!=I){for(e=g;e.parentNode;)e=e.parentNode;for(e=e.querySelectorAll("input[name="+JSON.stringify(""+I)+'][type="radio"]'),I=0;I<e.length;I++){var C=e[I];if(C!==g&&C.form===g.form){var n=nn(C);if(!n)throw Error(l(90));q(C),eg(C,n)}}}break;case"textarea":ig(g,e);break;case"select":null!=(I=e.value)&&lg(g,!!e.multiple,I,!1)}},Yg=Ga,Hg=function(g,I,e,C,n){var t=Jo;Jo|=4;try{return Tn(98,g.bind(null,I,e,C,n))}finally{0===(Jo=t)&&(Do(),jn())}},wg=function(){0===(49&Jo)&&(function(){if(null!==na){var g=na;na=null,g.forEach((function(g){g.expiredLanes|=24&g.pendingLanes,ma(g,Un())}))}jn()}(),wa())},Kg=function(g,I){var e=Jo;Jo|=2;try{return g(I)}finally{0===(Jo=e)&&(Do(),jn())}};var ai={Events:[en,Cn,nn,kg,Jg,wa,{current:!1}]},ii={findFiberByHostInstance:In,bundleType:0,version:"17.0.2",rendererPackageName:"react-dom"},ri={bundleType:ii.bundleType,version:ii.version,rendererPackageName:ii.rendererPackageName,rendererConfig:ii.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:h.ReactCurrentDispatcher,findHostInstanceByFiber:function(g){return null===(g=$g(g))?null:g.stateNode},findFiberByHostInstance:ii.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ci=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ci.isDisabled&&ci.supportsFiber)try{Bn=ci.inject(ri),Wn=ci}catch(mg){}}I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ai,I.createPortal=oi,I.findDOMNode=function(g){if(null==g)return null;if(1===g.nodeType)return g;var I=g._reactInternals;if(void 0===I){if("function"===typeof g.render)throw Error(l(188));throw Error(l(268,Object.keys(g)))}return g=null===(g=$g(I))?null:g.stateNode},I.flushSync=function(g,I){var e=Jo;if(0!==(48&e))return g(I);Jo|=1;try{if(g)return Tn(99,g.bind(null,I))}finally{Jo=e,jn()}},I.hydrate=function(g,I,e){if(!ti(I))throw Error(l(200));return li(null,g,I,!0,e)},I.render=function(g,I,e){if(!ti(I))throw Error(l(200));return li(null,g,I,!1,e)},I.unmountComponentAtNode=function(g){if(!ti(g))throw Error(l(40));return!!g._reactRootContainer&&(ha((function(){li(null,null,g,!1,(function(){g._reactRootContainer=null,g[$C]=null}))})),!0)},I.unstable_batchedUpdates=Ga,I.unstable_createPortal=function(g,I){return oi(g,I,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)},I.unstable_renderSubtreeIntoContainer=function(g,I,e,C){if(!ti(e))throw Error(l(200));if(null==g||void 0===g._reactInternals)throw Error(l(38));return li(g,I,e,!1,C)},I.version="17.0.2"},4164:function(g,I,e){"use strict";!function g(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(g)}catch(I){console.error(I)}}(),g.exports=e(4463)},1372:function(g,I){"use strict";var e="function"===typeof Symbol&&Symbol.for,C=e?Symbol.for("react.element"):60103,n=e?Symbol.for("react.portal"):60106,t=e?Symbol.for("react.fragment"):60107,l=e?Symbol.for("react.strict_mode"):60108,o=e?Symbol.for("react.profiler"):60114,a=e?Symbol.for("react.provider"):60109,i=e?Symbol.for("react.context"):60110,r=e?Symbol.for("react.async_mode"):60111,c=e?Symbol.for("react.concurrent_mode"):60111,A=e?Symbol.for("react.forward_ref"):60112,d=e?Symbol.for("react.suspense"):60113,u=e?Symbol.for("react.suspense_list"):60120,s=e?Symbol.for("react.memo"):60115,m=e?Symbol.for("react.lazy"):60116,Z=e?Symbol.for("react.block"):60121,b=e?Symbol.for("react.fundamental"):60117,p=e?Symbol.for("react.responder"):60118,G=e?Symbol.for("react.scope"):60119;function h(g){if("object"===typeof g&&null!==g){var I=g.$$typeof;switch(I){case C:switch(g=g.type){case r:case c:case t:case o:case l:case d:return g;default:switch(g=g&&g.$$typeof){case i:case A:case m:case s:case a:return g;default:return I}}case n:return I}}}function y(g){return h(g)===c}I.AsyncMode=r,I.ConcurrentMode=c,I.ContextConsumer=i,I.ContextProvider=a,I.Element=C,I.ForwardRef=A,I.Fragment=t,I.Lazy=m,I.Memo=s,I.Portal=n,I.Profiler=o,I.StrictMode=l,I.Suspense=d,I.isAsyncMode=function(g){return y(g)||h(g)===r},I.isConcurrentMode=y,I.isContextConsumer=function(g){return h(g)===i},I.isContextProvider=function(g){return h(g)===a},I.isElement=function(g){return"object"===typeof g&&null!==g&&g.$$typeof===C},I.isForwardRef=function(g){return h(g)===A},I.isFragment=function(g){return h(g)===t},I.isLazy=function(g){return h(g)===m},I.isMemo=function(g){return h(g)===s},I.isPortal=function(g){return h(g)===n},I.isProfiler=function(g){return h(g)===o},I.isStrictMode=function(g){return h(g)===l},I.isSuspense=function(g){return h(g)===d},I.isValidElementType=function(g){return"string"===typeof g||"function"===typeof g||g===t||g===c||g===o||g===l||g===d||g===u||"object"===typeof g&&null!==g&&(g.$$typeof===m||g.$$typeof===s||g.$$typeof===a||g.$$typeof===i||g.$$typeof===A||g.$$typeof===b||g.$$typeof===p||g.$$typeof===G||g.$$typeof===Z)},I.typeOf=h},7441:function(g,I,e){"use strict";g.exports=e(1372)},9008:function(g,I,e){g.exports=function(g,I){"use strict";function e(g){return g&&"object"===typeof g&&"default"in g?g:{default:g}}var C=e(g),n=e(I);function t(){return t=Object.assign||function(g){for(var I=1;I<arguments.length;I++){var e=arguments[I];for(var C in e)Object.prototype.hasOwnProperty.call(e,C)&&(g[C]=e[C])}return g},t.apply(this,arguments)}function l(g,I,e){return I in g?Object.defineProperty(g,I,{value:e,enumerable:!0,configurable:!0,writable:!0}):g[I]=e,g}function o(g){if(Array.isArray(g))return g}function a(g,I){var e=null==g?null:"undefined"!==typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null!=e){var C,n,t=[],l=!0,o=!1;try{for(e=e.call(g);!(l=(C=e.next()).done)&&(t.push(C.value),!I||t.length!==I);l=!0);}catch(a){o=!0,n=a}finally{try{l||null==e.return||e.return()}finally{if(o)throw n}}return t}}function i(g,I){(null==I||I>g.length)&&(I=g.length);for(var e=0,C=new Array(I);e<I;e++)C[e]=g[e];return C}function r(g,I){if(g){if("string"===typeof g)return i(g,I);var e=Object.prototype.toString.call(g).slice(8,-1);return"Object"===e&&g.constructor&&(e=g.constructor.name),"Map"===e||"Set"===e?Array.from(g):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?i(g,I):void 0}}function c(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function A(g,I){return o(g)||a(g,I)||r(g,I)||c()}function d(g,I){if(null==g)return{};var e,C,n={},t=Object.keys(g);for(C=0;C<t.length;C++)e=t[C],I.indexOf(e)>=0||(n[e]=g[e]);return n}function u(g,I){if(null==g)return{};var e,C,n=d(g,I);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(g);for(C=0;C<t.length;C++)e=t[C],I.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(g,e)&&(n[e]=g[e])}return n}function s(g,I){var e=atob(g);if(I){for(var C=new Uint8Array(e.length),n=0,t=e.length;n<t;++n)C[n]=e.charCodeAt(n);return String.fromCharCode.apply(null,new Uint16Array(C.buffer))}return e}function m(g,I,e){var C=void 0===I?null:I,n=s(g,void 0!==e&&e),t=n.indexOf("\n",10)+1,l=n.substring(t)+(C?"//# sourceMappingURL="+C:""),o=new Blob([l],{type:"application/javascript"});return URL.createObjectURL(o)}function Z(g,I,e){var C;return function(n){return C=C||m(g,I,e),new Worker(C,n)}}var b=Z("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewoJJ3VzZSBzdHJpY3QnOwoKCXZhciBjb21tb25qc0dsb2JhbCA9IHR5cGVvZiBnbG9iYWxUaGlzICE9PSAndW5kZWZpbmVkJyA/IGdsb2JhbFRoaXMgOiB0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyA/IHdpbmRvdyA6IHR5cGVvZiBnbG9iYWwgIT09ICd1bmRlZmluZWQnID8gZ2xvYmFsIDogdHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHt9OwoKCWZ1bmN0aW9uIGdldEF1Z21lbnRlZE5hbWVzcGFjZShuKSB7CgkJaWYgKG4uX19lc01vZHVsZSkgcmV0dXJuIG47CgkJdmFyIGEgPSBPYmplY3QuZGVmaW5lUHJvcGVydHkoe30sICdfX2VzTW9kdWxlJywge3ZhbHVlOiB0cnVlfSk7CgkJT2JqZWN0LmtleXMobikuZm9yRWFjaChmdW5jdGlvbiAoaykgewoJCQl2YXIgZCA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobiwgayk7CgkJCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShhLCBrLCBkLmdldCA/IGQgOiB7CgkJCQllbnVtZXJhYmxlOiB0cnVlLAoJCQkJZ2V0OiBmdW5jdGlvbiAoKSB7CgkJCQkJcmV0dXJuIG5ba107CgkJCQl9CgkJCX0pOwoJCX0pOwoJCXJldHVybiBhOwoJfQoKCXZhciBCaW5hcnlCaXRtYXAkMSA9IHt9OwoKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBFeGNlcHRpb24kMSA9IHt9OwoKCWZ1bmN0aW9uIGZpeFByb3RvKHRhcmdldCwgcHJvdG90eXBlKSB7CgkgIHZhciBzZXRQcm90b3R5cGVPZiA9IE9iamVjdC5zZXRQcm90b3R5cGVPZjsKCSAgc2V0UHJvdG90eXBlT2YgPyBzZXRQcm90b3R5cGVPZih0YXJnZXQsIHByb3RvdHlwZSkgOiB0YXJnZXQuX19wcm90b19fID0gcHJvdG90eXBlOwoJfQoJZnVuY3Rpb24gZml4U3RhY2sodGFyZ2V0LCBmbikgewoJICBpZiAoZm4gPT09IHZvaWQgMCkgewoJICAgIGZuID0gdGFyZ2V0LmNvbnN0cnVjdG9yOwoJICB9CgoJICB2YXIgY2FwdHVyZVN0YWNrVHJhY2UgPSBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZTsKCSAgY2FwdHVyZVN0YWNrVHJhY2UgJiYgY2FwdHVyZVN0YWNrVHJhY2UodGFyZ2V0LCBmbik7Cgl9CgoJdmFyIF9fZXh0ZW5kcyRrID0gZnVuY3Rpb24gKCkgewoJICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fCB7CgkgICAgICBfX3Byb3RvX186IFtdCgkgICAgfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICBkLl9fcHJvdG9fXyA9IGI7CgkgICAgfSB8fCBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgZm9yICh2YXIgcCBpbiBiKSB7IGlmIChiLmhhc093blByb3BlcnR5KHApKSB7IGRbcF0gPSBiW3BdOyB9IH0KCSAgICB9OwoKCSAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgfTsKCgkgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgoJICAgIGZ1bmN0aW9uIF9fKCkgewoJICAgICAgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7CgkgICAgfQoKCSAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgIH07Cgl9KCk7CgoJdmFyIEN1c3RvbUVycm9yID0gZnVuY3Rpb24gKF9zdXBlcikgewoJICBfX2V4dGVuZHMkayhDdXN0b21FcnJvciwgX3N1cGVyKTsKCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKG1lc3NhZ2UpIHsKCSAgICB2YXIgX25ld1RhcmdldCA9IHRoaXMuY29uc3RydWN0b3I7CgoJICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIG1lc3NhZ2UpIHx8IHRoaXM7CgoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShfdGhpcywgJ25hbWUnLCB7CgkgICAgICB2YWx1ZTogX25ld1RhcmdldC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmaXhQcm90byhfdGhpcywgX25ld1RhcmdldC5wcm90b3R5cGUpOwoJICAgIGZpeFN0YWNrKF90aGlzKTsKCSAgICByZXR1cm4gX3RoaXM7CgkgIH0KCgkgIHJldHVybiBDdXN0b21FcnJvcjsKCX0oRXJyb3IpOwoKCXZhciBfX3NwcmVhZEFycmF5cyA9IGZ1bmN0aW9uICgpIHsKCSAgdmFyIGFyZ3VtZW50cyQxID0gYXJndW1lbnRzOwoKCSAgZm9yICh2YXIgcyA9IDAsIGkgPSAwLCBpbCA9IGFyZ3VtZW50cy5sZW5ndGg7IGkgPCBpbDsgaSsrKSB7IHMgKz0gYXJndW1lbnRzJDFbaV0ubGVuZ3RoOyB9CgoJICBmb3IgKHZhciByID0gQXJyYXkocyksIGsgPSAwLCBpID0gMDsgaSA8IGlsOyBpKyspIHsgZm9yICh2YXIgYSA9IGFyZ3VtZW50c1tpXSwgaiA9IDAsIGpsID0gYS5sZW5ndGg7IGogPCBqbDsgaisrLCBrKyspIHsgcltrXSA9IGFbal07IH0gfQoKCSAgcmV0dXJuIHI7Cgl9OwoJZnVuY3Rpb24gY3VzdG9tRXJyb3JGYWN0b3J5KGZuLCBwYXJlbnQpIHsKCSAgaWYgKHBhcmVudCA9PT0gdm9pZCAwKSB7CgkgICAgcGFyZW50ID0gRXJyb3I7CgkgIH0KCgkgIGZ1bmN0aW9uIEN1c3RvbUVycm9yKCkgewoJICAgIHZhciBhcmd1bWVudHMkMSA9IGFyZ3VtZW50czsKCgkgICAgdmFyIGFyZ3MgPSBbXTsKCgkgICAgZm9yICh2YXIgX2kgPSAwOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgIGFyZ3NbX2ldID0gYXJndW1lbnRzJDFbX2ldOwoJICAgIH0KCgkgICAgaWYgKCEodGhpcyBpbnN0YW5jZW9mIEN1c3RvbUVycm9yKSkgeyByZXR1cm4gbmV3IChDdXN0b21FcnJvci5iaW5kLmFwcGx5KEN1c3RvbUVycm9yLCBfX3NwcmVhZEFycmF5cyhbdm9pZCAwXSwgYXJncykpKSgpOyB9CgkgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3MpOwoJICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLCAnbmFtZScsIHsKCSAgICAgIHZhbHVlOiBmbi5uYW1lIHx8IHBhcmVudC5uYW1lLAoJICAgICAgZW51bWVyYWJsZTogZmFsc2UsCgkgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICB9KTsKCSAgICBmbi5hcHBseSh0aGlzLCBhcmdzKTsKCSAgICBmaXhTdGFjayh0aGlzLCBDdXN0b21FcnJvcik7CgkgIH0KCgkgIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydGllcyhDdXN0b21FcnJvciwgewoJICAgIHByb3RvdHlwZTogewoJICAgICAgdmFsdWU6IE9iamVjdC5jcmVhdGUocGFyZW50LnByb3RvdHlwZSwgewoJICAgICAgICBjb25zdHJ1Y3RvcjogewoJICAgICAgICAgIHZhbHVlOiBDdXN0b21FcnJvciwKCSAgICAgICAgICB3cml0YWJsZTogdHJ1ZSwKCSAgICAgICAgICBjb25maWd1cmFibGU6IHRydWUKCSAgICAgICAgfQoJICAgICAgfSkKCSAgICB9CgkgIH0pOwoJfQoKCXZhciBjdXN0b21FcnJvciA9IC8qI19fUFVSRV9fKi9PYmplY3QuZnJlZXplKHsKCQlfX3Byb3RvX186IG51bGwsCgkJQ3VzdG9tRXJyb3I6IEN1c3RvbUVycm9yLAoJCWN1c3RvbUVycm9yRmFjdG9yeTogY3VzdG9tRXJyb3JGYWN0b3J5Cgl9KTsKCgl2YXIgcmVxdWlyZSQkMCA9IC8qQF9fUFVSRV9fKi9nZXRBdWdtZW50ZWROYW1lc3BhY2UoY3VzdG9tRXJyb3IpOwoKCXZhciBfX2V4dGVuZHMkaiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIHRzX2N1c3RvbV9lcnJvcl8xID0gcmVxdWlyZSQkMDsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRqKEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICAvKioKCSAgICAgKiBBbGxvd3MgRXhjZXB0aW9uIHRvIGJlIGNvbnN0cnVjdGVkIGRpcmVjdGx5CgkgICAgICogd2l0aCBzb21lIG1lc3NhZ2UgYW5kIHByb3RvdHlwZSBkZWZpbml0aW9uLgoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEV4Y2VwdGlvbihtZXNzYWdlKSB7CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBFeGNlcHRpb24ucHJvdG90eXBlLmdldEtpbmQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBleCA9IHRoaXMuY29uc3RydWN0b3I7CgkgICAgICAgIHJldHVybiBleC5raW5kOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSXQncyB0eXBlZCBhcyBzdHJpbmcgc28gaXQgY2FuIGJlIGV4dGVuZGVkIGFuZCBvdmVycmlkZW4uCgkgICAgICovCgkgICAgRXhjZXB0aW9uLmtpbmQgPSAnRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRXhjZXB0aW9uOwoJfSh0c19jdXN0b21fZXJyb3JfMS5DdXN0b21FcnJvcikpOwoJRXhjZXB0aW9uJDEuZGVmYXVsdCA9IEV4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSQ5ID0gRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaShJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCkgewoJICAgICAgICByZXR1cm4gX3N1cGVyICE9PSBudWxsICYmIF9zdXBlci5hcHBseSh0aGlzLCBhcmd1bWVudHMpIHx8IHRoaXM7CgkgICAgfQoJICAgIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0lsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbjsKCX0oRXhjZXB0aW9uXzEkOS5kZWZhdWx0KSk7CglJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMS5kZWZhdWx0ID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJ5Qml0bWFwJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgQmluYXJ5Qml0bWFwID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEJpbmFyeUJpdG1hcChiaW5hcml6ZXIpIHsKCSAgICAgICAgdGhpcy5iaW5hcml6ZXIgPSBiaW5hcml6ZXI7CgkgICAgICAgIGlmIChiaW5hcml6ZXIgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSRhLmRlZmF1bHQoJ0JpbmFyaXplciBtdXN0IGJlIG5vbi1udWxsLicpOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gVGhlIHdpZHRoIG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIGJpdG1hcC4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29udmVydHMgb25lIHJvdyBvZiBsdW1pbmFuY2UgZGF0YSB0byAxIGJpdCBkYXRhLiBNYXkgYWN0dWFsbHkgZG8gdGhlIGNvbnZlcnNpb24sIG9yIHJldHVybgoJICAgICAqIGNhY2hlZCBkYXRhLiBDYWxsZXJzIHNob3VsZCBhc3N1bWUgdGhpcyBtZXRob2QgaXMgZXhwZW5zaXZlIGFuZCBjYWxsIGl0IGFzIHNlbGRvbSBhcyBwb3NzaWJsZS4KCSAgICAgKiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMUQgYmFyY29kZXMgYW5kIG1heSBjaG9vc2UgdG8gYXBwbHkgc2hhcnBlbmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB5IFRoZSByb3cgdG8gZmV0Y2gsIHdoaWNoIG11c3QgYmUgaW4gWzAsIGJpdG1hcCBoZWlnaHQpCgkgICAgICogQHBhcmFtIHJvdyBBbiBvcHRpb25hbCBwcmVhbGxvY2F0ZWQgYXJyYXkuIElmIG51bGwgb3IgdG9vIHNtYWxsLCBpdCB3aWxsIGJlIGlnbm9yZWQuCgkgICAgICogICAgICAgICAgICBJZiB1c2VkLCB0aGUgQmluYXJpemVyIHdpbGwgY2FsbCBCaXRBcnJheS5jbGVhcigpLiBBbHdheXMgdXNlIHRoZSByZXR1cm5lZCBvYmplY3QuCgkgICAgICogQHJldHVybiBUaGUgYXJyYXkgb2YgYml0cyBmb3IgdGhpcyByb3cgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgcm93IGNhbid0IGJlIGJpbmFyaXplZAoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUuZ2V0QmxhY2tSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYmluYXJpemVyLmdldEJsYWNrUm93KHksIHJvdyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBhIDJEIGFycmF5IG9mIGx1bWluYW5jZSBkYXRhIHRvIDEgYml0LiBBcyBhYm92ZSwgYXNzdW1lIHRoaXMgbWV0aG9kIGlzIGV4cGVuc2l2ZQoJICAgICAqIGFuZCBkbyBub3QgY2FsbCBpdCByZXBlYXRlZGx5LiBUaGlzIG1ldGhvZCBpcyBpbnRlbmRlZCBmb3IgZGVjb2RpbmcgMkQgYmFyY29kZXMgYW5kIG1heSBvcgoJICAgICAqIG1heSBub3QgYXBwbHkgc2hhcnBlbmluZy4gVGhlcmVmb3JlLCBhIHJvdyBmcm9tIHRoaXMgbWF0cml4IG1heSBub3QgYmUgaWRlbnRpY2FsIHRvIG9uZQoJICAgICAqIGZldGNoZWQgdXNpbmcgZ2V0QmxhY2tSb3coKSwgc28gZG9uJ3QgbWl4IGFuZCBtYXRjaCBiZXR3ZWVuIHRoZW0uCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIFRoZSAyRCBhcnJheSBvZiBiaXRzIGZvciB0aGUgaW1hZ2UgKHRydWUgbWVhbnMgYmxhY2spLgoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgaW1hZ2UgY2FuJ3QgYmUgYmluYXJpemVkIHRvIG1ha2UgYSBtYXRyaXgKCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmdldEJsYWNrTWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBUaGUgbWF0cml4IGlzIGNyZWF0ZWQgb24gZGVtYW5kIHRoZSBmaXJzdCB0aW1lIGl0IGlzIHJlcXVlc3RlZCwgdGhlbiBjYWNoZWQuIFRoZXJlIGFyZSB0d28KCSAgICAgICAgLy8gcmVhc29ucyBmb3IgdGhpczoKCSAgICAgICAgLy8gMS4gVGhpcyB3b3JrIHdpbGwgbmV2ZXIgYmUgZG9uZSBpZiB0aGUgY2FsbGVyIG9ubHkgaW5zdGFsbHMgMUQgUmVhZGVyIG9iamVjdHMsIG9yIGlmIGEKCSAgICAgICAgLy8gICAgMUQgUmVhZGVyIGZpbmRzIGEgYmFyY29kZSBiZWZvcmUgdGhlIDJEIFJlYWRlcnMgcnVuLgoJICAgICAgICAvLyAyLiBUaGlzIHdvcmsgd2lsbCBvbmx5IGJlIGRvbmUgb25jZSBldmVuIGlmIHRoZSBjYWxsZXIgaW5zdGFsbHMgbXVsdGlwbGUgMkQgUmVhZGVycy4KCSAgICAgICAgaWYgKHRoaXMubWF0cml4ID09PSBudWxsIHx8IHRoaXMubWF0cml4ID09PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gdGhpcy5iaW5hcml6ZXIuZ2V0QmxhY2tNYXRyaXgoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5tYXRyaXg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFdoZXRoZXIgdGhpcyBiaXRtYXAgY2FuIGJlIGNyb3BwZWQuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5pc0Nyb3BTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggY3JvcHBlZCBpbWFnZSBkYXRhLiBJbXBsZW1lbnRhdGlvbnMgbWF5IGtlZXAgYSByZWZlcmVuY2UgdG8gdGhlCgkgICAgICogb3JpZ2luYWwgZGF0YSByYXRoZXIgdGhhbiBhIGNvcHkuIE9ubHkgY2FsbGFibGUgaWYgaXNDcm9wU3VwcG9ydGVkKCkgaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBsZWZ0IFRoZSBsZWZ0IGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0V2lkdGgoKSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB0b3AgY29vcmRpbmF0ZSwgd2hpY2ggbXVzdCBiZSBpbiBbMCxnZXRIZWlnaHQoKSkKCSAgICAgKiBAcGFyYW0gd2lkdGggVGhlIHdpZHRoIG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcGFyYW0gaGVpZ2h0IFRoZSBoZWlnaHQgb2YgdGhlIHJlY3RhbmdsZSB0byBjcm9wLgoJICAgICAqIEByZXR1cm4gQSBjcm9wcGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBuZXdTb3VyY2UgPSB0aGlzLmJpbmFyaXplci5nZXRMdW1pbmFuY2VTb3VyY2UoKS5jcm9wKGxlZnQsIHRvcCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIGJpdG1hcCBzdXBwb3J0cyBjb3VudGVyLWNsb2Nrd2lzZSByb3RhdGlvbi4KCSAgICAgKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLmlzUm90YXRlU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkuaXNSb3RhdGVTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgQmluYXJ5Qml0bWFwLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpOwoJICAgICAgICByZXR1cm4gbmV3IEJpbmFyeUJpdG1hcCh0aGlzLmJpbmFyaXplci5jcmVhdGVCaW5hcml6ZXIobmV3U291cmNlKSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIHJvdGF0ZWQgaW1hZ2UgZGF0YSBieSA0NSBkZWdyZWVzIGNvdW50ZXJjbG9ja3dpc2UuCgkgICAgICogT25seSBjYWxsYWJsZSBpZiB7QGxpbmsgI2lzUm90YXRlU3VwcG9ydGVkKCl9IGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIEEgcm90YXRlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEJpbmFyeUJpdG1hcC5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3U291cmNlID0gdGhpcy5iaW5hcml6ZXIuZ2V0THVtaW5hbmNlU291cmNlKCkucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCk7CgkgICAgICAgIHJldHVybiBuZXcgQmluYXJ5Qml0bWFwKHRoaXMuYmluYXJpemVyLmNyZWF0ZUJpbmFyaXplcihuZXdTb3VyY2UpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaW5hcnlCaXRtYXAucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0QmxhY2tNYXRyaXgoKS50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlIC8qOiBOb3RGb3VuZEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICByZXR1cm4gJyc7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaW5hcnlCaXRtYXA7Cgl9KCkpOwoJdmFyIF9kZWZhdWx0JDMgPSBCaW5hcnlCaXRtYXAkMS5kZWZhdWx0ID0gQmluYXJ5Qml0bWFwOwoKCXZhciBIeWJyaWRCaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSA9IHt9OwoKCXZhciBCaW5hcml6ZXIkMSA9IHt9OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmluYXJpemVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogVGhpcyBjbGFzcyBoaWVyYXJjaHkgcHJvdmlkZXMgYSBzZXQgb2YgbWV0aG9kcyB0byBjb252ZXJ0IGx1bWluYW5jZSBkYXRhIHRvIDEgYml0IGRhdGEuCgkgKiBJdCBhbGxvd3MgdGhlIGFsZ29yaXRobSB0byB2YXJ5IHBvbHltb3JwaGljYWxseSwgZm9yIGV4YW1wbGUgYWxsb3dpbmcgYSB2ZXJ5IGV4cGVuc2l2ZQoJICogdGhyZXNob2xkaW5nIHRlY2huaXF1ZSBmb3Igc2VydmVycyBhbmQgYSBmYXN0IG9uZSBmb3IgbW9iaWxlLiBJdCBhbHNvIHBlcm1pdHMgdGhlIGltcGxlbWVudGF0aW9uCgkgKiB0byB2YXJ5LCBlLmcuIGEgSk5JIHZlcnNpb24gZm9yIEFuZHJvaWQgYW5kIGEgSmF2YSBmYWxsYmFjayB2ZXJzaW9uIGZvciBvdGhlciBwbGF0Zm9ybXMuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpbmFyaXplciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBCaW5hcml6ZXIoc291cmNlKSB7CgkgICAgICAgIHRoaXMuc291cmNlID0gc291cmNlOwoJICAgIH0KCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEx1bWluYW5jZVNvdXJjZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlOwoJICAgIH07CgkgICAgQmluYXJpemVyLnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldFdpZHRoKCk7CgkgICAgfTsKCSAgICBCaW5hcml6ZXIucHJvdG90eXBlLmdldEhlaWdodCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc291cmNlLmdldEhlaWdodCgpOwoJICAgIH07CgkgICAgcmV0dXJuIEJpbmFyaXplcjsKCX0oKSk7CglCaW5hcml6ZXIkMS5kZWZhdWx0ID0gQmluYXJpemVyOwoKCXZhciBCaXRBcnJheSQxID0ge307CgoJdmFyIEFycmF5cyQxID0ge307CgoJdmFyIFN5c3RlbSQxID0ge307CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN5c3RlbSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIFN5c3RlbSgpIHsKCSAgICB9CgkgICAgLy8gcHVibGljIHN0YXRpYyB2b2lkIGFycmF5Y29weShPYmplY3Qgc3JjLCBpbnQgc3JjUG9zLCBPYmplY3QgZGVzdCwgaW50IGRlc3RQb3MsIGludCBsZW5ndGgpCgkgICAgLyoqCgkgICAgICogTWFrZXMgYSBjb3B5IG9mIGEgYXJyYXkuCgkgICAgICovCgkgICAgU3lzdGVtLmFycmF5Y29weSA9IGZ1bmN0aW9uIChzcmMsIHNyY1BvcywgZGVzdCwgZGVzdFBvcywgbGVuZ3RoKSB7CgkgICAgICAgIC8vIFRPRE86IGJldHRlciB1c2Ugc3BsaXQgb3Igc2V0PwoJICAgICAgICB3aGlsZSAobGVuZ3RoLS0pIHsKCSAgICAgICAgICAgIGRlc3RbZGVzdFBvcysrXSA9IHNyY1tzcmNQb3MrK107CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIGN1cnJlbnQgdGltZSBpbiBtaWxsaXNlY29uZHMuCgkgICAgICovCgkgICAgU3lzdGVtLmN1cnJlbnRUaW1lTWlsbGlzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gRGF0ZS5ub3coKTsKCSAgICB9OwoJICAgIHJldHVybiBTeXN0ZW07Cgl9KCkpOwoJU3lzdGVtJDEuZGVmYXVsdCA9IFN5c3RlbTsKCgl2YXIgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyRoID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDggPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkaChJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbi5raW5kID0gJ0luZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ4LmRlZmF1bHQpKTsKCUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gSW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbjsKCgl2YXIgX19leHRlbmRzJGcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uXzEgPSBJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uJDE7CgkvKioKCSAqIEN1c3RvbSBFcnJvciBjbGFzcyBvZiB0eXBlIEV4Y2VwdGlvbi4KCSAqLwoJdmFyIEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZyhBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uKGluZGV4LCBtZXNzYWdlKSB7CgkgICAgICAgIGlmIChpbmRleCA9PT0gdm9pZCAwKSB7IGluZGV4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIGlmIChtZXNzYWdlID09PSB2b2lkIDApIHsgbWVzc2FnZSA9IHVuZGVmaW5lZDsgfQoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBtZXNzYWdlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5pbmRleCA9IGluZGV4OwoJICAgICAgICBfdGhpcy5tZXNzYWdlID0gbWVzc2FnZTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24ua2luZCA9ICdBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24nOwoJICAgIHJldHVybiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb247Cgl9KEluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KSk7CglBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24kMS5kZWZhdWx0ID0gQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uOwoKCXZhciBfX3ZhbHVlcyQ3ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFycmF5cyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3lzdGVtXzEkNSA9IFN5c3RlbSQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDkgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMSA9IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbiQxOwoJdmFyIEFycmF5cyA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBcnJheXMoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQgYXJyYXkKCSAgICAgKiBvZiBpbnRzLgoJICAgICAqCgkgICAgICogQHBhcmFtIGEgdGhlIGFycmF5IHRvIGJlIGZpbGxlZAoJICAgICAqIEBwYXJhbSB2YWwgdGhlIHZhbHVlIHRvIGJlIHN0b3JlZCBpbiBhbGwgZWxlbWVudHMgb2YgdGhlIGFycmF5CgkgICAgICovCgkgICAgQXJyYXlzLmZpbGwgPSBmdW5jdGlvbiAoYSwgdmFsKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW4gPSBhLmxlbmd0aDsgaSA8IGxlbjsgaSsrKQoJICAgICAgICAgICAgYVtpXSA9IHZhbDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFzc2lnbnMgdGhlIHNwZWNpZmllZCBpbnQgdmFsdWUgdG8gZWFjaCBlbGVtZW50IG9mIHRoZSBzcGVjaWZpZWQKCSAgICAgKiByYW5nZSBvZiB0aGUgc3BlY2lmaWVkIGFycmF5IG9mIGludHMuICBUaGUgcmFuZ2UgdG8gYmUgZmlsbGVkCgkgICAgICogZXh0ZW5kcyBmcm9tIGluZGV4IHtAY29kZSBmcm9tSW5kZXh9LCBpbmNsdXNpdmUsIHRvIGluZGV4CgkgICAgICoge0Bjb2RlIHRvSW5kZXh9LCBleGNsdXNpdmUuICAoSWYge0Bjb2RlIGZyb21JbmRleD09dG9JbmRleH0sIHRoZQoJICAgICAqIHJhbmdlIHRvIGJlIGZpbGxlZCBpcyBlbXB0eS4pCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYSB0aGUgYXJyYXkgdG8gYmUgZmlsbGVkCgkgICAgICogQHBhcmFtIGZyb21JbmRleCB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGVsZW1lbnQgKGluY2x1c2l2ZSkgdG8gYmUKCSAgICAgKiAgICAgICAgZmlsbGVkIHdpdGggdGhlIHNwZWNpZmllZCB2YWx1ZQoJICAgICAqIEBwYXJhbSB0b0luZGV4IHRoZSBpbmRleCBvZiB0aGUgbGFzdCBlbGVtZW50IChleGNsdXNpdmUpIHRvIGJlCgkgICAgICogICAgICAgIGZpbGxlZCB3aXRoIHRoZSBzcGVjaWZpZWQgdmFsdWUKCSAgICAgKiBAcGFyYW0gdmFsIHRoZSB2YWx1ZSB0byBiZSBzdG9yZWQgaW4gYWxsIGVsZW1lbnRzIG9mIHRoZSBhcnJheQoJICAgICAqIEB0aHJvd3MgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPiB0b0luZGV4fQoJICAgICAqIEB0aHJvd3MgQXJyYXlJbmRleE91dE9mQm91bmRzRXhjZXB0aW9uIGlmIHtAY29kZSBmcm9tSW5kZXggPCAwfSBvcgoJICAgICAqICAgICAgICAge0Bjb2RlIHRvSW5kZXggPiBhLmxlbmd0aH0KCSAgICAgKi8KCSAgICBBcnJheXMuZmlsbFdpdGhpbiA9IGZ1bmN0aW9uIChhLCBmcm9tSW5kZXgsIHRvSW5kZXgsIHZhbCkgewoJICAgICAgICBBcnJheXMucmFuZ2VDaGVjayhhLmxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZyb21JbmRleDsgaSA8IHRvSW5kZXg7IGkrKykKCSAgICAgICAgICAgIGFbaV0gPSB2YWw7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDaGVja3MgdGhhdCB7QGNvZGUgZnJvbUluZGV4fSBhbmQge0Bjb2RlIHRvSW5kZXh9IGFyZSBpbgoJICAgICAqIHRoZSByYW5nZSBhbmQgdGhyb3dzIGFuIGV4Y2VwdGlvbiBpZiB0aGV5IGFyZW4ndC4KCSAgICAgKi8KCSAgICBBcnJheXMucmFuZ2VDaGVjayA9IGZ1bmN0aW9uIChhcnJheUxlbmd0aCwgZnJvbUluZGV4LCB0b0luZGV4KSB7CgkgICAgICAgIGlmIChmcm9tSW5kZXggPiB0b0luZGV4KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOS5kZWZhdWx0KCdmcm9tSW5kZXgoJyArIGZyb21JbmRleCArICcpID4gdG9JbmRleCgnICsgdG9JbmRleCArICcpJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGZyb21JbmRleCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb25fMS5kZWZhdWx0KGZyb21JbmRleCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvSW5kZXggPiBhcnJheUxlbmd0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEFycmF5SW5kZXhPdXRPZkJvdW5kc0V4Y2VwdGlvbl8xLmRlZmF1bHQodG9JbmRleCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEFycmF5cy5hc0xpc3QgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBhcmdzID0gW107CgkgICAgICAgIGZvciAodmFyIF9pID0gMDsgX2kgPCBhcmd1bWVudHMubGVuZ3RoOyBfaSsrKSB7CgkgICAgICAgICAgICBhcmdzW19pXSA9IGFyZ3VtZW50c1tfaV07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGFyZ3M7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlID0gZnVuY3Rpb24gKHJvd3MsIGNvbHMsIHZhbHVlKSB7CgkgICAgICAgIHZhciBhcnIgPSBBcnJheS5mcm9tKHsgbGVuZ3RoOiByb3dzIH0pOwoJICAgICAgICByZXR1cm4gYXJyLm1hcChmdW5jdGlvbiAoeCkgeyByZXR1cm4gQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuY3JlYXRlSW50MzJBcnJheSA9IGZ1bmN0aW9uIChyb3dzLCBjb2xzLCB2YWx1ZSkgewoJICAgICAgICB2YXIgYXJyID0gQXJyYXkuZnJvbSh7IGxlbmd0aDogcm93cyB9KTsKCSAgICAgICAgcmV0dXJuIGFyci5tYXAoZnVuY3Rpb24gKHgpIHsgcmV0dXJuIEludDMyQXJyYXkuZnJvbSh7IGxlbmd0aDogY29scyB9KS5maWxsKHZhbHVlKTsgfSk7CgkgICAgfTsKCSAgICBBcnJheXMuZXF1YWxzID0gZnVuY3Rpb24gKGZpcnN0LCBzZWNvbmQpIHsKCSAgICAgICAgaWYgKCFmaXJzdCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIGlmICghc2Vjb25kKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKCFmaXJzdC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoIXNlY29uZC5sZW5ndGgpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZmlyc3QubGVuZ3RoICE9PSBzZWNvbmQubGVuZ3RoKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gZmlyc3QubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgaWYgKGZpcnN0W2ldICE9PSBzZWNvbmRbaV0pIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICBBcnJheXMuaGFzaENvZGUgPSBmdW5jdGlvbiAoYSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgaWYgKGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSAxOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgYV8xID0gX192YWx1ZXMkNyhhKSwgYV8xXzEgPSBhXzEubmV4dCgpOyAhYV8xXzEuZG9uZTsgYV8xXzEgPSBhXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVsZW1lbnQgPSBhXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAzMSAqIHJlc3VsdCArIGVsZW1lbnQ7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChhXzFfMSAmJiAhYV8xXzEuZG9uZSAmJiAoX2EgPSBhXzEucmV0dXJuKSkgX2EuY2FsbChhXzEpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzEpIHRocm93IGVfMS5lcnJvcjsgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBBcnJheXMuZmlsbFVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAoYSwgdmFsdWUpIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgIT09IGEubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIGFbaV0gPSB2YWx1ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZiA9IGZ1bmN0aW9uIChvcmlnaW5hbCwgbmV3TGVuZ3RoKSB7CgkgICAgICAgIHJldHVybiBvcmlnaW5hbC5zbGljZSgwLCBuZXdMZW5ndGgpOwoJICAgIH07CgkgICAgQXJyYXlzLmNvcHlPZlVpbnQ4QXJyYXkgPSBmdW5jdGlvbiAob3JpZ2luYWwsIG5ld0xlbmd0aCkgewoJICAgICAgICBpZiAob3JpZ2luYWwubGVuZ3RoIDw9IG5ld0xlbmd0aCkgewoJICAgICAgICAgICAgdmFyIG5ld0FycmF5ID0gbmV3IFVpbnQ4QXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgICAgIG5ld0FycmF5LnNldChvcmlnaW5hbCk7CgkgICAgICAgICAgICByZXR1cm4gbmV3QXJyYXk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG9yaWdpbmFsLnNsaWNlKDAsIG5ld0xlbmd0aCk7CgkgICAgfTsKCSAgICBBcnJheXMuY29weU9mUmFuZ2UgPSBmdW5jdGlvbiAob3JpZ2luYWwsIGZyb20sIHRvKSB7CgkgICAgICAgIHZhciBuZXdMZW5ndGggPSB0byAtIGZyb207CgkgICAgICAgIHZhciBjb3B5ID0gbmV3IEludDMyQXJyYXkobmV3TGVuZ3RoKTsKCSAgICAgICAgU3lzdGVtXzEkNS5kZWZhdWx0LmFycmF5Y29weShvcmlnaW5hbCwgZnJvbSwgY29weSwgMCwgbmV3TGVuZ3RoKTsKCSAgICAgICAgcmV0dXJuIGNvcHk7CgkgICAgfTsKCSAgICAvKgoJICAgICogUmV0dXJucyB0aGUgaW5kZXggb2Ygb2YgdGhlIGVsZW1lbnQgaW4gYSBzb3J0ZWQgYXJyYXkgb3IgKC1uLTEpIHdoZXJlIG4gaXMgdGhlIGluc2VydGlvbiBwb2ludAoJICAgICogZm9yIHRoZSBuZXcgZWxlbWVudC4KCSAgICAqIFBhcmFtZXRlcnM6CgkgICAgKiAgICAgYXIgLSBBIHNvcnRlZCBhcnJheQoJICAgICogICAgIGVsIC0gQW4gZWxlbWVudCB0byBzZWFyY2ggZm9yCgkgICAgKiAgICAgY29tcGFyYXRvciAtIEEgY29tcGFyYXRvciBmdW5jdGlvbi4gVGhlIGZ1bmN0aW9uIHRha2VzIHR3byBhcmd1bWVudHM6IChhLCBiKSBhbmQgcmV0dXJuczoKCSAgICAqICAgICAgICBhIG5lZ2F0aXZlIG51bWJlciAgaWYgYSBpcyBsZXNzIHRoYW4gYjsKCSAgICAqICAgICAgICAwIGlmIGEgaXMgZXF1YWwgdG8gYjsKCSAgICAqICAgICAgICBhIHBvc2l0aXZlIG51bWJlciBvZiBhIGlzIGdyZWF0ZXIgdGhhbiBiLgoJICAgICogVGhlIGFycmF5IG1heSBjb250YWluIGR1cGxpY2F0ZSBlbGVtZW50cy4gSWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgZXF1YWwgZWxlbWVudHMgaW4gdGhlIGFycmF5LAoJICAgICogdGhlIHJldHVybmVkIHZhbHVlIGNhbiBiZSB0aGUgaW5kZXggb2YgYW55IG9uZSBvZiB0aGUgZXF1YWwgZWxlbWVudHMuCgkgICAgKgoJICAgICogaHR0cDovL2pzZmlkZGxlLm5ldC9hcnl6aG92L3BrZnN0NTUwLwoJICAgICovCgkgICAgQXJyYXlzLmJpbmFyeVNlYXJjaCA9IGZ1bmN0aW9uIChhciwgZWwsIGNvbXBhcmF0b3IpIHsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY29tcGFyYXRvcikgewoJICAgICAgICAgICAgY29tcGFyYXRvciA9IEFycmF5cy5udW1iZXJDb21wYXJhdG9yOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtID0gMDsKCSAgICAgICAgdmFyIG4gPSBhci5sZW5ndGggLSAxOwoJICAgICAgICB3aGlsZSAobSA8PSBuKSB7CgkgICAgICAgICAgICB2YXIgayA9IChuICsgbSkgPj4gMTsKCSAgICAgICAgICAgIHZhciBjbXAgPSBjb21wYXJhdG9yKGVsLCBhcltrXSk7CgkgICAgICAgICAgICBpZiAoY21wID4gMCkgewoJICAgICAgICAgICAgICAgIG0gPSBrICsgMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKGNtcCA8IDApIHsKCSAgICAgICAgICAgICAgICBuID0gayAtIDE7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gLW0gLSAxOwoJICAgIH07CgkgICAgQXJyYXlzLm51bWJlckNvbXBhcmF0b3IgPSBmdW5jdGlvbiAoYSwgYikgewoJICAgICAgICByZXR1cm4gYSAtIGI7CgkgICAgfTsKCSAgICByZXR1cm4gQXJyYXlzOwoJfSgpKTsKCUFycmF5cyQxLmRlZmF1bHQgPSBBcnJheXM7CgoJdmFyIEludGVnZXIkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnRlZ2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogUG9ueWZpbGwgZm9yIEphdmEncyBJbnRlZ2VyIGNsYXNzLgoJICovCgl2YXIgSW50ZWdlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBJbnRlZ2VyKCkgewoJICAgIH0KCSAgICBJbnRlZ2VyLm51bWJlck9mVHJhaWxpbmdaZXJvcyA9IGZ1bmN0aW9uIChpKSB7CgkgICAgICAgIHZhciB5OwoJICAgICAgICBpZiAoaSA9PT0gMCkKCSAgICAgICAgICAgIHJldHVybiAzMjsKCSAgICAgICAgdmFyIG4gPSAzMTsKCSAgICAgICAgeSA9IGkgPDwgMTY7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDE2OwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgeSA9IGkgPDwgODsKCSAgICAgICAgaWYgKHkgIT09IDApIHsKCSAgICAgICAgICAgIG4gLT0gODsKCSAgICAgICAgICAgIGkgPSB5OwoJICAgICAgICB9CgkgICAgICAgIHkgPSBpIDw8IDQ7CgkgICAgICAgIGlmICh5ICE9PSAwKSB7CgkgICAgICAgICAgICBuIC09IDQ7CgkgICAgICAgICAgICBpID0geTsKCSAgICAgICAgfQoJICAgICAgICB5ID0gaSA8PCAyOwoJICAgICAgICBpZiAoeSAhPT0gMCkgewoJICAgICAgICAgICAgbiAtPSAyOwoJICAgICAgICAgICAgaSA9IHk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG4gLSAoKGkgPDwgMSkgPj4+IDMxKTsKCSAgICB9OwoJICAgIEludGVnZXIubnVtYmVyT2ZMZWFkaW5nWmVyb3MgPSBmdW5jdGlvbiAoaSkgewoJICAgICAgICAvLyBIRCwgRmlndXJlIDUtNgoJICAgICAgICBpZiAoaSA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDMyOwoJICAgICAgICB9CgkgICAgICAgIHZhciBuID0gMTsKCSAgICAgICAgaWYgKGkgPj4+IDE2ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDE2OwoJICAgICAgICAgICAgaSA8PD0gMTY7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGkgPj4+IDI0ID09PSAwKSB7CgkgICAgICAgICAgICBuICs9IDg7CgkgICAgICAgICAgICBpIDw8PSA4OwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID4+PiAyOCA9PT0gMCkgewoJICAgICAgICAgICAgbiArPSA0OwoJICAgICAgICAgICAgaSA8PD0gNDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaSA+Pj4gMzAgPT09IDApIHsKCSAgICAgICAgICAgIG4gKz0gMjsKCSAgICAgICAgICAgIGkgPDw9IDI7CgkgICAgICAgIH0KCSAgICAgICAgbiAtPSBpID4+PiAzMTsKCSAgICAgICAgcmV0dXJuIG47CgkgICAgfTsKCSAgICBJbnRlZ2VyLnRvSGV4U3RyaW5nID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgcmV0dXJuIGkudG9TdHJpbmcoMTYpOwoJICAgIH07CgkgICAgSW50ZWdlci50b0JpbmFyeVN0cmluZyA9IGZ1bmN0aW9uIChpbnROdW1iZXIpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZyhwYXJzZUludChTdHJpbmcoaW50TnVtYmVyKSwgMikpOwoJICAgIH07CgkgICAgLy8gUmV0dXJucyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4gVGhpcyBmdW5jdGlvbiBpcyBzb21ldGltZXMgcmVmZXJyZWQgdG8gYXMgdGhlIHBvcHVsYXRpb24gY291bnQuCgkgICAgLy8gUmV0dXJuczoKCSAgICAvLyB0aGUgbnVtYmVyIG9mIG9uZS1iaXRzIGluIHRoZSB0d28ncyBjb21wbGVtZW50IGJpbmFyeSByZXByZXNlbnRhdGlvbiBvZiB0aGUgc3BlY2lmaWVkIGludCB2YWx1ZS4KCSAgICBJbnRlZ2VyLmJpdENvdW50ID0gZnVuY3Rpb24gKGkpIHsKCSAgICAgICAgLy8gSEQsIEZpZ3VyZSA1LTIKCSAgICAgICAgaSA9IGkgLSAoKGkgPj4+IDEpICYgMHg1NTU1NTU1NSk7CgkgICAgICAgIGkgPSAoaSAmIDB4MzMzMzMzMzMpICsgKChpID4+PiAyKSAmIDB4MzMzMzMzMzMpOwoJICAgICAgICBpID0gKGkgKyAoaSA+Pj4gNCkpICYgMHgwZjBmMGYwZjsKCSAgICAgICAgaSA9IGkgKyAoaSA+Pj4gOCk7CgkgICAgICAgIGkgPSBpICsgKGkgPj4+IDE2KTsKCSAgICAgICAgcmV0dXJuIGkgJiAweDNmOwoJICAgIH07CgkgICAgSW50ZWdlci50cnVuY0RpdmlzaW9uID0gZnVuY3Rpb24gKGRpdmlkZW5kLCBkaXZpc29yKSB7CgkgICAgICAgIHJldHVybiBNYXRoLnRydW5jKGRpdmlkZW5kIC8gZGl2aXNvcik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDb252ZXJ0cyBBIHN0cmluZyB0byBhbiBpbnRlZ2VyLgoJICAgICAqIEBwYXJhbSBzIEEgc3RyaW5nIHRvIGNvbnZlcnQgaW50byBhIG51bWJlci4KCSAgICAgKiBAcGFyYW0gcmFkaXggQSB2YWx1ZSBiZXR3ZWVuIDIgYW5kIDM2IHRoYXQgc3BlY2lmaWVzIHRoZSBiYXNlIG9mIHRoZSBudW1iZXIgaW4gbnVtU3RyaW5nLiBJZiB0aGlzIGFyZ3VtZW50IGlzIG5vdCBzdXBwbGllZCwgc3RyaW5ncyB3aXRoIGEgcHJlZml4IG9mICcweCcgYXJlIGNvbnNpZGVyZWQgaGV4YWRlY2ltYWwuIEFsbCBvdGhlciBzdHJpbmdzIGFyZSBjb25zaWRlcmVkIGRlY2ltYWwuCgkgICAgICovCgkgICAgSW50ZWdlci5wYXJzZUludCA9IGZ1bmN0aW9uIChudW0sIHJhZGl4KSB7CgkgICAgICAgIGlmIChyYWRpeCA9PT0gdm9pZCAwKSB7IHJhZGl4ID0gdW5kZWZpbmVkOyB9CgkgICAgICAgIHJldHVybiBwYXJzZUludChudW0sIHJhZGl4KTsKCSAgICB9OwoJICAgIEludGVnZXIuTUlOX1ZBTFVFXzMyX0JJVFMgPSAtMjE0NzQ4MzY0ODsKCSAgICBJbnRlZ2VyLk1BWF9WQUxVRSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgIHJldHVybiBJbnRlZ2VyOwoJfSgpKTsKCUludGVnZXIkMS5kZWZhdWx0ID0gSW50ZWdlcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdEFycmF5JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDggPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcnJheXNfMSQxID0gQXJyYXlzJDE7Cgl2YXIgSW50ZWdlcl8xJDIgPSBJbnRlZ2VyJDE7Cgl2YXIgU3lzdGVtXzEkNCA9IFN5c3RlbSQxOwoJLyoqCgkgKiA8cD5BIHNpbXBsZSwgZmFzdCBhcnJheSBvZiBiaXRzLCByZXByZXNlbnRlZCBjb21wYWN0bHkgYnkgYW4gYXJyYXkgb2YgaW50cyBpbnRlcm5hbGx5LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgQml0QXJyYXkgLyppbXBsZW1lbnRzIENsb25lYWJsZSovID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcigpIHsKCSAgICAvLyAgIHRoaXMuc2l6ZSA9IDAKCSAgICAvLyAgIHRoaXMuYml0cyA9IG5ldyBJbnQzMkFycmF5KDEpCgkgICAgLy8gfQoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3RvcihzaXplPzogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh1bmRlZmluZWQgPT09IHNpemUpIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gMAoJICAgIC8vICAgfSBlbHNlIHsKCSAgICAvLyAgICAgdGhpcy5zaXplID0gc2l6ZQoJICAgIC8vICAgfQoJICAgIC8vICAgdGhpcy5iaXRzID0gdGhpcy5tYWtlQXJyYXkoc2l6ZSkKCSAgICAvLyB9CgkgICAgLy8gRm9yIHRlc3Rpbmcgb25seQoJICAgIGZ1bmN0aW9uIEJpdEFycmF5KHNpemUgLyppbnQqLywgYml0cykgewoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBzaXplKSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSAwOwoJICAgICAgICAgICAgdGhpcy5iaXRzID0gbmV3IEludDMyQXJyYXkoMSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwoJICAgICAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gQml0QXJyYXkubWFrZUFycmF5KHNpemUpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH0KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0U2l6ZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc2l6ZTsKCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXRTaXplSW5CeXRlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIE1hdGguZmxvb3IoKHRoaXMuc2l6ZSArIDcpIC8gOCk7CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZW5zdXJlQ2FwYWNpdHkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmIChzaXplID4gdGhpcy5iaXRzLmxlbmd0aCAqIDMyKSB7CgkgICAgICAgICAgICB2YXIgbmV3Qml0cyA9IEJpdEFycmF5Lm1ha2VBcnJheShzaXplKTsKCSAgICAgICAgICAgIFN5c3RlbV8xJDQuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5iaXRzLCAwLCBuZXdCaXRzLCAwLCB0aGlzLmJpdHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBpIGJpdCB0byBnZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGJpdCBpIGlzIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiAodGhpcy5iaXRzW01hdGguZmxvb3IoaSAvIDMyKV0gJiAoMSA8PCAoaSAmIDB4MUYpKSkgIT09IDA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoaSAvKmludCovKSB7CgkgICAgICAgIHRoaXMuYml0c1tNYXRoLmZsb29yKGkgLyAzMildIHw9IDEgPDwgKGkgJiAweDFGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEZsaXBzIGJpdCBpLgoJICAgICAqCgkgICAgICogQHBhcmFtIGkgYml0IHRvIHNldAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5mbGlwID0gZnVuY3Rpb24gKGkgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSBePSAxIDw8IChpICYgMHgxRik7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBmaXJzdCBiaXQgdG8gY2hlY2sKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIGZpcnN0IGJpdCB0aGF0IGlzIHNldCwgc3RhcnRpbmcgZnJvbSB0aGUgZ2l2ZW4gaW5kZXgsIG9yIHNpemUgaWYgbm9uZSBhcmUgc2V0CgkgICAgICogIGF0IG9yIGJleW9uZCB0aGlzIGdpdmVuIGluZGV4CgkgICAgICogQHNlZSAjZ2V0TmV4dFVuc2V0KGludCkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZ2V0TmV4dFNldCA9IGZ1bmN0aW9uIChmcm9tIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLnNpemU7CgkgICAgICAgIGlmIChmcm9tID49IHNpemUpIHsKCSAgICAgICAgICAgIHJldHVybiBzaXplOwoJICAgICAgICB9CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IE1hdGguZmxvb3IoZnJvbSAvIDMyKTsKCSAgICAgICAgdmFyIGN1cnJlbnRCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgLy8gbWFzayBvZmYgbGVzc2VyIGJpdHMgZmlyc3QKCSAgICAgICAgY3VycmVudEJpdHMgJj0gfigoMSA8PCAoZnJvbSAmIDB4MUYpKSAtIDEpOwoJICAgICAgICB2YXIgbGVuZ3RoID0gYml0cy5sZW5ndGg7CgkgICAgICAgIHdoaWxlIChjdXJyZW50Qml0cyA9PT0gMCkgewoJICAgICAgICAgICAgaWYgKCsrYml0c09mZnNldCA9PT0gbGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIHNpemU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjdXJyZW50Qml0cyA9IGJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gZnJvbSBpbmRleCB0byBzdGFydCBsb29raW5nIGZvciB1bnNldCBiaXQKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgdW5zZXQgYml0LCBvciB7QGNvZGUgc2l6ZX0gaWYgbm9uZSBhcmUgdW5zZXQgdW50aWwgdGhlIGVuZAoJICAgICAqIEBzZWUgI2dldE5leHRTZXQoaW50KQoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5nZXROZXh0VW5zZXQgPSBmdW5jdGlvbiAoZnJvbSAvKmludCovKSB7CgkgICAgICAgIHZhciBzaXplID0gdGhpcy5zaXplOwoJICAgICAgICBpZiAoZnJvbSA+PSBzaXplKSB7CgkgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIGJpdHNPZmZzZXQgPSBNYXRoLmZsb29yKGZyb20gLyAzMik7CgkgICAgICAgIHZhciBjdXJyZW50Qml0cyA9IH5iaXRzW2JpdHNPZmZzZXRdOwoJICAgICAgICAvLyBtYXNrIG9mZiBsZXNzZXIgYml0cyBmaXJzdAoJICAgICAgICBjdXJyZW50Qml0cyAmPSB+KCgxIDw8IChmcm9tICYgMHgxRikpIC0gMSk7CgkgICAgICAgIHZhciBsZW5ndGggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgd2hpbGUgKGN1cnJlbnRCaXRzID09PSAwKSB7CgkgICAgICAgICAgICBpZiAoKytiaXRzT2Zmc2V0ID09PSBsZW5ndGgpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gc2l6ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGN1cnJlbnRCaXRzID0gfmJpdHNbYml0c09mZnNldF07CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdCA9IChiaXRzT2Zmc2V0ICogMzIpICsgSW50ZWdlcl8xJDIuZGVmYXVsdC5udW1iZXJPZlRyYWlsaW5nWmVyb3MoY3VycmVudEJpdHMpOwoJICAgICAgICByZXR1cm4gcmVzdWx0ID4gc2l6ZSA/IHNpemUgOiByZXN1bHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgYmxvY2sgb2YgMzIgYml0cywgc3RhcnRpbmcgYXQgYml0IGkuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gaSBmaXJzdCBiaXQgdG8gc2V0CgkgICAgICogQHBhcmFtIG5ld0JpdHMgdGhlIG5ldyB2YWx1ZSBvZiB0aGUgbmV4dCAzMiBiaXRzLiBOb3RlIGFnYWluIHRoYXQgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdAoJICAgICAqIGNvcnJlc3BvbmRzIHRvIGJpdCBpLCB0aGUgbmV4dC1sZWFzdC1zaWduaWZpY2FudCB0byBpKzEsIGFuZCBzbyBvbi4KCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0QnVsayA9IGZ1bmN0aW9uIChpIC8qaW50Ki8sIG5ld0JpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLmJpdHNbTWF0aC5mbG9vcihpIC8gMzIpXSA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZXRzIGEgcmFuZ2Ugb2YgYml0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydCBzdGFydCBvZiByYW5nZSwgaW5jbHVzaXZlLgoJICAgICAqIEBwYXJhbSBlbmQgZW5kIG9mIHJhbmdlLCBleGNsdXNpdmUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuc2V0UmFuZ2UgPSBmdW5jdGlvbiAoc3RhcnQgLyppbnQqLywgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIGVuZC0tOyAvLyB3aWxsIGJlIGVhc2llciB0byB0cmVhdCB0aGlzIGFzIHRoZSBsYXN0IGFjdHVhbGx5IHNldCBiaXQgLS0gaW5jbHVzaXZlCgkgICAgICAgIHZhciBmaXJzdEludCA9IE1hdGguZmxvb3Ioc3RhcnQgLyAzMik7CgkgICAgICAgIHZhciBsYXN0SW50ID0gTWF0aC5mbG9vcihlbmQgLyAzMik7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RJbnQ7IGkgPD0gbGFzdEludDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgZmlyc3RCaXQgPSBpID4gZmlyc3RJbnQgPyAwIDogc3RhcnQgJiAweDFGOwoJICAgICAgICAgICAgdmFyIGxhc3RCaXQgPSBpIDwgbGFzdEludCA/IDMxIDogZW5kICYgMHgxRjsKCSAgICAgICAgICAgIC8vIE9uZXMgZnJvbSBmaXJzdEJpdCB0byBsYXN0Qml0LCBpbmNsdXNpdmUKCSAgICAgICAgICAgIHZhciBtYXNrID0gKDIgPDwgbGFzdEJpdCkgLSAoMSA8PCBmaXJzdEJpdCk7CgkgICAgICAgICAgICBiaXRzW2ldIHw9IG1hc2s7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmNsZWFyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbWF4ID0gdGhpcy5iaXRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGJpdHNbaV0gPSAwOwoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBFZmZpY2llbnQgbWV0aG9kIHRvIGNoZWNrIGlmIGEgcmFuZ2Ugb2YgYml0cyBpcyBzZXQsIG9yIG5vdCBzZXQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnQgc3RhcnQgb2YgcmFuZ2UsIGluY2x1c2l2ZS4KCSAgICAgKiBAcGFyYW0gZW5kIGVuZCBvZiByYW5nZSwgZXhjbHVzaXZlCgkgICAgICogQHBhcmFtIHZhbHVlIGlmIHRydWUsIGNoZWNrcyB0aGF0IGJpdHMgaW4gcmFuZ2UgYXJlIHNldCwgb3RoZXJ3aXNlIGNoZWNrcyB0aGF0IHRoZXkgYXJlIG5vdCBzZXQKCSAgICAgKiBAcmV0dXJuIHRydWUgaWZmIGFsbCBiaXRzIGFyZSBzZXQgb3Igbm90IHNldCBpbiByYW5nZSwgYWNjb3JkaW5nIHRvIHZhbHVlIGFyZ3VtZW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgZW5kIGlzIGxlc3MgdGhhbiBzdGFydCBvciB0aGUgcmFuZ2UgaXMgbm90IGNvbnRhaW5lZCBpbiB0aGUgYXJyYXkKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuaXNSYW5nZSA9IGZ1bmN0aW9uIChzdGFydCAvKmludCovLCBlbmQgLyppbnQqLywgdmFsdWUpIHsKCSAgICAgICAgaWYgKGVuZCA8IHN0YXJ0IHx8IHN0YXJ0IDwgMCB8fCBlbmQgPiB0aGlzLnNpemUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ4LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoZW5kID09PSBzdGFydCkgewoJICAgICAgICAgICAgcmV0dXJuIHRydWU7IC8vIGVtcHR5IHJhbmdlIG1hdGNoZXMKCSAgICAgICAgfQoJICAgICAgICBlbmQtLTsgLy8gd2lsbCBiZSBlYXNpZXIgdG8gdHJlYXQgdGhpcyBhcyB0aGUgbGFzdCBhY3R1YWxseSBzZXQgYml0IC0tIGluY2x1c2l2ZQoJICAgICAgICB2YXIgZmlyc3RJbnQgPSBNYXRoLmZsb29yKHN0YXJ0IC8gMzIpOwoJICAgICAgICB2YXIgbGFzdEludCA9IE1hdGguZmxvb3IoZW5kIC8gMzIpOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgaSA9IGZpcnN0SW50OyBpIDw9IGxhc3RJbnQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGZpcnN0Qml0ID0gaSA+IGZpcnN0SW50ID8gMCA6IHN0YXJ0ICYgMHgxRjsKCSAgICAgICAgICAgIHZhciBsYXN0Qml0ID0gaSA8IGxhc3RJbnQgPyAzMSA6IGVuZCAmIDB4MUY7CgkgICAgICAgICAgICAvLyBPbmVzIGZyb20gZmlyc3RCaXQgdG8gbGFzdEJpdCwgaW5jbHVzaXZlCgkgICAgICAgICAgICB2YXIgbWFzayA9ICgyIDw8IGxhc3RCaXQpIC0gKDEgPDwgZmlyc3RCaXQpICYgMHhGRkZGRkZGRjsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiAmIDB4RkZGRkZGRkYgYWRkZWQgdG8gZGlzY2FyZCBhbnl0aGluZyBhZnRlciAzMiBiaXRzLCBhcyBFUyBoYXMgNTMgYml0cwoJICAgICAgICAgICAgLy8gUmV0dXJuIGZhbHNlIGlmIHdlJ3JlIGxvb2tpbmcgZm9yIDFzIGFuZCB0aGUgbWFza2VkIGJpdHNbaV0gaXNuJ3QgYWxsIDFzIChpczogdGhhdCwKCSAgICAgICAgICAgIC8vIGVxdWFscyB0aGUgbWFzaywgb3Igd2UncmUgbG9va2luZyBmb3IgMHMgYW5kIHRoZSBtYXNrZWQgcG9ydGlvbiBpcyBub3QgYWxsIDBzCgkgICAgICAgICAgICBpZiAoKGJpdHNbaV0gJiBtYXNrKSAhPT0gKHZhbHVlID8gbWFzayA6IDApKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0cnVlOwoJICAgIH07CgkgICAgQml0QXJyYXkucHJvdG90eXBlLmFwcGVuZEJpdCA9IGZ1bmN0aW9uIChiaXQpIHsKCSAgICAgICAgdGhpcy5lbnN1cmVDYXBhY2l0eSh0aGlzLnNpemUgKyAxKTsKCSAgICAgICAgaWYgKGJpdCkgewoJICAgICAgICAgICAgdGhpcy5iaXRzW01hdGguZmxvb3IodGhpcy5zaXplIC8gMzIpXSB8PSAxIDw8ICh0aGlzLnNpemUgJiAweDFGKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLnNpemUrKzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEFwcGVuZHMgdGhlIGxlYXN0LXNpZ25pZmljYW50IGJpdHMsIGZyb20gdmFsdWUsIGluIG9yZGVyIGZyb20gbW9zdC1zaWduaWZpY2FudCB0bwoJICAgICAqIGxlYXN0LXNpZ25pZmljYW50LiBGb3IgZXhhbXBsZSwgYXBwZW5kaW5nIDYgYml0cyBmcm9tIDB4MDAwMDAxRSB3aWxsIGFwcGVuZCB0aGUgYml0cwoJICAgICAqIDAsIDEsIDEsIDEsIDEsIDAgaW4gdGhhdCBvcmRlci4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB2YWx1ZSB7QGNvZGUgaW50fSBjb250YWluaW5nIGJpdHMgdG8gYXBwZW5kCgkgICAgICogQHBhcmFtIG51bUJpdHMgYml0cyBmcm9tIHZhbHVlIHRvIGFwcGVuZAoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5hcHBlbmRCaXRzID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICBpZiAobnVtQml0cyA8IDAgfHwgbnVtQml0cyA+IDMyKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkOC5kZWZhdWx0KCdOdW0gYml0cyBtdXN0IGJlIGJldHdlZW4gMCBhbmQgMzInKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmVuc3VyZUNhcGFjaXR5KHRoaXMuc2l6ZSArIG51bUJpdHMpOwoJICAgICAgICAvLyBjb25zdCBhcHBlbmRCaXQgPSB0aGlzLmFwcGVuZEJpdDsKCSAgICAgICAgZm9yICh2YXIgbnVtQml0c0xlZnQgPSBudW1CaXRzOyBudW1CaXRzTGVmdCA+IDA7IG51bUJpdHNMZWZ0LS0pIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KCgodmFsdWUgPj4gKG51bUJpdHNMZWZ0IC0gMSkpICYgMHgwMSkgPT09IDEpOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBCaXRBcnJheS5wcm90b3R5cGUuYXBwZW5kQml0QXJyYXkgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdmFyIG90aGVyU2l6ZSA9IG90aGVyLnNpemU7CgkgICAgICAgIHRoaXMuZW5zdXJlQ2FwYWNpdHkodGhpcy5zaXplICsgb3RoZXJTaXplKTsKCSAgICAgICAgLy8gY29uc3QgYXBwZW5kQml0ID0gdGhpcy5hcHBlbmRCaXQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb3RoZXJTaXplOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kQml0KG90aGVyLmdldChpKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKHRoaXMuc2l6ZSAhPT0gb3RoZXIuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDguZGVmYXVsdCgnU2l6ZXMgZG9uXCd0IG1hdGNoJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGJpdHMubGVuZ3RoOyBpIDwgbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgLy8gVGhlIGxhc3QgaW50IGNvdWxkIGJlIGluY29tcGxldGUgKGkuZS4gbm90IGhhdmUgMzIgYml0cyBpbgoJICAgICAgICAgICAgLy8gaXQpIGJ1dCB0aGVyZSBpcyBubyBwcm9ibGVtIHNpbmNlIDAgWE9SIDAgPT0gMC4KCSAgICAgICAgICAgIGJpdHNbaV0gXj0gb3RoZXIuYml0c1tpXTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0T2Zmc2V0IGZpcnN0IGJpdCB0byBzdGFydCB3cml0aW5nCgkgICAgICogQHBhcmFtIGFycmF5IGFycmF5IHRvIHdyaXRlIGludG8uIEJ5dGVzIGFyZSB3cml0dGVuIG1vc3Qtc2lnbmlmaWNhbnQgYnl0ZSBmaXJzdC4gVGhpcyBpcyB0aGUgb3Bwb3NpdGUKCSAgICAgKiAgb2YgdGhlIGludGVybmFsIHJlcHJlc2VudGF0aW9uLCB3aGljaCBpcyBleHBvc2VkIGJ5IHtAbGluayAjZ2V0Qml0QXJyYXkoKX0KCSAgICAgKiBAcGFyYW0gb2Zmc2V0IHBvc2l0aW9uIGluIGFycmF5IHRvIHN0YXJ0IHdyaXRpbmcKCSAgICAgKiBAcGFyYW0gbnVtQnl0ZXMgaG93IG1hbnkgYnl0ZXMgdG8gd3JpdGUKCSAgICAgKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUudG9CeXRlcyA9IGZ1bmN0aW9uIChiaXRPZmZzZXQgLyppbnQqLywgYXJyYXksIG9mZnNldCAvKmludCovLCBudW1CeXRlcyAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbnVtQnl0ZXM7IGkrKykgewoJICAgICAgICAgICAgdmFyIHRoZUJ5dGUgPSAwOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCA4OyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5nZXQoYml0T2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICB0aGVCeXRlIHw9IDEgPDwgKDcgLSBqKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhcnJheVtvZmZzZXQgKyBpXSA9IC8qKGJ5dGUpKi8gdGhlQnl0ZTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB1bmRlcmx5aW5nIGFycmF5IG9mIGludHMuIFRoZSBmaXJzdCBlbGVtZW50IGhvbGRzIHRoZSBmaXJzdCAzMiBiaXRzLCBhbmQgdGhlIGxlYXN0CgkgICAgICogICAgICAgICBzaWduaWZpY2FudCBiaXQgaXMgYml0IDAuCgkgICAgICovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLmdldEJpdEFycmF5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV2ZXJzZXMgYWxsIGJpdHMgaW4gdGhlIGFycmF5LgoJICAgICAqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5yZXZlcnNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgbmV3Qml0cyA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYml0cy5sZW5ndGgpOwoJICAgICAgICAvLyByZXZlcnNlIGFsbCBpbnQncyBmaXJzdAoJICAgICAgICB2YXIgbGVuID0gTWF0aC5mbG9vcigodGhpcy5zaXplIC0gMSkgLyAzMik7CgkgICAgICAgIHZhciBvbGRCaXRzTGVuID0gbGVuICsgMTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgb2xkQml0c0xlbjsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeCA9IGJpdHNbaV07CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDEpICYgMHg1NTU1NTU1NSkgfCAoKHggJiAweDU1NTU1NTU1KSA8PCAxKTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMikgJiAweDMzMzMzMzMzKSB8ICgoeCAmIDB4MzMzMzMzMzMpIDw8IDIpOwoJICAgICAgICAgICAgeCA9ICgoeCA+PiA0KSAmIDB4MGYwZjBmMGYpIHwgKCh4ICYgMHgwZjBmMGYwZikgPDwgNCk7CgkgICAgICAgICAgICB4ID0gKCh4ID4+IDgpICYgMHgwMGZmMDBmZikgfCAoKHggJiAweDAwZmYwMGZmKSA8PCA4KTsKCSAgICAgICAgICAgIHggPSAoKHggPj4gMTYpICYgMHgwMDAwZmZmZikgfCAoKHggJiAweDAwMDBmZmZmKSA8PCAxNik7CgkgICAgICAgICAgICBuZXdCaXRzW2xlbiAtIGldID0gLyooaW50KSovIHg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm93IGNvcnJlY3QgdGhlIGludCdzIGlmIHRoZSBiaXQgc2l6ZSBpc24ndCBhIG11bHRpcGxlIG9mIDMyCgkgICAgICAgIGlmICh0aGlzLnNpemUgIT09IG9sZEJpdHNMZW4gKiAzMikgewoJICAgICAgICAgICAgdmFyIGxlZnRPZmZzZXQgPSBvbGRCaXRzTGVuICogMzIgLSB0aGlzLnNpemU7CgkgICAgICAgICAgICB2YXIgY3VycmVudEludCA9IG5ld0JpdHNbMF0gPj4+IGxlZnRPZmZzZXQ7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8IG9sZEJpdHNMZW47IGkrKykgewoJICAgICAgICAgICAgICAgIHZhciBuZXh0SW50ID0gbmV3Qml0c1tpXTsKCSAgICAgICAgICAgICAgICBjdXJyZW50SW50IHw9IG5leHRJbnQgPDwgKDMyIC0gbGVmdE9mZnNldCk7CgkgICAgICAgICAgICAgICAgbmV3Qml0c1tpIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICAgICAgICAgIGN1cnJlbnRJbnQgPSBuZXh0SW50ID4+PiBsZWZ0T2Zmc2V0OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgbmV3Qml0c1tvbGRCaXRzTGVuIC0gMV0gPSBjdXJyZW50SW50OwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0cyA9IG5ld0JpdHM7CgkgICAgfTsKCSAgICBCaXRBcnJheS5tYWtlQXJyYXkgPSBmdW5jdGlvbiAoc2l6ZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW50MzJBcnJheShNYXRoLmZsb29yKChzaXplICsgMzEpIC8gMzIpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdEFycmF5KSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnNpemUgPT09IG90aGVyLnNpemUgJiYgQXJyYXlzXzEkMS5kZWZhdWx0LmVxdWFscyh0aGlzLmJpdHMsIG90aGVyLmJpdHMpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdEFycmF5LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogdGhpcy5zaXplICsgQXJyYXlzXzEkMS5kZWZhdWx0Lmhhc2hDb2RlKHRoaXMuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0QXJyYXkucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcmVzdWx0ID0gJyc7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBzaXplID0gdGhpcy5zaXplOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICBpZiAoKGkgJiAweDA3KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnICc7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQgKz0gdGhpcy5nZXQoaSkgPyAnWCcgOiAnLic7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBCaXRBcnJheS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0QXJyYXkodGhpcy5zaXplLCB0aGlzLmJpdHMuc2xpY2UoKSk7CgkgICAgfTsKCSAgICByZXR1cm4gQml0QXJyYXk7Cgl9KCkpOwoJQml0QXJyYXkkMS5kZWZhdWx0ID0gQml0QXJyYXk7CgoJdmFyIEJpdE1hdHJpeCQxID0ge307CgoJdmFyIFN0cmluZ0J1aWxkZXIkMSA9IHt9OwoKCXZhciBTdHJpbmdVdGlscyQxID0ge307CgoJdmFyIERlY29kZUhpbnRUeXBlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERlY29kZUhpbnRUeXBlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIHR5cGUgb2YgaGludCB0aGF0IGEgY2FsbGVyIG1heSBwYXNzIHRvIGEgYmFyY29kZSByZWFkZXIgdG8gaGVscCBpdAoJICogbW9yZSBxdWlja2x5IG9yIGFjY3VyYXRlbHkgZGVjb2RlIGl0LiBJdCBpcyB1cCB0byBpbXBsZW1lbnRhdGlvbnMgdG8gZGVjaWRlIHdoYXQsCgkgKiBpZiBhbnl0aGluZywgdG8gZG8gd2l0aCB0aGUgaW5mb3JtYXRpb24gdGhhdCBpcyBzdXBwbGllZC4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBzZWUgUmVhZGVyI2RlY29kZShCaW5hcnlCaXRtYXAsamF2YS51dGlsLk1hcCkKCSAqLwoJdmFyIERlY29kZUhpbnRUeXBlOwoJKGZ1bmN0aW9uIChEZWNvZGVIaW50VHlwZSkgewoJICAgIC8qKgoJICAgICAqIFVuc3BlY2lmaWVkLCBhcHBsaWNhdGlvbi1zcGVjaWZpYyBoaW50LiBNYXBzIHRvIGFuIHVuc3BlY2lmaWVkIHtAbGluayBPYmplY3R9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJPVEhFUiJdID0gMF0gPSAiT1RIRVIiOyAvKihPYmplY3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJbWFnZSBpcyBhIHB1cmUgbW9ub2Nocm9tZSBpbWFnZSBvZiBhIGJhcmNvZGUuIERvZXNuJ3QgbWF0dGVyIHdoYXQgaXQgbWFwcyB0bzsKCSAgICAgKiB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlBVUkVfQkFSQ09ERSJdID0gMV0gPSAiUFVSRV9CQVJDT0RFIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEltYWdlIGlzIGtub3duIHRvIGJlIG9mIG9uZSBvZiBhIGZldyBwb3NzaWJsZSBmb3JtYXRzLgoJICAgICAqIE1hcHMgdG8gYSB7QGxpbmsgTGlzdH0gb2Yge0BsaW5rIEJhcmNvZGVGb3JtYXR9cy4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiUE9TU0lCTEVfRk9STUFUUyJdID0gMl0gPSAiUE9TU0lCTEVfRk9STUFUUyI7IC8qKExpc3QuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVuZCBtb3JlIHRpbWUgdG8gdHJ5IHRvIGZpbmQgYSBiYXJjb2RlOyBvcHRpbWl6ZSBmb3IgYWNjdXJhY3ksIG5vdCBzcGVlZC4KCSAgICAgKiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87IHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiVFJZX0hBUkRFUiJdID0gM10gPSAiVFJZX0hBUkRFUiI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBTcGVjaWZpZXMgd2hhdCBjaGFyYWN0ZXIgZW5jb2RpbmcgdG8gdXNlIHdoZW4gZGVjb2RpbmcsIHdoZXJlIGFwcGxpY2FibGUgKHR5cGUgU3RyaW5nKQoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJDSEFSQUNURVJfU0VUIl0gPSA0XSA9ICJDSEFSQUNURVJfU0VUIjsgLyooU3RyaW5nLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQWxsb3dlZCBsZW5ndGhzIG9mIGVuY29kZWQgZGF0YSAtLSByZWplY3QgYW55dGhpbmcgZWxzZS4gTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfTEVOR1RIUyJdID0gNV0gPSAiQUxMT1dFRF9MRU5HVEhTIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIEFzc3VtZSBDb2RlIDM5IGNvZGVzIGVtcGxveSBhIGNoZWNrIGRpZ2l0LiBEb2Vzbid0IG1hdHRlciB3aGF0IGl0IG1hcHMgdG87CgkgICAgICogdXNlIHtAbGluayBCb29sZWFuI1RSVUV9LgoJICAgICAqLwoJICAgIERlY29kZUhpbnRUeXBlW0RlY29kZUhpbnRUeXBlWyJBU1NVTUVfQ09ERV8zOV9DSEVDS19ESUdJVCJdID0gNl0gPSAiQVNTVU1FX0NPREVfMzlfQ0hFQ0tfRElHSVQiOyAvKihWb2lkLmNsYXNzKSovCgkgICAgLyoqCgkgICAgICogQXNzdW1lIHRoZSBiYXJjb2RlIGlzIGJlaW5nIHByb2Nlc3NlZCBhcyBhIEdTMSBiYXJjb2RlLCBhbmQgbW9kaWZ5IGJlaGF2aW9yIGFzIG5lZWRlZC4KCSAgICAgKiBGb3IgZXhhbXBsZSB0aGlzIGFmZmVjdHMgRk5DMSBoYW5kbGluZyBmb3IgQ29kZSAxMjggKGFrYSBHUzEtMTI4KS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOwoJICAgICAqIHVzZSB7QGxpbmsgQm9vbGVhbiNUUlVFfS4KCSAgICAgKi8KCSAgICBEZWNvZGVIaW50VHlwZVtEZWNvZGVIaW50VHlwZVsiQVNTVU1FX0dTMSJdID0gN10gPSAiQVNTVU1FX0dTMSI7IC8qKFZvaWQuY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBJZiB0cnVlLCByZXR1cm4gdGhlIHN0YXJ0IGFuZCBlbmQgZGlnaXRzIGluIGEgQ29kYWJhciBiYXJjb2RlIGluc3RlYWQgb2Ygc3RyaXBwaW5nIHRoZW0uIFRoZXkKCSAgICAgKiBhcmUgYWxwaGEsIHdoZXJlYXMgdGhlIHJlc3QgYXJlIG51bWVyaWMuIEJ5IGRlZmF1bHQsIHRoZXkgYXJlIHN0cmlwcGVkLCBidXQgdGhpcyBjYXVzZXMgdGhlbQoJICAgICAqIHRvIG5vdCBiZS4gRG9lc24ndCBtYXR0ZXIgd2hhdCBpdCBtYXBzIHRvOyB1c2Uge0BsaW5rIEJvb2xlYW4jVFJVRX0uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIlJFVFVSTl9DT0RBQkFSX1NUQVJUX0VORCJdID0gOF0gPSAiUkVUVVJOX0NPREFCQVJfU1RBUlRfRU5EIjsgLyooVm9pZC5jbGFzcykqLwoJICAgIC8qKgoJICAgICAqIFRoZSBjYWxsZXIgbmVlZHMgdG8gYmUgbm90aWZpZWQgdmlhIGNhbGxiYWNrIHdoZW4gYSBwb3NzaWJsZSB7QGxpbmsgUmVzdWx0UG9pbnR9CgkgICAgICogaXMgZm91bmQuIE1hcHMgdG8gYSB7QGxpbmsgUmVzdWx0UG9pbnRDYWxsYmFja30uCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIk5FRURfUkVTVUxUX1BPSU5UX0NBTExCQUNLIl0gPSA5XSA9ICJORUVEX1JFU1VMVF9QT0lOVF9DQUxMQkFDSyI7IC8qKFJlc3VsdFBvaW50Q2FsbGJhY2suY2xhc3MpKi8KCSAgICAvKioKCSAgICAgKiBBbGxvd2VkIGV4dGVuc2lvbiBsZW5ndGhzIGZvciBFQU4gb3IgVVBDIGJhcmNvZGVzLiBPdGhlciBmb3JtYXRzIHdpbGwgaWdub3JlIHRoaXMuCgkgICAgICogTWFwcyB0byBhbiB7QGNvZGUgSW50MzJBcnJheX0gb2YgdGhlIGFsbG93ZWQgZXh0ZW5zaW9uIGxlbmd0aHMsIGZvciBleGFtcGxlIFsyXSwgWzVdLCBvciBbMiwgNV0uCgkgICAgICogSWYgaXQgaXMgb3B0aW9uYWwgdG8gaGF2ZSBhbiBleHRlbnNpb24sIGRvIG5vdCBzZXQgdGhpcyBoaW50LiBJZiB0aGlzIGlzIHNldCwKCSAgICAgKiBhbmQgYSBVUEMgb3IgRUFOIGJhcmNvZGUgaXMgZm91bmQgYnV0IGFuIGV4dGVuc2lvbiBpcyBub3QsIHRoZW4gbm8gcmVzdWx0IHdpbGwgYmUgcmV0dXJuZWQKCSAgICAgKiBhdCBhbGwuCgkgICAgICovCgkgICAgRGVjb2RlSGludFR5cGVbRGVjb2RlSGludFR5cGVbIkFMTE9XRURfRUFOX0VYVEVOU0lPTlMiXSA9IDEwXSA9ICJBTExPV0VEX0VBTl9FWFRFTlNJT05TIjsgLyooSW50MzJBcnJheS5jbGFzcykqLwoJICAgIC8vIEVuZCBvZiBlbnVtZXJhdGlvbiB2YWx1ZXMuCgkgICAgLyoqCgkgICAgICogRGF0YSB0eXBlIHRoZSBoaW50IGlzIGV4cGVjdGluZy4KCSAgICAgKiBBbW9uZyB0aGUgcG9zc2libGUgdmFsdWVzIHRoZSB7QGxpbmsgVm9pZH0gc3RhbmRzIG91dCBhcyBiZWluZyB1c2VkIGZvcgoJICAgICAqIGhpbnRzIHRoYXQgZG8gbm90IGV4cGVjdCBhIHZhbHVlIHRvIGJlIHN1cHBsaWVkIChmbGFnIGhpbnRzKS4gU3VjaCBoaW50cwoJICAgICAqIHdpbGwgcG9zc2libHkgaGF2ZSB0aGVpciB2YWx1ZSBpZ25vcmVkLCBvciByZXBsYWNlZCBieSBhCgkgICAgICoge0BsaW5rIEJvb2xlYW4jVFJVRX0uIEhpbnQgc3VwcGxpZXJzIHNob3VsZCBwcm9iYWJseSB1c2UKCSAgICAgKiB7QGxpbmsgQm9vbGVhbiNUUlVFfSBhcyBkaXJlY3RlZCBieSB0aGUgYWN0dWFsIGhpbnQgZG9jdW1lbnRhdGlvbi4KCSAgICAgKi8KCSAgICAvLyBwcml2YXRlIHZhbHVlVHlwZTogQ2xhc3M8Pz4KCSAgICAvLyBEZWNvZGVIaW50VHlwZSh2YWx1ZVR5cGU6IENsYXNzPD8+KSB7CgkgICAgLy8gICB0aGlzLnZhbHVlVHlwZSA9IHZhbHVlVHlwZQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgZ2V0VmFsdWVUeXBlKCk6IENsYXNzPD8+IHsKCSAgICAvLyAgIHJldHVybiB2YWx1ZVR5cGUKCSAgICAvLyB9Cgl9KShEZWNvZGVIaW50VHlwZSB8fCAoRGVjb2RlSGludFR5cGUgPSB7fSkpOwoJRGVjb2RlSGludFR5cGUkMS5kZWZhdWx0ID0gRGVjb2RlSGludFR5cGU7CgoJdmFyIENoYXJhY3RlclNldEVDSSA9IHt9OwoKCXZhciBGb3JtYXRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZiA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGb3JtYXRFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDcgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgRm9ybWF0RXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyRmKEZvcm1hdEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBGb3JtYXRFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgRm9ybWF0RXhjZXB0aW9uLmdldEZvcm1hdEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEV4Y2VwdGlvbigpOwoJICAgIH07CgkgICAgRm9ybWF0RXhjZXB0aW9uLmtpbmQgPSAnRm9ybWF0RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gRm9ybWF0RXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQ3LmRlZmF1bHQpKTsKCUZvcm1hdEV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBGb3JtYXRFeGNlcHRpb247CgoJKGZ1bmN0aW9uIChleHBvcnRzKSB7CgkvKgoJICogQ29weXJpZ2h0IDIwMDggWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCWV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHZvaWQgMDsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xID0gRm9ybWF0RXhjZXB0aW9uJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuSGFzaE1hcDsqLwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJdmFyIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnM7CgkoZnVuY3Rpb24gKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMpIHsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwNDM3Il0gPSAwXSA9ICJDcDQzNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEiXSA9IDFdID0gIklTTzg4NTlfMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzIiXSA9IDJdID0gIklTTzg4NTlfMiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzMiXSA9IDNdID0gIklTTzg4NTlfMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzQiXSA9IDRdID0gIklTTzg4NTlfNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzUiXSA9IDVdID0gIklTTzg4NTlfNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzYiXSA9IDZdID0gIklTTzg4NTlfNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzciXSA9IDddID0gIklTTzg4NTlfNyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzgiXSA9IDhdID0gIklTTzg4NTlfOCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzkiXSA9IDldID0gIklTTzg4NTlfOSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEwIl0gPSAxMF0gPSAiSVNPODg1OV8xMCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzExIl0gPSAxMV0gPSAiSVNPODg1OV8xMSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzEzIl0gPSAxMl0gPSAiSVNPODg1OV8xMyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE0Il0gPSAxM10gPSAiSVNPODg1OV8xNCI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE1Il0gPSAxNF0gPSAiSVNPODg1OV8xNSI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJJU084ODU5XzE2Il0gPSAxNV0gPSAiSVNPODg1OV8xNiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJTSklTIl0gPSAxNl0gPSAiU0pJUyI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTAiXSA9IDE3XSA9ICJDcDEyNTAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQ3AxMjUxIl0gPSAxOF0gPSAiQ3AxMjUxIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkNwMTI1MiJdID0gMTldID0gIkNwMTI1MiI7CgkgICAgQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1tDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzWyJDcDEyNTYiXSA9IDIwXSA9ICJDcDEyNTYiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siVW5pY29kZUJpZ1VubWFya2VkIl0gPSAyMV0gPSAiVW5pY29kZUJpZ1VubWFya2VkIjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIlVURjgiXSA9IDIyXSA9ICJVVEY4IjsKCSAgICBDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzW0NoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbIkFTQ0lJIl0gPSAyM10gPSAiQVNDSUkiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siQmlnNSJdID0gMjRdID0gIkJpZzUiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siR0IxODAzMCJdID0gMjVdID0gIkdCMTgwMzAiOwoJICAgIENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnNbQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVyc1siRVVDX0tSIl0gPSAyNl0gPSAiRVVDX0tSIjsKCX0pKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgPSBleHBvcnRzLkNoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMgfHwgKGV4cG9ydHMuQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycyA9IHt9KSk7CgkvKioKCSAqIEVuY2Fwc3VsYXRlcyBhIENoYXJhY3RlciBTZXQgRUNJLCBhY2NvcmRpbmcgdG8gIkV4dGVuZGVkIENoYW5uZWwgSW50ZXJwcmV0YXRpb25zIiA1LjMuMS4xCgkgKiBvZiBJU08gMTgwMDQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIENoYXJhY3RlclNldEVDSSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBDaGFyYWN0ZXJTZXRFQ0kodmFsdWVJZGVudGlmaWVyLCB2YWx1ZXNQYXJhbSwgbmFtZSkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG90aGVyRW5jb2RpbmdOYW1lcyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDM7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgb3RoZXJFbmNvZGluZ05hbWVzW19pIC0gM10gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmFsdWVJZGVudGlmaWVyID0gdmFsdWVJZGVudGlmaWVyOwoJICAgICAgICB0aGlzLm5hbWUgPSBuYW1lOwoJICAgICAgICBpZiAodHlwZW9mIHZhbHVlc1BhcmFtID09PSAnbnVtYmVyJykgewoJICAgICAgICAgICAgdGhpcy52YWx1ZXMgPSBJbnQzMkFycmF5LmZyb20oW3ZhbHVlc1BhcmFtXSk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICB0aGlzLnZhbHVlcyA9IHZhbHVlc1BhcmFtOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzOwoJICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVfSURFTlRJRklFUl9UT19FQ0kuc2V0KHZhbHVlSWRlbnRpZmllciwgdGhpcyk7CgkgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQobmFtZSwgdGhpcyk7CgkgICAgICAgIHZhciB2YWx1ZXMgPSB0aGlzLnZhbHVlczsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gdmFsdWVzLmxlbmd0aDsgaSAhPT0gbGVuZ3RoXzE7IGkrKykgewoJICAgICAgICAgICAgdmFyIHYgPSB2YWx1ZXNbaV07CgkgICAgICAgICAgICBDaGFyYWN0ZXJTZXRFQ0kuVkFMVUVTX1RPX0VDSS5zZXQodiwgdGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIG90aGVyRW5jb2RpbmdOYW1lc18xID0gX192YWx1ZXMob3RoZXJFbmNvZGluZ05hbWVzKSwgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKTsgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZTsgb3RoZXJFbmNvZGluZ05hbWVzXzFfMSA9IG90aGVyRW5jb2RpbmdOYW1lc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBvdGhlck5hbWUgPSBvdGhlckVuY29kaW5nTmFtZXNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSS5zZXQob3RoZXJOYW1lLCB0aGlzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKG90aGVyRW5jb2RpbmdOYW1lc18xXzEgJiYgIW90aGVyRW5jb2RpbmdOYW1lc18xXzEuZG9uZSAmJiAoX2EgPSBvdGhlckVuY29kaW5nTmFtZXNfMS5yZXR1cm4pKSBfYS5jYWxsKG90aGVyRW5jb2RpbmdOYW1lc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgIH0KCSAgICAvLyBDaGFyYWN0ZXJTZXRFQ0kodmFsdWU6IG51bWJlciAvKmludCovKSB7CgkgICAgLy8gICB0aGlzKG5ldyBJbnQzMkFycmF5IHt2YWx1ZX0pCgkgICAgLy8gfQoJICAgIC8vIENoYXJhY3RlclNldEVDSSh2YWx1ZTogbnVtYmVyIC8qaW50Ki8sIFN0cmluZy4uLiBvdGhlckVuY29kaW5nTmFtZXMpIHsKCSAgICAvLyAgIHRoaXMudmFsdWVzID0gbmV3IEludDMyQXJyYXkge3ZhbHVlfQoJICAgIC8vICAgdGhpcy5vdGhlckVuY29kaW5nTmFtZXMgPSBvdGhlckVuY29kaW5nTmFtZXMKCSAgICAvLyB9CgkgICAgLy8gQ2hhcmFjdGVyU2V0RUNJKHZhbHVlczogSW50MzJBcnJheSwgU3RyaW5nLi4uIG90aGVyRW5jb2RpbmdOYW1lcykgewoJICAgIC8vICAgdGhpcy52YWx1ZXMgPSB2YWx1ZXMKCSAgICAvLyAgIHRoaXMub3RoZXJFbmNvZGluZ05hbWVzID0gb3RoZXJFbmNvZGluZ05hbWVzCgkgICAgLy8gfQoJICAgIENoYXJhY3RlclNldEVDSS5wcm90b3R5cGUuZ2V0VmFsdWVJZGVudGlmaWVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZUlkZW50aWZpZXI7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldE5hbWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm5hbWU7CgkgICAgfTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZXNbMF07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmFsdWUgY2hhcmFjdGVyIHNldCBFQ0kgdmFsdWUKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBDaGFyYWN0ZXJTZXRFQ0l9IHJlcHJlc2VudGluZyBFQ0kgb2YgZ2l2ZW4gdmFsdWUsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwgYnV0CgkgICAgICogICB1bnN1cHBvcnRlZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIEVDSSB2YWx1ZSBpcyBpbnZhbGlkCgkgICAgICovCgkgICAgQ2hhcmFjdGVyU2V0RUNJLmdldENoYXJhY3RlclNldEVDSUJ5VmFsdWUgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPCAwIHx8IHZhbHVlID49IDkwMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGNoYXJhY3RlclNldCA9IENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJLmdldCh2YWx1ZSk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNoYXJhY3RlclNldCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoJ2luY29yZWN0IHZhbHVlJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGNoYXJhY3RlclNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBuYW1lIGNoYXJhY3RlciBzZXQgRUNJIGVuY29kaW5nIG5hbWUKCSAgICAgKiBAcmV0dXJuIENoYXJhY3RlclNldEVDSSByZXByZXNlbnRpbmcgRUNJIGZvciBjaGFyYWN0ZXIgZW5jb2RpbmcsIG9yIG51bGwgaWYgaXQgaXMgbGVnYWwKCSAgICAgKiAgIGJ1dCB1bnN1cHBvcnRlZAoJICAgICAqLwoJICAgIENoYXJhY3RlclNldEVDSS5nZXRDaGFyYWN0ZXJTZXRFQ0lCeU5hbWUgPSBmdW5jdGlvbiAobmFtZSkgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gQ2hhcmFjdGVyU2V0RUNJLk5BTUVfVE9fRUNJLmdldChuYW1lKTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgnaW5jb3JlY3QgdmFsdWUnKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY2hhcmFjdGVyU2V0OwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgQ2hhcmFjdGVyU2V0RUNJKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLmdldE5hbWUoKSA9PT0gb3RoZXIuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlZBTFVFX0lERU5USUZJRVJfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5WQUxVRVNfVE9fRUNJID0gbmV3IE1hcCgpOwoJICAgIENoYXJhY3RlclNldEVDSS5OQU1FX1RPX0VDSSA9IG5ldyBNYXAoKTsKCSAgICAvLyBFbnVtIG5hbWUgaXMgYSBKYXZhIGVuY29kaW5nIHZhbGlkIGZvciBqYXZhLmxhbmcgYW5kIGphdmEuaW8KCSAgICAvLyBUWVBFU0NSSVBUUE9SVDogY2hhbmdlZCB0aGUgbWFpbiBsYWJlbCBmb3IgSVNPIGFzIHRoZSBUZXh0RW5jb2RlciBkaWQgbm90IHJlY29nbml6ZWQgdGhlbSBpbiB0aGUgZm9ybSBmcm9tIGphdmEKCSAgICAvLyAoZWcgSVNPODg1OV8xIG11c3QgYmUgSVNPODg1OTEgb3IgSVNPODg1OS0xIG9yIElTTy04ODU5LTEpCgkgICAgLy8gbGF0ZXIgb246IHdlbGwsIGV4Y2VwdCAxNiB3aWNoIGRvZXMgbm90IHdvcmsgd2l0aCBJU084ODU5MTYgc28gdXNlZCBJU08tODg1OS0xIGZvcm0gZm9yIGRlZmF1bHQKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3A0MzcgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3A0MzcsIEludDMyQXJyYXkuZnJvbShbMCwgMl0pLCAnQ3A0MzcnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMSwgSW50MzJBcnJheS5mcm9tKFsxLCAzXSksICdJU08tODg1OS0xJywgJ0lTTzg4NTkxJywgJ0lTTzg4NTlfMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzIgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8yLCA0LCAnSVNPLTg4NTktMicsICdJU084ODU5MicsICdJU084ODU5XzInKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8zID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMywgNSwgJ0lTTy04ODU5LTMnLCAnSVNPODg1OTMnLCAnSVNPODg1OV8zJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzQsIDYsICdJU08tODg1OS00JywgJ0lTTzg4NTk0JywgJ0lTTzg4NTlfNCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV81LCA3LCAnSVNPLTg4NTktNScsICdJU084ODU5NScsICdJU084ODU5XzUnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV82ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfNiwgOCwgJ0lTTy04ODU5LTYnLCAnSVNPODg1OTYnLCAnSVNPODg1OV82Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfNyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzcsIDksICdJU08tODg1OS03JywgJ0lTTzg4NTk3JywgJ0lTTzg4NTlfNycpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV84LCAxMCwgJ0lTTy04ODU5LTgnLCAnSVNPODg1OTgnLCAnSVNPODg1OV84Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfOSA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzksIDExLCAnSVNPLTg4NTktOScsICdJU084ODU5OScsICdJU084ODU5XzknKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xMCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzEwLCAxMiwgJ0lTTy04ODU5LTEwJywgJ0lTTzg4NTkxMCcsICdJU084ODU5XzEwJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xMSwgMTMsICdJU08tODg1OS0xMScsICdJU084ODU5MTEnLCAnSVNPODg1OV8xMScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzEzID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTMsIDE1LCAnSVNPLTg4NTktMTMnLCAnSVNPODg1OTEzJywgJ0lTTzg4NTlfMTMnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuSVNPODg1OV8xNCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5JU084ODU5XzE0LCAxNiwgJ0lTTy04ODU5LTE0JywgJ0lTTzg4NTkxNCcsICdJU084ODU5XzE0Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLklTTzg4NTlfMTUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuSVNPODg1OV8xNSwgMTcsICdJU08tODg1OS0xNScsICdJU084ODU5MTUnLCAnSVNPODg1OV8xNScpOwoJICAgIENoYXJhY3RlclNldEVDSS5JU084ODU5XzE2ID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLklTTzg4NTlfMTYsIDE4LCAnSVNPLTg4NTktMTYnLCAnSVNPODg1OTE2JywgJ0lTTzg4NTlfMTYnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuU0pJUyA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5TSklTLCAyMCwgJ1NKSVMnLCAnU2hpZnRfSklTJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1MCA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTAsIDIxLCAnQ3AxMjUwJywgJ3dpbmRvd3MtMTI1MCcpOwoJICAgIENoYXJhY3RlclNldEVDSS5DcDEyNTEgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQ3AxMjUxLCAyMiwgJ0NwMTI1MScsICd3aW5kb3dzLTEyNTEnKTsKCSAgICBDaGFyYWN0ZXJTZXRFQ0kuQ3AxMjUyID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkNwMTI1MiwgMjMsICdDcDEyNTInLCAnd2luZG93cy0xMjUyJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkNwMTI1NiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5DcDEyNTYsIDI0LCAnQ3AxMjU2JywgJ3dpbmRvd3MtMTI1NicpOwoJICAgIENoYXJhY3RlclNldEVDSS5Vbmljb2RlQmlnVW5tYXJrZWQgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVW5pY29kZUJpZ1VubWFya2VkLCAyNSwgJ1VuaWNvZGVCaWdVbm1hcmtlZCcsICdVVEYtMTZCRScsICdVbmljb2RlQmlnJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLlVURjggPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuVVRGOCwgMjYsICdVVEY4JywgJ1VURi04Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkFTQ0lJID0gbmV3IENoYXJhY3RlclNldEVDSShDaGFyYWN0ZXJTZXRWYWx1ZUlkZW50aWZpZXJzLkFTQ0lJLCBJbnQzMkFycmF5LmZyb20oWzI3LCAxNzBdKSwgJ0FTQ0lJJywgJ1VTLUFTQ0lJJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkJpZzUgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuQmlnNSwgMjgsICdCaWc1Jyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkdCMTgwMzAgPSBuZXcgQ2hhcmFjdGVyU2V0RUNJKENoYXJhY3RlclNldFZhbHVlSWRlbnRpZmllcnMuR0IxODAzMCwgMjksICdHQjE4MDMwJywgJ0dCMjMxMicsICdFVUNfQ04nLCAnR0JLJyk7CgkgICAgQ2hhcmFjdGVyU2V0RUNJLkVVQ19LUiA9IG5ldyBDaGFyYWN0ZXJTZXRFQ0koQ2hhcmFjdGVyU2V0VmFsdWVJZGVudGlmaWVycy5FVUNfS1IsIDMwLCAnRVVDX0tSJywgJ0VVQy1LUicpOwoJICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0k7Cgl9KCkpOwoJZXhwb3J0cy5kZWZhdWx0ID0gQ2hhcmFjdGVyU2V0RUNJOwoKCX0oQ2hhcmFjdGVyU2V0RUNJKSk7CgoJdmFyIFN0cmluZ0VuY29kaW5nJDEgPSB7fTsKCgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNiA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZShVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbi5raW5kID0gJ1Vuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCkpOwoJVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb24kMS5kZWZhdWx0ID0gVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb247CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ0VuY29kaW5nJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEgPSBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbiQxOwoJdmFyIENoYXJhY3RlclNldEVDSV8xJDIgPSBDaGFyYWN0ZXJTZXRFQ0k7CgkvKioKCSAqIFJlc3BvbnNpYmxlIGZvciBlbi9kZWNvZGluZyBzdHJpbmdzLgoJICovCgl2YXIgU3RyaW5nRW5jb2RpbmcgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nRW5jb2RpbmcoKSB7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIERlY29kZXMgc29tZSBVaW50OEFycmF5IHRvIGEgc3RyaW5nIGZvcm1hdC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5kZWNvZGUgPSBmdW5jdGlvbiAoYnl0ZXMsIGVuY29kaW5nKSB7CgkgICAgICAgIHZhciBlbmNvZGluZ05hbWUgPSB0aGlzLmVuY29kaW5nTmFtZShlbmNvZGluZyk7CgkgICAgICAgIGlmICh0aGlzLmN1c3RvbURlY29kZXIpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmN1c3RvbURlY29kZXIoYnl0ZXMsIGVuY29kaW5nTmFtZSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSW5jcmVhc2VzIGJyb3dzZXIgc3VwcG9ydC4KCSAgICAgICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciA9PT0gJ3VuZGVmaW5lZCcgfHwgdGhpcy5zaG91bGREZWNvZGVPbkZhbGxiYWNrKGVuY29kaW5nTmFtZSkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUZhbGxiYWNrKGJ5dGVzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVGV4dERlY29kZXIoZW5jb2RpbmdOYW1lKS5kZWNvZGUoYnl0ZXMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ2hlY2tzIGlmIHRoZSBkZWNvZGluZyBtZXRob2Qgc2hvdWxkIHVzZSB0aGUgZmFsbGJhY2sgZm9yIGRlY29kaW5nCgkgICAgICogb25jZSBOb2RlIFRleHREZWNvZGVyIGRvZXNuJ3Qgc3VwcG9ydCBhbGwgZW5jb2RpbmcgZm9ybWF0cy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBlbmNvZGluZ05hbWUKCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5zaG91bGREZWNvZGVPbkZhbGxiYWNrID0gZnVuY3Rpb24gKGVuY29kaW5nTmFtZSkgewoJICAgICAgICByZXR1cm4gIVN0cmluZ0VuY29kaW5nLmlzQnJvd3NlcigpICYmIGVuY29kaW5nTmFtZSA9PT0gJ0lTTy04ODU5LTEnOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRW5jb2RlcyBzb21lIHN0cmluZyBpbnRvIGEgVWludDhBcnJheS4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGUgPSBmdW5jdGlvbiAocywgZW5jb2RpbmcpIHsKCSAgICAgICAgdmFyIGVuY29kaW5nTmFtZSA9IHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKTsKCSAgICAgICAgaWYgKHRoaXMuY3VzdG9tRW5jb2RlcikgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3VzdG9tRW5jb2RlcihzLCBlbmNvZGluZ05hbWUpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEluY3JlYXNlcyBicm93c2VyIHN1cHBvcnQuCgkgICAgICAgIGlmICh0eXBlb2YgVGV4dEVuY29kZXIgPT09ICd1bmRlZmluZWQnKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5lbmNvZGVGYWxsYmFjayhzKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBUZXh0RW5jb2RlciBvbmx5IGVuY29kZXMgdG8gVVRGOCBieSBkZWZhdWx0IGFzIHNwZWNpZmllZCBieSBlbmNvZGluZy5zcGVjLndoYXR3Zy5vcmcKCSAgICAgICAgcmV0dXJuIG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShzKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzQnJvd3NlciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJyAmJiB7fS50b1N0cmluZy5jYWxsKHdpbmRvdykgPT09ICdbb2JqZWN0IFdpbmRvd10nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHN0cmluZyB2YWx1ZSBmcm9tIHNvbWUgZW5jb2RpbmcgY2hhcmFjdGVyIHNldC4KCSAgICAgKi8KCSAgICBTdHJpbmdFbmNvZGluZy5lbmNvZGluZ05hbWUgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycKCSAgICAgICAgICAgID8gZW5jb2RpbmcKCSAgICAgICAgICAgIDogZW5jb2RpbmcuZ2V0TmFtZSgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBjaGFyYWN0ZXIgc2V0IGZyb20gc29tZSBlbmNvZGluZyBjaGFyYWN0ZXIgc2V0LgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmVuY29kaW5nQ2hhcmFjdGVyU2V0ID0gZnVuY3Rpb24gKGVuY29kaW5nKSB7CgkgICAgICAgIGlmIChlbmNvZGluZyBpbnN0YW5jZW9mIENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdCkgewoJICAgICAgICAgICAgcmV0dXJuIGVuY29kaW5nOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlOYW1lKGVuY29kaW5nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJ1bnMgYSBmYWxsYmFjayBmb3IgdGhlIG5hdGl2ZSBkZWNvZGluZyBmdW5jaW9uLgoJICAgICAqLwoJICAgIFN0cmluZ0VuY29kaW5nLmRlY29kZUZhbGxiYWNrID0gZnVuY3Rpb24gKGJ5dGVzLCBlbmNvZGluZykgewoJICAgICAgICB2YXIgY2hhcmFjdGVyU2V0ID0gdGhpcy5lbmNvZGluZ0NoYXJhY3RlclNldChlbmNvZGluZyk7CgkgICAgICAgIGlmIChTdHJpbmdFbmNvZGluZy5pc0RlY29kZUZhbGxiYWNrU3VwcG9ydGVkKGNoYXJhY3RlclNldCkpIHsKCSAgICAgICAgICAgIHZhciBzID0gJyc7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbGVuZ3RoXzEgPSBieXRlcy5sZW5ndGg7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGggPSBieXRlc1tpXS50b1N0cmluZygxNik7CgkgICAgICAgICAgICAgICAgaWYgKGgubGVuZ3RoIDwgMikgewoJICAgICAgICAgICAgICAgICAgICBoID0gJzAnICsgaDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcyArPSAnJScgKyBoOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmV0dXJuIGRlY29kZVVSSUNvbXBvbmVudChzKTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuVW5pY29kZUJpZ1VubWFya2VkKSkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCwgbmV3IFVpbnQxNkFycmF5KGJ5dGVzLmJ1ZmZlcikpOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBVbnN1cHBvcnRlZE9wZXJhdGlvbkV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgiRW5jb2RpbmcgIiArIHRoaXMuZW5jb2RpbmdOYW1lKGVuY29kaW5nKSArICIgbm90IHN1cHBvcnRlZCBieSBmYWxsYmFjay4iKTsKCSAgICB9OwoJICAgIFN0cmluZ0VuY29kaW5nLmlzRGVjb2RlRmFsbGJhY2tTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoY2hhcmFjdGVyU2V0KSB7CgkgICAgICAgIHJldHVybiBjaGFyYWN0ZXJTZXQuZXF1YWxzKENoYXJhY3RlclNldEVDSV8xJDIuZGVmYXVsdC5VVEY4KSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuSVNPODg1OV8xKSB8fAoJICAgICAgICAgICAgY2hhcmFjdGVyU2V0LmVxdWFscyhDaGFyYWN0ZXJTZXRFQ0lfMSQyLmRlZmF1bHQuQVNDSUkpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUnVucyBhIGZhbGxiYWNrIGZvciB0aGUgbmF0aXZlIGVuY29kaW5nIGZ1bmNpb24uCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xNzE5Mjg0NS80MzY3NjgzCgkgICAgICovCgkgICAgU3RyaW5nRW5jb2RpbmcuZW5jb2RlRmFsbGJhY2sgPSBmdW5jdGlvbiAocykgewoJICAgICAgICB2YXIgZW5jb2RlZFVSSXN0cmluZyA9IGJ0b2EodW5lc2NhcGUoZW5jb2RlVVJJQ29tcG9uZW50KHMpKSk7CgkgICAgICAgIHZhciBjaGFyTGlzdCA9IGVuY29kZWRVUklzdHJpbmcuc3BsaXQoJycpOwoJICAgICAgICB2YXIgdWludEFycmF5ID0gW107CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgY2hhckxpc3QubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHVpbnRBcnJheS5wdXNoKGNoYXJMaXN0W2ldLmNoYXJDb2RlQXQoMCkpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgVWludDhBcnJheSh1aW50QXJyYXkpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0VuY29kaW5nOwoJfSgpKTsKCVN0cmluZ0VuY29kaW5nJDEuZGVmYXVsdCA9IFN0cmluZ0VuY29kaW5nOwoKCS8qCgkgKiBDb3B5cmlnaHQgKEMpIDIwMTAgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFN0cmluZ1V0aWxzJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS5uaW8uY2hhcnNldC5DaGFyc2V0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQzID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSQxID0gQ2hhcmFjdGVyU2V0RUNJOwoJdmFyIFN0cmluZ0VuY29kaW5nXzEkMSA9IFN0cmluZ0VuY29kaW5nJDE7CgkvKioKCSAqIENvbW1vbiBzdHJpbmctcmVsYXRlZCBmdW5jdGlvbnMuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgQWxleCBEdXByZQoJICovCgl2YXIgU3RyaW5nVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nVXRpbHMoKSB7CgkgICAgfQoJICAgIC8vIFNISUZUX0pJUy5lcXVhbHNJZ25vcmVDYXNlKFBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcpIHx8CgkgICAgLy8gRVVDX0pQLmVxdWFsc0lnbm9yZUNhc2UoUExBVEZPUk1fREVGQVVMVF9FTkNPRElORyk7CgkgICAgU3RyaW5nVXRpbHMuY2FzdEFzTm9uVXRmOENoYXIgPSBmdW5jdGlvbiAoY29kZSwgZW5jb2RpbmcpIHsKCSAgICAgICAgaWYgKGVuY29kaW5nID09PSB2b2lkIDApIHsgZW5jb2RpbmcgPSBudWxsOyB9CgkgICAgICAgIC8vIElTTyA4ODU5LTEgaXMgdGhlIEphdmEgZGVmYXVsdCBhcyBVVEYtOCBpcyBKYXZhU2NyaXB0cwoJICAgICAgICAvLyB5b3UgY2FuIHNlZSB0aGlzIG1ldGhvZCBhcyBhIEphdmEgdmVyc2lvbiBvZiBTdHJpbmcuZnJvbUNoYXJDb2RlCgkgICAgICAgIHZhciBlID0gZW5jb2RpbmcgPyBlbmNvZGluZy5nZXROYW1lKCkgOiB0aGlzLklTTzg4NTkxOwoJICAgICAgICAvLyB1c2UgcGFzc2VkIGZvcm1hdCAoZnJvbUNoYXJDb2RlIHdpbGwgcmV0dXJuIFVURjggZW5jb2RpbmcpCgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5kZWNvZGUobmV3IFVpbnQ4QXJyYXkoW2NvZGVdKSwgZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYnl0ZXMgYnl0ZXMgZW5jb2RpbmcgYSBzdHJpbmcsIHdob3NlIGVuY29kaW5nIHNob3VsZCBiZSBndWVzc2VkCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kZSBoaW50cyBpZiBhcHBsaWNhYmxlCgkgICAgICogQHJldHVybiBuYW1lIG9mIGd1ZXNzZWQgZW5jb2Rpbmc7IGF0IHRoZSBtb21lbnQgd2lsbCBvbmx5IGd1ZXNzIG9uZSBvZjoKCSAgICAgKiAge0BsaW5rICNTSElGVF9KSVN9LCB7QGxpbmsgI1VURjh9LCB7QGxpbmsgI0lTTzg4NTkxfSwgb3IgdGhlIHBsYXRmb3JtCgkgICAgICogIGRlZmF1bHQgZW5jb2RpbmcgaWYgbm9uZSBvZiB0aGVzZSBjYW4gcG9zc2libHkgYmUgY29ycmVjdAoJICAgICAqLwoJICAgIFN0cmluZ1V0aWxzLmd1ZXNzRW5jb2RpbmcgPSBmdW5jdGlvbiAoYnl0ZXMsIGhpbnRzKSB7CgkgICAgICAgIGlmIChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpKSB7CgkgICAgICAgICAgICByZXR1cm4gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEkMy5kZWZhdWx0LkNIQVJBQ1RFUl9TRVQpLnRvU3RyaW5nKCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRm9yIG5vdywgbWVyZWx5IHRyaWVzIHRvIGRpc3Rpbmd1aXNoIElTTy04ODU5LTEsIFVURi04IGFuZCBTaGlmdF9KSVMsCgkgICAgICAgIC8vIHdoaWNoIHNob3VsZCBiZSBieSBmYXIgdGhlIG1vc3QgY29tbW9uIGVuY29kaW5ncy4KCSAgICAgICAgdmFyIGxlbmd0aCA9IGJ5dGVzLmxlbmd0aDsKCSAgICAgICAgdmFyIGNhbkJlSVNPODg1OTEgPSB0cnVlOwoJICAgICAgICB2YXIgY2FuQmVTaGlmdEpJUyA9IHRydWU7CgkgICAgICAgIHZhciBjYW5CZVVURjggPSB0cnVlOwoJICAgICAgICB2YXIgdXRmOEJ5dGVzTGVmdCA9IDA7CgkgICAgICAgIC8vIGludCB1dGY4TG93Q2hhcnMgPSAwCgkgICAgICAgIHZhciB1dGYyQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGYzQnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciB1dGY0Qnl0ZXNDaGFycyA9IDA7CgkgICAgICAgIHZhciBzamlzQnl0ZXNMZWZ0ID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNMb3dDaGFycyA9IDAKCSAgICAgICAgdmFyIHNqaXNLYXRha2FuYUNoYXJzID0gMDsKCSAgICAgICAgLy8gaW50IHNqaXNEb3VibGVCeXRlc0NoYXJzID0gMAoJICAgICAgICB2YXIgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgIHZhciBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgdmFyIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSAwOwoJICAgICAgICB2YXIgc2ppc01heERvdWJsZUJ5dGVzV29yZExlbmd0aCA9IDA7CgkgICAgICAgIC8vIGludCBpc29Mb3dDaGFycyA9IDAKCSAgICAgICAgLy8gaW50IGlzb0hpZ2hDaGFycyA9IDAKCSAgICAgICAgdmFyIGlzb0hpZ2hPdGhlciA9IDA7CgkgICAgICAgIHZhciB1dGY4Ym9tID0gYnl0ZXMubGVuZ3RoID4gMyAmJgoJICAgICAgICAgICAgYnl0ZXNbMF0gPT09IC8qKGJ5dGUpICovIDB4RUYgJiYKCSAgICAgICAgICAgIGJ5dGVzWzFdID09PSAvKihieXRlKSAqLyAweEJCICYmCgkgICAgICAgICAgICBieXRlc1syXSA9PT0gLyooYnl0ZSkgKi8gMHhCRjsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggJiYgKGNhbkJlSVNPODg1OTEgfHwgY2FuQmVTaGlmdEpJUyB8fCBjYW5CZVVURjgpOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB2YWx1ZSA9IGJ5dGVzW2ldICYgMHhGRjsKCSAgICAgICAgICAgIC8vIFVURi04IHN0dWZmCgkgICAgICAgICAgICBpZiAoY2FuQmVVVEY4KSB7CgkgICAgICAgICAgICAgICAgaWYgKHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDgwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgY2FuQmVVVEY4ID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAoKHZhbHVlICYgMHg4MCkgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4NDApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjhCeXRlc0xlZnQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDIwKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjJCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh2YWx1ZSAmIDB4MTApID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHV0ZjNCeXRlc0NoYXJzKys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB1dGY4Qnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICgodmFsdWUgJiAweDA4KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXRmNEJ5dGVzQ2hhcnMrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhbkJlVVRGOCA9IGZhbHNlOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfSAvLyBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyB1dGY4TG93Q2hhcnMrKwoJICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIElTTy04ODU5LTEgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICAgICAgaWYgKHZhbHVlID4gMHg3RiAmJiB2YWx1ZSA8IDB4QTApIHsKCSAgICAgICAgICAgICAgICAgICAgY2FuQmVJU084ODU5MSA9IGZhbHNlOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmICh2YWx1ZSA+IDB4OUYpIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHZhbHVlIDwgMHhDMCB8fCB2YWx1ZSA9PT0gMHhENyB8fCB2YWx1ZSA9PT0gMHhGNykgewoJICAgICAgICAgICAgICAgICAgICAgICAgaXNvSGlnaE90aGVyKys7CgkgICAgICAgICAgICAgICAgICAgIH0gLy8gZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIGlzb0hpZ2hDaGFycysrCgkgICAgICAgICAgICAgICAgICAgIC8vIH0KCSAgICAgICAgICAgICAgICB9IC8vIGVsc2UgewoJICAgICAgICAgICAgICAgIC8vIGlzb0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAvLyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBTaGlmdF9KSVMgc3R1ZmYKCSAgICAgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTKSB7CgkgICAgICAgICAgICAgICAgaWYgKHNqaXNCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSA8IDB4NDAgfHwgdmFsdWUgPT09IDB4N0YgfHwgdmFsdWUgPiAweEZDKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBjYW5CZVNoaWZ0SklTID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0LS07CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPT09IDB4ODAgfHwgdmFsdWUgPT09IDB4QTAgfHwgdmFsdWUgPiAweEVGKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhbkJlU2hpZnRKSVMgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAodmFsdWUgPiAweEEwICYmIHZhbHVlIDwgMHhFMCkgewoJICAgICAgICAgICAgICAgICAgICBzamlzS2F0YWthbmFDaGFycysrOwoJICAgICAgICAgICAgICAgICAgICBzamlzQ3VyRG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gMDsKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCsrOwoJICAgICAgICAgICAgICAgICAgICBpZiAoc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA+IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPSBzamlzQ3VyS2F0YWthbmFXb3JkTGVuZ3RoOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgaWYgKHZhbHVlID4gMHg3RikgewoJICAgICAgICAgICAgICAgICAgICBzamlzQnl0ZXNMZWZ0Kys7CgkgICAgICAgICAgICAgICAgICAgIC8vIHNqaXNEb3VibGVCeXRlc0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGgrKzsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPiBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID0gc2ppc0N1ckRvdWJsZUJ5dGVzV29yZExlbmd0aDsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gc2ppc0xvd0NoYXJzKysKCSAgICAgICAgICAgICAgICAgICAgc2ppc0N1ckthdGFrYW5hV29yZExlbmd0aCA9IDA7CgkgICAgICAgICAgICAgICAgICAgIHNqaXNDdXJEb3VibGVCeXRlc1dvcmRMZW5ndGggPSAwOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmIHV0ZjhCeXRlc0xlZnQgPiAwKSB7CgkgICAgICAgICAgICBjYW5CZVVURjggPSBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY2FuQmVTaGlmdEpJUyAmJiBzamlzQnl0ZXNMZWZ0ID4gMCkgewoJICAgICAgICAgICAgY2FuQmVTaGlmdEpJUyA9IGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhc3kgLS0gaWYgdGhlcmUgaXMgQk9NIG9yIGF0IGxlYXN0IDEgdmFsaWQgbm90LXNpbmdsZSBieXRlIGNoYXJhY3RlciAoYW5kIG5vIGV2aWRlbmNlIGl0IGNhbid0IGJlIFVURi04KSwgZG9uZQoJICAgICAgICBpZiAoY2FuQmVVVEY4ICYmICh1dGY4Ym9tIHx8IHV0ZjJCeXRlc0NoYXJzICsgdXRmM0J5dGVzQ2hhcnMgKyB1dGY0Qnl0ZXNDaGFycyA+IDApKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuVVRGODsKCSAgICAgICAgfQoJICAgICAgICAvLyBFYXN5IC0tIGlmIGFzc3VtaW5nIFNoaWZ0X0pJUyBvciBhdCBsZWFzdCAzIHZhbGlkIGNvbnNlY3V0aXZlIG5vdC1hc2NpaSBjaGFyYWN0ZXJzIChhbmQgbm8gZXZpZGVuY2UgaXQgY2FuJ3QgYmUpLCBkb25lCgkgICAgICAgIGlmIChjYW5CZVNoaWZ0SklTICYmIChTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTIHx8IHNqaXNNYXhLYXRha2FuYVdvcmRMZW5ndGggPj0gMyB8fCBzamlzTWF4RG91YmxlQnl0ZXNXb3JkTGVuZ3RoID49IDMpKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuU0hJRlRfSklTOwoJICAgICAgICB9CgkgICAgICAgIC8vIERpc3Rpbmd1aXNoaW5nIFNoaWZ0X0pJUyBhbmQgSVNPLTg4NTktMSBjYW4gYmUgYSBsaXR0bGUgdG91Z2ggZm9yIHNob3J0IHdvcmRzLiBUaGUgY3J1ZGUgaGV1cmlzdGljIGlzOgoJICAgICAgICAvLyAtIElmIHdlIHNhdwoJICAgICAgICAvLyAgIC0gb25seSB0d28gY29uc2VjdXRpdmUga2F0YWthbmEgY2hhcnMgaW4gdGhlIHdob2xlIHRleHQsIG9yCgkgICAgICAgIC8vICAgLSBhdCBsZWFzdCAxMCUgb2YgYnl0ZXMgdGhhdCBjb3VsZCBiZSAidXBwZXIiIG5vdC1hbHBoYW51bWVyaWMgTGF0aW4xLAoJICAgICAgICAvLyAtIHRoZW4gd2UgY29uY2x1ZGUgU2hpZnRfSklTLCBlbHNlIElTTy04ODU5LTEKCSAgICAgICAgaWYgKGNhbkJlSVNPODg1OTEgJiYgY2FuQmVTaGlmdEpJUykgewoJICAgICAgICAgICAgcmV0dXJuIChzamlzTWF4S2F0YWthbmFXb3JkTGVuZ3RoID09PSAyICYmIHNqaXNLYXRha2FuYUNoYXJzID09PSAyKSB8fCBpc29IaWdoT3RoZXIgKiAxMCA+PSBsZW5ndGgKCSAgICAgICAgICAgICAgICA/IFN0cmluZ1V0aWxzLlNISUZUX0pJUyA6IFN0cmluZ1V0aWxzLklTTzg4NTkxOwoJICAgICAgICB9CgkgICAgICAgIC8vIE90aGVyd2lzZSwgdHJ5IGluIG9yZGVyIElTTy04ODU5LTEsIFNoaWZ0IEpJUywgVVRGLTggYW5kIGZhbGwgYmFjayB0byBkZWZhdWx0IHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIGlmIChjYW5CZUlTTzg4NTkxKSB7CgkgICAgICAgICAgICByZXR1cm4gU3RyaW5nVXRpbHMuSVNPODg1OTE7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlU2hpZnRKSVMpIHsKCSAgICAgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5TSElGVF9KSVM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNhbkJlVVRGOCkgewoJICAgICAgICAgICAgcmV0dXJuIFN0cmluZ1V0aWxzLlVURjg7CgkgICAgICAgIH0KCSAgICAgICAgLy8gT3RoZXJ3aXNlLCB3ZSB0YWtlIGEgd2lsZCBndWVzcyB3aXRoIHBsYXRmb3JtIGVuY29kaW5nCgkgICAgICAgIHJldHVybiBTdHJpbmdVdGlscy5QTEFURk9STV9ERUZBVUxUX0VOQ09ESU5HOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKiBAc2VlIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8xMzQzOTcxMS80MzY3NjgzCgkgICAgICoKCSAgICAgKiBAcGFyYW0gYXBwZW5kIFRoZSBuZXcgc3RyaW5nIHRvIGFwcGVuZC4KCSAgICAgKiBAcGFyYW0gYXJncyBBcmd1bWV0cyB2YWx1ZXMgdG8gYmUgZm9ybWF0ZWQuCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZm9ybWF0ID0gZnVuY3Rpb24gKGFwcGVuZCkgewoJICAgICAgICB2YXIgYXJncyA9IFtdOwoJICAgICAgICBmb3IgKHZhciBfaSA9IDE7IF9pIDwgYXJndW1lbnRzLmxlbmd0aDsgX2krKykgewoJICAgICAgICAgICAgYXJnc1tfaSAtIDFdID0gYXJndW1lbnRzW19pXTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaSA9IC0xOwoJICAgICAgICBmdW5jdGlvbiBjYWxsYmFjayhleHAsIHAwLCBwMSwgcDIsIHAzLCBwNCkgewoJICAgICAgICAgICAgaWYgKGV4cCA9PT0gJyUlJykKCSAgICAgICAgICAgICAgICByZXR1cm4gJyUnOwoJICAgICAgICAgICAgaWYgKGFyZ3NbKytpXSA9PT0gdW5kZWZpbmVkKQoJICAgICAgICAgICAgICAgIHJldHVybiB1bmRlZmluZWQ7CgkgICAgICAgICAgICBleHAgPSBwMiA/IHBhcnNlSW50KHAyLnN1YnN0cigxKSkgOiB1bmRlZmluZWQ7CgkgICAgICAgICAgICB2YXIgYmFzZSA9IHAzID8gcGFyc2VJbnQocDMuc3Vic3RyKDEpKSA6IHVuZGVmaW5lZDsKCSAgICAgICAgICAgIHZhciB2YWw7CgkgICAgICAgICAgICBzd2l0Y2ggKHA0KSB7CgkgICAgICAgICAgICAgICAgY2FzZSAncyc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IGFyZ3NbaV07CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2MnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBhcmdzW2ldWzBdOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdmJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChhcmdzW2ldKS50b0ZpeGVkKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ3AnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvUHJlY2lzaW9uKGV4cCk7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIGNhc2UgJ2UnOgoJICAgICAgICAgICAgICAgICAgICB2YWwgPSBwYXJzZUZsb2F0KGFyZ3NbaV0pLnRvRXhwb25lbnRpYWwoZXhwKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgY2FzZSAneCc6CgkgICAgICAgICAgICAgICAgICAgIHZhbCA9IHBhcnNlSW50KGFyZ3NbaV0pLnRvU3RyaW5nKGJhc2UgPyBiYXNlIDogMTYpOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICBjYXNlICdkJzoKCSAgICAgICAgICAgICAgICAgICAgdmFsID0gcGFyc2VGbG9hdChwYXJzZUludChhcmdzW2ldLCBiYXNlID8gYmFzZSA6IDEwKS50b1ByZWNpc2lvbihleHApKS50b0ZpeGVkKDApOwoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhbCA9IHR5cGVvZiB2YWwgPT09ICdvYmplY3QnID8gSlNPTi5zdHJpbmdpZnkodmFsKSA6ICgrdmFsKS50b1N0cmluZyhiYXNlKTsKCSAgICAgICAgICAgIHZhciBzaXplID0gcGFyc2VJbnQocDEpOyAvKiBwYWRkaW5nIHNpemUgKi8KCSAgICAgICAgICAgIHZhciBjaCA9IHAxICYmIChwMVswXSArICcnKSA9PT0gJzAnID8gJzAnIDogJyAnOyAvKiBpc251bGw/ICovCgkgICAgICAgICAgICB3aGlsZSAodmFsLmxlbmd0aCA8IHNpemUpCgkgICAgICAgICAgICAgICAgdmFsID0gcDAgIT09IHVuZGVmaW5lZCA/IHZhbCArIGNoIDogY2ggKyB2YWw7IC8qIGlzbWludXM/ICovCgkgICAgICAgICAgICByZXR1cm4gdmFsOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZWdleCA9IC8lKC0pPygwP1swLTldKyk/KFsuXVswLTldKyk/KFsjXVswLTldKyk/KFtzY2ZwZXhkJV0pL2c7CgkgICAgICAgIHJldHVybiBhcHBlbmQucmVwbGFjZShyZWdleCwgY2FsbGJhY2spOwoJICAgIH07CgkgICAgLyoqCgkgICAgICoKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRCeXRlcyA9IGZ1bmN0aW9uIChzdHIsIGVuY29kaW5nKSB7CgkgICAgICAgIHJldHVybiBTdHJpbmdFbmNvZGluZ18xJDEuZGVmYXVsdC5lbmNvZGUoc3RyLCBlbmNvZGluZyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIHRoZSBjaGFyY29kZSBhdCB0aGUgc3BlY2lmaWVkIGluZGV4IG9yIGF0IGluZGV4IHplcm8uCgkgICAgICovCgkgICAgU3RyaW5nVXRpbHMuZ2V0Q2hhckNvZGUgPSBmdW5jdGlvbiAoc3RyLCBpbmRleCkgewoJICAgICAgICBpZiAoaW5kZXggPT09IHZvaWQgMCkgeyBpbmRleCA9IDA7IH0KCSAgICAgICAgcmV0dXJuIHN0ci5jaGFyQ29kZUF0KGluZGV4KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgY2hhciBmb3IgZ2l2ZW4gY2hhcmNvZGUKCSAgICAgKi8KCSAgICBTdHJpbmdVdGlscy5nZXRDaGFyQXQgPSBmdW5jdGlvbiAoY2hhckNvZGUpIHsKCSAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoY2hhckNvZGUpOwoJICAgIH07CgkgICAgU3RyaW5nVXRpbHMuU0hJRlRfSklTID0gQ2hhcmFjdGVyU2V0RUNJXzEkMS5kZWZhdWx0LlNKSVMuZ2V0TmFtZSgpOyAvLyAiU0pJUyIKCSAgICBTdHJpbmdVdGlscy5HQjIzMTIgPSAnR0IyMzEyJzsKCSAgICBTdHJpbmdVdGlscy5JU084ODU5MSA9IENoYXJhY3RlclNldEVDSV8xJDEuZGVmYXVsdC5JU084ODU5XzEuZ2V0TmFtZSgpOyAvLyAiSVNPODg1OV8xIgoJICAgIFN0cmluZ1V0aWxzLkVVQ19KUCA9ICdFVUNfSlAnOwoJICAgIFN0cmluZ1V0aWxzLlVURjggPSBDaGFyYWN0ZXJTZXRFQ0lfMSQxLmRlZmF1bHQuVVRGOC5nZXROYW1lKCk7IC8vICJVVEY4IgoJICAgIFN0cmluZ1V0aWxzLlBMQVRGT1JNX0RFRkFVTFRfRU5DT0RJTkcgPSBTdHJpbmdVdGlscy5VVEY4OyAvLyAiVVRGOCIvL0NoYXJzZXQuZGVmYXVsdENoYXJzZXQoKS5uYW1lKCkKCSAgICBTdHJpbmdVdGlscy5BU1NVTUVfU0hJRlRfSklTID0gZmFsc2U7CgkgICAgcmV0dXJuIFN0cmluZ1V0aWxzOwoJfSgpKTsKCVN0cmluZ1V0aWxzJDEuZGVmYXVsdCA9IFN0cmluZ1V0aWxzOwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShTdHJpbmdCdWlsZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBTdHJpbmdVdGlsc18xJDEgPSBTdHJpbmdVdGlscyQxOwoJdmFyIFN0cmluZ0J1aWxkZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gU3RyaW5nQnVpbGRlcih2YWx1ZSkgewoJICAgICAgICBpZiAodmFsdWUgPT09IHZvaWQgMCkgeyB2YWx1ZSA9ICcnOyB9CgkgICAgICAgIHRoaXMudmFsdWUgPSB2YWx1ZTsKCSAgICB9CgkgICAgU3RyaW5nQnVpbGRlci5wcm90b3R5cGUuZW5hYmxlRGVjb2RpbmcgPSBmdW5jdGlvbiAoZW5jb2RpbmcpIHsKCSAgICAgICAgdGhpcy5lbmNvZGluZyA9IGVuY29kaW5nOwoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIGlmICh0eXBlb2YgcyA9PT0gJ3N0cmluZycpIHsKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gcy50b1N0cmluZygpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHRoaXMuZW5jb2RpbmcpIHsKCSAgICAgICAgICAgIC8vIHVzZSBwYXNzZWQgZm9ybWF0IChmcm9tQ2hhckNvZGUgd2lsbCByZXR1cm4gVVRGOCBlbmNvZGluZykKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nVXRpbHNfMSQxLmRlZmF1bHQuY2FzdEFzTm9uVXRmOENoYXIocywgdGhpcy5lbmNvZGluZyk7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBjb3JyZWN0bHkgY29udmVydHMgZnJvbSBVVEYtOCwgYnV0IG5vdCBvdGhlciBlbmNvZGluZ3MKCSAgICAgICAgICAgIHRoaXMudmFsdWUgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShzKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpczsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmFwcGVuZENoYXJzID0gZnVuY3Rpb24gKHN0ciwgb2Zmc2V0LCBsZW4pIHsKCSAgICAgICAgZm9yICh2YXIgaSA9IG9mZnNldDsgb2Zmc2V0IDwgb2Zmc2V0ICsgbGVuOyBpKyspIHsKCSAgICAgICAgICAgIHRoaXMuYXBwZW5kKHN0cltpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5sZW5ndGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmxlbmd0aDsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlLmNoYXJBdChuKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmRlbGV0ZUNoYXJBdCA9IGZ1bmN0aW9uIChuKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIHRoaXMudmFsdWUuc3Vic3RyaW5nKG4gKyAxKTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnNldENoYXJBdCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgMSk7CgkgICAgfTsKCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zdWJzdHJpbmcgPSBmdW5jdGlvbiAoc3RhcnQsIGVuZCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZS5zdWJzdHJpbmcoc3RhcnQsIGVuZCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAbm90ZSBoZWxwZXIgbWV0aG9kIGZvciBSU1MgRXhwYW5kZWQKCSAgICAgKi8KCSAgICBTdHJpbmdCdWlsZGVyLnByb3RvdHlwZS5zZXRMZW5ndGhUb1plcm8gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSAnJzsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIFN0cmluZ0J1aWxkZXIucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uIChuLCBjKSB7CgkgICAgICAgIHRoaXMudmFsdWUgPSB0aGlzLnZhbHVlLnN1YnN0cigwLCBuKSArIGMgKyB0aGlzLnZhbHVlLnN1YnN0cihuICsgYy5sZW5ndGgpOwoJICAgIH07CgkgICAgcmV0dXJuIFN0cmluZ0J1aWxkZXI7Cgl9KCkpOwoJU3RyaW5nQnVpbGRlciQxLmRlZmF1bHQgPSBTdHJpbmdCdWlsZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQml0TWF0cml4JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5czsqLwoJdmFyIEJpdEFycmF5XzEkMSA9IEJpdEFycmF5JDE7Cgl2YXIgU3lzdGVtXzEkMyA9IFN5c3RlbSQxOwoJdmFyIEFycmF5c18xID0gQXJyYXlzJDE7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDIgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNyA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgMkQgbWF0cml4IG9mIGJpdHMuIEluIGZ1bmN0aW9uIGFyZ3VtZW50cyBiZWxvdywgYW5kIHRocm91Z2hvdXQgdGhlIGNvbW1vbgoJICogbW9kdWxlLCB4IGlzIHRoZSBjb2x1bW4gcG9zaXRpb24sIGFuZCB5IGlzIHRoZSByb3cgcG9zaXRpb24uIFRoZSBvcmRlcmluZyBpcyBhbHdheXMgeCwgeS4KCSAqIFRoZSBvcmlnaW4gaXMgYXQgdGhlIHRvcC1sZWZ0LjwvcD4KCSAqCgkgKiA8cD5JbnRlcm5hbGx5IHRoZSBiaXRzIGFyZSByZXByZXNlbnRlZCBpbiBhIDEtRCBhcnJheSBvZiAzMi1iaXQgaW50cy4gSG93ZXZlciwgZWFjaCByb3cgYmVnaW5zCgkgKiB3aXRoIGEgbmV3IGludC4gVGhpcyBpcyBkb25lIGludGVudGlvbmFsbHkgc28gdGhhdCB3ZSBjYW4gY29weSBvdXQgYSByb3cgaW50byBhIEJpdEFycmF5IHZlcnkKCSAqIGVmZmljaWVudGx5LjwvcD4KCSAqCgkgKiA8cD5UaGUgb3JkZXJpbmcgb2YgYml0cyBpcyByb3ctbWFqb3IuIFdpdGhpbiBlYWNoIGludCwgdGhlIGxlYXN0IHNpZ25pZmljYW50IGJpdHMgYXJlIHVzZWQgZmlyc3QsCgkgKiBtZWFuaW5nIHRoZXkgcmVwcmVzZW50IGxvd2VyIHggdmFsdWVzLiBUaGlzIGlzIGNvbXBhdGlibGUgd2l0aCBCaXRBcnJheSdzIGltcGxlbWVudGF0aW9uLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqLwoJdmFyIEJpdE1hdHJpeCAvKmltcGxlbWVudHMgQ2xvbmVhYmxlKi8gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSBzcXVhcmUge0BsaW5rIEJpdE1hdHJpeH0uCgkgICAgICoKCSAgICAgKiBAcGFyYW0gZGltZW5zaW9uIGhlaWdodCBhbmQgd2lkdGgKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoZGltZW5zaW9uOiBudW1iZXIgLyppbnQqLykgewoJICAgIC8vICAgdGhpcyhkaW1lbnNpb24sIGRpbWVuc2lvbikKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogQ3JlYXRlcyBhbiBlbXB0eSB7QGxpbmsgQml0TWF0cml4fS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB3aWR0aCBiaXQgbWF0cml4IHdpZHRoCgkgICAgICogQHBhcmFtIGhlaWdodCBiaXQgbWF0cml4IGhlaWdodAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBjb25zdHJ1Y3Rvcih3aWR0aDogbnVtYmVyIC8qaW50Ki8sIGhlaWdodDogbnVtYmVyIC8qaW50Ki8pIHsKCSAgICAvLyAgIGlmICh3aWR0aCA8IDEgfHwgaGVpZ2h0IDwgMSkgewoJICAgIC8vICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKCJCb3RoIGRpbWVuc2lvbnMgbXVzdCBiZSBncmVhdGVyIHRoYW4gMCIpCgkgICAgLy8gICB9CgkgICAgLy8gICB0aGlzLndpZHRoID0gd2lkdGgKCSAgICAvLyAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0CgkgICAgLy8gICB0aGlzLnJvd1NpemUgPSAod2lkdGggKyAzMSkgLyAzMgoJICAgIC8vICAgYml0cyA9IG5ldyBpbnRbcm93U2l6ZSAqIGhlaWdodF07CgkgICAgLy8gfQoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeCh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgcm93U2l6ZSAvKmludCovLCBiaXRzKSB7CgkgICAgICAgIHRoaXMud2lkdGggPSB3aWR0aDsKCSAgICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7CgkgICAgICAgIHRoaXMucm93U2l6ZSA9IHJvd1NpemU7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGhlaWdodCB8fCBudWxsID09PSBoZWlnaHQpIHsKCSAgICAgICAgICAgIGhlaWdodCA9IHdpZHRoOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgICAgICBpZiAod2lkdGggPCAxIHx8IGhlaWdodCA8IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0JvdGggZGltZW5zaW9ucyBtdXN0IGJlIGdyZWF0ZXIgdGhhbiAwJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gcm93U2l6ZSB8fCBudWxsID09PSByb3dTaXplKSB7CgkgICAgICAgICAgICByb3dTaXplID0gTWF0aC5mbG9vcigod2lkdGggKyAzMSkgLyAzMik7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yb3dTaXplID0gcm93U2l6ZTsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gYml0cyB8fCBudWxsID09PSBiaXRzKSB7CgkgICAgICAgICAgICB0aGlzLmJpdHMgPSBuZXcgSW50MzJBcnJheSh0aGlzLnJvd1NpemUgKiB0aGlzLmhlaWdodCk7CgkgICAgICAgIH0KCSAgICB9CgkgICAgLyoqCgkgICAgICogSW50ZXJwcmV0cyBhIDJEIGFycmF5IG9mIGJvb2xlYW5zIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0sIHdoZXJlICJ0cnVlIiBtZWFucyBhbiAib24iIGJpdC4KCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBpbWFnZSBiaXRzIG9mIHRoZSBpbWFnZSwgYXMgYSByb3ctbWFqb3IgMkQgYXJyYXkuIEVsZW1lbnRzIGFyZSBhcnJheXMgcmVwcmVzZW50aW5nIHJvd3MKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCaXRNYXRyaXh9IHJlcHJlc2VudGF0aW9uIG9mIGltYWdlCgkgICAgICovCgkgICAgQml0TWF0cml4LnBhcnNlRnJvbUJvb2xlYW5BcnJheSA9IGZ1bmN0aW9uIChpbWFnZSkgewoJICAgICAgICB2YXIgaGVpZ2h0ID0gaW1hZ2UubGVuZ3RoOwoJICAgICAgICB2YXIgd2lkdGggPSBpbWFnZVswXS5sZW5ndGg7CgkgICAgICAgIHZhciBiaXRzID0gbmV3IEJpdE1hdHJpeCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBoZWlnaHQ7IGkrKykgewoJICAgICAgICAgICAgdmFyIGltYWdlSSA9IGltYWdlW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCB3aWR0aDsgaisrKSB7CgkgICAgICAgICAgICAgICAgaWYgKGltYWdlSVtqXSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldChqLCBpKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKgoJICAgICAqIEBmdW5jdGlvbiBwYXJzZQoJICAgICAqIEBwYXJhbSBzdHJpbmdSZXByZXNlbnRhdGlvbgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcKCSAgICAgKiBAcGFyYW0gdW5zZXRTdHJpbmcKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucGFyc2VGcm9tU3RyaW5nID0gZnVuY3Rpb24gKHN0cmluZ1JlcHJlc2VudGF0aW9uLCBzZXRTdHJpbmcsIHVuc2V0U3RyaW5nKSB7CgkgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnc3RyaW5nUmVwcmVzZW50YXRpb24gY2Fubm90IGJlIG51bGwnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBBcnJheShzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpOwoJICAgICAgICB2YXIgYml0c1BvcyA9IDA7CgkgICAgICAgIHZhciByb3dTdGFydFBvcyA9IDA7CgkgICAgICAgIHZhciByb3dMZW5ndGggPSAtMTsKCSAgICAgICAgdmFyIG5Sb3dzID0gMDsKCSAgICAgICAgdmFyIHBvcyA9IDA7CgkgICAgICAgIHdoaWxlIChwb3MgPCBzdHJpbmdSZXByZXNlbnRhdGlvbi5sZW5ndGgpIHsKCSAgICAgICAgICAgIGlmIChzdHJpbmdSZXByZXNlbnRhdGlvbi5jaGFyQXQocG9zKSA9PT0gJ1xuJyB8fAoJICAgICAgICAgICAgICAgIHN0cmluZ1JlcHJlc2VudGF0aW9uLmNoYXJBdChwb3MpID09PSAnXHInKSB7CgkgICAgICAgICAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgICAgICAgICBpZiAocm93TGVuZ3RoID09PSAtMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcm93TGVuZ3RoID0gYml0c1BvcyAtIHJvd1N0YXJ0UG9zOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGJpdHNQb3MgLSByb3dTdGFydFBvcyAhPT0gcm93TGVuZ3RoKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdyb3cgbGVuZ3RocyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICByb3dTdGFydFBvcyA9IGJpdHNQb3M7CgkgICAgICAgICAgICAgICAgICAgIG5Sb3dzKys7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHBvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoc3RyaW5nUmVwcmVzZW50YXRpb24uc3Vic3RyaW5nKHBvcywgcG9zICsgc2V0U3RyaW5nLmxlbmd0aCkgPT09IHNldFN0cmluZykgewoJICAgICAgICAgICAgICAgIHBvcyArPSBzZXRTdHJpbmcubGVuZ3RoOwoJICAgICAgICAgICAgICAgIGJpdHNbYml0c1Bvc10gPSB0cnVlOwoJICAgICAgICAgICAgICAgIGJpdHNQb3MrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHN0cmluZ1JlcHJlc2VudGF0aW9uLnN1YnN0cmluZyhwb3MsIHBvcyArIHVuc2V0U3RyaW5nLmxlbmd0aCkgPT09IHVuc2V0U3RyaW5nKSB7CgkgICAgICAgICAgICAgICAgcG9zICs9IHVuc2V0U3RyaW5nLmxlbmd0aDsKCSAgICAgICAgICAgICAgICBiaXRzW2JpdHNQb3NdID0gZmFsc2U7CgkgICAgICAgICAgICAgICAgYml0c1BvcysrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnaWxsZWdhbCBjaGFyYWN0ZXIgZW5jb3VudGVyZWQ6ICcgKyBzdHJpbmdSZXByZXNlbnRhdGlvbi5zdWJzdHJpbmcocG9zKSk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gbm8gRU9MIGF0IGVuZD8KCSAgICAgICAgaWYgKGJpdHNQb3MgPiByb3dTdGFydFBvcykgewoJICAgICAgICAgICAgaWYgKHJvd0xlbmd0aCA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICByb3dMZW5ndGggPSBiaXRzUG9zIC0gcm93U3RhcnRQb3M7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmIChiaXRzUG9zIC0gcm93U3RhcnRQb3MgIT09IHJvd0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ3JvdyBsZW5ndGhzIGRvIG5vdCBtYXRjaCcpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgblJvd3MrKzsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbWF0cml4ID0gbmV3IEJpdE1hdHJpeChyb3dMZW5ndGgsIG5Sb3dzKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBiaXRzUG9zOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChiaXRzW2ldKSB7CgkgICAgICAgICAgICAgICAgbWF0cml4LnNldChNYXRoLmZsb29yKGkgJSByb3dMZW5ndGgpLCBNYXRoLmZsb29yKGkgLyByb3dMZW5ndGgpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbWF0cml4OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+R2V0cyB0aGUgcmVxdWVzdGVkIGJpdCwgd2hlcmUgdHJ1ZSBtZWFucyBibGFjay48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0geCBUaGUgaG9yaXpvbnRhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggY29sdW1uKQoJICAgICAqIEBwYXJhbSB5IFRoZSB2ZXJ0aWNhbCBjb21wb25lbnQgKGkuZS4gd2hpY2ggcm93KQoJICAgICAqIEByZXR1cm4gdmFsdWUgb2YgZ2l2ZW4gYml0IGluIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0ID0gZnVuY3Rpb24gKHggLyppbnQqLywgeSAvKmludCovKSB7CgkgICAgICAgIHZhciBvZmZzZXQgPSB5ICogdGhpcy5yb3dTaXplICsgTWF0aC5mbG9vcih4IC8gMzIpOwoJICAgICAgICByZXR1cm4gKCh0aGlzLmJpdHNbb2Zmc2V0XSA+Pj4gKHggJiAweDFmKSkgJiAxKSAhPT0gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgdGhlIGdpdmVuIGJpdCB0byB0cnVlLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB4IFRoZSBob3Jpem9udGFsIGNvbXBvbmVudCAoaS5lLiB3aGljaCBjb2x1bW4pCgkgICAgICogQHBhcmFtIHkgVGhlIHZlcnRpY2FsIGNvbXBvbmVudCAoaS5lLiB3aGljaCByb3cpCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIHw9ICgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRjsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUudW5zZXQgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdICY9IH4oKDEgPDwgKHggJiAweDFmKSkgJiAweEZGRkZGRkZGKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkZsaXBzIHRoZSBnaXZlbiBiaXQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHggVGhlIGhvcml6b250YWwgY29tcG9uZW50IChpLmUuIHdoaWNoIGNvbHVtbikKCSAgICAgKiBAcGFyYW0geSBUaGUgdmVydGljYWwgY29tcG9uZW50IChpLmUuIHdoaWNoIHJvdykKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmZsaXAgPSBmdW5jdGlvbiAoeCAvKmludCovLCB5IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiB0aGlzLnJvd1NpemUgKyBNYXRoLmZsb29yKHggLyAzMik7CgkgICAgICAgIHRoaXMuYml0c1tvZmZzZXRdIF49ICgoMSA8PCAoeCAmIDB4MWYpKSAmIDB4RkZGRkZGRkYpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRXhjbHVzaXZlLW9yIChYT1IpOiBGbGlwIHRoZSBiaXQgaW4gdGhpcyB7QGNvZGUgQml0TWF0cml4fSBpZiB0aGUgY29ycmVzcG9uZGluZwoJICAgICAqIG1hc2sgYml0IGlzIHNldC4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBtYXNrIFhPUiBtYXNrCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS54b3IgPSBmdW5jdGlvbiAobWFzaykgewoJICAgICAgICBpZiAodGhpcy53aWR0aCAhPT0gbWFzay5nZXRXaWR0aCgpIHx8IHRoaXMuaGVpZ2h0ICE9PSBtYXNrLmdldEhlaWdodCgpCgkgICAgICAgICAgICB8fCB0aGlzLnJvd1NpemUgIT09IG1hc2suZ2V0Um93U2l6ZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdpbnB1dCBtYXRyaXggZGltZW5zaW9ucyBkbyBub3QgbWF0Y2gnKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcm93QXJyYXkgPSBuZXcgQml0QXJyYXlfMSQxLmRlZmF1bHQoTWF0aC5mbG9vcih0aGlzLndpZHRoIC8gMzIpICsgMSk7CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIHZhciBvZmZzZXQgPSB5ICogcm93U2l6ZTsKCSAgICAgICAgICAgIHZhciByb3cgPSBtYXNrLmdldFJvdyh5LCByb3dBcnJheSkuZ2V0Qml0QXJyYXkoKTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgcm93U2l6ZTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgYml0c1tvZmZzZXQgKyB4XSBePSByb3dbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIENsZWFycyBhbGwgYml0cyAoc2V0cyB0byBmYWxzZSkuCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5jbGVhciA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBtYXggPSBiaXRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkrKykgewoJICAgICAgICAgICAgYml0c1tpXSA9IDA7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlNldHMgYSBzcXVhcmUgcmVnaW9uIG9mIHRoZSBiaXQgbWF0cml4IHRvIHRydWUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGxlZnQgVGhlIGhvcml6b250YWwgcG9zaXRpb24gdG8gYmVnaW4gYXQgKGluY2x1c2l2ZSkKCSAgICAgKiBAcGFyYW0gdG9wIFRoZSB2ZXJ0aWNhbCBwb3NpdGlvbiB0byBiZWdpbiBhdCAoaW5jbHVzaXZlKQoJICAgICAqIEBwYXJhbSB3aWR0aCBUaGUgd2lkdGggb2YgdGhlIHJlZ2lvbgoJICAgICAqIEBwYXJhbSBoZWlnaHQgVGhlIGhlaWdodCBvZiB0aGUgcmVnaW9uCgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5zZXRSZWdpb24gPSBmdW5jdGlvbiAobGVmdCAvKmludCovLCB0b3AgLyppbnQqLywgd2lkdGggLyppbnQqLywgaGVpZ2h0IC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHRvcCA8IDAgfHwgbGVmdCA8IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ3LmRlZmF1bHQoJ0xlZnQgYW5kIHRvcCBtdXN0IGJlIG5vbm5lZ2F0aXZlJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGhlaWdodCA8IDEgfHwgd2lkdGggPCAxKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNy5kZWZhdWx0KCdIZWlnaHQgYW5kIHdpZHRoIG11c3QgYmUgYXQgbGVhc3QgMScpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByaWdodCA9IGxlZnQgKyB3aWR0aDsKCSAgICAgICAgdmFyIGJvdHRvbSA9IHRvcCArIGhlaWdodDsKCSAgICAgICAgaWYgKGJvdHRvbSA+IHRoaXMuaGVpZ2h0IHx8IHJpZ2h0ID4gdGhpcy53aWR0aCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDcuZGVmYXVsdCgnVGhlIHJlZ2lvbiBtdXN0IGZpdCBpbnNpZGUgdGhlIG1hdHJpeCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgZm9yICh2YXIgeSA9IHRvcDsgeSA8IGJvdHRvbTsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHJvd1NpemU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gbGVmdDsgeCA8IHJpZ2h0OyB4KyspIHsKCSAgICAgICAgICAgICAgICBiaXRzW29mZnNldCArIE1hdGguZmxvb3IoeCAvIDMyKV0gfD0gKCgxIDw8ICh4ICYgMHgxZikpICYgMHhGRkZGRkZGRik7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEEgZmFzdCBtZXRob2QgdG8gcmV0cmlldmUgb25lIHJvdyBvZiBkYXRhIGZyb20gdGhlIG1hdHJpeCBhcyBhIEJpdEFycmF5LgoJICAgICAqCgkgICAgICogQHBhcmFtIHkgVGhlIHJvdyB0byByZXRyaWV2ZQoJICAgICAqIEBwYXJhbSByb3cgQW4gb3B0aW9uYWwgY2FsbGVyLWFsbG9jYXRlZCBCaXRBcnJheSwgd2lsbCBiZSBhbGxvY2F0ZWQgaWYgbnVsbCBvciB0b28gc21hbGwKCSAgICAgKiBAcmV0dXJuIFRoZSByZXN1bHRpbmcgQml0QXJyYXkgLSB0aGlzIHJlZmVyZW5jZSBzaG91bGQgYWx3YXlzIGJlIHVzZWQgZXZlbiB3aGVuIHBhc3NpbmcKCSAgICAgKiAgICAgICAgIHlvdXIgb3duIHJvdwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Um93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIGlmIChyb3cgPT09IG51bGwgfHwgcm93ID09PSB1bmRlZmluZWQgfHwgcm93LmdldFNpemUoKSA8IHRoaXMud2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh0aGlzLndpZHRoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHJvdy5jbGVhcigpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByb3dTaXplID0gdGhpcy5yb3dTaXplOwoJICAgICAgICB2YXIgYml0cyA9IHRoaXMuYml0czsKCSAgICAgICAgdmFyIG9mZnNldCA9IHkgKiByb3dTaXplOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHJvd1NpemU7IHgrKykgewoJICAgICAgICAgICAgcm93LnNldEJ1bGsoeCAqIDMyLCBiaXRzW29mZnNldCArIHhdKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIHkgcm93IHRvIHNldAoJICAgICAqIEBwYXJhbSByb3cge0BsaW5rIEJpdEFycmF5fSB0byBjb3B5IGZyb20KCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLnNldFJvdyA9IGZ1bmN0aW9uICh5IC8qaW50Ki8sIHJvdykgewoJICAgICAgICBTeXN0ZW1fMSQzLmRlZmF1bHQuYXJyYXljb3B5KHJvdy5nZXRCaXRBcnJheSgpLCAwLCB0aGlzLmJpdHMsIHkgKiB0aGlzLnJvd1NpemUsIHRoaXMucm93U2l6ZSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBNb2RpZmllcyB0aGlzIHtAY29kZSBCaXRNYXRyaXh9IHRvIHJlcHJlc2VudCB0aGUgc2FtZSBidXQgcm90YXRlZCAxODAgZGVncmVlcwoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUucm90YXRlMTgwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgdG9wUm93ID0gbmV3IEJpdEFycmF5XzEkMS5kZWZhdWx0KHdpZHRoKTsKCSAgICAgICAgdmFyIGJvdHRvbVJvdyA9IG5ldyBCaXRBcnJheV8xJDEuZGVmYXVsdCh3aWR0aCk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IE1hdGguZmxvb3IoKGhlaWdodCArIDEpIC8gMik7IGkgPCBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB0b3BSb3cgPSB0aGlzLmdldFJvdyhpLCB0b3BSb3cpOwoJICAgICAgICAgICAgYm90dG9tUm93ID0gdGhpcy5nZXRSb3coaGVpZ2h0IC0gMSAtIGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0b3BSb3cucmV2ZXJzZSgpOwoJICAgICAgICAgICAgYm90dG9tUm93LnJldmVyc2UoKTsKCSAgICAgICAgICAgIHRoaXMuc2V0Um93KGksIGJvdHRvbVJvdyk7CgkgICAgICAgICAgICB0aGlzLnNldFJvdyhoZWlnaHQgLSAxIC0gaSwgdG9wUm93KTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIHRoZSBlbmNsb3NpbmcgcmVjdGFuZ2xlIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSBsZWZ0LHRvcCx3aWR0aCxoZWlnaHR9IGVuY2xvc2luZyByZWN0YW5nbGUgb2YgYWxsIDEgYml0cywgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldEVuY2xvc2luZ1JlY3RhbmdsZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIGhlaWdodCA9IHRoaXMuaGVpZ2h0OwoJICAgICAgICB2YXIgcm93U2l6ZSA9IHRoaXMucm93U2l6ZTsKCSAgICAgICAgdmFyIGJpdHMgPSB0aGlzLmJpdHM7CgkgICAgICAgIHZhciBsZWZ0ID0gd2lkdGg7CgkgICAgICAgIHZhciB0b3AgPSBoZWlnaHQ7CgkgICAgICAgIHZhciByaWdodCA9IC0xOwoJICAgICAgICB2YXIgYm90dG9tID0gLTE7CgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHgzMiA9IDA7IHgzMiA8IHJvd1NpemU7IHgzMisrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHRoZUJpdHMgPSBiaXRzW3kgKiByb3dTaXplICsgeDMyXTsKCSAgICAgICAgICAgICAgICBpZiAodGhlQml0cyAhPT0gMCkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA8IHRvcCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdG9wID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeSA+IGJvdHRvbSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tID0geTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBpZiAoeDMyICogMzIgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgYml0ID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdCsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPCBsZWZ0KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGVmdCA9IHgzMiAqIDMyICsgYml0OwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGlmICh4MzIgKiAzMiArIDMxID4gcmlnaHQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBiaXQgPSAzMTsKCSAgICAgICAgICAgICAgICAgICAgICAgIHdoaWxlICgodGhlQml0cyA+Pj4gYml0KSA9PT0gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCh4MzIgKiAzMiArIGJpdCkgPiByaWdodCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0ID0geDMyICogMzIgKyBiaXQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJpZ2h0IDwgbGVmdCB8fCBib3R0b20gPCB0b3ApIHsKCSAgICAgICAgICAgIHJldHVybiBudWxsOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2xlZnQsIHRvcCwgcmlnaHQgLSBsZWZ0ICsgMSwgYm90dG9tIC0gdG9wICsgMV0pOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogVGhpcyBpcyB1c2VmdWwgaW4gZGV0ZWN0aW5nIGEgY29ybmVyIG9mIGEgJ3B1cmUnIGJhcmNvZGUuCgkgICAgICoKCSAgICAgKiBAcmV0dXJuIHtAY29kZSB4LHl9IGNvb3JkaW5hdGUgb2YgdG9wLWxlZnQtbW9zdCAxIGJpdCwgb3IgbnVsbCBpZiBpdCBpcyBhbGwgd2hpdGUKCSAgICAgKi8KCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmdldFRvcExlZnRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IDA7CgkgICAgICAgIHdoaWxlIChiaXRzT2Zmc2V0IDwgYml0cy5sZW5ndGggJiYgYml0c1tiaXRzT2Zmc2V0XSA9PT0gMCkgewoJICAgICAgICAgICAgYml0c09mZnNldCsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChiaXRzT2Zmc2V0ID09PSBiaXRzLmxlbmd0aCkgewoJICAgICAgICAgICAgcmV0dXJuIG51bGw7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHkgPSBiaXRzT2Zmc2V0IC8gcm93U2l6ZTsKCSAgICAgICAgdmFyIHggPSAoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDA7CgkgICAgICAgIHdoaWxlICgoKHRoZUJpdHMgPDwgKDMxIC0gYml0KSkgJiAweEZGRkZGRkZGKSA9PT0gMCkgewoJICAgICAgICAgICAgYml0Kys7CgkgICAgICAgIH0KCSAgICAgICAgeCArPSBiaXQ7CgkgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW3gsIHldKTsKCSAgICB9OwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0Qm90dG9tUmlnaHRPbkJpdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJvd1NpemUgPSB0aGlzLnJvd1NpemU7CgkgICAgICAgIHZhciBiaXRzID0gdGhpcy5iaXRzOwoJICAgICAgICB2YXIgYml0c09mZnNldCA9IGJpdHMubGVuZ3RoIC0gMTsKCSAgICAgICAgd2hpbGUgKGJpdHNPZmZzZXQgPj0gMCAmJiBiaXRzW2JpdHNPZmZzZXRdID09PSAwKSB7CgkgICAgICAgICAgICBiaXRzT2Zmc2V0LS07CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJpdHNPZmZzZXQgPCAwKSB7CgkgICAgICAgICAgICByZXR1cm4gbnVsbDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IoYml0c09mZnNldCAvIHJvd1NpemUpOwoJICAgICAgICB2YXIgeCA9IE1hdGguZmxvb3IoYml0c09mZnNldCAlIHJvd1NpemUpICogMzI7CgkgICAgICAgIHZhciB0aGVCaXRzID0gYml0c1tiaXRzT2Zmc2V0XTsKCSAgICAgICAgdmFyIGJpdCA9IDMxOwoJICAgICAgICB3aGlsZSAoKHRoZUJpdHMgPj4+IGJpdCkgPT09IDApIHsKCSAgICAgICAgICAgIGJpdC0tOwoJICAgICAgICB9CgkgICAgICAgIHggKz0gYml0OwoJICAgICAgICByZXR1cm4gSW50MzJBcnJheS5mcm9tKFt4LCB5XSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRXaWR0aCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMud2lkdGg7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSBoZWlnaHQgb2YgdGhlIG1hdHJpeAoJICAgICAqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZ2V0SGVpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5oZWlnaHQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSByb3cgc2l6ZSBvZiB0aGUgbWF0cml4CgkgICAgICovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5nZXRSb3dTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yb3dTaXplOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuZXF1YWxzID0gZnVuY3Rpb24gKG8pIHsKCSAgICAgICAgaWYgKCEobyBpbnN0YW5jZW9mIEJpdE1hdHJpeCkpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy53aWR0aCA9PT0gb3RoZXIud2lkdGggJiYgdGhpcy5oZWlnaHQgPT09IG90aGVyLmhlaWdodCAmJiB0aGlzLnJvd1NpemUgPT09IG90aGVyLnJvd1NpemUgJiYKCSAgICAgICAgICAgIEFycmF5c18xLmRlZmF1bHQuZXF1YWxzKHRoaXMuYml0cywgb3RoZXIuYml0cyk7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGhhc2ggPSB0aGlzLndpZHRoOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy53aWR0aDsKCSAgICAgICAgaGFzaCA9IDMxICogaGFzaCArIHRoaXMuaGVpZ2h0OwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgdGhpcy5yb3dTaXplOwoJICAgICAgICBoYXNoID0gMzEgKiBoYXNoICsgQXJyYXlzXzEuZGVmYXVsdC5oYXNoQ29kZSh0aGlzLmJpdHMpOwoJICAgICAgICByZXR1cm4gaGFzaDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIHVzaW5nICJYIiBmb3Igc2V0IGFuZCAiICIgZm9yIHVuc2V0IGJpdHMKCSAgICAgKi8KCSAgICAvKkBPdmVycmlkZSovCgkgICAgLy8gcHVibGljIHRvU3RyaW5nKCk6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdG9TdHJpbmcoIjogIlgsICIgICIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgdG9TdHJpbmcoc2V0U3RyaW5nOiBzdHJpbmcgPSAiWCAiLCB1bnNldFN0cmluZzogc3RyaW5nID0gIiAgIik6IHN0cmluZyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5idWlsZFRvU3RyaW5nKHNldFN0cmluZywgdW5zZXRTdHJpbmcsICJcbiIpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBzZXRTdHJpbmcgcmVwcmVzZW50YXRpb24gb2YgYSBzZXQgYml0CgkgICAgICogQHBhcmFtIHVuc2V0U3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGFuIHVuc2V0IGJpdAoJICAgICAqIEBwYXJhbSBsaW5lU2VwYXJhdG9yIG5ld2xpbmUgY2hhcmFjdGVyIGluIHN0cmluZyByZXByZXNlbnRhdGlvbgoJICAgICAqIEByZXR1cm4gc3RyaW5nIHJlcHJlc2VudGF0aW9uIG9mIGVudGlyZSBtYXRyaXggdXRpbGl6aW5nIGdpdmVuIHN0cmluZ3MgYW5kIGxpbmUgc2VwYXJhdG9yCgkgICAgICogQGRlcHJlY2F0ZWQgY2FsbCB7QGxpbmsgI3RvU3RyaW5nKFN0cmluZyxTdHJpbmcpfSBvbmx5LCB3aGljaCB1c2VzIFxuIGxpbmUgc2VwYXJhdG9yIGFsd2F5cwoJICAgICAqLwoJICAgIC8vIEBEZXByZWNhdGVkCgkgICAgQml0TWF0cml4LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIChzZXRTdHJpbmcsIHVuc2V0U3RyaW5nLCBsaW5lU2VwYXJhdG9yKSB7CgkgICAgICAgIGlmIChzZXRTdHJpbmcgPT09IHZvaWQgMCkgeyBzZXRTdHJpbmcgPSAnWCAnOyB9CgkgICAgICAgIGlmICh1bnNldFN0cmluZyA9PT0gdm9pZCAwKSB7IHVuc2V0U3RyaW5nID0gJyAgJzsgfQoJICAgICAgICBpZiAobGluZVNlcGFyYXRvciA9PT0gdm9pZCAwKSB7IGxpbmVTZXBhcmF0b3IgPSAnXG4nOyB9CgkgICAgICAgIHJldHVybiB0aGlzLmJ1aWxkVG9TdHJpbmcoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcik7CgkgICAgfTsKCSAgICBCaXRNYXRyaXgucHJvdG90eXBlLmJ1aWxkVG9TdHJpbmcgPSBmdW5jdGlvbiAoc2V0U3RyaW5nLCB1bnNldFN0cmluZywgbGluZVNlcGFyYXRvcikgewoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgLy8gcmVzdWx0LmFwcGVuZChsaW5lU2VwYXJhdG9yKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDAsIGhlaWdodCA9IHRoaXMuaGVpZ2h0OyB5IDwgaGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IHRoaXMud2lkdGg7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCh0aGlzLmdldCh4LCB5KSA/IHNldFN0cmluZyA6IHVuc2V0U3RyaW5nKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQobGluZVNlcGFyYXRvcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdC50b1N0cmluZygpOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEJpdE1hdHJpeC5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgQml0TWF0cml4KHRoaXMud2lkdGgsIHRoaXMuaGVpZ2h0LCB0aGlzLnJvd1NpemUsIHRoaXMuYml0cy5zbGljZSgpKTsKCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXg7Cgl9KCkpOwoJQml0TWF0cml4JDEuZGVmYXVsdCA9IEJpdE1hdHJpeDsKCgl2YXIgTm90Rm91bmRFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkZCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShOb3RGb3VuZEV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBOb3RGb3VuZEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkZChOb3RGb3VuZEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBOb3RGb3VuZEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5nZXROb3RGb3VuZEluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IE5vdEZvdW5kRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBOb3RGb3VuZEV4Y2VwdGlvbi5raW5kID0gJ05vdEZvdW5kRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gTm90Rm91bmRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCkpOwoJTm90Rm91bmRFeGNlcHRpb24kMS5kZWZhdWx0ID0gTm90Rm91bmRFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYyA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24geyovCgl2YXIgQmluYXJpemVyXzEgPSBCaW5hcml6ZXIkMTsKCXZhciBCaXRBcnJheV8xID0gQml0QXJyYXkkMTsKCXZhciBCaXRNYXRyaXhfMSQ1ID0gQml0TWF0cml4JDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQ2ID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qKgoJICogVGhpcyBCaW5hcml6ZXIgaW1wbGVtZW50YXRpb24gdXNlcyB0aGUgb2xkIFpYaW5nIGdsb2JhbCBoaXN0b2dyYW0gYXBwcm9hY2guIEl0IGlzIHN1aXRhYmxlCgkgKiBmb3IgbG93LWVuZCBtb2JpbGUgZGV2aWNlcyB3aGljaCBkb24ndCBoYXZlIGVub3VnaCBDUFUgb3IgbWVtb3J5IHRvIHVzZSBhIGxvY2FsIHRocmVzaG9sZGluZwoJICogYWxnb3JpdGhtLiBIb3dldmVyLCBiZWNhdXNlIGl0IHBpY2tzIGEgZ2xvYmFsIGJsYWNrIHBvaW50LCBpdCBjYW5ub3QgaGFuZGxlIGRpZmZpY3VsdCBzaGFkb3dzCgkgKiBhbmQgZ3JhZGllbnRzLgoJICoKCSAqIEZhc3RlciBtb2JpbGUgZGV2aWNlcyBhbmQgYWxsIGRlc2t0b3AgYXBwbGljYXRpb25zIHNob3VsZCBwcm9iYWJseSB1c2UgSHlicmlkQmluYXJpemVyIGluc3RlYWQuCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGMoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5sdW1pbmFuY2VzID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkVNUFRZOwoJICAgICAgICBfdGhpcy5idWNrZXRzID0gbmV3IEludDMyQXJyYXkoR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CVUNLRVRTKTsKCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvLyBBcHBsaWVzIHNpbXBsZSBzaGFycGVuaW5nIHRvIHRoZSByb3cgZGF0YSB0byBpbXByb3ZlIHBlcmZvcm1hbmNlIG9mIHRoZSAxRCBSZWFkZXJzLgoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmdldEJsYWNrUm93ID0gZnVuY3Rpb24gKHkgLyppbnQqLywgcm93KSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gdW5kZWZpbmVkIHx8IHJvdyA9PT0gbnVsbCB8fCByb3cuZ2V0U2l6ZSgpIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBCaXRBcnJheV8xLmRlZmF1bHQod2lkdGgpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgcm93LmNsZWFyKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5pbml0QXJyYXlzKHdpZHRoKTsKCSAgICAgICAgdmFyIGxvY2FsTHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRSb3coeSwgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgdmFyIGxvY2FsQnVja2V0cyA9IHRoaXMuYnVja2V0czsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICBsb2NhbEJ1Y2tldHNbKGxvY2FsTHVtaW5hbmNlc1t4XSAmIDB4ZmYpID4+IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfU0hJRlRdKys7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGJsYWNrUG9pbnQgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuZXN0aW1hdGVCbGFja1BvaW50KGxvY2FsQnVja2V0cyk7CgkgICAgICAgIGlmICh3aWR0aCA8IDMpIHsKCSAgICAgICAgICAgIC8vIFNwZWNpYWwgY2FzZSBmb3IgdmVyeSBzbWFsbCBpbWFnZXMKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgICAgIGlmICgobG9jYWxMdW1pbmFuY2VzW3hdICYgMHhmZikgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIHJvdy5zZXQoeCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGxlZnQgPSBsb2NhbEx1bWluYW5jZXNbMF0gJiAweGZmOwoJICAgICAgICAgICAgdmFyIGNlbnRlciA9IGxvY2FsTHVtaW5hbmNlc1sxXSAmIDB4ZmY7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMTsgeCA8IHdpZHRoIC0gMTsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHJpZ2h0ID0gbG9jYWxMdW1pbmFuY2VzW3ggKyAxXSAmIDB4ZmY7CgkgICAgICAgICAgICAgICAgLy8gQSBzaW1wbGUgLTEgNCAtMSBib3ggZmlsdGVyIHdpdGggYSB3ZWlnaHQgb2YgMi4KCSAgICAgICAgICAgICAgICBpZiAoKChjZW50ZXIgKiA0KSAtIGxlZnQgLSByaWdodCkgLyAyIDwgYmxhY2tQb2ludCkgewoJICAgICAgICAgICAgICAgICAgICByb3cuc2V0KHgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBsZWZ0ID0gY2VudGVyOwoJICAgICAgICAgICAgICAgIGNlbnRlciA9IHJpZ2h0OwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByb3c7CgkgICAgfTsKCSAgICAvLyBEb2VzIG5vdCBzaGFycGVuIHRoZSBkYXRhLCBhcyB0aGlzIGNhbGwgaXMgaW50ZW5kZWQgdG8gb25seSBiZSB1c2VkIGJ5IDJEIFJlYWRlcnMuCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIG1hdHJpeCA9IG5ldyBCaXRNYXRyaXhfMSQ1LmRlZmF1bHQod2lkdGgsIGhlaWdodCk7CgkgICAgICAgIC8vIFF1aWNrbHkgY2FsY3VsYXRlcyB0aGUgaGlzdG9ncmFtIGJ5IHNhbXBsaW5nIGZvdXIgcm93cyBmcm9tIHRoZSBpbWFnZS4gVGhpcyBwcm92ZWQgdG8gYmUKCSAgICAgICAgLy8gbW9yZSByb2J1c3Qgb24gdGhlIGJsYWNrYm94IHRlc3RzIHRoYW4gc2FtcGxpbmcgYSBkaWFnb25hbCBhcyB3ZSB1c2VkIHRvIGRvLgoJICAgICAgICB0aGlzLmluaXRBcnJheXMod2lkdGgpOwoJICAgICAgICB2YXIgbG9jYWxCdWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB5ID0gMTsgeSA8IDU7IHkrKykgewoJICAgICAgICAgICAgdmFyIHJvdyA9IE1hdGguZmxvb3IoKGhlaWdodCAqIHkpIC8gNSk7CgkgICAgICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzXzEgPSBzb3VyY2UuZ2V0Um93KHJvdywgdGhpcy5sdW1pbmFuY2VzKTsKCSAgICAgICAgICAgIHZhciByaWdodCA9IE1hdGguZmxvb3IoKHdpZHRoICogNCkgLyA1KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSBNYXRoLmZsb29yKHdpZHRoIC8gNSk7IHggPCByaWdodDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzXzFbeF0gJiAweGZmOwoJICAgICAgICAgICAgICAgIGxvY2FsQnVja2V0c1twaXhlbCA+PiBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUXSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBibGFja1BvaW50ID0gR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludChsb2NhbEJ1Y2tldHMpOwoJICAgICAgICAvLyBXZSBkZWxheSByZWFkaW5nIHRoZSBlbnRpcmUgaW1hZ2UgbHVtaW5hbmNlIHVudGlsIHRoZSBibGFjayBwb2ludCBlc3RpbWF0aW9uIHN1Y2NlZWRzLgoJICAgICAgICAvLyBBbHRob3VnaCB3ZSBlbmQgdXAgcmVhZGluZyBmb3VyIHJvd3MgdHdpY2UsIGl0IGlzIGNvbnNpc3RlbnQgd2l0aCBvdXIgbW90dG8gb2YKCSAgICAgICAgLy8gImZhaWwgcXVpY2tseSIgd2hpY2ggaXMgbmVjZXNzYXJ5IGZvciBjb250aW51b3VzIHNjYW5uaW5nLgoJICAgICAgICB2YXIgbG9jYWxMdW1pbmFuY2VzID0gc291cmNlLmdldE1hdHJpeCgpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCB3aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBpeGVsID0gbG9jYWxMdW1pbmFuY2VzW29mZnNldCArIHhdICYgMHhmZjsKCSAgICAgICAgICAgICAgICBpZiAocGl4ZWwgPCBibGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgIG1hdHJpeC5zZXQoeCwgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBtYXRyaXg7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLnByb3RvdHlwZS5jcmVhdGVCaW5hcml6ZXIgPSBmdW5jdGlvbiAoc291cmNlKSB7CgkgICAgICAgIHJldHVybiBuZXcgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyKHNvdXJjZSk7CgkgICAgfTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIucHJvdG90eXBlLmluaXRBcnJheXMgPSBmdW5jdGlvbiAobHVtaW5hbmNlU2l6ZSAvKmludCovKSB7CgkgICAgICAgIGlmICh0aGlzLmx1bWluYW5jZXMubGVuZ3RoIDwgbHVtaW5hbmNlU2l6ZSkgewoJICAgICAgICAgICAgdGhpcy5sdW1pbmFuY2VzID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KGx1bWluYW5jZVNpemUpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBidWNrZXRzID0gdGhpcy5idWNrZXRzOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQlVDS0VUUzsgeCsrKSB7CgkgICAgICAgICAgICBidWNrZXRzW3hdID0gMDsKCSAgICAgICAgfQoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLmVzdGltYXRlQmxhY2tQb2ludCA9IGZ1bmN0aW9uIChidWNrZXRzKSB7CgkgICAgICAgIC8vIEZpbmQgdGhlIHRhbGxlc3QgcGVhayBpbiB0aGUgaGlzdG9ncmFtLgoJICAgICAgICB2YXIgbnVtQnVja2V0cyA9IGJ1Y2tldHMubGVuZ3RoOwoJICAgICAgICB2YXIgbWF4QnVja2V0Q291bnQgPSAwOwoJICAgICAgICB2YXIgZmlyc3RQZWFrID0gMDsKCSAgICAgICAgdmFyIGZpcnN0UGVha1NpemUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgaWYgKGJ1Y2tldHNbeF0gPiBmaXJzdFBlYWtTaXplKSB7CgkgICAgICAgICAgICAgICAgZmlyc3RQZWFrID0geDsKCSAgICAgICAgICAgICAgICBmaXJzdFBlYWtTaXplID0gYnVja2V0c1t4XTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChidWNrZXRzW3hdID4gbWF4QnVja2V0Q291bnQpIHsKCSAgICAgICAgICAgICAgICBtYXhCdWNrZXRDb3VudCA9IGJ1Y2tldHNbeF07CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCB0aGUgc2Vjb25kLXRhbGxlc3QgcGVhayB3aGljaCBpcyBzb21ld2hhdCBmYXIgZnJvbSB0aGUgdGFsbGVzdCBwZWFrLgoJICAgICAgICB2YXIgc2Vjb25kUGVhayA9IDA7CgkgICAgICAgIHZhciBzZWNvbmRQZWFrU2NvcmUgPSAwOwoJICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG51bUJ1Y2tldHM7IHgrKykgewoJICAgICAgICAgICAgdmFyIGRpc3RhbmNlVG9CaWdnZXN0ID0geCAtIGZpcnN0UGVhazsKCSAgICAgICAgICAgIC8vIEVuY291cmFnZSBtb3JlIGRpc3RhbnQgc2Vjb25kIHBlYWtzIGJ5IG11bHRpcGx5aW5nIGJ5IHNxdWFyZSBvZiBkaXN0YW5jZS4KCSAgICAgICAgICAgIHZhciBzY29yZSA9IGJ1Y2tldHNbeF0gKiBkaXN0YW5jZVRvQmlnZ2VzdCAqIGRpc3RhbmNlVG9CaWdnZXN0OwoJICAgICAgICAgICAgaWYgKHNjb3JlID4gc2Vjb25kUGVha1Njb3JlKSB7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVhayA9IHg7CgkgICAgICAgICAgICAgICAgc2Vjb25kUGVha1Njb3JlID0gc2NvcmU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTWFrZSBzdXJlIGZpcnN0UGVhayBjb3JyZXNwb25kcyB0byB0aGUgYmxhY2sgcGVhay4KCSAgICAgICAgaWYgKGZpcnN0UGVhayA+IHNlY29uZFBlYWspIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZmlyc3RQZWFrOwoJICAgICAgICAgICAgZmlyc3RQZWFrID0gc2Vjb25kUGVhazsKCSAgICAgICAgICAgIHNlY29uZFBlYWsgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHRoZXJlIGlzIHRvbyBsaXR0bGUgY29udHJhc3QgaW4gdGhlIGltYWdlIHRvIHBpY2sgYSBtZWFuaW5nZnVsIGJsYWNrIHBvaW50LCB0aHJvdyByYXRoZXIKCSAgICAgICAgLy8gdGhhbiB3YXN0ZSB0aW1lIHRyeWluZyB0byBkZWNvZGUgdGhlIGltYWdlLCBhbmQgcmlzayBmYWxzZSBwb3NpdGl2ZXMuCgkgICAgICAgIGlmIChzZWNvbmRQZWFrIC0gZmlyc3RQZWFrIDw9IG51bUJ1Y2tldHMgLyAxNikgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRmluZCBhIHZhbGxleSBiZXR3ZWVuIHRoZW0gdGhhdCBpcyBsb3cgYW5kIGNsb3NlciB0byB0aGUgd2hpdGUgcGVhay4KCSAgICAgICAgdmFyIGJlc3RWYWxsZXkgPSBzZWNvbmRQZWFrIC0gMTsKCSAgICAgICAgdmFyIGJlc3RWYWxsZXlTY29yZSA9IC0xOwoJICAgICAgICBmb3IgKHZhciB4ID0gc2Vjb25kUGVhayAtIDE7IHggPiBmaXJzdFBlYWs7IHgtLSkgewoJICAgICAgICAgICAgdmFyIGZyb21GaXJzdCA9IHggLSBmaXJzdFBlYWs7CgkgICAgICAgICAgICB2YXIgc2NvcmUgPSBmcm9tRmlyc3QgKiBmcm9tRmlyc3QgKiAoc2Vjb25kUGVhayAtIHgpICogKG1heEJ1Y2tldENvdW50IC0gYnVja2V0c1t4XSk7CgkgICAgICAgICAgICBpZiAoc2NvcmUgPiBiZXN0VmFsbGV5U2NvcmUpIHsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5ID0geDsKCSAgICAgICAgICAgICAgICBiZXN0VmFsbGV5U2NvcmUgPSBzY29yZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gYmVzdFZhbGxleSA8PCBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUOwoJICAgIH07CgkgICAgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLkxVTUlOQU5DRV9CSVRTID0gNTsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX1NISUZUID0gOCAtIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuTFVNSU5BTkNFX0JVQ0tFVFMgPSAxIDw8IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplci5MVU1JTkFOQ0VfQklUUzsKCSAgICBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIuRU1QVFkgPSBVaW50OENsYW1wZWRBcnJheS5mcm9tKFswXSk7CgkgICAgcmV0dXJuIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCX0oQmluYXJpemVyXzEuZGVmYXVsdCkpOwoJR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyJDEuZGVmYXVsdCA9IEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplcjsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyRiID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEh5YnJpZEJpbmFyaXplciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyXzEgPSBHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXIkMTsKCXZhciBCaXRNYXRyaXhfMSQ0ID0gQml0TWF0cml4JDE7CgkvKioKCSAqIFRoaXMgY2xhc3MgaW1wbGVtZW50cyBhIGxvY2FsIHRocmVzaG9sZGluZyBhbGdvcml0aG0sIHdoaWNoIHdoaWxlIHNsb3dlciB0aGFuIHRoZQoJICogR2xvYmFsSGlzdG9ncmFtQmluYXJpemVyLCBpcyBmYWlybHkgZWZmaWNpZW50IGZvciB3aGF0IGl0IGRvZXMuIEl0IGlzIGRlc2lnbmVkIGZvcgoJICogaGlnaCBmcmVxdWVuY3kgaW1hZ2VzIG9mIGJhcmNvZGVzIHdpdGggYmxhY2sgZGF0YSBvbiB3aGl0ZSBiYWNrZ3JvdW5kcy4gRm9yIHRoaXMgYXBwbGljYXRpb24sCgkgKiBpdCBkb2VzIGEgbXVjaCBiZXR0ZXIgam9iIHRoYW4gYSBnbG9iYWwgYmxhY2twb2ludCB3aXRoIHNldmVyZSBzaGFkb3dzIGFuZCBncmFkaWVudHMuCgkgKiBIb3dldmVyIGl0IHRlbmRzIHRvIHByb2R1Y2UgYXJ0aWZhY3RzIG9uIGxvd2VyIGZyZXF1ZW5jeSBpbWFnZXMgYW5kIGlzIHRoZXJlZm9yZSBub3QKCSAqIGEgZ29vZCBnZW5lcmFsIHB1cnBvc2UgYmluYXJpemVyIGZvciB1c2VzIG91dHNpZGUgWlhpbmcuCgkgKgoJICogVGhpcyBjbGFzcyBleHRlbmRzIEdsb2JhbEhpc3RvZ3JhbUJpbmFyaXplciwgdXNpbmcgdGhlIG9sZGVyIGhpc3RvZ3JhbSBhcHByb2FjaCBmb3IgMUQgcmVhZGVycywKCSAqIGFuZCB0aGUgbmV3ZXIgbG9jYWwgYXBwcm9hY2ggZm9yIDJEIHJlYWRlcnMuIDFEIGRlY29kaW5nIHVzaW5nIGEgcGVyLXJvdyBoaXN0b2dyYW0gaXMgYWxyZWFkeQoJICogaW5oZXJlbnRseSBsb2NhbCwgYW5kIG9ubHkgZmFpbHMgZm9yIGhvcml6b250YWwgZ3JhZGllbnRzLiBXZSBjYW4gcmV2aXNpdCB0aGF0IHByb2JsZW0gbGF0ZXIsCgkgKiBidXQgZm9yIG5vdyBpdCB3YXMgbm90IGEgd2luIHRvIHVzZSBsb2NhbCBibG9ja3MgZm9yIDFELgoJICoKCSAqIFRoaXMgQmluYXJpemVyIGlzIHRoZSBkZWZhdWx0IGZvciB0aGUgdW5pdCB0ZXN0cyBhbmQgdGhlIHJlY29tbWVuZGVkIGNsYXNzIGZvciBsaWJyYXJ5IHVzZXJzLgoJICoKCSAqIEBhdXRob3IgZHN3aXRraW5AZ29vZ2xlLmNvbSAoRGFuaWVsIFN3aXRraW4pCgkgKi8KCXZhciBIeWJyaWRCaW5hcml6ZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGIoSHlicmlkQmluYXJpemVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIEh5YnJpZEJpbmFyaXplcihzb3VyY2UpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgc291cmNlKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5tYXRyaXggPSBudWxsOwoJICAgICAgICByZXR1cm4gX3RoaXM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIENhbGN1bGF0ZXMgdGhlIGZpbmFsIEJpdE1hdHJpeCBvbmNlIGZvciBhbGwgcmVxdWVzdHMuIFRoaXMgY291bGQgYmUgY2FsbGVkIG9uY2UgZnJvbSB0aGUKCSAgICAgKiBjb25zdHJ1Y3RvciBpbnN0ZWFkLCBidXQgdGhlcmUgYXJlIHNvbWUgYWR2YW50YWdlcyB0byBkb2luZyBpdCBsYXppbHksIHN1Y2ggYXMgbWFraW5nCgkgICAgICogcHJvZmlsaW5nIGVhc2llciwgYW5kIG5vdCBkb2luZyBoZWF2eSBsaWZ0aW5nIHdoZW4gY2FsbGVycyBkb24ndCBleHBlY3QgaXQuCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuZ2V0QmxhY2tNYXRyaXggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLm1hdHJpeCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIHZhciBzb3VyY2UgPSB0aGlzLmdldEx1bWluYW5jZVNvdXJjZSgpOwoJICAgICAgICB2YXIgd2lkdGggPSBzb3VyY2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IHNvdXJjZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKHdpZHRoID49IEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiAmJiBoZWlnaHQgPj0gSHlicmlkQmluYXJpemVyLk1JTklNVU1fRElNRU5TSU9OKSB7CgkgICAgICAgICAgICB2YXIgbHVtaW5hbmNlcyA9IHNvdXJjZS5nZXRNYXRyaXgoKTsKCSAgICAgICAgICAgIHZhciBzdWJXaWR0aCA9IHdpZHRoID4+IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKCh3aWR0aCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViV2lkdGgrKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciBzdWJIZWlnaHQgPSBoZWlnaHQgPj4gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICBpZiAoKGhlaWdodCAmIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0spICE9PSAwKSB7CgkgICAgICAgICAgICAgICAgc3ViSGVpZ2h0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgYmxhY2tQb2ludHMgPSBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMobHVtaW5hbmNlcywgc3ViV2lkdGgsIHN1YkhlaWdodCwgd2lkdGgsIGhlaWdodCk7CgkgICAgICAgICAgICB2YXIgbmV3TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDQuZGVmYXVsdCh3aWR0aCwgaGVpZ2h0KTsKCSAgICAgICAgICAgIEh5YnJpZEJpbmFyaXplci5jYWxjdWxhdGVUaHJlc2hvbGRGb3JCbG9jayhsdW1pbmFuY2VzLCBzdWJXaWR0aCwgc3ViSGVpZ2h0LCB3aWR0aCwgaGVpZ2h0LCBibGFja1BvaW50cywgbmV3TWF0cml4KTsKCSAgICAgICAgICAgIHRoaXMubWF0cml4ID0gbmV3TWF0cml4OwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgLy8gSWYgdGhlIGltYWdlIGlzIHRvbyBzbWFsbCwgZmFsbCBiYWNrIHRvIHRoZSBnbG9iYWwgaGlzdG9ncmFtIGFwcHJvYWNoLgoJICAgICAgICAgICAgdGhpcy5tYXRyaXggPSBfc3VwZXIucHJvdG90eXBlLmdldEJsYWNrTWF0cml4LmNhbGwodGhpcyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMubWF0cml4OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEh5YnJpZEJpbmFyaXplci5wcm90b3R5cGUuY3JlYXRlQmluYXJpemVyID0gZnVuY3Rpb24gKHNvdXJjZSkgewoJICAgICAgICByZXR1cm4gbmV3IEh5YnJpZEJpbmFyaXplcihzb3VyY2UpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogRm9yIGVhY2ggYmxvY2sgaW4gdGhlIGltYWdlLCBjYWxjdWxhdGUgdGhlIGF2ZXJhZ2UgYmxhY2sgcG9pbnQgdXNpbmcgYSA1eDUgZ3JpZAoJICAgICAqIG9mIHRoZSBibG9ja3MgYXJvdW5kIGl0LiBBbHNvIGhhbmRsZXMgdGhlIGNvcm5lciBjYXNlcyAoZnJhY3Rpb25hbCBibG9ja3MgYXJlIGNvbXB1dGVkIGJhc2VkCgkgICAgICogb24gdGhlIGxhc3QgcGl4ZWxzIGluIHRoZSByb3cvY29sdW1uIHdoaWNoIGFyZSBhbHNvIHVzZWQgaW4gdGhlIHByZXZpb3VzIGJsb2NrKS4KCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlVGhyZXNob2xkRm9yQmxvY2sgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBibGFja1BvaW50cywgbWF0cml4KSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBzdWJIZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgdG9wXzEgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHksIDIsIHN1YkhlaWdodCAtIDMpOwoJICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBzdWJXaWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHhvZmZzZXQgPSB4IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgICAgIGlmICh4b2Zmc2V0ID4gbWF4WE9mZnNldCkgewoJICAgICAgICAgICAgICAgICAgICB4b2Zmc2V0ID0gbWF4WE9mZnNldDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgdmFyIGxlZnQgPSBIeWJyaWRCaW5hcml6ZXIuY2FwKHgsIDIsIHN1YldpZHRoIC0gMyk7CgkgICAgICAgICAgICAgICAgdmFyIHN1bSA9IDA7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeiA9IC0yOyB6IDw9IDI7IHorKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgYmxhY2tSb3cgPSBibGFja1BvaW50c1t0b3BfMSArIHpdOwoJICAgICAgICAgICAgICAgICAgICBzdW0gKz0gYmxhY2tSb3dbbGVmdCAtIDJdICsgYmxhY2tSb3dbbGVmdCAtIDFdICsgYmxhY2tSb3dbbGVmdF0gKyBibGFja1Jvd1tsZWZ0ICsgMV0gKyBibGFja1Jvd1tsZWZ0ICsgMl07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlID0gc3VtIC8gMjU7CgkgICAgICAgICAgICAgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrKGx1bWluYW5jZXMsIHhvZmZzZXQsIHlvZmZzZXQsIGF2ZXJhZ2UsIHdpZHRoLCBtYXRyaXgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FwID0gZnVuY3Rpb24gKHZhbHVlIC8qaW50Ki8sIG1pbiAvKmludCovLCBtYXggLyppbnQqLykgewoJICAgICAgICByZXR1cm4gdmFsdWUgPCBtaW4gPyBtaW4gOiB2YWx1ZSA+IG1heCA/IG1heCA6IHZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbGllcyBhIHNpbmdsZSB0aHJlc2hvbGQgdG8gYSBibG9jayBvZiBwaXhlbHMuCgkgICAgICovCgkgICAgSHlicmlkQmluYXJpemVyLnRocmVzaG9sZEJsb2NrID0gZnVuY3Rpb24gKGx1bWluYW5jZXMsIHhvZmZzZXQgLyppbnQqLywgeW9mZnNldCAvKmludCovLCB0aHJlc2hvbGQgLyppbnQqLywgc3RyaWRlIC8qaW50Ki8sIG1hdHJpeCkgewoJICAgICAgICBmb3IgKHZhciB5ID0gMCwgb2Zmc2V0ID0geW9mZnNldCAqIHN0cmlkZSArIHhvZmZzZXQ7IHkgPCBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsgeSsrLCBvZmZzZXQgKz0gc3RyaWRlKSB7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB4KyspIHsKCSAgICAgICAgICAgICAgICAvLyBDb21wYXJpc29uIG5lZWRzIHRvIGJlIDw9IHNvIHRoYXQgYmxhY2sgPT0gMCBwaXhlbHMgYXJlIGJsYWNrIGV2ZW4gaWYgdGhlIHRocmVzaG9sZCBpcyAwLgoJICAgICAgICAgICAgICAgIGlmICgobHVtaW5hbmNlc1tvZmZzZXQgKyB4XSAmIDB4RkYpIDw9IHRocmVzaG9sZCkgewoJICAgICAgICAgICAgICAgICAgICBtYXRyaXguc2V0KHhvZmZzZXQgKyB4LCB5b2Zmc2V0ICsgeSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBDYWxjdWxhdGVzIGEgc2luZ2xlIGJsYWNrIHBvaW50IGZvciBlYWNoIGJsb2NrIG9mIHBpeGVscyBhbmQgc2F2ZXMgaXQgYXdheS4KCSAgICAgKiBTZWUgdGhlIGZvbGxvd2luZyB0aHJlYWQgZm9yIGEgZGlzY3Vzc2lvbiBvZiB0aGlzIGFsZ29yaXRobToKCSAgICAgKiAgaHR0cDovL2dyb3Vwcy5nb29nbGUuY29tL2dyb3VwL3p4aW5nL2Jyb3dzZV90aHJlYWQvdGhyZWFkL2QwNmVmYTJjMzVhN2RkYzAKCSAgICAgKi8KCSAgICBIeWJyaWRCaW5hcml6ZXIuY2FsY3VsYXRlQmxhY2tQb2ludHMgPSBmdW5jdGlvbiAobHVtaW5hbmNlcywgc3ViV2lkdGggLyppbnQqLywgc3ViSGVpZ2h0IC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHZhciBtYXhZT2Zmc2V0ID0gaGVpZ2h0IC0gSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7CgkgICAgICAgIHZhciBtYXhYT2Zmc2V0ID0gd2lkdGggLSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRTsKCSAgICAgICAgLy8gdHNsaW50OmRpc2FibGUtbmV4dC1saW5lOndoaXRlc3BhY2UKCSAgICAgICAgdmFyIGJsYWNrUG9pbnRzID0gbmV3IEFycmF5KHN1YkhlaWdodCk7IC8vIHN1YldpZHRoCgkgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgc3ViSGVpZ2h0OyB5KyspIHsKCSAgICAgICAgICAgIGJsYWNrUG9pbnRzW3ldID0gbmV3IEludDMyQXJyYXkoc3ViV2lkdGgpOwoJICAgICAgICAgICAgdmFyIHlvZmZzZXQgPSB5IDw8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSOwoJICAgICAgICAgICAgaWYgKHlvZmZzZXQgPiBtYXhZT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgeW9mZnNldCA9IG1heFlPZmZzZXQ7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IHN1YldpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgeG9mZnNldCA9IHggPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7CgkgICAgICAgICAgICAgICAgaWYgKHhvZmZzZXQgPiBtYXhYT2Zmc2V0KSB7CgkgICAgICAgICAgICAgICAgICAgIHhvZmZzZXQgPSBtYXhYT2Zmc2V0OwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB2YXIgc3VtID0gMDsKCSAgICAgICAgICAgICAgICB2YXIgbWluID0gMHhGRjsKCSAgICAgICAgICAgICAgICB2YXIgbWF4ID0gMDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciB5eSA9IDAsIG9mZnNldCA9IHlvZmZzZXQgKiB3aWR0aCArIHhvZmZzZXQ7IHl5IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHl5KyssIG9mZnNldCArPSB3aWR0aCkgewoJICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBwaXhlbCA9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgIHN1bSArPSBwaXhlbDsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIHN0aWxsIGxvb2tpbmcgZm9yIGdvb2QgY29udHJhc3QKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwaXhlbCA8IG1pbikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1pbiA9IHBpeGVsOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHBpeGVsID4gbWF4KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4ID0gcGl4ZWw7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgLy8gc2hvcnQtY2lyY3VpdCBtaW4vbWF4IHRlc3RzIG9uY2UgZHluYW1pYyByYW5nZSBpcyBtZXQKCSAgICAgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA+IEh5YnJpZEJpbmFyaXplci5NSU5fRFlOQU1JQ19SQU5HRSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gZmluaXNoIHRoZSByZXN0IG9mIHRoZSByb3dzIHF1aWNrbHkKCSAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoeXkrKywgb2Zmc2V0ICs9IHdpZHRoOyB5eSA8IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFOyB5eSsrLCBvZmZzZXQgKz0gd2lkdGgpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb3IgKHZhciB4eCA9IDA7IHh4IDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkU7IHh4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VtICs9IGx1bWluYW5jZXNbb2Zmc2V0ICsgeHhdICYgMHhGRjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgLy8gVGhlIGRlZmF1bHQgZXN0aW1hdGUgaXMgdGhlIGF2ZXJhZ2Ugb2YgdGhlIHZhbHVlcyBpbiB0aGUgYmxvY2suCgkgICAgICAgICAgICAgICAgdmFyIGF2ZXJhZ2UgPSBzdW0gPj4gKEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSICogMik7CgkgICAgICAgICAgICAgICAgaWYgKG1heCAtIG1pbiA8PSBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gSWYgdmFyaWF0aW9uIHdpdGhpbiB0aGUgYmxvY2sgaXMgbG93LCBhc3N1bWUgdGhpcyBpcyBhIGJsb2NrIHdpdGggb25seSBsaWdodCBvciBvbmx5CgkgICAgICAgICAgICAgICAgICAgIC8vIGRhcmsgcGl4ZWxzLiBJbiB0aGF0IGNhc2Ugd2UgZG8gbm90IHdhbnQgdG8gdXNlIHRoZSBhdmVyYWdlLCBhcyBpdCB3b3VsZCBkaXZpZGUgdGhpcwoJICAgICAgICAgICAgICAgICAgICAvLyBsb3cgY29udHJhc3QgYXJlYSBpbnRvIGJsYWNrIGFuZCB3aGl0ZSBwaXhlbHMsIGVzc2VudGlhbGx5IGNyZWF0aW5nIGRhdGEgb3V0IG9mIG5vaXNlLgoJICAgICAgICAgICAgICAgICAgICAvLwoJICAgICAgICAgICAgICAgICAgICAvLyBUaGUgZGVmYXVsdCBhc3N1bXB0aW9uIGlzIHRoYXQgdGhlIGJsb2NrIGlzIGxpZ2h0L2JhY2tncm91bmQuIFNpbmNlIG5vIGVzdGltYXRlIGZvcgoJICAgICAgICAgICAgICAgICAgICAvLyB0aGUgbGV2ZWwgb2YgZGFyayBwaXhlbHMgZXhpc3RzIGxvY2FsbHksIHVzZSBoYWxmIHRoZSBtaW4gZm9yIHRoZSBibG9jay4KCSAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IG1pbiAvIDI7CgkgICAgICAgICAgICAgICAgICAgIGlmICh5ID4gMCAmJiB4ID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ29ycmVjdCB0aGUgIndoaXRlIGJhY2tncm91bmQiIGFzc3VtcHRpb24gZm9yIGJsb2NrcyB0aGF0IGhhdmUgbmVpZ2hib3JzIGJ5IGNvbXBhcmluZwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIHBpeGVscyBpbiB0aGlzIGJsb2NrIHRvIHRoZSBwcmV2aW91c2x5IGNhbGN1bGF0ZWQgYmxhY2sgcG9pbnRzLiBUaGlzIGlzIGJhc2VkIG9uCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyB0aGUgZmFjdCB0aGF0IGRhcmsgYmFyY29kZSBzeW1ib2xvZ3kgaXMgYWx3YXlzIHN1cnJvdW5kZWQgYnkgc29tZSBhbW91bnQgb2YgbGlnaHQKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJhY2tncm91bmQgZm9yIHdoaWNoIHJlYXNvbmFibGUgYmxhY2sgcG9pbnQgZXN0aW1hdGVzIHdlcmUgbWFkZS4gVGhlIGJwIGVzdGltYXRlZCBhdAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gdGhlIGJvdW5kYXJpZXMgaXMgdXNlZCBmb3IgdGhlIGludGVyaW9yLgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhlIChtaW4gPCBicCkgaXMgYXJiaXRyYXJ5IGJ1dCB3b3JrcyBiZXR0ZXIgdGhhbiBvdGhlciBoZXVyaXN0aWNzIHRoYXQgd2VyZSB0cmllZC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHZhciBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50ID0gKGJsYWNrUG9pbnRzW3kgLSAxXVt4XSArICgyICogYmxhY2tQb2ludHNbeV1beCAtIDFdKSArIGJsYWNrUG9pbnRzW3kgLSAxXVt4IC0gMV0pIC8gNDsKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChtaW4gPCBhdmVyYWdlTmVpZ2hib3JCbGFja1BvaW50KSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXZlcmFnZSA9IGF2ZXJhZ2VOZWlnaGJvckJsYWNrUG9pbnQ7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgYmxhY2tQb2ludHNbeV1beF0gPSBhdmVyYWdlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBibGFja1BvaW50czsKCSAgICB9OwoJICAgIC8vIFRoaXMgY2xhc3MgdXNlcyA1eDUgYmxvY2tzIHRvIGNvbXB1dGUgbG9jYWwgbHVtaW5hbmNlLCB3aGVyZSBlYWNoIGJsb2NrIGlzIDh4OCBwaXhlbHMuCgkgICAgLy8gU28gdGhpcyBpcyB0aGUgc21hbGxlc3QgZGltZW5zaW9uIGluIGVhY2ggYXhpcyB3ZSBjYW4gYWNjZXB0LgoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX1BPV0VSID0gMzsKCSAgICBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSA9IDEgPDwgSHlicmlkQmluYXJpemVyLkJMT0NLX1NJWkVfUE9XRVI7IC8vIC4uLjAxMDAuLi4wMAoJICAgIEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFX01BU0sgPSBIeWJyaWRCaW5hcml6ZXIuQkxPQ0tfU0laRSAtIDE7IC8vIC4uLjAwMTEuLi4xMQoJICAgIEh5YnJpZEJpbmFyaXplci5NSU5JTVVNX0RJTUVOU0lPTiA9IEh5YnJpZEJpbmFyaXplci5CTE9DS19TSVpFICogNTsKCSAgICBIeWJyaWRCaW5hcml6ZXIuTUlOX0RZTkFNSUNfUkFOR0UgPSAyNDsKCSAgICByZXR1cm4gSHlicmlkQmluYXJpemVyOwoJfShHbG9iYWxIaXN0b2dyYW1CaW5hcml6ZXJfMS5kZWZhdWx0KSk7Cgl2YXIgX2RlZmF1bHQkMiA9IEh5YnJpZEJpbmFyaXplciQxLmRlZmF1bHQgPSBIeWJyaWRCaW5hcml6ZXI7CgoJdmFyIFJHQkx1bWluYW5jZVNvdXJjZSQxID0ge307CgoJdmFyIEludmVydGVkTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgl2YXIgTHVtaW5hbmNlU291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgU3RyaW5nQnVpbGRlcl8xJDEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMSA9IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uJDE7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nIHsqLwoJLyoqCgkgKiBUaGUgcHVycG9zZSBvZiB0aGlzIGNsYXNzIGhpZXJhcmNoeSBpcyB0byBhYnN0cmFjdCBkaWZmZXJlbnQgYml0bWFwIGltcGxlbWVudGF0aW9ucyBhY3Jvc3MKCSAqIHBsYXRmb3JtcyBpbnRvIGEgc3RhbmRhcmQgaW50ZXJmYWNlIGZvciByZXF1ZXN0aW5nIGdyZXlzY2FsZSBsdW1pbmFuY2UgdmFsdWVzLiBUaGUgaW50ZXJmYWNlCgkgKiBvbmx5IHByb3ZpZGVzIGltbXV0YWJsZSBtZXRob2RzOyB0aGVyZWZvcmUgY3JvcCBhbmQgcm90YXRpb24gY3JlYXRlIGNvcGllcy4gVGhpcyBpcyB0byBlbnN1cmUKCSAqIHRoYXQgb25lIFJlYWRlciBkb2VzIG5vdCBtb2RpZnkgdGhlIG9yaWdpbmFsIGx1bWluYW5jZSBzb3VyY2UgYW5kIGxlYXZlIGl0IGluIGFuIHVua25vd24gc3RhdGUKCSAqIGZvciBvdGhlciBSZWFkZXJzIGluIHRoZSBjaGFpbi4KCSAqCgkgKiBAYXV0aG9yIGRzd2l0a2luQGdvb2dsZS5jb20gKERhbmllbCBTd2l0a2luKQoJICovCgl2YXIgTHVtaW5hbmNlU291cmNlID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEx1bWluYW5jZVNvdXJjZSh3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aGlzLndpZHRoID0gd2lkdGg7CgkgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIFRoZSB3aWR0aCBvZiB0aGUgYml0bWFwLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0V2lkdGggPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLndpZHRoOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBUaGUgaGVpZ2h0IG9mIHRoZSBiaXRtYXAuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRIZWlnaHQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmhlaWdodDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNyb3BwaW5nLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBSZXR1cm5zIGEgbmV3IG9iamVjdCB3aXRoIGNyb3BwZWQgaW1hZ2UgZGF0YS4gSW1wbGVtZW50YXRpb25zIG1heSBrZWVwIGEgcmVmZXJlbmNlIHRvIHRoZQoJICAgICAqIG9yaWdpbmFsIGRhdGEgcmF0aGVyIHRoYW4gYSBjb3B5LiBPbmx5IGNhbGxhYmxlIGlmIGlzQ3JvcFN1cHBvcnRlZCgpIGlzIHRydWUuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gbGVmdCBUaGUgbGVmdCBjb29yZGluYXRlLCB3aGljaCBtdXN0IGJlIGluIFswLGdldFdpZHRoKCkpCgkgICAgICogQHBhcmFtIHRvcCBUaGUgdG9wIGNvb3JkaW5hdGUsIHdoaWNoIG11c3QgYmUgaW4gWzAsZ2V0SGVpZ2h0KCkpCgkgICAgICogQHBhcmFtIHdpZHRoIFRoZSB3aWR0aCBvZiB0aGUgcmVjdGFuZ2xlIHRvIGNyb3AuCgkgICAgICogQHBhcmFtIGhlaWdodCBUaGUgaGVpZ2h0IG9mIHRoZSByZWN0YW5nbGUgdG8gY3JvcC4KCSAgICAgKiBAcmV0dXJuIEEgY3JvcHBlZCB2ZXJzaW9uIG9mIHRoaXMgb2JqZWN0LgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCBjcm9wcGluZy4nKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gV2hldGhlciB0aGlzIHN1YmNsYXNzIHN1cHBvcnRzIGNvdW50ZXItY2xvY2t3aXNlIHJvdGF0aW9uLgoJICAgICAqLwoJICAgIEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgYSBuZXcgb2JqZWN0IHdpdGggcm90YXRlZCBpbWFnZSBkYXRhIGJ5IDkwIGRlZ3JlZXMgY291bnRlcmNsb2Nrd2lzZS4KCSAgICAgKiBPbmx5IGNhbGxhYmxlIGlmIHtAbGluayAjaXNSb3RhdGVTdXBwb3J0ZWQoKX0gaXMgdHJ1ZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gQSByb3RhdGVkIHZlcnNpb24gb2YgdGhpcyBvYmplY3QuCgkgICAgICovCgkgICAgTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB0aHJvdyBuZXcgVW5zdXBwb3J0ZWRPcGVyYXRpb25FeGNlcHRpb25fMS5kZWZhdWx0KCdUaGlzIGx1bWluYW5jZSBzb3VyY2UgZG9lcyBub3Qgc3VwcG9ydCByb3RhdGlvbiBieSA5MCBkZWdyZWVzLicpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogUmV0dXJucyBhIG5ldyBvYmplY3Qgd2l0aCByb3RhdGVkIGltYWdlIGRhdGEgYnkgNDUgZGVncmVlcyBjb3VudGVyY2xvY2t3aXNlLgoJICAgICAqIE9ubHkgY2FsbGFibGUgaWYge0BsaW5rICNpc1JvdGF0ZVN1cHBvcnRlZCgpfSBpcyB0cnVlLgoJICAgICAqCgkgICAgICogQHJldHVybiBBIHJvdGF0ZWQgdmVyc2lvbiBvZiB0aGlzIG9iamVjdC4KCSAgICAgKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnJvdGF0ZUNvdW50ZXJDbG9ja3dpc2U0NSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdGhyb3cgbmV3IFVuc3VwcG9ydGVkT3BlcmF0aW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnVGhpcyBsdW1pbmFuY2Ugc291cmNlIGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24gYnkgNDUgZGVncmVlcy4nKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgcm93ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHRoaXMud2lkdGgpOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFN0cmluZ0J1aWxkZXJfMSQxLmRlZmF1bHQoKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCB0aGlzLmhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgc291cmNlUm93ID0gdGhpcy5nZXRSb3coeSwgcm93KTsKCSAgICAgICAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgdGhpcy53aWR0aDsgeCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGx1bWluYW5jZSA9IHNvdXJjZVJvd1t4XSAmIDB4RkY7CgkgICAgICAgICAgICAgICAgdmFyIGMgPSB2b2lkIDA7CgkgICAgICAgICAgICAgICAgaWYgKGx1bWluYW5jZSA8IDB4NDApIHsKCSAgICAgICAgICAgICAgICAgICAgYyA9ICcjJzsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSBpZiAobHVtaW5hbmNlIDwgMHg4MCkgewoJICAgICAgICAgICAgICAgICAgICBjID0gJysnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIGlmIChsdW1pbmFuY2UgPCAweEMwKSB7CgkgICAgICAgICAgICAgICAgICAgIGMgPSAnLic7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICBjID0gJyAnOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICByZXN1bHQuYXBwZW5kKGMpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZCgnXG4nKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0LnRvU3RyaW5nKCk7CgkgICAgfTsKCSAgICByZXR1cm4gTHVtaW5hbmNlU291cmNlOwoJfSgpKTsKCUx1bWluYW5jZVNvdXJjZSQxLmRlZmF1bHQgPSBMdW1pbmFuY2VTb3VyY2U7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA5IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMkYSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbnZlcnRlZEx1bWluYW5jZVNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEkMSA9IEx1bWluYW5jZVNvdXJjZSQxOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogQSB3cmFwcGVyIGltcGxlbWVudGF0aW9uIG9mIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHdoaWNoIGludmVydHMgdGhlIGx1bWluYW5jZXMgaXQgcmV0dXJucyAtLSBibGFjayBiZWNvbWVzCgkgKiB3aGl0ZSBhbmQgdmljZSB2ZXJzYSwgYW5kIGVhY2ggdmFsdWUgYmVjb21lcyAoMjU1LXZhbHVlKS4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJGEoSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UsIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UoZGVsZWdhdGUpIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgZGVsZWdhdGUuZ2V0V2lkdGgoKSwgZGVsZWdhdGUuZ2V0SGVpZ2h0KCkpIHx8IHRoaXM7CgkgICAgICAgIF90aGlzLmRlbGVnYXRlID0gZGVsZWdhdGU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgdmFyIHNvdXJjZVJvdyA9IHRoaXMuZGVsZWdhdGUuZ2V0Um93KHksIHJvdyk7CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB3aWR0aDsgaSsrKSB7CgkgICAgICAgICAgICBzb3VyY2VSb3dbaV0gPSAvKihieXRlKSovICgyNTUgLSAoc291cmNlUm93W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBzb3VyY2VSb3c7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmdldE1hdHJpeCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIG1hdHJpeCA9IHRoaXMuZGVsZWdhdGUuZ2V0TWF0cml4KCk7CgkgICAgICAgIHZhciBsZW5ndGggPSB0aGlzLmdldFdpZHRoKCkgKiB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgaW52ZXJ0ZWRNYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkobGVuZ3RoKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykgewoJICAgICAgICAgICAgaW52ZXJ0ZWRNYXRyaXhbaV0gPSAvKihieXRlKSovICgyNTUgLSAobWF0cml4W2ldICYgMHhGRikpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBpbnZlcnRlZE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNDcm9wU3VwcG9ydGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5kZWxlZ2F0ZS5pc0Nyb3BTdXBwb3J0ZWQoKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuY3JvcCA9IGZ1bmN0aW9uIChsZWZ0IC8qaW50Ki8sIHRvcCAvKmludCovLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUuY3JvcChsZWZ0LCB0b3AsIHdpZHRoLCBoZWlnaHQpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuaXNSb3RhdGVTdXBwb3J0ZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlLmlzUm90YXRlU3VwcG9ydGVkKCk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG9yaWdpbmFsIGRlbGVnYXRlIHtAbGluayBMdW1pbmFuY2VTb3VyY2V9IHNpbmNlIGludmVydCB1bmRvZXMgaXRzZWxmCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlbGVnYXRlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEludmVydGVkTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5yb3RhdGVDb3VudGVyQ2xvY2t3aXNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZSgpKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBJbnZlcnRlZEx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IEludmVydGVkTHVtaW5hbmNlU291cmNlKHRoaXMuZGVsZWdhdGUucm90YXRlQ291bnRlckNsb2Nrd2lzZTQ1KCkpOwoJICAgIH07CgkgICAgcmV0dXJuIEludmVydGVkTHVtaW5hbmNlU291cmNlOwoJfShMdW1pbmFuY2VTb3VyY2VfMSQxLmRlZmF1bHQpKTsKCUludmVydGVkTHVtaW5hbmNlU291cmNlJDEuZGVmYXVsdCA9IEludmVydGVkTHVtaW5hbmNlU291cmNlOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwOSBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDkgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUkdCTHVtaW5hbmNlU291cmNlJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcgeyovCgkgLy8gcmVxdWlyZWQgYmVjYXVzZSBvZiBjaXJjdWxhciBkZXBlbmRlbmNpZXMgYmV0d2VlbiBMdW1pbmFuY2VTb3VyY2UgYW5kIEludmVydGVkTHVtaW5hbmNlU291cmNlCgl2YXIgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMSA9IEludmVydGVkTHVtaW5hbmNlU291cmNlJDE7Cgl2YXIgTHVtaW5hbmNlU291cmNlXzEgPSBMdW1pbmFuY2VTb3VyY2UkMTsKCXZhciBTeXN0ZW1fMSQyID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNiA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBUaGlzIGNsYXNzIGlzIHVzZWQgdG8gaGVscCBkZWNvZGUgaW1hZ2VzIGZyb20gZmlsZXMgd2hpY2ggYXJyaXZlIGFzIFJHQiBkYXRhIGZyb20KCSAqIGFuIEFSR0IgcGl4ZWwgYXJyYXkuIEl0IGRvZXMgbm90IHN1cHBvcnQgcm90YXRpb24uCgkgKgoJICogQGF1dGhvciBkc3dpdGtpbkBnb29nbGUuY29tIChEYW5pZWwgU3dpdGtpbikKCSAqIEBhdXRob3IgQmV0YW1pbm9zCgkgKi8KCXZhciBSR0JMdW1pbmFuY2VTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDkoUkdCTHVtaW5hbmNlU291cmNlLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIFJHQkx1bWluYW5jZVNvdXJjZShsdW1pbmFuY2VzLCB3aWR0aCAvKmludCovLCBoZWlnaHQgLyppbnQqLywgZGF0YVdpZHRoIC8qaW50Ki8sIGRhdGFIZWlnaHQgLyppbnQqLywgbGVmdCAvKmludCovLCB0b3AgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCB3aWR0aCwgaGVpZ2h0KSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5kYXRhV2lkdGggPSBkYXRhV2lkdGg7CgkgICAgICAgIF90aGlzLmRhdGFIZWlnaHQgPSBkYXRhSGVpZ2h0OwoJICAgICAgICBfdGhpcy5sZWZ0ID0gbGVmdDsKCSAgICAgICAgX3RoaXMudG9wID0gdG9wOwoJICAgICAgICBpZiAobHVtaW5hbmNlcy5CWVRFU19QRVJfRUxFTUVOVCA9PT0gNCkgeyAvLyBJbnQzMkFycmF5CgkgICAgICAgICAgICB2YXIgc2l6ZSA9IHdpZHRoICogaGVpZ2h0OwoJICAgICAgICAgICAgdmFyIGx1bWluYW5jZXNVaW50OEFycmF5ID0gbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KHNpemUpOwoJICAgICAgICAgICAgZm9yICh2YXIgb2Zmc2V0ID0gMDsgb2Zmc2V0IDwgc2l6ZTsgb2Zmc2V0KyspIHsKCSAgICAgICAgICAgICAgICB2YXIgcGl4ZWwgPSBsdW1pbmFuY2VzW29mZnNldF07CgkgICAgICAgICAgICAgICAgdmFyIHIgPSAocGl4ZWwgPj4gMTYpICYgMHhmZjsgLy8gcmVkCgkgICAgICAgICAgICAgICAgdmFyIGcyID0gKHBpeGVsID4+IDcpICYgMHgxZmU7IC8vIDIgKiBncmVlbgoJICAgICAgICAgICAgICAgIHZhciBiID0gcGl4ZWwgJiAweGZmOyAvLyBibHVlCgkgICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIGdyZWVuLWZhdm91cmluZyBhdmVyYWdlIGNoZWFwbHkKCSAgICAgICAgICAgICAgICBsdW1pbmFuY2VzVWludDhBcnJheVtvZmZzZXRdID0gLyooYnl0ZSkgKi8gKChyICsgZzIgKyBiKSAvIDQpICYgMHhGRjsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzVWludDhBcnJheTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIF90aGlzLmx1bWluYW5jZXMgPSBsdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGRhdGFXaWR0aCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YVdpZHRoID0gd2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gZGF0YUhlaWdodCkgewoJICAgICAgICAgICAgX3RoaXMuZGF0YUhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSBsZWZ0KSB7CgkgICAgICAgICAgICBfdGhpcy5sZWZ0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAodW5kZWZpbmVkID09PSB0b3ApIHsKCSAgICAgICAgICAgIF90aGlzLnRvcCA9IDA7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKF90aGlzLmxlZnQgKyB3aWR0aCA+IF90aGlzLmRhdGFXaWR0aCB8fCBfdGhpcy50b3AgKyBoZWlnaHQgPiBfdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNi5kZWZhdWx0KCdDcm9wIHJlY3RhbmdsZSBkb2VzIG5vdCBmaXQgd2l0aGluIGltYWdlIGRhdGEuJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5nZXRSb3cgPSBmdW5jdGlvbiAoeSAvKmludCovLCByb3cpIHsKCSAgICAgICAgaWYgKHkgPCAwIHx8IHkgPj0gdGhpcy5nZXRIZWlnaHQoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDYuZGVmYXVsdCgnUmVxdWVzdGVkIHJvdyBpcyBvdXRzaWRlIHRoZSBpbWFnZTogJyArIHkpOwoJICAgICAgICB9CgkgICAgICAgIHZhciB3aWR0aCA9IHRoaXMuZ2V0V2lkdGgoKTsKCSAgICAgICAgaWYgKHJvdyA9PT0gbnVsbCB8fCByb3cgPT09IHVuZGVmaW5lZCB8fCByb3cubGVuZ3RoIDwgd2lkdGgpIHsKCSAgICAgICAgICAgIHJvdyA9IG5ldyBVaW50OENsYW1wZWRBcnJheSh3aWR0aCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG9mZnNldCA9ICh5ICsgdGhpcy50b3ApICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIFN5c3RlbV8xJDIuZGVmYXVsdC5hcnJheWNvcHkodGhpcy5sdW1pbmFuY2VzLCBvZmZzZXQsIHJvdywgMCwgd2lkdGgpOwoJICAgICAgICByZXR1cm4gcm93OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJHQkx1bWluYW5jZVNvdXJjZS5wcm90b3R5cGUuZ2V0TWF0cml4ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgd2lkdGggPSB0aGlzLmdldFdpZHRoKCk7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBJZiB0aGUgY2FsbGVyIGFza3MgZm9yIHRoZSBlbnRpcmUgdW5kZXJseWluZyBpbWFnZSwgc2F2ZSB0aGUgY29weSBhbmQgZ2l2ZSB0aGVtIHRoZQoJICAgICAgICAvLyBvcmlnaW5hbCBkYXRhLiBUaGUgZG9jcyBzcGVjaWZpY2FsbHkgd2FybiB0aGF0IHJlc3VsdC5sZW5ndGggbXVzdCBiZSBpZ25vcmVkLgoJICAgICAgICBpZiAod2lkdGggPT09IHRoaXMuZGF0YVdpZHRoICYmIGhlaWdodCA9PT0gdGhpcy5kYXRhSGVpZ2h0KSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5sdW1pbmFuY2VzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhcmVhID0gd2lkdGggKiBoZWlnaHQ7CgkgICAgICAgIHZhciBtYXRyaXggPSBuZXcgVWludDhDbGFtcGVkQXJyYXkoYXJlYSk7CgkgICAgICAgIHZhciBpbnB1dE9mZnNldCA9IHRoaXMudG9wICogdGhpcy5kYXRhV2lkdGggKyB0aGlzLmxlZnQ7CgkgICAgICAgIC8vIElmIHRoZSB3aWR0aCBtYXRjaGVzIHRoZSBmdWxsIHdpZHRoIG9mIHRoZSB1bmRlcmx5aW5nIGRhdGEsIHBlcmZvcm0gYSBzaW5nbGUgY29weS4KCSAgICAgICAgaWYgKHdpZHRoID09PSB0aGlzLmRhdGFXaWR0aCkgewoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIDAsIGFyZWEpOwoJICAgICAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICAgICAgfQoJICAgICAgICAvLyBPdGhlcndpc2UgY29weSBvbmUgY3JvcHBlZCByb3cgYXQgYSB0aW1lLgoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IGhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgb3V0cHV0T2Zmc2V0ID0geSAqIHdpZHRoOwoJICAgICAgICAgICAgU3lzdGVtXzEkMi5kZWZhdWx0LmFycmF5Y29weSh0aGlzLmx1bWluYW5jZXMsIGlucHV0T2Zmc2V0LCBtYXRyaXgsIG91dHB1dE9mZnNldCwgd2lkdGgpOwoJICAgICAgICAgICAgaW5wdXRPZmZzZXQgKz0gdGhpcy5kYXRhV2lkdGg7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSR0JMdW1pbmFuY2VTb3VyY2UucHJvdG90eXBlLmlzQ3JvcFN1cHBvcnRlZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5jcm9wID0gZnVuY3Rpb24gKGxlZnQgLyppbnQqLywgdG9wIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovKSB7CgkgICAgICAgIHJldHVybiBuZXcgUkdCTHVtaW5hbmNlU291cmNlKHRoaXMubHVtaW5hbmNlcywgd2lkdGgsIGhlaWdodCwgdGhpcy5kYXRhV2lkdGgsIHRoaXMuZGF0YUhlaWdodCwgdGhpcy5sZWZ0ICsgbGVmdCwgdGhpcy50b3AgKyB0b3ApOwoJICAgIH07CgkgICAgUkdCTHVtaW5hbmNlU291cmNlLnByb3RvdHlwZS5pbnZlcnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiBuZXcgSW52ZXJ0ZWRMdW1pbmFuY2VTb3VyY2VfMS5kZWZhdWx0KHRoaXMpOwoJICAgIH07CgkgICAgcmV0dXJuIFJHQkx1bWluYW5jZVNvdXJjZTsKCX0oTHVtaW5hbmNlU291cmNlXzEuZGVmYXVsdCkpOwoJdmFyIF9kZWZhdWx0JDEgPSBSR0JMdW1pbmFuY2VTb3VyY2UkMS5kZWZhdWx0ID0gUkdCTHVtaW5hbmNlU291cmNlOwoKCXZhciBRUkNvZGVSZWFkZXIkMSA9IHt9OwoKCXZhciBCYXJjb2RlRm9ybWF0JDEgPSB7fTsKCgkvKgoJICogRGlyZWN0IHBvcnQgdG8gVHlwZVNjcmlwdCBvZiBaWGluZyBieSBBZHJpYW4gVG/ImWPEgwoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoQmFyY29kZUZvcm1hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKgoJICogQ29weXJpZ2h0IDIwMDkgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogRW51bWVyYXRlcyBiYXJjb2RlIGZvcm1hdHMga25vd24gdG8gdGhpcyBwYWNrYWdlLiBQbGVhc2Uga2VlcCBhbHBoYWJldGl6ZWQuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJhcmNvZGVGb3JtYXQ7CgkoZnVuY3Rpb24gKEJhcmNvZGVGb3JtYXQpIHsKCSAgICAvKiogQXp0ZWMgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJBWlRFQyJdID0gMF0gPSAiQVpURUMiOwoJICAgIC8qKiBDT0RBQkFSIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREFCQVIiXSA9IDFdID0gIkNPREFCQVIiOwoJICAgIC8qKiBDb2RlIDM5IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfMzkiXSA9IDJdID0gIkNPREVfMzkiOwoJICAgIC8qKiBDb2RlIDkzIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkNPREVfOTMiXSA9IDNdID0gIkNPREVfOTMiOwoJICAgIC8qKiBDb2RlIDEyOCAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJDT0RFXzEyOCJdID0gNF0gPSAiQ09ERV8xMjgiOwoJICAgIC8qKiBEYXRhIE1hdHJpeCAyRCBiYXJjb2RlIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkRBVEFfTUFUUklYIl0gPSA1XSA9ICJEQVRBX01BVFJJWCI7CgkgICAgLyoqIEVBTi04IDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIkVBTl84Il0gPSA2XSA9ICJFQU5fOCI7CgkgICAgLyoqIEVBTi0xMyAxRCBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJFQU5fMTMiXSA9IDddID0gIkVBTl8xMyI7CgkgICAgLyoqIElURiAoSW50ZXJsZWF2ZWQgVHdvIG9mIEZpdmUpIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIklURiJdID0gOF0gPSAiSVRGIjsKCSAgICAvKiogTWF4aUNvZGUgMkQgYmFyY29kZSBmb3JtYXQuICovCgkgICAgQmFyY29kZUZvcm1hdFtCYXJjb2RlRm9ybWF0WyJNQVhJQ09ERSJdID0gOV0gPSAiTUFYSUNPREUiOwoJICAgIC8qKiBQREY0MTcgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUERGXzQxNyJdID0gMTBdID0gIlBERl80MTciOwoJICAgIC8qKiBRUiBDb2RlIDJEIGJhcmNvZGUgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUVJfQ09ERSJdID0gMTFdID0gIlFSX0NPREUiOwoJICAgIC8qKiBSU1MgMTQgKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlJTU18xNCJdID0gMTJdID0gIlJTU18xNCI7CgkgICAgLyoqIFJTUyBFWFBBTkRFRCAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiUlNTX0VYUEFOREVEIl0gPSAxM10gPSAiUlNTX0VYUEFOREVEIjsKCSAgICAvKiogVVBDLUEgMUQgZm9ybWF0LiAqLwoJICAgIEJhcmNvZGVGb3JtYXRbQmFyY29kZUZvcm1hdFsiVVBDX0EiXSA9IDE0XSA9ICJVUENfQSI7CgkgICAgLyoqIFVQQy1FIDFEIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FIl0gPSAxNV0gPSAiVVBDX0UiOwoJICAgIC8qKiBVUEMvRUFOIGV4dGVuc2lvbiBmb3JtYXQuIE5vdCBhIHN0YW5kLWFsb25lIGZvcm1hdC4gKi8KCSAgICBCYXJjb2RlRm9ybWF0W0JhcmNvZGVGb3JtYXRbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSAxNl0gPSAiVVBDX0VBTl9FWFRFTlNJT04iOwoJfSkoQmFyY29kZUZvcm1hdCB8fCAoQmFyY29kZUZvcm1hdCA9IHt9KSk7CglCYXJjb2RlRm9ybWF0JDEuZGVmYXVsdCA9IEJhcmNvZGVGb3JtYXQ7CgoJdmFyIFJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIFN5c3RlbV8xJDEgPSBTeXN0ZW0kMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBiYXJjb2RlIHdpdGhpbiBhbiBpbWFnZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocHJpdmF0ZSB0ZXh0OiBzdHJpbmcsCgkgICAgLy8gICAgICAgICAgICAgICBVaW50OEFycmF5IHJhd0J5dGVzLAoJICAgIC8vICAgICAgICAgICAgICAgUmVzdWx0UG9jb25zdCByZXN1bHRQb2ludHM6IEludDMyQXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICBCYXJjb2RlRm9ybWF0IGZvcm1hdCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmVzdWx0UG9pbnRzLCBmb3JtYXQsIFN5c3RlbS5jdXJyZW50VGltZU1pbGxpcygpKQoJICAgIC8vIH0KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IodGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgVWludDhBcnJheSByYXdCeXRlcywKCSAgICAvLyAgICAgICAgICAgICAgIFJlc3VsdFBvY29uc3QgcmVzdWx0UG9pbnRzOiBJbnQzMkFycmF5LAoJICAgIC8vICAgICAgICAgICAgICAgQmFyY29kZUZvcm1hdCBmb3JtYXQsCgkgICAgLy8gICAgICAgICAgICAgICBsb25nIHRpbWVzdGFtcCkgewoJICAgIC8vICAgdGhpcyh0ZXh0LCByYXdCeXRlcywgcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoLAoJICAgIC8vICAgICAgICByZXN1bHRQb2ludHMsIGZvcm1hdCwgdGltZXN0YW1wKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBSZXN1bHQodGV4dCwgcmF3Qnl0ZXMsIG51bUJpdHMsIHJlc3VsdFBvaW50cywgZm9ybWF0LCB0aW1lc3RhbXApIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPT09IHZvaWQgMCkgeyBudW1CaXRzID0gcmF3Qnl0ZXMgPT0gbnVsbCA/IDAgOiA4ICogcmF3Qnl0ZXMubGVuZ3RoOyB9CgkgICAgICAgIGlmICh0aW1lc3RhbXAgPT09IHZvaWQgMCkgeyB0aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsgfQoJICAgICAgICB0aGlzLnRleHQgPSB0ZXh0OwoJICAgICAgICB0aGlzLnJhd0J5dGVzID0gcmF3Qnl0ZXM7CgkgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gcmVzdWx0UG9pbnRzOwoJICAgICAgICB0aGlzLmZvcm1hdCA9IGZvcm1hdDsKCSAgICAgICAgdGhpcy50aW1lc3RhbXAgPSB0aW1lc3RhbXA7CgkgICAgICAgIHRoaXMudGV4dCA9IHRleHQ7CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gbnVtQml0cyB8fCBudWxsID09PSBudW1CaXRzKSB7CgkgICAgICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IG51bGwgfHwgcmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMubnVtQml0cyA9IG51bUJpdHM7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludHMgPSByZXN1bHRQb2ludHM7CgkgICAgICAgIHRoaXMuZm9ybWF0ID0gZm9ybWF0OwoJICAgICAgICB0aGlzLnJlc3VsdE1ldGFkYXRhID0gbnVsbDsKCSAgICAgICAgaWYgKHVuZGVmaW5lZCA9PT0gdGltZXN0YW1wIHx8IG51bGwgPT09IHRpbWVzdGFtcCkgewoJICAgICAgICAgICAgdGhpcy50aW1lc3RhbXAgPSBTeXN0ZW1fMSQxLmRlZmF1bHQuY3VycmVudFRpbWVNaWxsaXMoKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHRoaXMudGltZXN0YW1wID0gdGltZXN0YW1wOwoJICAgICAgICB9CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IHRleHQgZW5jb2RlZCBieSB0aGUgYmFyY29kZQoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0VGV4dCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGV4dDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcmF3IGJ5dGVzIGVuY29kZWQgYnkgdGhlIGJhcmNvZGUsIGlmIGFwcGxpY2FibGUsIG90aGVyd2lzZSB7QGNvZGUgbnVsbH0KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0TnVtQml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMubnVtQml0czsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gcG9pbnRzIHJlbGF0ZWQgdG8gdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGVzZSBhcmUgdHlwaWNhbGx5IHBvaW50cwoJICAgICAqICAgICAgICAgaWRlbnRpZnlpbmcgZmluZGVyIHBhdHRlcm5zIG9yIHRoZSBjb3JuZXJzIG9mIHRoZSBiYXJjb2RlLiBUaGUgZXhhY3QgbWVhbmluZyBpcwoJICAgICAqICAgICAgICAgc3BlY2lmaWMgdG8gdGhlIHR5cGUgb2YgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkLgoJICAgICAqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUuZ2V0UmVzdWx0UG9pbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBCYXJjb2RlRm9ybWF0fSByZXByZXNlbnRpbmcgdGhlIGZvcm1hdCBvZiB0aGUgYmFyY29kZSB0aGF0IHdhcyBkZWNvZGVkCgkgICAgICovCgkgICAgUmVzdWx0LnByb3RvdHlwZS5nZXRCYXJjb2RlRm9ybWF0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5mb3JtYXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHtAbGluayBNYXB9IG1hcHBpbmcge0BsaW5rIFJlc3VsdE1ldGFkYXRhVHlwZX0ga2V5cyB0byB2YWx1ZXMuIE1heSBiZQoJICAgICAqICAge0Bjb2RlIG51bGx9LiBUaGlzIGNvbnRhaW5zIG9wdGlvbmFsIG1ldGFkYXRhIGFib3V0IHdoYXQgd2FzIGRldGVjdGVkIGFib3V0IHRoZSBiYXJjb2RlLAoJICAgICAqICAgbGlrZSBvcmllbnRhdGlvbi4KCSAgICAgKi8KCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFJlc3VsdE1ldGFkYXRhID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRNZXRhZGF0YTsKCSAgICB9OwoJICAgIFJlc3VsdC5wcm90b3R5cGUucHV0TWV0YWRhdGEgPSBmdW5jdGlvbiAodHlwZSwgdmFsdWUpIHsKCSAgICAgICAgaWYgKHRoaXMucmVzdWx0TWV0YWRhdGEgPT09IG51bGwpIHsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0TWV0YWRhdGEgPSBuZXcgTWFwKCk7CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YS5zZXQodHlwZSwgdmFsdWUpOwoJICAgIH07CgkgICAgUmVzdWx0LnByb3RvdHlwZS5wdXRBbGxNZXRhZGF0YSA9IGZ1bmN0aW9uIChtZXRhZGF0YSkgewoJICAgICAgICBpZiAobWV0YWRhdGEgIT09IG51bGwpIHsKCSAgICAgICAgICAgIGlmICh0aGlzLnJlc3VsdE1ldGFkYXRhID09PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG1ldGFkYXRhOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRNZXRhZGF0YSA9IG5ldyBNYXAobWV0YWRhdGEpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmFkZFJlc3VsdFBvaW50cyA9IGZ1bmN0aW9uIChuZXdQb2ludHMpIHsKCSAgICAgICAgdmFyIG9sZFBvaW50cyA9IHRoaXMucmVzdWx0UG9pbnRzOwoJICAgICAgICBpZiAob2xkUG9pbnRzID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aGlzLnJlc3VsdFBvaW50cyA9IG5ld1BvaW50czsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChuZXdQb2ludHMgIT09IG51bGwgJiYgbmV3UG9pbnRzLmxlbmd0aCA+IDApIHsKCSAgICAgICAgICAgIHZhciBhbGxQb2ludHMgPSBuZXcgQXJyYXkob2xkUG9pbnRzLmxlbmd0aCArIG5ld1BvaW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgU3lzdGVtXzEkMS5kZWZhdWx0LmFycmF5Y29weShvbGRQb2ludHMsIDAsIGFsbFBvaW50cywgMCwgb2xkUG9pbnRzLmxlbmd0aCk7CgkgICAgICAgICAgICBTeXN0ZW1fMSQxLmRlZmF1bHQuYXJyYXljb3B5KG5ld1BvaW50cywgMCwgYWxsUG9pbnRzLCBvbGRQb2ludHMubGVuZ3RoLCBuZXdQb2ludHMubGVuZ3RoKTsKCSAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRzID0gYWxsUG9pbnRzOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZXN1bHQucHJvdG90eXBlLmdldFRpbWVzdGFtcCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMudGltZXN0YW1wOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRleHQ7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0OwoJfSgpKTsKCVJlc3VsdCQxLmRlZmF1bHQgPSBSZXN1bHQ7CgoJdmFyIFJlc3VsdE1ldGFkYXRhVHlwZSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA4IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZXN1bHRNZXRhZGF0YVR5cGUkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCS8qKgoJICogUmVwcmVzZW50cyBzb21lIHR5cGUgb2YgbWV0YWRhdGEgYWJvdXQgdGhlIHJlc3VsdCBvZiB0aGUgZGVjb2RpbmcgdGhhdCB0aGUgZGVjb2RlcgoJICogd2lzaGVzIHRvIGNvbW11bmljYXRlIGJhY2sgdG8gdGhlIGNhbGxlci4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlOwoJKGZ1bmN0aW9uIChSZXN1bHRNZXRhZGF0YVR5cGUpIHsKCSAgICAvKioKCSAgICAgKiBVbnNwZWNpZmllZCwgYXBwbGljYXRpb24tc3BlY2lmaWMgbWV0YWRhdGEuIE1hcHMgdG8gYW4gdW5zcGVjaWZpZWQge0BsaW5rIE9iamVjdH0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiT1RIRVIiXSA9IDBdID0gIk9USEVSIjsKCSAgICAvKioKCSAgICAgKiBEZW5vdGVzIHRoZSBsaWtlbHkgYXBwcm94aW1hdGUgb3JpZW50YXRpb24gb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLiBUaGlzIHZhbHVlCgkgICAgICogaXMgZ2l2ZW4gYXMgZGVncmVlcyByb3RhdGVkIGNsb2Nrd2lzZSBmcm9tIHRoZSBub3JtYWwsIHVwcmlnaHQgb3JpZW50YXRpb24uCgkgICAgICogRm9yIGV4YW1wbGUgYSAxRCBiYXJjb2RlIHdoaWNoIHdhcyBmb3VuZCBieSByZWFkaW5nIHRvcC10by1ib3R0b20gd291bGQgYmUKCSAgICAgKiBzYWlkIHRvIGhhdmUgb3JpZW50YXRpb24gIjkwIi4gVGhpcyBrZXkgbWFwcyB0byBhbiB7QGxpbmsgSW50ZWdlcn0gd2hvc2UKCSAgICAgKiB2YWx1ZSBpcyBpbiB0aGUgcmFuZ2UgWzAsMzYwKS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJPUklFTlRBVElPTiJdID0gMV0gPSAiT1JJRU5UQVRJT04iOwoJICAgIC8qKgoJICAgICAqIDxwPjJEIGJhcmNvZGUgZm9ybWF0cyB0eXBpY2FsbHkgZW5jb2RlIHRleHQsIGJ1dCBhbGxvdyBmb3IgYSBzb3J0IG9mICdieXRlIG1vZGUnCgkgICAgICogd2hpY2ggaXMgc29tZXRpbWVzIHVzZWQgdG8gZW5jb2RlIGJpbmFyeSBkYXRhLiBXaGlsZSB7QGxpbmsgUmVzdWx0fSBtYWtlcyBhdmFpbGFibGUKCSAgICAgKiB0aGUgY29tcGxldGUgcmF3IGJ5dGVzIGluIHRoZSBiYXJjb2RlIGZvciB0aGVzZSBmb3JtYXRzLCBpdCBkb2VzIG5vdCBvZmZlciB0aGUgYnl0ZXMKCSAgICAgKiBmcm9tIHRoZSBieXRlIHNlZ21lbnRzIGFsb25lLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWFwcyB0byBhIHtAbGluayBqYXZhLnV0aWwuTGlzdH0gb2YgYnl0ZSBhcnJheXMgY29ycmVzcG9uZGluZyB0byB0aGUKCSAgICAgKiByYXcgYnl0ZXMgaW4gdGhlIGJ5dGUgc2VnbWVudHMgaW4gdGhlIGJhcmNvZGUsIGluIG9yZGVyLjwvcD4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJCWVRFX1NFR01FTlRTIl0gPSAyXSA9ICJCWVRFX1NFR01FTlRTIjsKCSAgICAvKioKCSAgICAgKiBFcnJvciBjb3JyZWN0aW9uIGxldmVsIHVzZWQsIGlmIGFwcGxpY2FibGUuIFRoZSB2YWx1ZSB0eXBlIGRlcGVuZHMgb24gdGhlCgkgICAgICogZm9ybWF0LCBidXQgaXMgdHlwaWNhbGx5IGEgU3RyaW5nLgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiXSA9IDNdID0gIkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHBlcmlvZGljYWxzLCBpbmRpY2F0ZXMgdGhlIGlzc3VlIG51bWJlciBhcyBhbiB7QGxpbmsgSW50ZWdlcn0uCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiSVNTVUVfTlVNQkVSIl0gPSA0XSA9ICJJU1NVRV9OVU1CRVIiOwoJICAgIC8qKgoJICAgICAqIEZvciBzb21lIHByb2R1Y3RzLCBpbmRpY2F0ZXMgdGhlIHN1Z2dlc3RlZCByZXRhaWwgcHJpY2UgaW4gdGhlIGJhcmNvZGUgYXMgYQoJICAgICAqIGZvcm1hdHRlZCB7QGxpbmsgU3RyaW5nfS4KCSAgICAgKi8KCSAgICBSZXN1bHRNZXRhZGF0YVR5cGVbUmVzdWx0TWV0YWRhdGFUeXBlWyJTVUdHRVNURURfUFJJQ0UiXSA9IDVdID0gIlNVR0dFU1RFRF9QUklDRSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBwb3NzaWJsZSBjb3VudHJ5IG9mIG1hbnVmYWN0dXJlIGFzIGEge0BsaW5rIFN0cmluZ30gZGVub3RpbmcgdGhlCgkgICAgICogSVNPIGNvdW50cnkgY29kZS4gU29tZSBtYXAgdG8gbXVsdGlwbGUgcG9zc2libGUgY291bnRyaWVzLCBsaWtlICJVUy9DQSIuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUE9TU0lCTEVfQ09VTlRSWSJdID0gNl0gPSAiUE9TU0lCTEVfQ09VTlRSWSI7CgkgICAgLyoqCgkgICAgICogRm9yIHNvbWUgcHJvZHVjdHMsIHRoZSBleHRlbnNpb24gdGV4dAoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlVQQ19FQU5fRVhURU5TSU9OIl0gPSA3XSA9ICJVUENfRUFOX0VYVEVOU0lPTiI7CgkgICAgLyoqCgkgICAgICogUERGNDE3LXNwZWNpZmljIG1ldGFkYXRhCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiUERGNDE3X0VYVFJBX01FVEFEQVRBIl0gPSA4XSA9ICJQREY0MTdfRVhUUkFfTUVUQURBVEEiOwoJICAgIC8qKgoJICAgICAqIElmIHRoZSBjb2RlIGZvcm1hdCBzdXBwb3J0cyBzdHJ1Y3R1cmVkIGFwcGVuZCBhbmQgdGhlIGN1cnJlbnQgc2Nhbm5lZCBjb2RlIGlzIHBhcnQgb2Ygb25lIHRoZW4gdGhlCgkgICAgICogc2VxdWVuY2UgbnVtYmVyIGlzIGdpdmVuIHdpdGggaXQuCgkgICAgICovCgkgICAgUmVzdWx0TWV0YWRhdGFUeXBlW1Jlc3VsdE1ldGFkYXRhVHlwZVsiU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UiXSA9IDldID0gIlNUUlVDVFVSRURfQVBQRU5EX1NFUVVFTkNFIjsKCSAgICAvKioKCSAgICAgKiBJZiB0aGUgY29kZSBmb3JtYXQgc3VwcG9ydHMgc3RydWN0dXJlZCBhcHBlbmQgYW5kIHRoZSBjdXJyZW50IHNjYW5uZWQgY29kZSBpcyBwYXJ0IG9mIG9uZSB0aGVuIHRoZQoJICAgICAqIHBhcml0eSBpcyBnaXZlbiB3aXRoIGl0LgoJICAgICAqLwoJICAgIFJlc3VsdE1ldGFkYXRhVHlwZVtSZXN1bHRNZXRhZGF0YVR5cGVbIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSJdID0gMTBdID0gIlNUUlVDVFVSRURfQVBQRU5EX1BBUklUWSI7Cgl9KShSZXN1bHRNZXRhZGF0YVR5cGUgfHwgKFJlc3VsdE1ldGFkYXRhVHlwZSA9IHt9KSk7CglSZXN1bHRNZXRhZGF0YVR5cGUkMS5kZWZhdWx0ID0gUmVzdWx0TWV0YWRhdGFUeXBlOwoKCXZhciBEZWNvZGVyJDEgPSB7fTsKCgl2YXIgQ2hlY2tzdW1FeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkOCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShDaGVja3N1bUV4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkNCA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBDaGVja3N1bUV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkOChDaGVja3N1bUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBDaGVja3N1bUV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5nZXRDaGVja3N1bUluc3RhbmNlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gbmV3IENoZWNrc3VtRXhjZXB0aW9uKCk7CgkgICAgfTsKCSAgICBDaGVja3N1bUV4Y2VwdGlvbi5raW5kID0gJ0NoZWNrc3VtRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQ2hlY2tzdW1FeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCkpOwoJQ2hlY2tzdW1FeGNlcHRpb24kMS5kZWZhdWx0ID0gQ2hlY2tzdW1FeGNlcHRpb247CgoJdmFyIEdlbmVyaWNHRiQxID0ge307CgoJdmFyIEdlbmVyaWNHRlBvbHkkMSA9IHt9OwoKCXZhciBBYnN0cmFjdEdlbmVyaWNHRiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBYnN0cmFjdEdlbmVyaWNHRiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGNvbnRhaW5zIHV0aWxpdHkgbWV0aG9kcyBmb3IgcGVyZm9ybWluZyBtYXRoZW1hdGljYWwgb3BlcmF0aW9ucyBvdmVyCgkgKiB0aGUgR2Fsb2lzIEZpZWxkcy4gT3BlcmF0aW9ucyB1c2UgYSBnaXZlbiBwcmltaXRpdmUgcG9seW5vbWlhbCBpbiBjYWxjdWxhdGlvbnMuPC9wPgoJICoKCSAqIDxwPlRocm91Z2hvdXQgdGhpcyBwYWNrYWdlLCBlbGVtZW50cyBvZiB0aGUgR0YgYXJlIHJlcHJlc2VudGVkIGFzIGFuIHtAY29kZSBpbnR9CgkgKiBmb3IgY29udmVuaWVuY2UgYW5kIHNwZWVkIChidXQgYXQgdGhlIGNvc3Qgb2YgbWVtb3J5KS4KCSAqIDwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICogQGF1dGhvciBEYXZpZCBPbGl2aWVyCgkgKi8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBBYnN0cmFjdEdlbmVyaWNHRigpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiAyIHRvIHRoZSBwb3dlciBvZiBhIGluIEdGKHNpemUpCgkgICAgICovCgkgICAgQWJzdHJhY3RHZW5lcmljR0YucHJvdG90eXBlLmV4cCA9IGZ1bmN0aW9uIChhKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmV4cFRhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBiYXNlIDIgbG9nIG9mIGEgaW4gR0Yoc2l6ZSkKCSAgICAgKi8KCSAgICBBYnN0cmFjdEdlbmVyaWNHRi5wcm90b3R5cGUubG9nID0gZnVuY3Rpb24gKGEgLyppbnQqLykgewoJICAgICAgICBpZiAoYSA9PT0gMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDUuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiB0aGlzLmxvZ1RhYmxlW2FdOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogSW1wbGVtZW50cyBib3RoIGFkZGl0aW9uIGFuZCBzdWJ0cmFjdGlvbiAtLSB0aGV5IGFyZSB0aGUgc2FtZSBpbiBHRihzaXplKS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gc3VtL2RpZmZlcmVuY2Ugb2YgYSBhbmQgYgoJICAgICAqLwoJICAgIEFic3RyYWN0R2VuZXJpY0dGLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIGEgXiBiOwoJICAgIH07CgkgICAgcmV0dXJuIEFic3RyYWN0R2VuZXJpY0dGOwoJfSgpKTsKCUFic3RyYWN0R2VuZXJpY0dGJDEuZGVmYXVsdCA9IEFic3RyYWN0R2VuZXJpY0dGOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGUG9seSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5yZWVkc29sb21vbiB7Ki8KCXZhciBBYnN0cmFjdEdlbmVyaWNHRl8xJDEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIFN5c3RlbV8xID0gU3lzdGVtJDE7Cgl2YXIgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNCA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5SZXByZXNlbnRzIGEgcG9seW5vbWlhbCB3aG9zZSBjb2VmZmljaWVudHMgYXJlIGVsZW1lbnRzIG9mIGEgR0YuCgkgKiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBhcmUgaW1tdXRhYmxlLjwvcD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdlbmVyaWNHRlBvbHkgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGZpZWxkIHRoZSB7QGxpbmsgR2VuZXJpY0dGfSBpbnN0YW5jZSByZXByZXNlbnRpbmcgdGhlIGZpZWxkIHRvIHVzZQoJICAgICAqIHRvIHBlcmZvcm0gY29tcHV0YXRpb25zCgkgICAgICogQHBhcmFtIGNvZWZmaWNpZW50cyBjb2VmZmljaWVudHMgYXMgaW50cyByZXByZXNlbnRpbmcgZWxlbWVudHMgb2YgR0Yoc2l6ZSksIGFycmFuZ2VkCgkgICAgICogZnJvbSBtb3N0IHNpZ25pZmljYW50IChoaWdoZXN0LXBvd2VyIHRlcm0pIGNvZWZmaWNpZW50IHRvIGxlYXN0IHNpZ25pZmljYW50CgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYXJndW1lbnQgaXMgbnVsbCBvciBlbXB0eSwKCSAgICAgKiBvciBpZiBsZWFkaW5nIGNvZWZmaWNpZW50IGlzIDAgYW5kIHRoaXMgaXMgbm90IGEKCSAgICAgKiBjb25zdGFudCBwb2x5bm9taWFsICh0aGF0IGlzLCBpdCBpcyBub3QgdGhlIG1vbm9taWFsICIwIikKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBHZW5lcmljR0ZQb2x5KGZpZWxkLCBjb2VmZmljaWVudHMpIHsKCSAgICAgICAgaWYgKGNvZWZmaWNpZW50cy5sZW5ndGggPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0aGlzLmZpZWxkID0gZmllbGQ7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHNMZW5ndGggPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICBpZiAoY29lZmZpY2llbnRzTGVuZ3RoID4gMSAmJiBjb2VmZmljaWVudHNbMF0gPT09IDApIHsKCSAgICAgICAgICAgIC8vIExlYWRpbmcgdGVybSBtdXN0IGJlIG5vbi16ZXJvIGZvciBhbnl0aGluZyBleGNlcHQgdGhlIGNvbnN0YW50IHBvbHlub21pYWwgIjAiCgkgICAgICAgICAgICB2YXIgZmlyc3ROb25aZXJvID0gMTsKCSAgICAgICAgICAgIHdoaWxlIChmaXJzdE5vblplcm8gPCBjb2VmZmljaWVudHNMZW5ndGggJiYgY29lZmZpY2llbnRzW2ZpcnN0Tm9uWmVyb10gPT09IDApIHsKCSAgICAgICAgICAgICAgICBmaXJzdE5vblplcm8rKzsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmIChmaXJzdE5vblplcm8gPT09IGNvZWZmaWNpZW50c0xlbmd0aCkgewoJICAgICAgICAgICAgICAgIHRoaXMuY29lZmZpY2llbnRzID0gSW50MzJBcnJheS5mcm9tKFswXSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICB0aGlzLmNvZWZmaWNpZW50cyA9IG5ldyBJbnQzMkFycmF5KGNvZWZmaWNpZW50c0xlbmd0aCAtIGZpcnN0Tm9uWmVybyk7CgkgICAgICAgICAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkoY29lZmZpY2llbnRzLCBmaXJzdE5vblplcm8sIHRoaXMuY29lZmZpY2llbnRzLCAwLCB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGgpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdGhpcy5jb2VmZmljaWVudHMgPSBjb2VmZmljaWVudHM7CgkgICAgICAgIH0KCSAgICB9CgkgICAgR2VuZXJpY0dGUG9seS5wcm90b3R5cGUuZ2V0Q29lZmZpY2llbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGRlZ3JlZSBvZiB0aGlzIHBvbHlub21pYWwKCSAgICAgKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5nZXREZWdyZWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGlzIHBvbHlub21pYWwgaXMgdGhlIG1vbm9taWFsICIwIgoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmlzWmVybyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29lZmZpY2llbnRzWzBdID09PSAwOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBjb2VmZmljaWVudCBvZiB4XmRlZ3JlZSB0ZXJtIGluIHRoaXMgcG9seW5vbWlhbAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmdldENvZWZmaWNpZW50ID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvZWZmaWNpZW50c1t0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGggLSAxIC0gZGVncmVlXTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gZXZhbHVhdGlvbiBvZiB0aGlzIHBvbHlub21pYWwgYXQgYSBnaXZlbiBwb2ludAoJICAgICAqLwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmV2YWx1YXRlQXQgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHJldHVybiB0aGUgeF4wIGNvZWZmaWNpZW50CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgY29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciByZXN1bHQ7CgkgICAgICAgIGlmIChhID09PSAxKSB7CgkgICAgICAgICAgICAvLyBKdXN0IHRoZSBzdW0gb2YgdGhlIGNvZWZmaWNpZW50cwoJICAgICAgICAgICAgcmVzdWx0ID0gMDsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsZW5ndGhfMSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7IGkgIT09IGxlbmd0aF8xOyBpKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgY29lZmZpY2llbnQgPSBjb2VmZmljaWVudHNbaV07CgkgICAgICAgICAgICAgICAgcmVzdWx0ID0gQWJzdHJhY3RHZW5lcmljR0ZfMSQxLmRlZmF1bHQuYWRkT3JTdWJ0cmFjdChyZXN1bHQsIGNvZWZmaWNpZW50KTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgICAgIH0KCSAgICAgICAgcmVzdWx0ID0gY29lZmZpY2llbnRzWzBdOwoJICAgICAgICB2YXIgc2l6ZSA9IGNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgc2l6ZTsgaSsrKSB7CgkgICAgICAgICAgICByZXN1bHQgPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KGZpZWxkLm11bHRpcGx5KGEsIHJlc3VsdCksIGNvZWZmaWNpZW50c1tpXSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLmFkZE9yU3VidHJhY3QgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRoaXMuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiBvdGhlcjsKCSAgICAgICAgfQoJICAgICAgICBpZiAob3RoZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzbWFsbGVyQ29lZmZpY2llbnRzID0gdGhpcy5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBsYXJnZXJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIGlmIChzbWFsbGVyQ29lZmZpY2llbnRzLmxlbmd0aCA+IGxhcmdlckNvZWZmaWNpZW50cy5sZW5ndGgpIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gc21hbGxlckNvZWZmaWNpZW50czsKCSAgICAgICAgICAgIHNtYWxsZXJDb2VmZmljaWVudHMgPSBsYXJnZXJDb2VmZmljaWVudHM7CgkgICAgICAgICAgICBsYXJnZXJDb2VmZmljaWVudHMgPSB0ZW1wOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzdW1EaWZmID0gbmV3IEludDMyQXJyYXkobGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCk7CgkgICAgICAgIHZhciBsZW5ndGhEaWZmID0gbGFyZ2VyQ29lZmZpY2llbnRzLmxlbmd0aCAtIHNtYWxsZXJDb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICAvLyBDb3B5IGhpZ2gtb3JkZXIgdGVybXMgb25seSBmb3VuZCBpbiBoaWdoZXItZGVncmVlIHBvbHlub21pYWwncyBjb2VmZmljaWVudHMKCSAgICAgICAgU3lzdGVtXzEuZGVmYXVsdC5hcnJheWNvcHkobGFyZ2VyQ29lZmZpY2llbnRzLCAwLCBzdW1EaWZmLCAwLCBsZW5ndGhEaWZmKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IGxlbmd0aERpZmY7IGkgPCBsYXJnZXJDb2VmZmljaWVudHMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHN1bURpZmZbaV0gPSBBYnN0cmFjdEdlbmVyaWNHRl8xJDEuZGVmYXVsdC5hZGRPclN1YnRyYWN0KHNtYWxsZXJDb2VmZmljaWVudHNbaSAtIGxlbmd0aERpZmZdLCBsYXJnZXJDb2VmZmljaWVudHNbaV0pOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seSh0aGlzLmZpZWxkLCBzdW1EaWZmKTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5ID0gZnVuY3Rpb24gKG90aGVyKSB7CgkgICAgICAgIGlmICghdGhpcy5maWVsZC5lcXVhbHMob3RoZXIuZmllbGQpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdHZW5lcmljR0ZQb2x5cyBkbyBub3QgaGF2ZSBzYW1lIEdlbmVyaWNHRiBmaWVsZCcpOwoJICAgICAgICB9CgkgICAgICAgIGlmICh0aGlzLmlzWmVybygpIHx8IG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGFDb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIGFMZW5ndGggPSBhQ29lZmZpY2llbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGJDb2VmZmljaWVudHMgPSBvdGhlci5jb2VmZmljaWVudHM7CgkgICAgICAgIHZhciBiTGVuZ3RoID0gYkNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoYUxlbmd0aCArIGJMZW5ndGggLSAxKTsKCSAgICAgICAgdmFyIGZpZWxkID0gdGhpcy5maWVsZDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBhTGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBhQ29lZmYgPSBhQ29lZmZpY2llbnRzW2ldOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBiTGVuZ3RoOyBqKyspIHsKCSAgICAgICAgICAgICAgICBwcm9kdWN0W2kgKyBqXSA9IEFic3RyYWN0R2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocHJvZHVjdFtpICsgal0sIGZpZWxkLm11bHRpcGx5KGFDb2VmZiwgYkNvZWZmaWNpZW50c1tqXSkpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5tdWx0aXBseVNjYWxhciA9IGZ1bmN0aW9uIChzY2FsYXIgLyppbnQqLykgewoJICAgICAgICBpZiAoc2NhbGFyID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy5maWVsZC5nZXRaZXJvKCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHNjYWxhciA9PT0gMSkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXM7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHNpemUgPSB0aGlzLmNvZWZmaWNpZW50cy5sZW5ndGg7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBwcm9kdWN0ID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIHByb2R1Y3RbaV0gPSBmaWVsZC5tdWx0aXBseShjb2VmZmljaWVudHNbaV0sIHNjYWxhcik7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBHZW5lcmljR0ZQb2x5KGZpZWxkLCBwcm9kdWN0KTsKCSAgICB9OwoJICAgIEdlbmVyaWNHRlBvbHkucHJvdG90eXBlLm11bHRpcGx5QnlNb25vbWlhbCA9IGZ1bmN0aW9uIChkZWdyZWUgLyppbnQqLywgY29lZmZpY2llbnQgLyppbnQqLykgewoJICAgICAgICBpZiAoZGVncmVlIDwgMCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDQuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChjb2VmZmljaWVudCA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmllbGQuZ2V0WmVybygpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSB0aGlzLmNvZWZmaWNpZW50czsKCSAgICAgICAgdmFyIHNpemUgPSBjb2VmZmljaWVudHMubGVuZ3RoOwoJICAgICAgICB2YXIgcHJvZHVjdCA9IG5ldyBJbnQzMkFycmF5KHNpemUgKyBkZWdyZWUpOwoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHNpemU7IGkrKykgewoJICAgICAgICAgICAgcHJvZHVjdFtpXSA9IGZpZWxkLm11bHRpcGx5KGNvZWZmaWNpZW50c1tpXSwgY29lZmZpY2llbnQpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seShmaWVsZCwgcHJvZHVjdCk7CgkgICAgfTsKCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS5kaXZpZGUgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKCF0aGlzLmZpZWxkLmVxdWFscyhvdGhlci5maWVsZCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoJ0dlbmVyaWNHRlBvbHlzIGRvIG5vdCBoYXZlIHNhbWUgR2VuZXJpY0dGIGZpZWxkJyk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG90aGVyLmlzWmVybygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkNC5kZWZhdWx0KCdEaXZpZGUgYnkgMCcpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIHZhciBxdW90aWVudCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHJlbWFpbmRlciA9IHRoaXM7CgkgICAgICAgIHZhciBkZW5vbWluYXRvckxlYWRpbmdUZXJtID0gb3RoZXIuZ2V0Q29lZmZpY2llbnQob3RoZXIuZ2V0RGVncmVlKCkpOwoJICAgICAgICB2YXIgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0gPSBmaWVsZC5pbnZlcnNlKGRlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICB3aGlsZSAocmVtYWluZGVyLmdldERlZ3JlZSgpID49IG90aGVyLmdldERlZ3JlZSgpICYmICFyZW1haW5kZXIuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgIHZhciBkZWdyZWVEaWZmZXJlbmNlID0gcmVtYWluZGVyLmdldERlZ3JlZSgpIC0gb3RoZXIuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICB2YXIgc2NhbGUgPSBmaWVsZC5tdWx0aXBseShyZW1haW5kZXIuZ2V0Q29lZmZpY2llbnQocmVtYWluZGVyLmdldERlZ3JlZSgpKSwgaW52ZXJzZURlbm9taW5hdG9yTGVhZGluZ1Rlcm0pOwoJICAgICAgICAgICAgdmFyIHRlcm0gPSBvdGhlci5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZmVyZW5jZSwgc2NhbGUpOwoJICAgICAgICAgICAgdmFyIGl0ZXJhdGlvblF1b3RpZW50ID0gZmllbGQuYnVpbGRNb25vbWlhbChkZWdyZWVEaWZmZXJlbmNlLCBzY2FsZSk7CgkgICAgICAgICAgICBxdW90aWVudCA9IHF1b3RpZW50LmFkZE9yU3VidHJhY3QoaXRlcmF0aW9uUXVvdGllbnQpOwoJICAgICAgICAgICAgcmVtYWluZGVyID0gcmVtYWluZGVyLmFkZE9yU3VidHJhY3QodGVybSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFtxdW90aWVudCwgcmVtYWluZGVyXTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBHZW5lcmljR0ZQb2x5LnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIHJlc3VsdCA9ICcnOwoJICAgICAgICBmb3IgKHZhciBkZWdyZWUgPSB0aGlzLmdldERlZ3JlZSgpOyBkZWdyZWUgPj0gMDsgZGVncmVlLS0pIHsKCSAgICAgICAgICAgIHZhciBjb2VmZmljaWVudCA9IHRoaXMuZ2V0Q29lZmZpY2llbnQoZGVncmVlKTsKCSAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIGlmIChjb2VmZmljaWVudCA8IDApIHsKCSAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgLSAnOwoJICAgICAgICAgICAgICAgICAgICBjb2VmZmljaWVudCA9IC1jb2VmZmljaWVudDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQubGVuZ3RoID4gMCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICcgKyAnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgPT09IDAgfHwgY29lZmZpY2llbnQgIT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGFscGhhUG93ZXIgPSB0aGlzLmZpZWxkLmxvZyhjb2VmZmljaWVudCk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChhbHBoYVBvd2VyID09PSAwKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJzEnOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgaWYgKGFscGhhUG93ZXIgPT09IDEpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAnYSc7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgKz0gJ2FeJzsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSBhbHBoYVBvd2VyOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGlmIChkZWdyZWUgIT09IDApIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKGRlZ3JlZSA9PT0gMSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9ICd4JzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCArPSAneF4nOwoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0ICs9IGRlZ3JlZTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIEdlbmVyaWNHRlBvbHk7Cgl9KCkpOwoJR2VuZXJpY0dGUG9seSQxLmRlZmF1bHQgPSBHZW5lcmljR0ZQb2x5OwoKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDcgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgRXhjZXB0aW9uXzEkMyA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcml0aG1ldGljRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ3KEFyaXRobWV0aWNFeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gQXJpdGhtZXRpY0V4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcml0aG1ldGljRXhjZXB0aW9uLmtpbmQgPSAnQXJpdGhtZXRpY0V4Y2VwdGlvbic7CgkgICAgcmV0dXJuIEFyaXRobWV0aWNFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCkpOwoJQXJpdGhtZXRpY0V4Y2VwdGlvbiQxLmRlZmF1bHQgPSBBcml0aG1ldGljRXhjZXB0aW9uOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoR2VuZXJpY0dGJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uLnJlZWRzb2xvbW9uIHsqLwoJdmFyIEdlbmVyaWNHRlBvbHlfMSQxID0gR2VuZXJpY0dGUG9seSQxOwoJdmFyIEFic3RyYWN0R2VuZXJpY0dGXzEgPSBBYnN0cmFjdEdlbmVyaWNHRiQxOwoJdmFyIEludGVnZXJfMSQxID0gSW50ZWdlciQxOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDMgPSBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBBcml0aG1ldGljRXhjZXB0aW9uXzEgPSBBcml0aG1ldGljRXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgY29udGFpbnMgdXRpbGl0eSBtZXRob2RzIGZvciBwZXJmb3JtaW5nIG1hdGhlbWF0aWNhbCBvcGVyYXRpb25zIG92ZXIKCSAqIHRoZSBHYWxvaXMgRmllbGRzLiBPcGVyYXRpb25zIHVzZSBhIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsIGluIGNhbGN1bGF0aW9ucy48L3A+CgkgKgoJICogPHA+VGhyb3VnaG91dCB0aGlzIHBhY2thZ2UsIGVsZW1lbnRzIG9mIHRoZSBHRiBhcmUgcmVwcmVzZW50ZWQgYXMgYW4ge0Bjb2RlIGludH0KCSAqIGZvciBjb252ZW5pZW5jZSBhbmQgc3BlZWQgKGJ1dCBhdCB0aGUgY29zdCBvZiBtZW1vcnkpLgoJICogPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKiBAYXV0aG9yIERhdmlkIE9saXZpZXIKCSAqLwoJdmFyIEdlbmVyaWNHRiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkNihHZW5lcmljR0YsIF9zdXBlcik7CgkgICAgLyoqCgkgICAgICogQ3JlYXRlIGEgcmVwcmVzZW50YXRpb24gb2YgR0Yoc2l6ZSkgdXNpbmcgdGhlIGdpdmVuIHByaW1pdGl2ZSBwb2x5bm9taWFsLgoJICAgICAqCgkgICAgICogQHBhcmFtIHByaW1pdGl2ZSBpcnJlZHVjaWJsZSBwb2x5bm9taWFsIHdob3NlIGNvZWZmaWNpZW50cyBhcmUgcmVwcmVzZW50ZWQgYnkKCSAgICAgKiAgdGhlIGJpdHMgb2YgYW4gaW50LCB3aGVyZSB0aGUgbGVhc3Qtc2lnbmlmaWNhbnQgYml0IHJlcHJlc2VudHMgdGhlIGNvbnN0YW50CgkgICAgICogIGNvZWZmaWNpZW50CgkgICAgICogQHBhcmFtIHNpemUgdGhlIHNpemUgb2YgdGhlIGZpZWxkCgkgICAgICogQHBhcmFtIGIgdGhlIGZhY3RvciBiIGluIHRoZSBnZW5lcmF0b3IgcG9seW5vbWlhbCBjYW4gYmUgMC0gb3IgMS1iYXNlZAoJICAgICAqICAoZyh4KSA9ICh4K2FeYikoeCthXihiKzEpKS4uLih4K2FeKGIrMnQtMSkpKS4KCSAgICAgKiAgSW4gbW9zdCBjYXNlcyBpdCBzaG91bGQgYmUgMSwgYnV0IGZvciBRUiBjb2RlIGl0IGlzIDAuCgkgICAgICovCgkgICAgZnVuY3Rpb24gR2VuZXJpY0dGKHByaW1pdGl2ZSAvKmludCovLCBzaXplIC8qaW50Ki8sIGdlbmVyYXRvckJhc2UgLyppbnQqLykgewoJICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzKSB8fCB0aGlzOwoJICAgICAgICBfdGhpcy5wcmltaXRpdmUgPSBwcmltaXRpdmU7CgkgICAgICAgIF90aGlzLnNpemUgPSBzaXplOwoJICAgICAgICBfdGhpcy5nZW5lcmF0b3JCYXNlID0gZ2VuZXJhdG9yQmFzZTsKCSAgICAgICAgdmFyIGV4cFRhYmxlID0gbmV3IEludDMyQXJyYXkoc2l6ZSk7CgkgICAgICAgIHZhciB4ID0gMTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplOyBpKyspIHsKCSAgICAgICAgICAgIGV4cFRhYmxlW2ldID0geDsKCSAgICAgICAgICAgIHggKj0gMjsgLy8gd2UncmUgYXNzdW1pbmcgdGhlIGdlbmVyYXRvciBhbHBoYSBpcyAyCgkgICAgICAgICAgICBpZiAoeCA+PSBzaXplKSB7CgkgICAgICAgICAgICAgICAgeCBePSBwcmltaXRpdmU7CgkgICAgICAgICAgICAgICAgeCAmPSBzaXplIC0gMTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBfdGhpcy5leHBUYWJsZSA9IGV4cFRhYmxlOwoJICAgICAgICB2YXIgbG9nVGFibGUgPSBuZXcgSW50MzJBcnJheShzaXplKTsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBzaXplIC0gMTsgaSsrKSB7CgkgICAgICAgICAgICBsb2dUYWJsZVtleHBUYWJsZVtpXV0gPSBpOwoJICAgICAgICB9CgkgICAgICAgIF90aGlzLmxvZ1RhYmxlID0gbG9nVGFibGU7CgkgICAgICAgIC8vIGxvZ1RhYmxlWzBdID09IDAgYnV0IHRoaXMgc2hvdWxkIG5ldmVyIGJlIHVzZWQKCSAgICAgICAgX3RoaXMuemVybyA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzBdKSk7CgkgICAgICAgIF90aGlzLm9uZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEkMS5kZWZhdWx0KF90aGlzLCBJbnQzMkFycmF5LmZyb20oWzFdKSk7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRaZXJvID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5nZXRPbmUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm9uZTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdGhlIG1vbm9taWFsIHJlcHJlc2VudGluZyBjb2VmZmljaWVudCAqIHheZGVncmVlCgkgICAgICovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5idWlsZE1vbm9taWFsID0gZnVuY3Rpb24gKGRlZ3JlZSAvKmludCovLCBjb2VmZmljaWVudCAvKmludCovKSB7CgkgICAgICAgIGlmIChkZWdyZWUgPCAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uXzEkMy5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvZWZmaWNpZW50ID09PSAwKSB7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy56ZXJvOwoJICAgICAgICB9CgkgICAgICAgIHZhciBjb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheShkZWdyZWUgKyAxKTsKCSAgICAgICAgY29lZmZpY2llbnRzWzBdID0gY29lZmZpY2llbnQ7CgkgICAgICAgIHJldHVybiBuZXcgR2VuZXJpY0dGUG9seV8xJDEuZGVmYXVsdCh0aGlzLCBjb2VmZmljaWVudHMpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBtdWx0aXBsaWNhdGl2ZSBpbnZlcnNlIG9mIGEKCSAgICAgKi8KCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmludmVyc2UgPSBmdW5jdGlvbiAoYSAvKmludCovKSB7CgkgICAgICAgIGlmIChhID09PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQXJpdGhtZXRpY0V4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5leHBUYWJsZVt0aGlzLnNpemUgLSB0aGlzLmxvZ1RhYmxlW2FdIC0gMV07CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHByb2R1Y3Qgb2YgYSBhbmQgYiBpbiBHRihzaXplKQoJICAgICAqLwoJICAgIEdlbmVyaWNHRi5wcm90b3R5cGUubXVsdGlwbHkgPSBmdW5jdGlvbiAoYSAvKmludCovLCBiIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGEgPT09IDAgfHwgYiA9PT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIDA7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZXhwVGFibGVbKHRoaXMubG9nVGFibGVbYV0gKyB0aGlzLmxvZ1RhYmxlW2JdKSAlICh0aGlzLnNpemUgLSAxKV07CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldFNpemUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnNpemU7CgkgICAgfTsKCSAgICBHZW5lcmljR0YucHJvdG90eXBlLmdldEdlbmVyYXRvckJhc2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmdlbmVyYXRvckJhc2U7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICgnR0YoMHgnICsgSW50ZWdlcl8xJDEuZGVmYXVsdC50b0hleFN0cmluZyh0aGlzLnByaW1pdGl2ZSkgKyAnLCcgKyB0aGlzLnNpemUgKyAnKScpOwoJICAgIH07CgkgICAgR2VuZXJpY0dGLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICByZXR1cm4gbyA9PT0gdGhpczsKCSAgICB9OwoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEyID0gbmV3IEdlbmVyaWNHRigweDEwNjksIDQwOTYsIDEpOyAvLyB4XjEyICsgeF42ICsgeF41ICsgeF4zICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19EQVRBXzEwID0gbmV3IEdlbmVyaWNHRigweDQwOSwgMTAyNCwgMSk7IC8vIHheMTAgKyB4XjMgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfNiA9IG5ldyBHZW5lcmljR0YoMHg0MywgNjQsIDEpOyAvLyB4XjYgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5BWlRFQ19QQVJBTSA9IG5ldyBHZW5lcmljR0YoMHgxMywgMTYsIDEpOyAvLyB4XjQgKyB4ICsgMQoJICAgIEdlbmVyaWNHRi5RUl9DT0RFX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTFkLCAyNTYsIDApOyAvLyB4XjggKyB4XjQgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkRBVEFfTUFUUklYX0ZJRUxEXzI1NiA9IG5ldyBHZW5lcmljR0YoMHgwMTJkLCAyNTYsIDEpOyAvLyB4XjggKyB4XjUgKyB4XjMgKyB4XjIgKyAxCgkgICAgR2VuZXJpY0dGLkFaVEVDX0RBVEFfOCA9IEdlbmVyaWNHRi5EQVRBX01BVFJJWF9GSUVMRF8yNTY7CgkgICAgR2VuZXJpY0dGLk1BWElDT0RFX0ZJRUxEXzY0ID0gR2VuZXJpY0dGLkFaVEVDX0RBVEFfNjsKCSAgICByZXR1cm4gR2VuZXJpY0dGOwoJfShBYnN0cmFjdEdlbmVyaWNHRl8xLmRlZmF1bHQpKTsKCUdlbmVyaWNHRiQxLmRlZmF1bHQgPSBHZW5lcmljR0Y7CgoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciQxID0ge307CgoJdmFyIFJlZWRTb2xvbW9uRXhjZXB0aW9uJDEgPSB7fTsKCgl2YXIgX19leHRlbmRzJDUgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVlZFNvbG9tb25FeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDIgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgUmVlZFNvbG9tb25FeGNlcHRpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDUoUmVlZFNvbG9tb25FeGNlcHRpb24sIF9zdXBlcik7CgkgICAgZnVuY3Rpb24gUmVlZFNvbG9tb25FeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgUmVlZFNvbG9tb25FeGNlcHRpb24ua2luZCA9ICdSZWVkU29sb21vbkV4Y2VwdGlvbic7CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQyLmRlZmF1bHQpKTsKCVJlZWRTb2xvbW9uRXhjZXB0aW9uJDEuZGVmYXVsdCA9IFJlZWRTb2xvbW9uRXhjZXB0aW9uOwoKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSA9IHt9OwoKCXZhciBfX2V4dGVuZHMkNCA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7CgkgICAgdmFyIGV4dGVuZFN0YXRpY3MgPSBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8CgkgICAgICAgICAgICAoeyBfX3Byb3RvX186IFtdIH0gaW5zdGFuY2VvZiBBcnJheSAmJiBmdW5jdGlvbiAoZCwgYikgeyBkLl9fcHJvdG9fXyA9IGI7IH0pIHx8CgkgICAgICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTsKCSAgICAgICAgcmV0dXJuIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgfTsKCSAgICByZXR1cm4gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9CgkgICAgICAgIGQucHJvdG90eXBlID0gYiA9PT0gbnVsbCA/IE9iamVjdC5jcmVhdGUoYikgOiAoX18ucHJvdG90eXBlID0gYi5wcm90b3R5cGUsIG5ldyBfXygpKTsKCSAgICB9OwoJfSkoKTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShJbGxlZ2FsU3RhdGVFeGNlcHRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIEV4Y2VwdGlvbl8xJDEgPSBFeGNlcHRpb24kMTsKCS8qKgoJICogQ3VzdG9tIEVycm9yIGNsYXNzIG9mIHR5cGUgRXhjZXB0aW9uLgoJICovCgl2YXIgSWxsZWdhbFN0YXRlRXhjZXB0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyQ0KElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBJbGxlZ2FsU3RhdGVFeGNlcHRpb24oKSB7CgkgICAgICAgIHJldHVybiBfc3VwZXIgIT09IG51bGwgJiYgX3N1cGVyLmFwcGx5KHRoaXMsIGFyZ3VtZW50cykgfHwgdGhpczsKCSAgICB9CgkgICAgSWxsZWdhbFN0YXRlRXhjZXB0aW9uLmtpbmQgPSAnSWxsZWdhbFN0YXRlRXhjZXB0aW9uJzsKCSAgICByZXR1cm4gSWxsZWdhbFN0YXRlRXhjZXB0aW9uOwoJfShFeGNlcHRpb25fMSQxLmRlZmF1bHQpKTsKCUlsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxLmRlZmF1bHQgPSBJbGxlZ2FsU3RhdGVFeGNlcHRpb247CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShSZWVkU29sb21vbkRlY29kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5jb21tb24ucmVlZHNvbG9tb24geyovCgl2YXIgR2VuZXJpY0dGXzEkMSA9IEdlbmVyaWNHRiQxOwoJdmFyIEdlbmVyaWNHRlBvbHlfMSA9IEdlbmVyaWNHRlBvbHkkMTsKCXZhciBSZWVkU29sb21vbkV4Y2VwdGlvbl8xID0gUmVlZFNvbG9tb25FeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMSA9IElsbGVnYWxTdGF0ZUV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5JbXBsZW1lbnRzIFJlZWQtU29sb21vbiBkZWNvZGluZywgYXMgdGhlIG5hbWUgaW1wbGllcy48L3A+CgkgKgoJICogPHA+VGhlIGFsZ29yaXRobSB3aWxsIG5vdCBiZSBleHBsYWluZWQgaGVyZSwgYnV0IHRoZSBmb2xsb3dpbmcgcmVmZXJlbmNlcyB3ZXJlIGhlbHBmdWwKCSAqIGluIGNyZWF0aW5nIHRoaXMgaW1wbGVtZW50YXRpb246PC9wPgoJICoKCSAqIDx1bD4KCSAqIDxsaT5CcnVjZSBNYWdncy4KCSAqIDxhIGhyZWY9Imh0dHA6Ly93d3cuY3MuY211LmVkdS9hZnMvY3MuY211LmVkdS9wcm9qZWN0L3BzY2ljby1ndXliL3JlYWx3b3JsZC93d3cvcnNfZGVjb2RlLnBzIj4KCSAqICJEZWNvZGluZyBSZWVkLVNvbG9tb24gQ29kZXMiPC9hPiAoc2VlIGRpc2N1c3Npb24gb2YgRm9ybmV5J3MgRm9ybXVsYSk8L2xpPgoJICogPGxpPkouSS4gSGFsbC4gPGEgaHJlZj0id3d3Lm10aC5tc3UuZWR1L35qaGFsbC9jbGFzc2VzL2NvZGVub3Rlcy9HUlMucGRmIj4KCSAqICJDaGFwdGVyIDUuIEdlbmVyYWxpemVkIFJlZWQtU29sb21vbiBDb2RlcyI8L2E+CgkgKiAoc2VlIGRpc2N1c3Npb24gb2YgRXVjbGlkZWFuIGFsZ29yaXRobSk8L2xpPgoJICogPC91bD4KCSAqCgkgKiA8cD5NdWNoIGNyZWRpdCBpcyBkdWUgdG8gV2lsbGlhbSBSdWNrbGlkZ2Ugc2luY2UgcG9ydGlvbnMgb2YgdGhpcyBjb2RlIGFyZSBhbiBpbmRpcmVjdAoJICogcG9ydCBvZiBoaXMgQysrIFJlZWQtU29sb21vbiBpbXBsZW1lbnRhdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBhdXRob3IgV2lsbGlhbSBSdWNrbGlkZ2UKCSAqIEBhdXRob3Igc2FuZm9yZHNxdWlyZXMKCSAqLwoJdmFyIFJlZWRTb2xvbW9uRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBSZWVkU29sb21vbkRlY29kZXIoZmllbGQpIHsKCSAgICAgICAgdGhpcy5maWVsZCA9IGZpZWxkOwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5EZWNvZGVzIGdpdmVuIHNldCBvZiByZWNlaXZlZCBjb2Rld29yZHMsIHdoaWNoIGluY2x1ZGUgYm90aCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uCgkgICAgICogY29kZXdvcmRzLiBSZWFsbHksIHRoaXMgbWVhbnMgaXQgdXNlcyBSZWVkLVNvbG9tb24gdG8gZGV0ZWN0IGFuZCBjb3JyZWN0IGVycm9ycywgaW4tcGxhY2UsCgkgICAgICogaW4gdGhlIGlucHV0LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByZWNlaXZlZCBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcwoJICAgICAqIEBwYXJhbSB0d29TIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBhdmFpbGFibGUKCSAgICAgKiBAdGhyb3dzIFJlZWRTb2xvbW9uRXhjZXB0aW9uIGlmIGRlY29kaW5nIGZhaWxzIGZvciBhbnkgcmVhc29uCgkgICAgICovCgkgICAgUmVlZFNvbG9tb25EZWNvZGVyLnByb3RvdHlwZS5kZWNvZGUgPSBmdW5jdGlvbiAocmVjZWl2ZWQsIHR3b1MgLyppbnQqLykgewoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgcG9seSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgcmVjZWl2ZWQpOwoJICAgICAgICB2YXIgc3luZHJvbWVDb2VmZmljaWVudHMgPSBuZXcgSW50MzJBcnJheSh0d29TKTsKCSAgICAgICAgdmFyIG5vRXJyb3IgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHR3b1M7IGkrKykgewoJICAgICAgICAgICAgdmFyIGV2YWxSZXN1bHQgPSBwb2x5LmV2YWx1YXRlQXQoZmllbGQuZXhwKGkgKyBmaWVsZC5nZXRHZW5lcmF0b3JCYXNlKCkpKTsKCSAgICAgICAgICAgIHN5bmRyb21lQ29lZmZpY2llbnRzW3N5bmRyb21lQ29lZmZpY2llbnRzLmxlbmd0aCAtIDEgLSBpXSA9IGV2YWxSZXN1bHQ7CgkgICAgICAgICAgICBpZiAoZXZhbFJlc3VsdCAhPT0gMCkgewoJICAgICAgICAgICAgICAgIG5vRXJyb3IgPSBmYWxzZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBpZiAobm9FcnJvcikgewoJICAgICAgICAgICAgcmV0dXJuOwoJICAgICAgICB9CgkgICAgICAgIHZhciBzeW5kcm9tZSA9IG5ldyBHZW5lcmljR0ZQb2x5XzEuZGVmYXVsdChmaWVsZCwgc3luZHJvbWVDb2VmZmljaWVudHMpOwoJICAgICAgICB2YXIgc2lnbWFPbWVnYSA9IHRoaXMucnVuRXVjbGlkZWFuQWxnb3JpdGhtKGZpZWxkLmJ1aWxkTW9ub21pYWwodHdvUywgMSksIHN5bmRyb21lLCB0d29TKTsKCSAgICAgICAgdmFyIHNpZ21hID0gc2lnbWFPbWVnYVswXTsKCSAgICAgICAgdmFyIG9tZWdhID0gc2lnbWFPbWVnYVsxXTsKCSAgICAgICAgdmFyIGVycm9yTG9jYXRpb25zID0gdGhpcy5maW5kRXJyb3JMb2NhdGlvbnMoc2lnbWEpOwoJICAgICAgICB2YXIgZXJyb3JNYWduaXR1ZGVzID0gdGhpcy5maW5kRXJyb3JNYWduaXR1ZGVzKG9tZWdhLCBlcnJvckxvY2F0aW9ucyk7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZXJyb3JMb2NhdGlvbnMubGVuZ3RoOyBpKyspIHsKCSAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHJlY2VpdmVkLmxlbmd0aCAtIDEgLSBmaWVsZC5sb2coZXJyb3JMb2NhdGlvbnNbaV0pOwoJICAgICAgICAgICAgaWYgKHBvc2l0aW9uIDwgMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ0JhZCBlcnJvciBsb2NhdGlvbicpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVjZWl2ZWRbcG9zaXRpb25dID0gR2VuZXJpY0dGXzEkMS5kZWZhdWx0LmFkZE9yU3VidHJhY3QocmVjZWl2ZWRbcG9zaXRpb25dLCBlcnJvck1hZ25pdHVkZXNbaV0pOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBSZWVkU29sb21vbkRlY29kZXIucHJvdG90eXBlLnJ1bkV1Y2xpZGVhbkFsZ29yaXRobSA9IGZ1bmN0aW9uIChhLCBiLCBSIC8qaW50Ki8pIHsKCSAgICAgICAgLy8gQXNzdW1lIGEncyBkZWdyZWUgaXMgPj0gYidzCgkgICAgICAgIGlmIChhLmdldERlZ3JlZSgpIDwgYi5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgdmFyIHRlbXAgPSBhOwoJICAgICAgICAgICAgYSA9IGI7CgkgICAgICAgICAgICBiID0gdGVtcDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmllbGQgPSB0aGlzLmZpZWxkOwoJICAgICAgICB2YXIgckxhc3QgPSBhOwoJICAgICAgICB2YXIgciA9IGI7CgkgICAgICAgIHZhciB0TGFzdCA9IGZpZWxkLmdldFplcm8oKTsKCSAgICAgICAgdmFyIHQgPSBmaWVsZC5nZXRPbmUoKTsKCSAgICAgICAgLy8gUnVuIEV1Y2xpZGVhbiBhbGdvcml0aG0gdW50aWwgcidzIGRlZ3JlZSBpcyBsZXNzIHRoYW4gUi8yCgkgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IChSIC8gMiB8IDApKSB7CgkgICAgICAgICAgICB2YXIgckxhc3RMYXN0ID0gckxhc3Q7CgkgICAgICAgICAgICB2YXIgdExhc3RMYXN0ID0gdExhc3Q7CgkgICAgICAgICAgICByTGFzdCA9IHI7CgkgICAgICAgICAgICB0TGFzdCA9IHQ7CgkgICAgICAgICAgICAvLyBEaXZpZGUgckxhc3RMYXN0IGJ5IHJMYXN0LCB3aXRoIHF1b3RpZW50IGluIHEgYW5kIHJlbWFpbmRlciBpbiByCgkgICAgICAgICAgICBpZiAockxhc3QuaXNaZXJvKCkpIHsKCSAgICAgICAgICAgICAgICAvLyBPb3BzLCBFdWNsaWRlYW4gYWxnb3JpdGhtIGFscmVhZHkgdGVybWluYXRlZD8KCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUmVlZFNvbG9tb25FeGNlcHRpb25fMS5kZWZhdWx0KCdyX3tpLTF9IHdhcyB6ZXJvJyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByID0gckxhc3RMYXN0OwoJICAgICAgICAgICAgdmFyIHEgPSBmaWVsZC5nZXRaZXJvKCk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3JMZWFkaW5nVGVybSA9IHJMYXN0LmdldENvZWZmaWNpZW50KHJMYXN0LmdldERlZ3JlZSgpKTsKCSAgICAgICAgICAgIHZhciBkbHRJbnZlcnNlID0gZmllbGQuaW52ZXJzZShkZW5vbWluYXRvckxlYWRpbmdUZXJtKTsKCSAgICAgICAgICAgIHdoaWxlIChyLmdldERlZ3JlZSgpID49IHJMYXN0LmdldERlZ3JlZSgpICYmICFyLmlzWmVybygpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlZ3JlZURpZmYgPSByLmdldERlZ3JlZSgpIC0gckxhc3QuZ2V0RGVncmVlKCk7CgkgICAgICAgICAgICAgICAgdmFyIHNjYWxlID0gZmllbGQubXVsdGlwbHkoci5nZXRDb2VmZmljaWVudChyLmdldERlZ3JlZSgpKSwgZGx0SW52ZXJzZSk7CgkgICAgICAgICAgICAgICAgcSA9IHEuYWRkT3JTdWJ0cmFjdChmaWVsZC5idWlsZE1vbm9taWFsKGRlZ3JlZURpZmYsIHNjYWxlKSk7CgkgICAgICAgICAgICAgICAgciA9IHIuYWRkT3JTdWJ0cmFjdChyTGFzdC5tdWx0aXBseUJ5TW9ub21pYWwoZGVncmVlRGlmZiwgc2NhbGUpKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHQgPSBxLm11bHRpcGx5KHRMYXN0KS5hZGRPclN1YnRyYWN0KHRMYXN0TGFzdCk7CgkgICAgICAgICAgICBpZiAoci5nZXREZWdyZWUoKSA+PSByTGFzdC5nZXREZWdyZWUoKSkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsU3RhdGVFeGNlcHRpb25fMS5kZWZhdWx0KCdEaXZpc2lvbiBhbGdvcml0aG0gZmFpbGVkIHRvIHJlZHVjZSBwb2x5bm9taWFsPycpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciBzaWdtYVRpbGRlQXRaZXJvID0gdC5nZXRDb2VmZmljaWVudCgwKTsKCSAgICAgICAgaWYgKHNpZ21hVGlsZGVBdFplcm8gPT09IDApIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBSZWVkU29sb21vbkV4Y2VwdGlvbl8xLmRlZmF1bHQoJ3NpZ21hVGlsZGUoMCkgd2FzIHplcm8nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgaW52ZXJzZSA9IGZpZWxkLmludmVyc2Uoc2lnbWFUaWxkZUF0WmVybyk7CgkgICAgICAgIHZhciBzaWdtYSA9IHQubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHZhciBvbWVnYSA9IHIubXVsdGlwbHlTY2FsYXIoaW52ZXJzZSk7CgkgICAgICAgIHJldHVybiBbc2lnbWEsIG9tZWdhXTsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTG9jYXRpb25zID0gZnVuY3Rpb24gKGVycm9yTG9jYXRvcikgewoJICAgICAgICAvLyBUaGlzIGlzIGEgZGlyZWN0IGFwcGxpY2F0aW9uIG9mIENoaWVuJ3Mgc2VhcmNoCgkgICAgICAgIHZhciBudW1FcnJvcnMgPSBlcnJvckxvY2F0b3IuZ2V0RGVncmVlKCk7CgkgICAgICAgIGlmIChudW1FcnJvcnMgPT09IDEpIHsgLy8gc2hvcnRjdXQKCSAgICAgICAgICAgIHJldHVybiBJbnQzMkFycmF5LmZyb20oW2Vycm9yTG9jYXRvci5nZXRDb2VmZmljaWVudCgxKV0pOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgSW50MzJBcnJheShudW1FcnJvcnMpOwoJICAgICAgICB2YXIgZSA9IDA7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZmllbGQuZ2V0U2l6ZSgpICYmIGUgPCBudW1FcnJvcnM7IGkrKykgewoJICAgICAgICAgICAgaWYgKGVycm9yTG9jYXRvci5ldmFsdWF0ZUF0KGkpID09PSAwKSB7CgkgICAgICAgICAgICAgICAgcmVzdWx0W2VdID0gZmllbGQuaW52ZXJzZShpKTsKCSAgICAgICAgICAgICAgICBlKys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGUgIT09IG51bUVycm9ycykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IFJlZWRTb2xvbW9uRXhjZXB0aW9uXzEuZGVmYXVsdCgnRXJyb3IgbG9jYXRvciBkZWdyZWUgZG9lcyBub3QgbWF0Y2ggbnVtYmVyIG9mIHJvb3RzJyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIFJlZWRTb2xvbW9uRGVjb2Rlci5wcm90b3R5cGUuZmluZEVycm9yTWFnbml0dWRlcyA9IGZ1bmN0aW9uIChlcnJvckV2YWx1YXRvciwgZXJyb3JMb2NhdGlvbnMpIHsKCSAgICAgICAgLy8gVGhpcyBpcyBkaXJlY3RseSBhcHBseWluZyBGb3JuZXkncyBGb3JtdWxhCgkgICAgICAgIHZhciBzID0gZXJyb3JMb2NhdGlvbnMubGVuZ3RoOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IEludDMyQXJyYXkocyk7CgkgICAgICAgIHZhciBmaWVsZCA9IHRoaXMuZmllbGQ7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgczsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgeGlJbnZlcnNlID0gZmllbGQuaW52ZXJzZShlcnJvckxvY2F0aW9uc1tpXSk7CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSAxOwoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBzOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaSAhPT0gaikgewoJICAgICAgICAgICAgICAgICAgICAvLyBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLAoJICAgICAgICAgICAgICAgICAgICAvLyAgICBHZW5lcmljR0YuYWRkT3JTdWJ0cmFjdCgxLCBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKSkpCgkgICAgICAgICAgICAgICAgICAgIC8vIEFib3ZlIHNob3VsZCB3b3JrIGJ1dCBmYWlscyBvbiBzb21lIEFwcGxlIGFuZCBMaW51eCBKREtzIGR1ZSB0byBhIEhvdHNwb3QgYnVnLgoJICAgICAgICAgICAgICAgICAgICAvLyBCZWxvdyBpcyBhIGZ1bm55LWxvb2tpbmcgd29ya2Fyb3VuZCBmcm9tIFN0ZXZlbiBQYXJrZXMKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm0gPSBmaWVsZC5tdWx0aXBseShlcnJvckxvY2F0aW9uc1tqXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIHRlcm1QbHVzMSA9ICh0ZXJtICYgMHgxKSA9PT0gMCA/IHRlcm0gfCAxIDogdGVybSAmIH4xOwoJICAgICAgICAgICAgICAgICAgICBkZW5vbWluYXRvciA9IGZpZWxkLm11bHRpcGx5KGRlbm9taW5hdG9yLCB0ZXJtUGx1czEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KGVycm9yRXZhbHVhdG9yLmV2YWx1YXRlQXQoeGlJbnZlcnNlKSwgZmllbGQuaW52ZXJzZShkZW5vbWluYXRvcikpOwoJICAgICAgICAgICAgaWYgKGZpZWxkLmdldEdlbmVyYXRvckJhc2UoKSAhPT0gMCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtpXSA9IGZpZWxkLm11bHRpcGx5KHJlc3VsdFtpXSwgeGlJbnZlcnNlKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgcmV0dXJuIFJlZWRTb2xvbW9uRGVjb2RlcjsKCX0oKSk7CglSZWVkU29sb21vbkRlY29kZXIkMS5kZWZhdWx0ID0gUmVlZFNvbG9tb25EZWNvZGVyOwoKCXZhciBCaXRNYXRyaXhQYXJzZXIkMSA9IHt9OwoKCXZhciBWZXJzaW9uJDEgPSB7fTsKCgl2YXIgRm9ybWF0SW5mb3JtYXRpb24kMSA9IHt9OwoKCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IHt9OwoKCXZhciBBcmd1bWVudEV4Y2VwdGlvbiQxID0ge307CgoJdmFyIF9fZXh0ZW5kcyQzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFyZ3VtZW50RXhjZXB0aW9uJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBFeGNlcHRpb25fMSA9IEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBDdXN0b20gRXJyb3IgY2xhc3Mgb2YgdHlwZSBFeGNlcHRpb24uCgkgKi8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHsKCSAgICBfX2V4dGVuZHMkMyhBcmd1bWVudEV4Y2VwdGlvbiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBcmd1bWVudEV4Y2VwdGlvbigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICBBcmd1bWVudEV4Y2VwdGlvbi5raW5kID0gJ0FyZ3VtZW50RXhjZXB0aW9uJzsKCSAgICByZXR1cm4gQXJndW1lbnRFeGNlcHRpb247Cgl9KEV4Y2VwdGlvbl8xLmRlZmF1bHQpKTsKCUFyZ3VtZW50RXhjZXB0aW9uJDEuZGVmYXVsdCA9IEFyZ3VtZW50RXhjZXB0aW9uOwoKCShmdW5jdGlvbiAoZXhwb3J0cykgewoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CglleHBvcnRzLkVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gdm9pZCAwOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBBcmd1bWVudEV4Y2VwdGlvbl8xID0gQXJndW1lbnRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJdmFyIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzOwoJKGZ1bmN0aW9uIChFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcykgewoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJMIl0gPSAwXSA9ICJMIjsKCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1tFcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlc1siTSJdID0gMV0gPSAiTSI7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXNbIlEiXSA9IDJdID0gIlEiOwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzW0Vycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzWyJIIl0gPSAzXSA9ICJIIjsKCX0pKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzID0gZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyB8fCAoZXhwb3J0cy5FcnJvckNvcnJlY3Rpb25MZXZlbFZhbHVlcyA9IHt9KSk7CgkvKioKCSAqIDxwPlNlZSBJU08gMTgwMDQ6MjAwNiwgNi41LjEuIFRoaXMgZW51bSBlbmNhcHN1bGF0ZXMgdGhlIGZvdXIgZXJyb3IgY29ycmVjdGlvbiBsZXZlbHMKCSAqIGRlZmluZWQgYnkgdGhlIFFSIGNvZGUgc3RhbmRhcmQuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFcnJvckNvcnJlY3Rpb25MZXZlbCh2YWx1ZSwgc3RyaW5nVmFsdWUsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5iaXRzID0gYml0czsKCSAgICAgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2V0KGJpdHMsIHRoaXMpOwoJICAgICAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLmdldFZhbHVlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52YWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5nZXRCaXRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRzOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZnJvbVN0cmluZyA9IGZ1bmN0aW9uIChzKSB7CgkgICAgICAgIHN3aXRjaCAocykgewoJICAgICAgICAgICAgY2FzZSAnTCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5MOwoJICAgICAgICAgICAgY2FzZSAnTSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5NOwoJICAgICAgICAgICAgY2FzZSAnUSc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5ROwoJICAgICAgICAgICAgY2FzZSAnSCc6IHJldHVybiBFcnJvckNvcnJlY3Rpb25MZXZlbC5IOwoJICAgICAgICAgICAgZGVmYXVsdDogdGhyb3cgbmV3IEFyZ3VtZW50RXhjZXB0aW9uXzEuZGVmYXVsdChzICsgJ25vdCBhdmFpbGFibGUnKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIEVycm9yQ29ycmVjdGlvbkxldmVsLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAobykgewoJICAgICAgICBpZiAoIShvIGluc3RhbmNlb2YgRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG90aGVyID0gbzsKCSAgICAgICAgcmV0dXJuIHRoaXMudmFsdWUgPT09IG90aGVyLnZhbHVlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgaW50IGNvbnRhaW5pbmcgdGhlIHR3byBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSdzIGVycm9yIGNvcnJlY3Rpb24gbGV2ZWwKCSAgICAgKiBAcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsIHJlcHJlc2VudGluZyB0aGUgZW5jb2RlZCBlcnJvciBjb3JyZWN0aW9uIGxldmVsCgkgICAgICovCgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuZm9yQml0cyA9IGZ1bmN0aW9uIChiaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGJpdHMgPCAwIHx8IGJpdHMgPj0gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuc2l6ZSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMuZ2V0KGJpdHMpOwoJICAgIH07CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgRXJyb3JDb3JyZWN0aW9uTGV2ZWwuRk9SX1ZBTFVFID0gbmV3IE1hcCgpOwoJICAgIC8qKiBMID0gfjclIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5MID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkwsICdMJywgMHgwMSk7CgkgICAgLyoqIE0gPSB+MTUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5NID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLk0sICdNJywgMHgwMCk7CgkgICAgLyoqIFEgPSB+MjUlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5RID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLlEsICdRJywgMHgwMyk7CgkgICAgLyoqIEggPSB+MzAlIGNvcnJlY3Rpb24gKi8KCSAgICBFcnJvckNvcnJlY3Rpb25MZXZlbC5IID0gbmV3IEVycm9yQ29ycmVjdGlvbkxldmVsKEVycm9yQ29ycmVjdGlvbkxldmVsVmFsdWVzLkgsICdIJywgMHgwMik7CgkgICAgcmV0dXJuIEVycm9yQ29ycmVjdGlvbkxldmVsOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IEVycm9yQ29ycmVjdGlvbkxldmVsOwoKCX0oRXJyb3JDb3JyZWN0aW9uTGV2ZWwpKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDYgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRm9ybWF0SW5mb3JtYXRpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBFcnJvckNvcnJlY3Rpb25MZXZlbF8xID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWw7Cgl2YXIgSW50ZWdlcl8xID0gSW50ZWdlciQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBRUiBDb2RlJ3MgZm9ybWF0IGluZm9ybWF0aW9uLCBpbmNsdWRpbmcgdGhlIGRhdGEgbWFzayB1c2VkIGFuZAoJICogZXJyb3IgY29ycmVjdGlvbiBsZXZlbC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqIEBzZWUgRGF0YU1hc2sKCSAqIEBzZWUgRXJyb3JDb3JyZWN0aW9uTGV2ZWwKCSAqLwoJdmFyIEZvcm1hdEluZm9ybWF0aW9uID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZvcm1hdEluZm9ybWF0aW9uKGZvcm1hdEluZm8gLyppbnQqLykgewoJICAgICAgICAvLyBCaXRzIDMsNAoJICAgICAgICB0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsID0gRXJyb3JDb3JyZWN0aW9uTGV2ZWxfMS5kZWZhdWx0LmZvckJpdHMoKGZvcm1hdEluZm8gPj4gMykgJiAweDAzKTsKCSAgICAgICAgLy8gQm90dG9tIDMgYml0cwoJICAgICAgICB0aGlzLmRhdGFNYXNrID0gLyooYnl0ZSkgKi8gKGZvcm1hdEluZm8gJiAweDA3KTsKCSAgICB9CgkgICAgRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyA9IGZ1bmN0aW9uIChhIC8qaW50Ki8sIGIgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gSW50ZWdlcl8xLmRlZmF1bHQuYml0Q291bnQoYSBeIGIpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHBhcmFtIG1hc2tlZEZvcm1hdEluZm8xIGZvcm1hdCBpbmZvIGluZGljYXRvciwgd2l0aCBtYXNrIHN0aWxsIGFwcGxpZWQKCSAgICAgKiBAcGFyYW0gbWFza2VkRm9ybWF0SW5mbzIgc2Vjb25kIGNvcHkgb2Ygc2FtZSBpbmZvOyBib3RoIGFyZSBjaGVja2VkIGF0IHRoZSBzYW1lIHRpbWUKCSAgICAgKiAgdG8gZXN0YWJsaXNoIGJlc3QgbWF0Y2gKCSAgICAgKiBAcmV0dXJuIGluZm9ybWF0aW9uIGFib3V0IHRoZSBmb3JtYXQgaXQgc3BlY2lmaWVzLCBvciB7QGNvZGUgbnVsbH0KCSAgICAgKiAgaWYgZG9lc24ndCBzZWVtIHRvIG1hdGNoIGFueSBrbm93biBwYXR0ZXJuCgkgICAgICovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24uZGVjb2RlRm9ybWF0SW5mb3JtYXRpb24gPSBmdW5jdGlvbiAobWFza2VkRm9ybWF0SW5mbzEgLyppbnQqLywgbWFza2VkRm9ybWF0SW5mbzIgLyppbnQqLykgewoJICAgICAgICB2YXIgZm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uLmRvRGVjb2RlRm9ybWF0SW5mb3JtYXRpb24obWFza2VkRm9ybWF0SW5mbzEsIG1hc2tlZEZvcm1hdEluZm8yKTsKCSAgICAgICAgaWYgKGZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiBmb3JtYXRJbmZvOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNob3VsZCByZXR1cm4gbnVsbCwgYnV0LCBzb21lIFFSIGNvZGVzIGFwcGFyZW50bHkKCSAgICAgICAgLy8gZG8gbm90IG1hc2sgdGhpcyBpbmZvLiBUcnkgYWdhaW4gYnkgYWN0dWFsbHkgbWFza2luZyB0aGUgcGF0dGVybgoJICAgICAgICAvLyBmaXJzdAoJICAgICAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb24uZG9EZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihtYXNrZWRGb3JtYXRJbmZvMSBeIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX01BU0tfUVIsIG1hc2tlZEZvcm1hdEluZm8yIF4gRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUik7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5kb0RlY29kZUZvcm1hdEluZm9ybWF0aW9uID0gZnVuY3Rpb24gKG1hc2tlZEZvcm1hdEluZm8xIC8qaW50Ki8sIG1hc2tlZEZvcm1hdEluZm8yIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGVfMSwgX2E7CgkgICAgICAgIC8vIEZpbmQgdGhlIGludCBpbiBGT1JNQVRfSU5GT19ERUNPREVfTE9PS1VQIHdpdGggZmV3ZXN0IGJpdHMgZGlmZmVyaW5nCgkgICAgICAgIHZhciBiZXN0RGlmZmVyZW5jZSA9IE51bWJlci5NQVhfU0FGRV9JTlRFR0VSOwoJICAgICAgICB2YXIgYmVzdEZvcm1hdEluZm8gPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyQ2KEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVApLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRlY29kZUluZm8gPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICB2YXIgdGFyZ2V0SW5mbyA9IGRlY29kZUluZm9bMF07CgkgICAgICAgICAgICAgICAgaWYgKHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8xIHx8IHRhcmdldEluZm8gPT09IG1hc2tlZEZvcm1hdEluZm8yKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGFuIGV4YWN0IG1hdGNoCgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBuZXcgRm9ybWF0SW5mb3JtYXRpb24oZGVjb2RlSW5mb1sxXSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIHZhciBiaXRzRGlmZmVyZW5jZSA9IEZvcm1hdEluZm9ybWF0aW9uLm51bUJpdHNEaWZmZXJpbmcobWFza2VkRm9ybWF0SW5mbzEsIHRhcmdldEluZm8pOwoJICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgIGJlc3RGb3JtYXRJbmZvID0gZGVjb2RlSW5mb1sxXTsKCSAgICAgICAgICAgICAgICAgICAgYmVzdERpZmZlcmVuY2UgPSBiaXRzRGlmZmVyZW5jZTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKG1hc2tlZEZvcm1hdEluZm8xICE9PSBtYXNrZWRGb3JtYXRJbmZvMikgewoJICAgICAgICAgICAgICAgICAgICAvLyBhbHNvIHRyeSB0aGUgb3RoZXIgb3B0aW9uCgkgICAgICAgICAgICAgICAgICAgIGJpdHNEaWZmZXJlbmNlID0gRm9ybWF0SW5mb3JtYXRpb24ubnVtQml0c0RpZmZlcmluZyhtYXNrZWRGb3JtYXRJbmZvMiwgdGFyZ2V0SW5mbyk7CgkgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0Rm9ybWF0SW5mbyA9IGRlY29kZUluZm9bMV07CgkgICAgICAgICAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2MgJiYgIV9jLmRvbmUgJiYgKF9hID0gX2IucmV0dXJuKSkgX2EuY2FsbChfYik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSGFtbWluZyBkaXN0YW5jZSBvZiB0aGUgMzIgbWFza2VkIGNvZGVzIGlzIDcsIGJ5IGNvbnN0cnVjdGlvbiwgc28gPD0gMyBiaXRzCgkgICAgICAgIC8vIGRpZmZlcmluZyBtZWFucyB3ZSBmb3VuZCBhIG1hdGNoCgkgICAgICAgIGlmIChiZXN0RGlmZmVyZW5jZSA8PSAzKSB7CgkgICAgICAgICAgICByZXR1cm4gbmV3IEZvcm1hdEluZm9ybWF0aW9uKGJlc3RGb3JtYXRJbmZvKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbnVsbDsKCSAgICB9OwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5nZXRFcnJvckNvcnJlY3Rpb25MZXZlbCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJyb3JDb3JyZWN0aW9uTGV2ZWw7CgkgICAgfTsKCSAgICBGb3JtYXRJbmZvcm1hdGlvbi5wcm90b3R5cGUuZ2V0RGF0YU1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFNYXNrOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICh0aGlzLmVycm9yQ29ycmVjdGlvbkxldmVsLmdldEJpdHMoKSA8PCAzKSB8IHRoaXMuZGF0YU1hc2s7CgkgICAgfTsKCSAgICAvKkBPdmVycmlkZSovCgkgICAgRm9ybWF0SW5mb3JtYXRpb24ucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBGb3JtYXRJbmZvcm1hdGlvbikpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgb3RoZXIgPSBvOwoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvckNvcnJlY3Rpb25MZXZlbCA9PT0gb3RoZXIuZXJyb3JDb3JyZWN0aW9uTGV2ZWwgJiYKCSAgICAgICAgICAgIHRoaXMuZGF0YU1hc2sgPT09IG90aGVyLmRhdGFNYXNrOwoJICAgIH07CgkgICAgRm9ybWF0SW5mb3JtYXRpb24uRk9STUFUX0lORk9fTUFTS19RUiA9IDB4NTQxMjsKCSAgICAvKioKCSAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYsIEFubmV4IEMsIFRhYmxlIEMuMQoJICAgICAqLwoJICAgIEZvcm1hdEluZm9ybWF0aW9uLkZPUk1BVF9JTkZPX0RFQ09ERV9MT09LVVAgPSBbCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1NDEyLCAweDAwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1MTI1LCAweDAxXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1RTdDLCAweDAyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg1QjRCLCAweDAzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0NUY5LCAweDA0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0MENFLCAweDA1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0Rjk3LCAweDA2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg0QUEwLCAweDA3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3N0M0LCAweDA4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3MkYzLCAweDA5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3REFBLCAweDBBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg3ODlELCAweDBCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2NjJGLCAweDBDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2MzE4LCAweDBEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2QzQxLCAweDBFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHg2OTc2LCAweDBGXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxNjg5LCAweDEwXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxM0JFLCAweDExXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxQ0U3LCAweDEyXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgxOUQwLCAweDEzXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwNzYyLCAweDE0XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwMjU1LCAweDE1XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwRDBDLCAweDE2XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgwODNCLCAweDE3XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzNTVGLCAweDE4XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzMDY4LCAweDE5XSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzRjMxLCAweDFBXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgzQTA2LCAweDFCXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyNEI0LCAweDFDXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyMTgzLCAweDFEXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyRURBLCAweDFFXSksCgkgICAgICAgIEludDMyQXJyYXkuZnJvbShbMHgyQkVELCAweDFGXSksCgkgICAgXTsKCSAgICByZXR1cm4gRm9ybWF0SW5mb3JtYXRpb247Cgl9KCkpOwoJRm9ybWF0SW5mb3JtYXRpb24kMS5kZWZhdWx0ID0gRm9ybWF0SW5mb3JtYXRpb247CgoJdmFyIEVDQmxvY2tzJDEgPSB7fTsKCgl2YXIgX192YWx1ZXMkNSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0Jsb2NrcyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHNldCBvZiBlcnJvci1jb3JyZWN0aW9uIGJsb2NrcyBpbiBvbmUgc3ltYm9sIHZlcnNpb24uIE1vc3QgdmVyc2lvbnMgd2lsbAoJICogdXNlIGJsb2NrcyBvZiBkaWZmZXJpbmcgc2l6ZXMgd2l0aGluIG9uZSB2ZXJzaW9uLCBzbywgdGhpcyBlbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yCgkgKiBlYWNoIHNldCBvZiBibG9ja3MuIEl0IGFsc28gaG9sZHMgdGhlIG51bWJlciBvZiBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyBwZXIgYmxvY2sgc2luY2UgaXQKCSAqIHdpbGwgYmUgdGhlIHNhbWUgYWNyb3NzIGFsbCBibG9ja3Mgd2l0aGluIG9uZSB2ZXJzaW9uLjwvcD4KCSAqLwoJdmFyIEVDQmxvY2tzID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEVDQmxvY2tzKGVjQ29kZXdvcmRzUGVyQmxvY2sgLyppbnQqLykgewoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAxOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMV0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayA9IGVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgICAgIHRoaXMuZWNCbG9ja3MgPSBlY0Jsb2NrczsKCSAgICB9CgkgICAgRUNCbG9ja3MucHJvdG90eXBlLmdldEVDQ29kZXdvcmRzUGVyQmxvY2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQ29kZXdvcmRzUGVyQmxvY2s7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0TnVtQmxvY2tzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIHRvdGFsID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tzID0gdGhpcy5lY0Jsb2NrczsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIGVjQmxvY2tzXzEgPSBfX3ZhbHVlcyQ1KGVjQmxvY2tzKSwgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCk7ICFlY0Jsb2Nrc18xXzEuZG9uZTsgZWNCbG9ja3NfMV8xID0gZWNCbG9ja3NfMS5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tzXzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbCArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2Nrc18xXzEgJiYgIWVjQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGVjQmxvY2tzXzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2Nrc18xKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdG90YWw7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0VG90YWxFQ0NvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZWNDb2Rld29yZHNQZXJCbG9jayAqIHRoaXMuZ2V0TnVtQmxvY2tzKCk7CgkgICAgfTsKCSAgICBFQ0Jsb2Nrcy5wcm90b3R5cGUuZ2V0RUNCbG9ja3MgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmVjQmxvY2tzOwoJICAgIH07CgkgICAgcmV0dXJuIEVDQmxvY2tzOwoJfSgpKTsKCUVDQmxvY2tzJDEuZGVmYXVsdCA9IEVDQmxvY2tzOwoKCXZhciBFQ0IkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShFQ0IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgdGhlIHBhcmFtZXRlcnMgZm9yIG9uZSBlcnJvci1jb3JyZWN0aW9uIGJsb2NrIGluIG9uZSBzeW1ib2wgdmVyc2lvbi4KCSAqIFRoaXMgaW5jbHVkZXMgdGhlIG51bWJlciBvZiBkYXRhIGNvZGV3b3JkcywgYW5kIHRoZSBudW1iZXIgb2YgdGltZXMgYSBibG9jayB3aXRoIHRoZXNlCgkgKiBwYXJhbWV0ZXJzIGlzIHVzZWQgY29uc2VjdXRpdmVseSBpbiB0aGUgUVIgY29kZSB2ZXJzaW9uJ3MgZm9ybWF0LjwvcD4KCSAqLwoJdmFyIEVDQiA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBFQ0IoY291bnQgLyppbnQqLywgZGF0YUNvZGV3b3JkcyAvKmludCovKSB7CgkgICAgICAgIHRoaXMuY291bnQgPSBjb3VudDsKCSAgICAgICAgdGhpcy5kYXRhQ29kZXdvcmRzID0gZGF0YUNvZGV3b3JkczsKCSAgICB9CgkgICAgRUNCLnByb3RvdHlwZS5nZXRDb3VudCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY291bnQ7CgkgICAgfTsKCSAgICBFQ0IucHJvdG90eXBlLmdldERhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICByZXR1cm4gRUNCOwoJfSgpKTsKCUVDQiQxLmRlZmF1bHQgPSBFQ0I7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX3ZhbHVlcyQ0ID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFZlcnNpb24kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGVjb2RlciB7Ki8KCXZhciBCaXRNYXRyaXhfMSQzID0gQml0TWF0cml4JDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSQxID0gRm9ybWF0SW5mb3JtYXRpb24kMTsKCXZhciBFQ0Jsb2Nrc18xID0gRUNCbG9ja3MkMTsKCXZhciBFQ0JfMSA9IEVDQiQxOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDIgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQyID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIFNlZSBJU08gMTgwMDQ6MjAwNiBBbm5leCBECgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFZlcnNpb24gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gVmVyc2lvbih2ZXJzaW9uTnVtYmVyIC8qaW50Ki8sIGFsaWdubWVudFBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgZWNCbG9ja3MgPSBbXTsKCSAgICAgICAgZm9yICh2YXIgX2kgPSAyOyBfaSA8IGFyZ3VtZW50cy5sZW5ndGg7IF9pKyspIHsKCSAgICAgICAgICAgIGVjQmxvY2tzW19pIC0gMl0gPSBhcmd1bWVudHNbX2ldOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMudmVyc2lvbk51bWJlciA9IHZlcnNpb25OdW1iZXI7CgkgICAgICAgIHRoaXMuYWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBhbGlnbm1lbnRQYXR0ZXJuQ2VudGVyczsKCSAgICAgICAgdGhpcy5lY0Jsb2NrcyA9IGVjQmxvY2tzOwoJICAgICAgICB2YXIgdG90YWwgPSAwOwoJICAgICAgICB2YXIgZWNDb2Rld29yZHMgPSBlY0Jsb2Nrc1swXS5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIHZhciBlY2JBcnJheSA9IGVjQmxvY2tzWzBdLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY2JBcnJheV8xID0gX192YWx1ZXMkNChlY2JBcnJheSksIGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpOyAhZWNiQXJyYXlfMV8xLmRvbmU7IGVjYkFycmF5XzFfMSA9IGVjYkFycmF5XzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGVjQmxvY2sgPSBlY2JBcnJheV8xXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdG90YWwgKz0gZWNCbG9jay5nZXRDb3VudCgpICogKGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpICsgZWNDb2Rld29yZHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzFfMSkgeyBlXzEgPSB7IGVycm9yOiBlXzFfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoZWNiQXJyYXlfMV8xICYmICFlY2JBcnJheV8xXzEuZG9uZSAmJiAoX2EgPSBlY2JBcnJheV8xLnJldHVybikpIF9hLmNhbGwoZWNiQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdGhpcy50b3RhbENvZGV3b3JkcyA9IHRvdGFsOwoJICAgIH0KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5nZXRWZXJzaW9uTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0VG90YWxDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnRvdGFsQ29kZXdvcmRzOwoJICAgIH07CgkgICAgVmVyc2lvbi5wcm90b3R5cGUuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDE3ICsgNCAqIHRoaXMudmVyc2lvbk51bWJlcjsKCSAgICB9OwoJICAgIFZlcnNpb24ucHJvdG90eXBlLmdldEVDQmxvY2tzRm9yTGV2ZWwgPSBmdW5jdGlvbiAoZWNMZXZlbCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0Jsb2Nrc1tlY0xldmVsLmdldFZhbHVlKCldOwoJICAgICAgICAvLyBUWVBFU0NSSVBUUE9SVDogb3JpZ2luYWwgd2FzIHVzaW5nIG9yZGluYWwsIGFuZCB1c2luZyB0aGUgb3JkZXIgb2YgbGV2ZWxzIGFzIGRlZmluZWQgaW4gRXJyb3JDb3JyZWN0aW9uTGV2ZWwgZW51bSAoTE1RSCkKCSAgICAgICAgLy8gSSB3aWxsIHVzZSB0aGUgZGlyZWN0IHZhbHVlIGZyb20gRXJyb3JDb3JyZWN0aW9uTGV2ZWxWYWx1ZXMgZW51bSB3aGljaCBpbiB0eXBlc2NyaXB0IGdvZXMgdG8gYSBudW1iZXIKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkRlZHVjZXMgdmVyc2lvbiBpbmZvcm1hdGlvbiBwdXJlbHkgZnJvbSBRUiBDb2RlIGRpbWVuc2lvbnMuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gaW4gbW9kdWxlcwoJICAgICAqIEByZXR1cm4gVmVyc2lvbiBmb3IgYSBRUiBDb2RlIG9mIHRoYXQgZGltZW5zaW9uCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCAxIG1vZCA0CgkgICAgICovCgkgICAgVmVyc2lvbi5nZXRQcm92aXNpb25hbFZlcnNpb25Gb3JEaW1lbnNpb24gPSBmdW5jdGlvbiAoZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiAlIDQgIT09IDEpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMSQyLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMuZ2V0VmVyc2lvbkZvck51bWJlcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlciA9IGZ1bmN0aW9uICh2ZXJzaW9uTnVtYmVyIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPCAxIHx8IHZlcnNpb25OdW1iZXIgPiA0MCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDIuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBWZXJzaW9uLlZFUlNJT05TW3ZlcnNpb25OdW1iZXIgLSAxXTsKCSAgICB9OwoJICAgIFZlcnNpb24uZGVjb2RlVmVyc2lvbkluZm9ybWF0aW9uID0gZnVuY3Rpb24gKHZlcnNpb25CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGJlc3REaWZmZXJlbmNlID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHZhciBiZXN0VmVyc2lvbiA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgVmVyc2lvbi5WRVJTSU9OX0RFQ09ERV9JTkZPLmxlbmd0aDsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgdGFyZ2V0VmVyc2lvbiA9IFZlcnNpb24uVkVSU0lPTl9ERUNPREVfSU5GT1tpXTsKCSAgICAgICAgICAgIC8vIERvIHRoZSB2ZXJzaW9uIGluZm8gYml0cyBtYXRjaCBleGFjdGx5PyBkb25lLgoJICAgICAgICAgICAgaWYgKHRhcmdldFZlcnNpb24gPT09IHZlcnNpb25CaXRzKSB7CgkgICAgICAgICAgICAgICAgcmV0dXJuIFZlcnNpb24uZ2V0VmVyc2lvbkZvck51bWJlcihpICsgNyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBPdGhlcndpc2Ugc2VlIGlmIHRoaXMgaXMgdGhlIGNsb3Nlc3QgdG8gYSByZWFsIHZlcnNpb24gaW5mbyBiaXQgc3RyaW5nCgkgICAgICAgICAgICAvLyB3ZSBoYXZlIHNlZW4gc28gZmFyCgkgICAgICAgICAgICB2YXIgYml0c0RpZmZlcmVuY2UgPSBGb3JtYXRJbmZvcm1hdGlvbl8xJDEuZGVmYXVsdC5udW1CaXRzRGlmZmVyaW5nKHZlcnNpb25CaXRzLCB0YXJnZXRWZXJzaW9uKTsKCSAgICAgICAgICAgIGlmIChiaXRzRGlmZmVyZW5jZSA8IGJlc3REaWZmZXJlbmNlKSB7CgkgICAgICAgICAgICAgICAgYmVzdFZlcnNpb24gPSBpICsgNzsKCSAgICAgICAgICAgICAgICBiZXN0RGlmZmVyZW5jZSA9IGJpdHNEaWZmZXJlbmNlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFdlIGNhbiB0b2xlcmF0ZSB1cCB0byAzIGJpdHMgb2YgZXJyb3Igc2luY2Ugbm8gdHdvIHZlcnNpb24gaW5mbyBjb2Rld29yZHMgd2lsbAoJICAgICAgICAvLyBkaWZmZXIgaW4gbGVzcyB0aGFuIDggYml0cy4KCSAgICAgICAgaWYgKGJlc3REaWZmZXJlbmNlIDw9IDMpIHsKCSAgICAgICAgICAgIHJldHVybiBWZXJzaW9uLmdldFZlcnNpb25Gb3JOdW1iZXIoYmVzdFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGRpZG4ndCBmaW5kIGEgY2xvc2UgZW5vdWdoIG1hdGNoLCBmYWlsCgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIElTTyAxODAwNDoyMDA2IEFubmV4IEUKCSAgICAgKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS5idWlsZEZ1bmN0aW9uUGF0dGVybiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpOwoJICAgICAgICB2YXIgYml0TWF0cml4ID0gbmV3IEJpdE1hdHJpeF8xJDMuZGVmYXVsdChkaW1lbnNpb24pOwoJICAgICAgICAvLyBUb3AgbGVmdCBmaW5kZXIgcGF0dGVybiArIHNlcGFyYXRvciArIGZvcm1hdAoJICAgICAgICBiaXRNYXRyaXguc2V0UmVnaW9uKDAsIDAsIDksIDkpOwoJICAgICAgICAvLyBUb3AgcmlnaHQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbihkaW1lbnNpb24gLSA4LCAwLCA4LCA5KTsKCSAgICAgICAgLy8gQm90dG9tIGxlZnQgZmluZGVyIHBhdHRlcm4gKyBzZXBhcmF0b3IgKyBmb3JtYXQKCSAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSA4LCA5LCA4KTsKCSAgICAgICAgLy8gQWxpZ25tZW50IHBhdHRlcm5zCgkgICAgICAgIHZhciBtYXggPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHgrKykgewoJICAgICAgICAgICAgdmFyIGkgPSB0aGlzLmFsaWdubWVudFBhdHRlcm5DZW50ZXJzW3hdIC0gMjsKCSAgICAgICAgICAgIGZvciAodmFyIHkgPSAwOyB5IDwgbWF4OyB5KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoKHggPT09IDAgJiYgKHkgPT09IDAgfHwgeSA9PT0gbWF4IC0gMSkpIHx8ICh4ID09PSBtYXggLSAxICYmIHkgPT09IDApKSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE5vIGFsaWdubWVudCBwYXR0ZXJucyBuZWFyIHRoZSB0aHJlZSBmaW5kZXIgcGF0dGVybnMKCSAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24odGhpcy5hbGlnbm1lbnRQYXR0ZXJuQ2VudGVyc1t5XSAtIDIsIGksIDUsIDUpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIFZlcnRpY2FsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oNiwgOSwgMSwgZGltZW5zaW9uIC0gMTcpOwoJICAgICAgICAvLyBIb3Jpem9udGFsIHRpbWluZyBwYXR0ZXJuCgkgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oOSwgNiwgZGltZW5zaW9uIC0gMTcsIDEpOwoJICAgICAgICBpZiAodGhpcy52ZXJzaW9uTnVtYmVyID4gNikgewoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCB0b3AgcmlnaHQKCSAgICAgICAgICAgIGJpdE1hdHJpeC5zZXRSZWdpb24oZGltZW5zaW9uIC0gMTEsIDAsIDMsIDYpOwoJICAgICAgICAgICAgLy8gVmVyc2lvbiBpbmZvLCBib3R0b20gbGVmdAoJICAgICAgICAgICAgYml0TWF0cml4LnNldFJlZ2lvbigwLCBkaW1lbnNpb24gLSAxMSwgNiwgMyk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdE1hdHJpeDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBWZXJzaW9uLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuICcnICsgdGhpcy52ZXJzaW9uTnVtYmVyOwoJICAgIH07CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgQW5uZXggRC4KCSAgICAgICAqIEVsZW1lbnQgaSByZXByZXNlbnRzIHRoZSByYXcgdmVyc2lvbiBiaXRzIHRoYXQgc3BlY2lmeSB2ZXJzaW9uIGkgKyA3CgkgICAgICAgKi8KCSAgICBWZXJzaW9uLlZFUlNJT05fREVDT0RFX0lORk8gPSBJbnQzMkFycmF5LmZyb20oWwoJICAgICAgICAweDA3Qzk0LCAweDA4NUJDLCAweDA5QTk5LCAweDBBNEQzLCAweDBCQkY2LAoJICAgICAgICAweDBDNzYyLCAweDBEODQ3LCAweDBFNjBELCAweDBGOTI4LCAweDEwQjc4LAoJICAgICAgICAweDExNDVELCAweDEyQTE3LCAweDEzNTMyLCAweDE0OUE2LCAweDE1NjgzLAoJICAgICAgICAweDE2OEM5LCAweDE3N0VDLCAweDE4RUM0LCAweDE5MUUxLCAweDFBRkFCLAoJICAgICAgICAweDFCMDhFLCAweDFDQzFBLCAweDFEMzNGLCAweDFFRDc1LCAweDFGMjUwLAoJICAgICAgICAweDIwOUQ1LCAweDIxNkYwLCAweDIyOEJBLCAweDIzNzlGLCAweDI0QjBCLAoJICAgICAgICAweDI1NDJFLCAweDI2QTY0LCAweDI3NTQxLCAweDI4QzY5CgkgICAgXSk7CgkgICAgLyoqCgkgICAgICAgKiBTZWUgSVNPIDE4MDA0OjIwMDYgNi41LjEgVGFibGUgOQoJICAgICAgICovCgkgICAgVmVyc2lvbi5WRVJTSU9OUyA9IFsKCSAgICAgICAgbmV3IFZlcnNpb24oMSwgbmV3IEludDMyQXJyYXkoMCksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxMywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNywgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOSkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMiwgSW50MzJBcnJheS5mcm9tKFs2LCAxOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDEwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMywgSW50MzJBcnJheS5mcm9tKFs2LCAyMl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE1LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1NSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA4MCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyNCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA5KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCA0MykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDE4LCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTIpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDYsIEludDMyQXJyYXkuZnJvbShbNiwgMzRdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgxNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDcsIEludDMyQXJyYXkuZnJvbShbNiwgMjIsIDM4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDc4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDMxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxNCkpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNCwgNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMzgpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzOSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxOCksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE5KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDksIEludDMyQXJyYXkuZnJvbShbNiwgMjYsIDQ2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIyLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAzNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDM3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTAsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDUwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMTgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDY4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgNjkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDMpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA0NCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxOSksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDIwKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDExLCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDIwLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA4MSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCA1MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDUxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTIpLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMykpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTIsIEludDMyQXJyYXkuZnJvbShbNiwgMzIsIDU4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDkyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgOTMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMzYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAzNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDE0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDEzLCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2Ml0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyMiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMzcpLCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAzOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAyMCksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDEyLCAxMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDYsIDY2XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCg0LCA0MCksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDQxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDE3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNSwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNDgsIDcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjIsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDg3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgODgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgNDEpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigxNiwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjQsIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDk4KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgOTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0NikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI0LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTkpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAyMCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMTcsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU0LCA3OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxLCAxMDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE4LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NiwgODJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIwKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTIxKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDQzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMiwgMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxOSwgMTUpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDE5LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1OCwgODZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTE0KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDQ0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDQ1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDE3LCAyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjYsIG5ldyBFQ0JfMS5kZWZhdWx0KDksIDEzKSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDE0KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMCwgSW50MzJBcnJheS5mcm9tKFs2LCAzNCwgNjIsIDkwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDEwNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDUsIDEwOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgzLCA0MSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCA0MikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIxLCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1MCwgNzIsIDk0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExNykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI2LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDIpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDIyLCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1MCwgNzQsIDk4XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDExMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDExMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNCwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDEzKSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyMywgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIxKSwgbmV3IEVDQl8xLmRlZmF1bHQoNSwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI0LCBJbnQzMkFycmF5LmZyb20oWzYsIDI4LCA1NCwgODAsIDEwNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTcpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTYsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMwLCAxNiksIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDE3KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyNSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyNiwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMTA2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTA3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEzLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMjYsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0XSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxMTUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNiwgMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzMsIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDI3LCBJbnQzMkFycmF5LmZyb20oWzYsIDM0LCA2MiwgOTAsIDExOF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg4LCAxMjIpLCBuZXcgRUNCXzEuZGVmYXVsdCg0LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjIsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoOCwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjgsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTAsIDc0LCA5OCwgMTIyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDMsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAxMTgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMywgNDUpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTEsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigyOSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTQsIDc4LCAxMDIsIDEyNl0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTYpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCAxMTcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMjEsIDQ1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgNDYpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMjMpLCBuZXcgRUNCXzEuZGVmYXVsdCgzNywgMjQpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMCwgSW50MzJBcnJheS5mcm9tKFs2LCAyNiwgNTIsIDc4LCAxMDQsIDEzMF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg1LCAxMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCA0NyksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNSwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjMsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjUsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzMSwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTYsIDgyLCAxMDgsIDEzNF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxMywgMTE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoMywgMTE2KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDIsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQyLCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIzLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDI4LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzIsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYwLCA4NiwgMTEyLCAxMzhdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzUsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDM1LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzMsIEludDMyQXJyYXkuZnJvbShbNiwgMzAsIDU4LCA4NiwgMTE0LCAxNDJdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTcsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDEsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMSwgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTksIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDExLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzQsIEludDMyQXJyYXkuZnJvbShbNiwgMzQsIDYyLCA5MCwgMTE4LCAxNDZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDExNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDExNikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgNDYpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMywgNDcpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNDQsIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoNywgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoNTksIDE2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMSwgMTcpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM1LCBJbnQzMkFycmF5LmZyb20oWzYsIDMwLCA1NCwgNzgsIDEwMiwgMTI2LCAxNTBdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTIsIDEyMSksIG5ldyBFQ0JfMS5kZWZhdWx0KDcsIDEyMikpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCgxMiwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCgyNiwgNDgpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMzksIDI0KSwgbmV3IEVDQl8xLmRlZmF1bHQoMTQsIDI1KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDIyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDQxLCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzYsIEludDMyQXJyYXkuZnJvbShbNiwgMjQsIDUwLCA3NiwgMTAyLCAxMjgsIDE1NF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMjEpLCBuZXcgRUNCXzEuZGVmYXVsdCgxNCwgMTIyKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDYsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzQsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ2LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDEwLCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyLCAxNSksIG5ldyBFQ0JfMS5kZWZhdWx0KDY0LCAxNikpKSwKCSAgICAgICAgbmV3IFZlcnNpb24oMzcsIEludDMyQXJyYXkuZnJvbShbNiwgMjgsIDU0LCA4MCwgMTA2LCAxMzIsIDE1OF0pLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgxNywgMTIyKSwgbmV3IEVDQl8xLmRlZmF1bHQoNCwgMTIzKSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMjgsIG5ldyBFQ0JfMS5kZWZhdWx0KDI5LCA0NiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCA0NykpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0OSwgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgxMCwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjQsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNDYsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbigzOCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMiwgNTgsIDg0LCAxMTAsIDEzNiwgMTYyXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDEyMiksIG5ldyBFQ0JfMS5kZWZhdWx0KDE4LCAxMjMpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTMsIDQ2KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzIsIDQ3KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDQ4LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDE0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MiwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCgzMiwgMTYpKSksCgkgICAgICAgIG5ldyBWZXJzaW9uKDM5LCBJbnQzMkFycmF5LmZyb20oWzYsIDI2LCA1NCwgODIsIDExMCwgMTM4LCAxNjZdKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMjAsIDExNyksIG5ldyBFQ0JfMS5kZWZhdWx0KDQsIDExOCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDI4LCBuZXcgRUNCXzEuZGVmYXVsdCg0MCwgNDcpLCBuZXcgRUNCXzEuZGVmYXVsdCg3LCA0OCkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCg0MywgMjQpLCBuZXcgRUNCXzEuZGVmYXVsdCgyMiwgMjUpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgzMCwgbmV3IEVDQl8xLmRlZmF1bHQoMTAsIDE1KSwgbmV3IEVDQl8xLmRlZmF1bHQoNjcsIDE2KSkpLAoJICAgICAgICBuZXcgVmVyc2lvbig0MCwgSW50MzJBcnJheS5mcm9tKFs2LCAzMCwgNTgsIDg2LCAxMTQsIDE0MiwgMTcwXSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDE5LCAxMTgpLCBuZXcgRUNCXzEuZGVmYXVsdCg2LCAxMTkpKSwgbmV3IEVDQmxvY2tzXzEuZGVmYXVsdCgyOCwgbmV3IEVDQl8xLmRlZmF1bHQoMTgsIDQ3KSwgbmV3IEVDQl8xLmRlZmF1bHQoMzEsIDQ4KSksIG5ldyBFQ0Jsb2Nrc18xLmRlZmF1bHQoMzAsIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNCksIG5ldyBFQ0JfMS5kZWZhdWx0KDM0LCAyNSkpLCBuZXcgRUNCbG9ja3NfMS5kZWZhdWx0KDMwLCBuZXcgRUNCXzEuZGVmYXVsdCgyMCwgMTUpLCBuZXcgRUNCXzEuZGVmYXVsdCg2MSwgMTYpKSkKCSAgICBdOwoJICAgIHJldHVybiBWZXJzaW9uOwoJfSgpKTsKCVZlcnNpb24kMS5kZWZhdWx0ID0gVmVyc2lvbjsKCgl2YXIgRGF0YU1hc2sgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5EYXRhTWFza1ZhbHVlcyA9IHZvaWQgMDsKCXZhciBEYXRhTWFza1ZhbHVlczsKCShmdW5jdGlvbiAoRGF0YU1hc2tWYWx1ZXMpIHsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAwMCJdID0gMF0gPSAiREFUQV9NQVNLXzAwMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18wMDEiXSA9IDFdID0gIkRBVEFfTUFTS18wMDEiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMDEwIl0gPSAyXSA9ICJEQVRBX01BU0tfMDEwIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzAxMSJdID0gM10gPSAiREFUQV9NQVNLXzAxMSI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMDAiXSA9IDRdID0gIkRBVEFfTUFTS18xMDAiOwoJICAgIERhdGFNYXNrVmFsdWVzW0RhdGFNYXNrVmFsdWVzWyJEQVRBX01BU0tfMTAxIl0gPSA1XSA9ICJEQVRBX01BU0tfMTAxIjsKCSAgICBEYXRhTWFza1ZhbHVlc1tEYXRhTWFza1ZhbHVlc1siREFUQV9NQVNLXzExMCJdID0gNl0gPSAiREFUQV9NQVNLXzExMCI7CgkgICAgRGF0YU1hc2tWYWx1ZXNbRGF0YU1hc2tWYWx1ZXNbIkRBVEFfTUFTS18xMTEiXSA9IDddID0gIkRBVEFfTUFTS18xMTEiOwoJfSkoRGF0YU1hc2tWYWx1ZXMgPSBleHBvcnRzLkRhdGFNYXNrVmFsdWVzIHx8IChleHBvcnRzLkRhdGFNYXNrVmFsdWVzID0ge30pKTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGRhdGEgbWFza3MgZm9yIHRoZSBkYXRhIGJpdHMgaW4gYSBRUiBjb2RlLCBwZXIgSVNPIDE4MDA0OjIwMDYgNi44LiBJbXBsZW1lbnRhdGlvbnMKCSAqIG9mIHRoaXMgY2xhc3MgY2FuIHVuLW1hc2sgYSByYXcgQml0TWF0cml4LiBGb3Igc2ltcGxpY2l0eSwgdGhleSB3aWxsIHVubWFzayB0aGUgZW50aXJlIEJpdE1hdHJpeCwKCSAqIGluY2x1ZGluZyBhcmVhcyB1c2VkIGZvciBmaW5kZXIgcGF0dGVybnMsIHRpbWluZyBwYXR0ZXJucywgZXRjLiBUaGVzZSBhcmVhcyBzaG91bGQgYmUgdW51c2VkCgkgKiBhZnRlciB0aGUgcG9pbnQgdGhleSBhcmUgdW5tYXNrZWQgYW55d2F5LjwvcD4KCSAqCgkgKiA8cD5Ob3RlIHRoYXQgdGhlIGRpYWdyYW0gaW4gc2VjdGlvbiA2LjguMSBpcyBtaXNsZWFkaW5nIHNpbmNlIGl0IGluZGljYXRlcyB0aGF0IGkgaXMgY29sdW1uIHBvc2l0aW9uCgkgKiBhbmQgaiBpcyByb3cgcG9zaXRpb24uIEluIGZhY3QsIGFzIHRoZSB0ZXh0IHNheXMsIGkgaXMgcm93IHBvc2l0aW9uIGFuZCBqIGlzIGNvbHVtbiBwb3NpdGlvbi48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFNYXNrID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8vIFNlZSBJU08gMTgwMDQ6MjAwNiA2LjguMQoJICAgIGZ1bmN0aW9uIERhdGFNYXNrKHZhbHVlLCBpc01hc2tlZCkgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuaXNNYXNrZWQgPSBpc01hc2tlZDsKCSAgICB9CgkgICAgLy8gRW5kIG9mIGVudW0gY29uc3RhbnRzLgoJICAgIC8qKgoJICAgICAqIDxwPkltcGxlbWVudGF0aW9ucyBvZiB0aGlzIG1ldGhvZCByZXZlcnNlIHRoZSBkYXRhIG1hc2tpbmcgcHJvY2VzcyBhcHBsaWVkIHRvIGEgUVIgQ29kZSBhbmQKCSAgICAgKiBtYWtlIGl0cyBiaXRzIHJlYWR5IHRvIHJlYWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGJpdHMgcmVwcmVzZW50YXRpb24gb2YgUVIgQ29kZSBiaXRzCgkgICAgICogQHBhcmFtIGRpbWVuc2lvbiBkaW1lbnNpb24gb2YgUVIgQ29kZSwgcmVwcmVzZW50ZWQgYnkgYml0cywgYmVpbmcgdW5tYXNrZWQKCSAgICAgKi8KCSAgICBEYXRhTWFzay5wcm90b3R5cGUudW5tYXNrQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGRpbWVuc2lvbiAvKmludCovKSB7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZGltZW5zaW9uOyBqKyspIHsKCSAgICAgICAgICAgICAgICBpZiAodGhpcy5pc01hc2tlZChpLCBqKSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLmZsaXAoaiwgaSk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICBEYXRhTWFzay52YWx1ZXMgPSBuZXcgTWFwKFsKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDAwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeCArIHkpIG1vZCAyID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDAwLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMCwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoKGkgKyBqKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeCBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAwMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMDEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgJiAweDAxKSA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMDEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoIHkgbW9kIDMgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMDEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuIGogJSAzID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAwMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKHggKyB5KSBtb2QgMyA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzAxMSwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18wMTEsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKGkgKyBqKSAlIDMgPT09IDA7IH0pXSwKCSAgICAgICAgLyoqCgkgICAgICAgICAqIDEwMDogbWFzayBiaXRzIGZvciB3aGljaCAoeC8yICsgeS8zKSBtb2QgMiA9PSAwCgkgICAgICAgICAqLwoJICAgICAgICBbRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMCwgbmV3IERhdGFNYXNrKERhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMDAsIGZ1bmN0aW9uIChpIC8qaW50Ki8sIGogLyppbnQqLykgeyByZXR1cm4gKChNYXRoLmZsb29yKGkgLyAyKSArIE1hdGguZmxvb3IoaiAvIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMDE6IG1hc2sgYml0cyBmb3Igd2hpY2ggeHkgbW9kIDIgKyB4eSBtb2QgMyA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2ID09IDAKCSAgICAgICAgICovCgkgICAgICAgIFtEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTAxLCBuZXcgRGF0YU1hc2soRGF0YU1hc2tWYWx1ZXMuREFUQV9NQVNLXzEwMSwgZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovKSB7IHJldHVybiAoaSAqIGopICUgNiA9PT0gMDsgfSldLAoJICAgICAgICAvKioKCSAgICAgICAgICogMTEwOiBtYXNrIGJpdHMgZm9yIHdoaWNoICh4eSBtb2QgMiArIHh5IG1vZCAzKSBtb2QgMiA9PSAwCgkgICAgICAgICAqIGVxdWl2YWxlbnRseSwgc3VjaCB0aGF0IHh5IG1vZCA2IDwgMwoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTAsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTEwLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSAqIGopICUgNikgPCAzOyB9KV0sCgkgICAgICAgIC8qKgoJICAgICAgICAgKiAxMTE6IG1hc2sgYml0cyBmb3Igd2hpY2ggKCh4K3kpbW9kIDIgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKiBlcXVpdmFsZW50bHksIHN1Y2ggdGhhdCAoeCArIHkgKyB4eSBtb2QgMykgbW9kIDIgPT0gMAoJICAgICAgICAgKi8KCSAgICAgICAgW0RhdGFNYXNrVmFsdWVzLkRBVEFfTUFTS18xMTEsIG5ldyBEYXRhTWFzayhEYXRhTWFza1ZhbHVlcy5EQVRBX01BU0tfMTExLCBmdW5jdGlvbiAoaSAvKmludCovLCBqIC8qaW50Ki8pIHsgcmV0dXJuICgoaSArIGogKyAoKGkgKiBqKSAlIDMpKSAmIDB4MDEpID09PSAwOyB9KV0sCgkgICAgXSk7CgkgICAgcmV0dXJuIERhdGFNYXNrOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IERhdGFNYXNrOwoKCX0oRGF0YU1hc2spKTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdE1hdHJpeFBhcnNlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7Cgl2YXIgVmVyc2lvbl8xJDEgPSBWZXJzaW9uJDE7Cgl2YXIgRm9ybWF0SW5mb3JtYXRpb25fMSA9IEZvcm1hdEluZm9ybWF0aW9uJDE7Cgl2YXIgRGF0YU1hc2tfMSA9IERhdGFNYXNrOwoJdmFyIEZvcm1hdEV4Y2VwdGlvbl8xJDEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCS8qKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEJpdE1hdHJpeFBhcnNlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYml0TWF0cml4IHtAbGluayBCaXRNYXRyaXh9IHRvIHBhcnNlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgZGltZW5zaW9uIGlzIG5vdCA+PSAyMSBhbmQgMSBtb2QgNAoJICAgICAqLwoJICAgIGZ1bmN0aW9uIEJpdE1hdHJpeFBhcnNlcihiaXRNYXRyaXgpIHsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IGJpdE1hdHJpeC5nZXRIZWlnaHQoKTsKCSAgICAgICAgaWYgKGRpbWVuc2lvbiA8IDIxIHx8IChkaW1lbnNpb24gJiAweDAzKSAhPT0gMSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0TWF0cml4ID0gYml0TWF0cml4OwoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5SZWFkcyBmb3JtYXQgaW5mb3JtYXRpb24gZnJvbSBvbmUgb2YgaXRzIHR3byBsb2NhdGlvbnMgd2l0aGluIHRoZSBRUiBDb2RlLjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEZvcm1hdEluZm9ybWF0aW9ufSBlbmNhcHN1bGF0aW5nIHRoZSBRUiBDb2RlJ3MgZm9ybWF0IGluZm8KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIGZvcm1hdCBpbmZvcm1hdGlvbiBsb2NhdGlvbnMgY2Fubm90IGJlIHBhcnNlZCBhcwoJICAgICAqIHRoZSB2YWxpZCBlbmNvZGluZyBvZiBmb3JtYXQgaW5mb3JtYXRpb24KCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRGb3JtYXRJbmZvcm1hdGlvbiA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgaWYgKHRoaXMucGFyc2VkRm9ybWF0SW5mbyAhPT0gbnVsbCAmJiB0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRm9ybWF0SW5mbzsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRvcC1sZWZ0IGZvcm1hdCBpbmZvIGJpdHMKCSAgICAgICAgdmFyIGZvcm1hdEluZm9CaXRzMSA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoaSwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyAuLiBhbmQgc2tpcCBhIGJpdCBpbiB0aGUgdGltaW5nIHBhdHRlcm4gLi4uCgkgICAgICAgIGZvcm1hdEluZm9CaXRzMSA9IHRoaXMuY29weUJpdCg3LCA4LCBmb3JtYXRJbmZvQml0czEpOwoJICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgOCwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgZm9ybWF0SW5mb0JpdHMxID0gdGhpcy5jb3B5Qml0KDgsIDcsIGZvcm1hdEluZm9CaXRzMSk7CgkgICAgICAgIC8vIC4uIGFuZCBza2lwIGEgYml0IGluIHRoZSB0aW1pbmcgcGF0dGVybiAuLi4KCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3JtYXRJbmZvQml0czEgPSB0aGlzLmNvcHlCaXQoOCwgaiwgZm9ybWF0SW5mb0JpdHMxKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBSZWFkIHRoZSB0b3AtcmlnaHQvYm90dG9tLWxlZnQgcGF0dGVybiB0b28KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgZm9ybWF0SW5mb0JpdHMyID0gMDsKCSAgICAgICAgdmFyIGpNaW4gPSBkaW1lbnNpb24gLSA3OwoJICAgICAgICBmb3IgKHZhciBqID0gZGltZW5zaW9uIC0gMTsgaiA+PSBqTWluOyBqLS0pIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdCg4LCBqLCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIGZvciAodmFyIGkgPSBkaW1lbnNpb24gLSA4OyBpIDwgZGltZW5zaW9uOyBpKyspIHsKCSAgICAgICAgICAgIGZvcm1hdEluZm9CaXRzMiA9IHRoaXMuY29weUJpdChpLCA4LCBmb3JtYXRJbmZvQml0czIpOwoJICAgICAgICB9CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IEZvcm1hdEluZm9ybWF0aW9uXzEuZGVmYXVsdC5kZWNvZGVGb3JtYXRJbmZvcm1hdGlvbihmb3JtYXRJbmZvQml0czEsIGZvcm1hdEluZm9CaXRzMik7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZEZvcm1hdEluZm87CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+UmVhZHMgdmVyc2lvbiBpbmZvcm1hdGlvbiBmcm9tIG9uZSBvZiBpdHMgdHdvIGxvY2F0aW9ucyB3aXRoaW4gdGhlIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgVmVyc2lvbn0gZW5jYXBzdWxhdGluZyB0aGUgUVIgQ29kZSdzIHZlcnNpb24KCSAgICAgKiBAdGhyb3dzIEZvcm1hdEV4Y2VwdGlvbiBpZiBib3RoIHZlcnNpb24gaW5mb3JtYXRpb24gbG9jYXRpb25zIGNhbm5vdCBiZSBwYXJzZWQgYXMKCSAgICAgKiB0aGUgdmFsaWQgZW5jb2Rpbmcgb2YgdmVyc2lvbiBpbmZvcm1hdGlvbgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUucmVhZFZlcnNpb24gPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZFZlcnNpb24gIT09IG51bGwgJiYgdGhpcy5wYXJzZWRWZXJzaW9uICE9PSB1bmRlZmluZWQpIHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgcHJvdmlzaW9uYWxWZXJzaW9uID0gTWF0aC5mbG9vcigoZGltZW5zaW9uIC0gMTcpIC8gNCk7CgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24gPD0gNikgewoJICAgICAgICAgICAgcmV0dXJuIFZlcnNpb25fMSQxLmRlZmF1bHQuZ2V0VmVyc2lvbkZvck51bWJlcihwcm92aXNpb25hbFZlcnNpb24pOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJlYWQgdG9wLXJpZ2h0IHZlcnNpb24gaW5mbzogMyB3aWRlIGJ5IDYgdGFsbAoJICAgICAgICB2YXIgdmVyc2lvbkJpdHMgPSAwOwoJICAgICAgICB2YXIgaWpNaW4gPSBkaW1lbnNpb24gLSAxMTsKCSAgICAgICAgZm9yICh2YXIgaiA9IDU7IGogPj0gMDsgai0tKSB7CgkgICAgICAgICAgICBmb3IgKHZhciBpID0gZGltZW5zaW9uIC0gOTsgaSA+PSBpak1pbjsgaS0tKSB7CgkgICAgICAgICAgICAgICAgdmVyc2lvbkJpdHMgPSB0aGlzLmNvcHlCaXQoaSwgaiwgdmVyc2lvbkJpdHMpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHZhciB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBmYWlsZWQuIFRyeSBib3R0b20gbGVmdDogNiB3aWRlIGJ5IDMgdGFsbAoJICAgICAgICB2ZXJzaW9uQml0cyA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSA1OyBpID49IDA7IGktLSkgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IGRpbWVuc2lvbiAtIDk7IGogPj0gaWpNaW47IGotLSkgewoJICAgICAgICAgICAgICAgIHZlcnNpb25CaXRzID0gdGhpcy5jb3B5Qml0KGksIGosIHZlcnNpb25CaXRzKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICB0aGVQYXJzZWRWZXJzaW9uID0gVmVyc2lvbl8xJDEuZGVmYXVsdC5kZWNvZGVWZXJzaW9uSW5mb3JtYXRpb24odmVyc2lvbkJpdHMpOwoJICAgICAgICBpZiAodGhlUGFyc2VkVmVyc2lvbiAhPT0gbnVsbCAmJiB0aGVQYXJzZWRWZXJzaW9uLmdldERpbWVuc2lvbkZvclZlcnNpb24oKSA9PT0gZGltZW5zaW9uKSB7CgkgICAgICAgICAgICB0aGlzLnBhcnNlZFZlcnNpb24gPSB0aGVQYXJzZWRWZXJzaW9uOwoJICAgICAgICAgICAgcmV0dXJuIHRoZVBhcnNlZFZlcnNpb247CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5jb3B5Qml0ID0gZnVuY3Rpb24gKGkgLyppbnQqLywgaiAvKmludCovLCB2ZXJzaW9uQml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBiaXQgPSB0aGlzLmlzTWlycm9yID8gdGhpcy5iaXRNYXRyaXguZ2V0KGosIGkpIDogdGhpcy5iaXRNYXRyaXguZ2V0KGksIGopOwoJICAgICAgICByZXR1cm4gYml0ID8gKHZlcnNpb25CaXRzIDw8IDEpIHwgMHgxIDogdmVyc2lvbkJpdHMgPDwgMTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlJlYWRzIHRoZSBiaXRzIGluIHRoZSB7QGxpbmsgQml0TWF0cml4fSByZXByZXNlbnRpbmcgdGhlIGZpbmRlciBwYXR0ZXJuIGluIHRoZQoJICAgICAqIGNvcnJlY3Qgb3JkZXIgaW4gb3JkZXIgdG8gcmVjb25zdHJ1Y3QgdGhlIGNvZGV3b3JkcyBieXRlcyBjb250YWluZWQgd2l0aGluIHRoZQoJICAgICAqIFFSIENvZGUuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBleGFjdCBudW1iZXIgb2YgYnl0ZXMgZXhwZWN0ZWQgaXMgbm90IHJlYWQKCSAgICAgKi8KCSAgICBCaXRNYXRyaXhQYXJzZXIucHJvdG90eXBlLnJlYWRDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHZhciBmb3JtYXRJbmZvID0gdGhpcy5yZWFkRm9ybWF0SW5mb3JtYXRpb24oKTsKCSAgICAgICAgdmFyIHZlcnNpb24gPSB0aGlzLnJlYWRWZXJzaW9uKCk7CgkgICAgICAgIC8vIEdldCB0aGUgZGF0YSBtYXNrIGZvciB0aGUgZm9ybWF0IHVzZWQgaW4gdGhpcyBRUiBDb2RlLiBUaGlzIHdpbGwgZXhjbHVkZQoJICAgICAgICAvLyBzb21lIGJpdHMgZnJvbSByZWFkaW5nIGFzIHdlIHdpbmQgdGhyb3VnaCB0aGUgYml0IG1hdHJpeC4KCSAgICAgICAgdmFyIGRhdGFNYXNrID0gRGF0YU1hc2tfMS5kZWZhdWx0LnZhbHVlcy5nZXQoZm9ybWF0SW5mby5nZXREYXRhTWFzaygpKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IHRoaXMuYml0TWF0cml4LmdldEhlaWdodCgpOwoJICAgICAgICBkYXRhTWFzay51bm1hc2tCaXRNYXRyaXgodGhpcy5iaXRNYXRyaXgsIGRpbWVuc2lvbik7CgkgICAgICAgIHZhciBmdW5jdGlvblBhdHRlcm4gPSB2ZXJzaW9uLmJ1aWxkRnVuY3Rpb25QYXR0ZXJuKCk7CgkgICAgICAgIHZhciByZWFkaW5nVXAgPSB0cnVlOwoJICAgICAgICB2YXIgcmVzdWx0ID0gbmV3IFVpbnQ4QXJyYXkodmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKTsKCSAgICAgICAgdmFyIHJlc3VsdE9mZnNldCA9IDA7CgkgICAgICAgIHZhciBjdXJyZW50Qnl0ZSA9IDA7CgkgICAgICAgIHZhciBiaXRzUmVhZCA9IDA7CgkgICAgICAgIC8vIFJlYWQgY29sdW1ucyBpbiBwYWlycywgZnJvbSByaWdodCB0byBsZWZ0CgkgICAgICAgIGZvciAodmFyIGogPSBkaW1lbnNpb24gLSAxOyBqID4gMDsgaiAtPSAyKSB7CgkgICAgICAgICAgICBpZiAoaiA9PT0gNikgewoJICAgICAgICAgICAgICAgIC8vIFNraXAgd2hvbGUgY29sdW1uIHdpdGggdmVydGljYWwgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgICAgICAgICAgICAvLyBzYXZlcyB0aW1lIGFuZCBtYWtlcyB0aGUgb3RoZXIgY29kZSBwcm9jZWVkIG1vcmUgY2xlYW5seQoJICAgICAgICAgICAgICAgIGotLTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIC8vIFJlYWQgYWx0ZXJuYXRpbmdseSBmcm9tIGJvdHRvbSB0byB0b3AgdGhlbiB0b3AgdG8gYm90dG9tCgkgICAgICAgICAgICBmb3IgKHZhciBjb3VudCA9IDA7IGNvdW50IDwgZGltZW5zaW9uOyBjb3VudCsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIGkgPSByZWFkaW5nVXAgPyBkaW1lbnNpb24gLSAxIC0gY291bnQgOiBjb3VudDsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBjb2wgPSAwOyBjb2wgPCAyOyBjb2wrKykgewoJICAgICAgICAgICAgICAgICAgICAvLyBJZ25vcmUgYml0cyBjb3ZlcmVkIGJ5IHRoZSBmdW5jdGlvbiBwYXR0ZXJuCgkgICAgICAgICAgICAgICAgICAgIGlmICghZnVuY3Rpb25QYXR0ZXJuLmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVhZCBhIGJpdAoJICAgICAgICAgICAgICAgICAgICAgICAgYml0c1JlYWQrKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIDw8PSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuYml0TWF0cml4LmdldChqIC0gY29sLCBpKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRCeXRlIHw9IDE7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJZiB3ZSd2ZSBtYWRlIGEgd2hvbGUgYnl0ZSwgc2F2ZSBpdCBvZmYKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChiaXRzUmVhZCA9PT0gOCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdFtyZXN1bHRPZmZzZXQrK10gPSAvKihieXRlKSAqLyBjdXJyZW50Qnl0ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBiaXRzUmVhZCA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudEJ5dGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVhZGluZ1VwID0gIXJlYWRpbmdVcDsgLy8gcmVhZGluZ1VwIF49IHRydWU7IC8vIHJlYWRpbmdVcCA9ICFyZWFkaW5nVXA7IC8vIHN3aXRjaCBkaXJlY3Rpb25zCgkgICAgICAgIH0KCSAgICAgICAgaWYgKHJlc3VsdE9mZnNldCAhPT0gdmVyc2lvbi5nZXRUb3RhbENvZGV3b3JkcygpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEkMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldmVydCB0aGUgbWFzayByZW1vdmFsIGRvbmUgd2hpbGUgcmVhZGluZyB0aGUgY29kZSB3b3Jkcy4gVGhlIGJpdCBtYXRyaXggc2hvdWxkIHJldmVydCB0byBpdHMgb3JpZ2luYWwgc3RhdGUuCgkgICAgICovCgkgICAgQml0TWF0cml4UGFyc2VyLnByb3RvdHlwZS5yZW1hc2sgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIGlmICh0aGlzLnBhcnNlZEZvcm1hdEluZm8gPT09IG51bGwpIHsKCSAgICAgICAgICAgIHJldHVybjsgLy8gV2UgaGF2ZSBubyBmb3JtYXQgaW5mb3JtYXRpb24sIGFuZCBoYXZlIG5vIGRhdGEgbWFzawoJICAgICAgICB9CgkgICAgICAgIHZhciBkYXRhTWFzayA9IERhdGFNYXNrXzEuZGVmYXVsdC52YWx1ZXNbdGhpcy5wYXJzZWRGb3JtYXRJbmZvLmdldERhdGFNYXNrKCldOwoJICAgICAgICB2YXIgZGltZW5zaW9uID0gdGhpcy5iaXRNYXRyaXguZ2V0SGVpZ2h0KCk7CgkgICAgICAgIGRhdGFNYXNrLnVubWFza0JpdE1hdHJpeCh0aGlzLmJpdE1hdHJpeCwgZGltZW5zaW9uKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFByZXBhcmUgdGhlIHBhcnNlciBmb3IgYSBtaXJyb3JlZCBvcGVyYXRpb24uCgkgICAgICogVGhpcyBmbGFnIGhhcyBlZmZlY3Qgb25seSBvbiB0aGUge0BsaW5rICNyZWFkRm9ybWF0SW5mb3JtYXRpb24oKX0gYW5kIHRoZQoJICAgICAqIHtAbGluayAjcmVhZFZlcnNpb24oKX0uIEJlZm9yZSBwcm9jZWVkaW5nIHdpdGgge0BsaW5rICNyZWFkQ29kZXdvcmRzKCl9IHRoZQoJICAgICAqIHtAbGluayAjbWlycm9yKCl9IG1ldGhvZCBzaG91bGQgYmUgY2FsbGVkLgoJICAgICAqCgkgICAgICogQHBhcmFtIG1pcnJvciBXaGV0aGVyIHRvIHJlYWQgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm9ybWF0aW9uIG1pcnJvcmVkLgoJICAgICAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUuc2V0TWlycm9yID0gZnVuY3Rpb24gKGlzTWlycm9yKSB7CgkgICAgICAgIHRoaXMucGFyc2VkVmVyc2lvbiA9IG51bGw7CgkgICAgICAgIHRoaXMucGFyc2VkRm9ybWF0SW5mbyA9IG51bGw7CgkgICAgICAgIHRoaXMuaXNNaXJyb3IgPSBpc01pcnJvcjsKCSAgICB9OwoJICAgIC8qKiBNaXJyb3IgdGhlIGJpdCBtYXRyaXggaW4gb3JkZXIgdG8gYXR0ZW1wdCBhIHNlY29uZCByZWFkaW5nLiAqLwoJICAgIEJpdE1hdHJpeFBhcnNlci5wcm90b3R5cGUubWlycm9yID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgYml0TWF0cml4ID0gdGhpcy5iaXRNYXRyaXg7CgkgICAgICAgIGZvciAodmFyIHggPSAwLCB3aWR0aCA9IGJpdE1hdHJpeC5nZXRXaWR0aCgpOyB4IDwgd2lkdGg7IHgrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgeSA9IHggKyAxLCBoZWlnaHQgPSBiaXRNYXRyaXguZ2V0SGVpZ2h0KCk7IHkgPCBoZWlnaHQ7IHkrKykgewoJICAgICAgICAgICAgICAgIGlmIChiaXRNYXRyaXguZ2V0KHgsIHkpICE9PSBiaXRNYXRyaXguZ2V0KHksIHgpKSB7CgkgICAgICAgICAgICAgICAgICAgIGJpdE1hdHJpeC5mbGlwKHksIHgpOwoJICAgICAgICAgICAgICAgICAgICBiaXRNYXRyaXguZmxpcCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHJldHVybiBCaXRNYXRyaXhQYXJzZXI7Cgl9KCkpOwoJQml0TWF0cml4UGFyc2VyJDEuZGVmYXVsdCA9IEJpdE1hdHJpeFBhcnNlcjsKCgl2YXIgRGF0YUJsb2NrJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGF0YUJsb2NrJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSQxID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIGJsb2NrIG9mIGRhdGEgd2l0aGluIGEgUVIgQ29kZS4gUVIgQ29kZXMgbWF5IHNwbGl0IHRoZWlyIGRhdGEgaW50bwoJICogbXVsdGlwbGUgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGlzIGEgdW5pdCBvZiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3Jkcy4gRWFjaAoJICogaXMgcmVwcmVzZW50ZWQgYnkgYW4gaW5zdGFuY2Ugb2YgdGhpcyBjbGFzcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERhdGFCbG9jayA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEYXRhQmxvY2sobnVtRGF0YUNvZGV3b3JkcyAvKmludCovLCBjb2Rld29yZHMpIHsKCSAgICAgICAgdGhpcy5udW1EYXRhQ29kZXdvcmRzID0gbnVtRGF0YUNvZGV3b3JkczsKCSAgICAgICAgdGhpcy5jb2Rld29yZHMgPSBjb2Rld29yZHM7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIDxwPldoZW4gUVIgQ29kZXMgdXNlIG11bHRpcGxlIGRhdGEgYmxvY2tzLCB0aGV5IGFyZSBhY3R1YWxseSBpbnRlcmxlYXZlZC4KCSAgICAgKiBUaGF0IGlzLCB0aGUgZmlyc3QgYnl0ZSBvZiBkYXRhIGJsb2NrIDEgdG8gbiBpcyB3cml0dGVuLCB0aGVuIHRoZSBzZWNvbmQgYnl0ZXMsIGFuZCBzbyBvbi4gVGhpcwoJICAgICAqIG1ldGhvZCB3aWxsIHNlcGFyYXRlIHRoZSBkYXRhIGludG8gb3JpZ2luYWwgYmxvY2tzLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSByYXdDb2Rld29yZHMgYnl0ZXMgYXMgcmVhZCBkaXJlY3RseSBmcm9tIHRoZSBRUiBDb2RlCgkgICAgICogQHBhcmFtIHZlcnNpb24gdmVyc2lvbiBvZiB0aGUgUVIgQ29kZQoJICAgICAqIEBwYXJhbSBlY0xldmVsIGVycm9yLWNvcnJlY3Rpb24gbGV2ZWwgb2YgdGhlIFFSIENvZGUKCSAgICAgKiBAcmV0dXJuIERhdGFCbG9ja3MgY29udGFpbmluZyBvcmlnaW5hbCBieXRlcywgImRlLWludGVybGVhdmVkIiBmcm9tIHJlcHJlc2VudGF0aW9uIGluIHRoZQoJICAgICAqICAgICAgICAgUVIgQ29kZQoJICAgICAqLwoJICAgIERhdGFCbG9jay5nZXREYXRhQmxvY2tzID0gZnVuY3Rpb24gKHJhd0NvZGV3b3JkcywgdmVyc2lvbiwgZWNMZXZlbCkgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgaWYgKHJhd0NvZGV3b3Jkcy5sZW5ndGggIT09IHZlcnNpb24uZ2V0VG90YWxDb2Rld29yZHMoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEZpZ3VyZSBvdXQgdGhlIG51bWJlciBhbmQgc2l6ZSBvZiBkYXRhIGJsb2NrcyB1c2VkIGJ5IHRoaXMgdmVyc2lvbiBhbmQKCSAgICAgICAgLy8gZXJyb3IgY29ycmVjdGlvbiBsZXZlbAoJICAgICAgICB2YXIgZWNCbG9ja3MgPSB2ZXJzaW9uLmdldEVDQmxvY2tzRm9yTGV2ZWwoZWNMZXZlbCk7CgkgICAgICAgIC8vIEZpcnN0IGNvdW50IHRoZSB0b3RhbCBudW1iZXIgb2YgZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIHRvdGFsQmxvY2tzID0gMDsKCSAgICAgICAgdmFyIGVjQmxvY2tBcnJheSA9IGVjQmxvY2tzLmdldEVDQmxvY2tzKCk7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICBmb3IgKHZhciBlY0Jsb2NrQXJyYXlfMSA9IF9fdmFsdWVzJDMoZWNCbG9ja0FycmF5KSwgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKTsgIWVjQmxvY2tBcnJheV8xXzEuZG9uZTsgZWNCbG9ja0FycmF5XzFfMSA9IGVjQmxvY2tBcnJheV8xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgIHZhciBlY0Jsb2NrID0gZWNCbG9ja0FycmF5XzFfMS52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbEJsb2NrcyArPSBlY0Jsb2NrLmdldENvdW50KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChlY0Jsb2NrQXJyYXlfMV8xICYmICFlY0Jsb2NrQXJyYXlfMV8xLmRvbmUgJiYgKF9hID0gZWNCbG9ja0FycmF5XzEucmV0dXJuKSkgX2EuY2FsbChlY0Jsb2NrQXJyYXlfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGVzdGFibGlzaCBEYXRhQmxvY2tzIG9mIHRoZSBhcHByb3ByaWF0ZSBzaXplIGFuZCBudW1iZXIgb2YgZGF0YSBjb2Rld29yZHMKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBBcnJheSh0b3RhbEJsb2Nrcyk7CgkgICAgICAgIHZhciBudW1SZXN1bHRCbG9ja3MgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZWNCbG9ja0FycmF5XzIgPSBfX3ZhbHVlcyQzKGVjQmxvY2tBcnJheSksIGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCk7ICFlY0Jsb2NrQXJyYXlfMl8xLmRvbmU7IGVjQmxvY2tBcnJheV8yXzEgPSBlY0Jsb2NrQXJyYXlfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZWNCbG9jayA9IGVjQmxvY2tBcnJheV8yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlY0Jsb2NrLmdldENvdW50KCk7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtRGF0YUNvZGV3b3JkcyA9IGVjQmxvY2suZ2V0RGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgICAgICB2YXIgbnVtQmxvY2tDb2Rld29yZHMgPSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCkgKyBudW1EYXRhQ29kZXdvcmRzOwoJICAgICAgICAgICAgICAgICAgICByZXN1bHRbbnVtUmVzdWx0QmxvY2tzKytdID0gbmV3IERhdGFCbG9jayhudW1EYXRhQ29kZXdvcmRzLCBuZXcgVWludDhBcnJheShudW1CbG9ja0NvZGV3b3JkcykpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGVjQmxvY2tBcnJheV8yXzEgJiYgIWVjQmxvY2tBcnJheV8yXzEuZG9uZSAmJiAoX2IgPSBlY0Jsb2NrQXJyYXlfMi5yZXR1cm4pKSBfYi5jYWxsKGVjQmxvY2tBcnJheV8yKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8yKSB0aHJvdyBlXzIuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICAvLyBBbGwgYmxvY2tzIGhhdmUgdGhlIHNhbWUgYW1vdW50IG9mIGRhdGEsIGV4Y2VwdCB0aGF0IHRoZSBsYXN0IG4KCSAgICAgICAgLy8gKHdoZXJlIG4gbWF5IGJlIDApIGhhdmUgMSBtb3JlIGJ5dGUuIEZpZ3VyZSBvdXQgd2hlcmUgdGhlc2Ugc3RhcnQuCgkgICAgICAgIHZhciBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGxvbmdlckJsb2Nrc1N0YXJ0QXQgPSByZXN1bHQubGVuZ3RoIC0gMTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IGNoZWNrIGxlbmd0aCBpcyBjb3JyZWN0IGhlcmUKCSAgICAgICAgd2hpbGUgKGxvbmdlckJsb2Nrc1N0YXJ0QXQgPj0gMCkgewoJICAgICAgICAgICAgdmFyIG51bUNvZGV3b3JkcyA9IHJlc3VsdFtsb25nZXJCbG9ja3NTdGFydEF0XS5jb2Rld29yZHMubGVuZ3RoOwoJICAgICAgICAgICAgaWYgKG51bUNvZGV3b3JkcyA9PT0gc2hvcnRlckJsb2Nrc1RvdGFsQ29kZXdvcmRzKSB7CgkgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsb25nZXJCbG9ja3NTdGFydEF0LS07CgkgICAgICAgIH0KCSAgICAgICAgbG9uZ2VyQmxvY2tzU3RhcnRBdCsrOwoJICAgICAgICB2YXIgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHMgPSBzaG9ydGVyQmxvY2tzVG90YWxDb2Rld29yZHMgLSBlY0Jsb2Nrcy5nZXRFQ0NvZGV3b3Jkc1BlckJsb2NrKCk7CgkgICAgICAgIC8vIFRoZSBsYXN0IGVsZW1lbnRzIG9mIHJlc3VsdCBtYXkgYmUgMSBlbGVtZW50IGxvbmdlcgoJICAgICAgICAvLyBmaXJzdCBmaWxsIG91dCBhcyBtYW55IGVsZW1lbnRzIGFzIGFsbCBvZiB0aGVtIGhhdmUKCSAgICAgICAgdmFyIHJhd0NvZGV3b3Jkc09mZnNldCA9IDA7CgkgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBudW1SZXN1bHRCbG9ja3M7IGorKykgewoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaV0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIC8vIEZpbGwgb3V0IHRoZSBsYXN0IGRhdGEgYmxvY2sgaW4gdGhlIGxvbmdlciBvbmVzCgkgICAgICAgIGZvciAodmFyIGogPSBsb25nZXJCbG9ja3NTdGFydEF0OyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbc2hvcnRlckJsb2Nrc051bURhdGFDb2Rld29yZHNdID0gcmF3Q29kZXdvcmRzW3Jhd0NvZGV3b3Jkc09mZnNldCsrXTsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cgYWRkIGluIGVycm9yIGNvcnJlY3Rpb24gYmxvY2tzCgkgICAgICAgIHZhciBtYXggPSByZXN1bHRbMF0uY29kZXdvcmRzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IHNob3J0ZXJCbG9ja3NOdW1EYXRhQ29kZXdvcmRzOyBpIDwgbWF4OyBpKyspIHsKCSAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgbnVtUmVzdWx0QmxvY2tzOyBqKyspIHsKCSAgICAgICAgICAgICAgICB2YXIgaU9mZnNldCA9IGogPCBsb25nZXJCbG9ja3NTdGFydEF0ID8gaSA6IGkgKyAxOwoJICAgICAgICAgICAgICAgIHJlc3VsdFtqXS5jb2Rld29yZHNbaU9mZnNldF0gPSByYXdDb2Rld29yZHNbcmF3Q29kZXdvcmRzT2Zmc2V0KytdOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiByZXN1bHQ7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldE51bURhdGFDb2Rld29yZHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bURhdGFDb2Rld29yZHM7CgkgICAgfTsKCSAgICBEYXRhQmxvY2sucHJvdG90eXBlLmdldENvZGV3b3JkcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuY29kZXdvcmRzOwoJICAgIH07CgkgICAgcmV0dXJuIERhdGFCbG9jazsKCX0oKSk7CglEYXRhQmxvY2skMS5kZWZhdWx0ID0gRGF0YUJsb2NrOwoKCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEgPSB7fTsKCgl2YXIgQml0U291cmNlJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEJpdFNvdXJjZSQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbiB7Ki8KCXZhciBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMSA9IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiA8cD5UaGlzIHByb3ZpZGVzIGFuIGVhc3kgYWJzdHJhY3Rpb24gdG8gcmVhZCBiaXRzIGF0IGEgdGltZSBmcm9tIGEgc2VxdWVuY2Ugb2YgYnl0ZXMsIHdoZXJlIHRoZQoJICogbnVtYmVyIG9mIGJpdHMgcmVhZCBpcyBub3Qgb2Z0ZW4gYSBtdWx0aXBsZSBvZiA4LjwvcD4KCSAqCgkgKiA8cD5UaGlzIGNsYXNzIGlzIHRocmVhZC1zYWZlIGJ1dCBub3QgcmVlbnRyYW50IC0tIHVubGVzcyB0aGUgY2FsbGVyIG1vZGlmaWVzIHRoZSBieXRlcyBhcnJheQoJICogaXQgcGFzc2VkIGluLCBpbiB3aGljaCBjYXNlIGFsbCBiZXRzIGFyZSBvZmYuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBCaXRTb3VyY2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJ5dGVzIGJ5dGVzIGZyb20gd2hpY2ggdGhpcyB3aWxsIHJlYWQgYml0cy4gQml0cyB3aWxsIGJlIHJlYWQgZnJvbSB0aGUgZmlyc3QgYnl0ZSBmaXJzdC4KCSAgICAgKiBCaXRzIGFyZSByZWFkIHdpdGhpbiBhIGJ5dGUgZnJvbSBtb3N0LXNpZ25pZmljYW50IHRvIGxlYXN0LXNpZ25pZmljYW50IGJpdC4KCSAgICAgKi8KCSAgICBmdW5jdGlvbiBCaXRTb3VyY2UoYnl0ZXMpIHsKCSAgICAgICAgdGhpcy5ieXRlcyA9IGJ5dGVzOwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSAwOwoJICAgICAgICB0aGlzLmJpdE9mZnNldCA9IDA7CgkgICAgfQoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaW5kZXggb2YgbmV4dCBiaXQgaW4gY3VycmVudCBieXRlIHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qml0T2Zmc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5iaXRPZmZzZXQ7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGluZGV4IG9mIG5leHQgYnl0ZSBpbiBpbnB1dCBieXRlIGFycmF5IHdoaWNoIHdvdWxkIGJlIHJlYWQgYnkgdGhlIG5leHQgY2FsbCB0byB7QGxpbmsgI3JlYWRCaXRzKGludCl9LgoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuZ2V0Qnl0ZU9mZnNldCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYnl0ZU9mZnNldDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBudW1CaXRzIG51bWJlciBvZiBiaXRzIHRvIHJlYWQKCSAgICAgKiBAcmV0dXJuIGludCByZXByZXNlbnRpbmcgdGhlIGJpdHMgcmVhZC4gVGhlIGJpdHMgd2lsbCBhcHBlYXIgYXMgdGhlIGxlYXN0LXNpZ25pZmljYW50CgkgICAgICogICAgICAgICBiaXRzIG9mIHRoZSBpbnQKCSAgICAgKiBAdGhyb3dzIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbiBpZiBudW1CaXRzIGlzbid0IGluIFsxLDMyXSBvciBtb3JlIHRoYW4gaXMgYXZhaWxhYmxlCgkgICAgICovCgkgICAgQml0U291cmNlLnByb3RvdHlwZS5yZWFkQml0cyA9IGZ1bmN0aW9uIChudW1CaXRzIC8qaW50Ki8pIHsKCSAgICAgICAgaWYgKG51bUJpdHMgPCAxIHx8IG51bUJpdHMgPiAzMiB8fCBudW1CaXRzID4gdGhpcy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xLmRlZmF1bHQoJycgKyBudW1CaXRzKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVzdWx0ID0gMDsKCSAgICAgICAgdmFyIGJpdE9mZnNldCA9IHRoaXMuYml0T2Zmc2V0OwoJICAgICAgICB2YXIgYnl0ZU9mZnNldCA9IHRoaXMuYnl0ZU9mZnNldDsKCSAgICAgICAgdmFyIGJ5dGVzID0gdGhpcy5ieXRlczsKCSAgICAgICAgLy8gRmlyc3QsIHJlYWQgcmVtYWluZGVyIGZyb20gY3VycmVudCBieXRlCgkgICAgICAgIGlmIChiaXRPZmZzZXQgPiAwKSB7CgkgICAgICAgICAgICB2YXIgYml0c0xlZnQgPSA4IC0gYml0T2Zmc2V0OwoJICAgICAgICAgICAgdmFyIHRvUmVhZCA9IG51bUJpdHMgPCBiaXRzTGVmdCA/IG51bUJpdHMgOiBiaXRzTGVmdDsKCSAgICAgICAgICAgIHZhciBiaXRzVG9Ob3RSZWFkID0gYml0c0xlZnQgLSB0b1JlYWQ7CgkgICAgICAgICAgICB2YXIgbWFzayA9ICgweEZGID4+ICg4IC0gdG9SZWFkKSkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgIHJlc3VsdCA9IChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQ7CgkgICAgICAgICAgICBudW1CaXRzIC09IHRvUmVhZDsKCSAgICAgICAgICAgIGJpdE9mZnNldCArPSB0b1JlYWQ7CgkgICAgICAgICAgICBpZiAoYml0T2Zmc2V0ID09PSA4KSB7CgkgICAgICAgICAgICAgICAgYml0T2Zmc2V0ID0gMDsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gTmV4dCByZWFkIHdob2xlIGJ5dGVzCgkgICAgICAgIGlmIChudW1CaXRzID4gMCkgewoJICAgICAgICAgICAgd2hpbGUgKG51bUJpdHMgPj0gOCkgewoJICAgICAgICAgICAgICAgIHJlc3VsdCA9IChyZXN1bHQgPDwgOCkgfCAoYnl0ZXNbYnl0ZU9mZnNldF0gJiAweEZGKTsKCSAgICAgICAgICAgICAgICBieXRlT2Zmc2V0Kys7CgkgICAgICAgICAgICAgICAgbnVtQml0cyAtPSA4OwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gRmluYWxseSByZWFkIGEgcGFydGlhbCBieXRlCgkgICAgICAgICAgICBpZiAobnVtQml0cyA+IDApIHsKCSAgICAgICAgICAgICAgICB2YXIgYml0c1RvTm90UmVhZCA9IDggLSBudW1CaXRzOwoJICAgICAgICAgICAgICAgIHZhciBtYXNrID0gKDB4RkYgPj4gYml0c1RvTm90UmVhZCkgPDwgYml0c1RvTm90UmVhZDsKCSAgICAgICAgICAgICAgICByZXN1bHQgPSAocmVzdWx0IDw8IG51bUJpdHMpIHwgKChieXRlc1tieXRlT2Zmc2V0XSAmIG1hc2spID4+IGJpdHNUb05vdFJlYWQpOwoJICAgICAgICAgICAgICAgIGJpdE9mZnNldCArPSBudW1CaXRzOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHRoaXMuYml0T2Zmc2V0ID0gYml0T2Zmc2V0OwoJICAgICAgICB0aGlzLmJ5dGVPZmZzZXQgPSBieXRlT2Zmc2V0OwoJICAgICAgICByZXR1cm4gcmVzdWx0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB0aGF0IGNhbiBiZSByZWFkIHN1Y2Nlc3NmdWxseQoJICAgICAqLwoJICAgIEJpdFNvdXJjZS5wcm90b3R5cGUuYXZhaWxhYmxlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gOCAqICh0aGlzLmJ5dGVzLmxlbmd0aCAtIHRoaXMuYnl0ZU9mZnNldCkgLSB0aGlzLmJpdE9mZnNldDsKCSAgICB9OwoJICAgIHJldHVybiBCaXRTb3VyY2U7Cgl9KCkpOwoJQml0U291cmNlJDEuZGVmYXVsdCA9IEJpdFNvdXJjZTsKCgl2YXIgRGVjb2RlclJlc3VsdCQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVyUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGVjb2RpbmcgYSBtYXRyaXggb2YgYml0cy4gVGhpcyB0eXBpY2FsbHkKCSAqIGFwcGxpZXMgdG8gMkQgYmFyY29kZSBmb3JtYXRzLiBGb3Igbm93IGl0IGNvbnRhaW5zIHRoZSByYXcgYnl0ZXMgb2J0YWluZWQsCgkgKiBhcyB3ZWxsIGFzIGEgU3RyaW5nIGludGVycHJldGF0aW9uIG9mIHRob3NlIGJ5dGVzLCBpZiBhcHBsaWNhYmxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlclJlc3VsdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IocmF3Qnl0ZXM6IFVpbnQ4QXJyYXksCgkgICAgLy8gICAgICAgICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIExpc3Q8VWludDhBcnJheT4gYnl0ZVNlZ21lbnRzLAoJICAgIC8vICAgICAgICAgICAgICAgICAgICAgIFN0cmluZyBlY0xldmVsKSB7CgkgICAgLy8gICB0aGlzKHJhd0J5dGVzLCB0ZXh0LCBieXRlU2VnbWVudHMsIGVjTGV2ZWwsIC0xLCAtMSkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRGVjb2RlclJlc3VsdChyYXdCeXRlcywgdGV4dCwgYnl0ZVNlZ21lbnRzLCBlY0xldmVsLCBzdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXIsIHN0cnVjdHVyZWRBcHBlbmRQYXJpdHkpIHsKCSAgICAgICAgaWYgKHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9PT0gdm9pZCAwKSB7IHN0cnVjdHVyZWRBcHBlbmRTZXF1ZW5jZU51bWJlciA9IC0xOyB9CgkgICAgICAgIGlmIChzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID09PSB2b2lkIDApIHsgc3RydWN0dXJlZEFwcGVuZFBhcml0eSA9IC0xOyB9CgkgICAgICAgIHRoaXMucmF3Qnl0ZXMgPSByYXdCeXRlczsKCSAgICAgICAgdGhpcy50ZXh0ID0gdGV4dDsKCSAgICAgICAgdGhpcy5ieXRlU2VnbWVudHMgPSBieXRlU2VnbWVudHM7CgkgICAgICAgIHRoaXMuZWNMZXZlbCA9IGVjTGV2ZWw7CgkgICAgICAgIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyOwoJICAgICAgICB0aGlzLnN0cnVjdHVyZWRBcHBlbmRQYXJpdHkgPSBzdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgICAgICB0aGlzLm51bUJpdHMgPSAocmF3Qnl0ZXMgPT09IHVuZGVmaW5lZCB8fCByYXdCeXRlcyA9PT0gbnVsbCkgPyAwIDogOCAqIHJhd0J5dGVzLmxlbmd0aDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiByYXcgYnl0ZXMgcmVwcmVzZW50aW5nIHRoZSByZXN1bHQsIG9yIHtAY29kZSBudWxsfSBpZiBub3QgYXBwbGljYWJsZQoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldFJhd0J5dGVzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yYXdCeXRlczsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gaG93IG1hbnkgYml0cyBvZiB7QGxpbmsgI2dldFJhd0J5dGVzKCl9IGFyZSB2YWxpZDsgdHlwaWNhbGx5IDggdGltZXMgaXRzIGxlbmd0aAoJICAgICAqIEBzaW5jZSAzLjMuMAoJICAgICAqLwoJICAgIERlY29kZXJSZXN1bHQucHJvdG90eXBlLmdldE51bUJpdHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm51bUJpdHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gbnVtQml0cyBvdmVycmlkZXMgdGhlIG51bWJlciBvZiBiaXRzIHRoYXQgYXJlIHZhbGlkIGluIHtAbGluayAjZ2V0UmF3Qnl0ZXMoKX0KCSAgICAgKiBAc2luY2UgMy4zLjAKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXROdW1CaXRzID0gZnVuY3Rpb24gKG51bUJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLm51bUJpdHMgPSBudW1CaXRzOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0ZXh0IHJlcHJlc2VudGF0aW9uIG9mIHRoZSByZXN1bHQKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRUZXh0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50ZXh0OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBsaXN0IG9mIGJ5dGUgc2VnbWVudHMgaW4gdGhlIHJlc3VsdCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0Qnl0ZVNlZ21lbnRzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5ieXRlU2VnbWVudHM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIG5hbWUgb2YgZXJyb3IgY29ycmVjdGlvbiBsZXZlbCB1c2VkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFQ0xldmVsID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lY0xldmVsOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJyb3JzIGNvcnJlY3RlZCwgb3Ige0Bjb2RlIG51bGx9IGlmIG5vdCBhcHBsaWNhYmxlCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0RXJyb3JzQ29ycmVjdGVkID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lcnJvcnNDb3JyZWN0ZWQ7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcnJvcnNDb3JyZWN0ZWQgPSBmdW5jdGlvbiAoZXJyb3JzQ29ycmVjdGVkIC8qSW50ZWdlciovKSB7CgkgICAgICAgIHRoaXMuZXJyb3JzQ29ycmVjdGVkID0gZXJyb3JzQ29ycmVjdGVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgZXJhc3VyZXMgY29ycmVjdGVkLCBvciB7QGNvZGUgbnVsbH0gaWYgbm90IGFwcGxpY2FibGUKCSAgICAgKi8KCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRFcmFzdXJlcyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuZXJhc3VyZXM7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5zZXRFcmFzdXJlcyA9IGZ1bmN0aW9uIChlcmFzdXJlcyAvKkludGVnZXIqLykgewoJICAgICAgICB0aGlzLmVyYXN1cmVzID0gZXJhc3VyZXM7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIGFyYml0cmFyeSBhZGRpdGlvbmFsIG1ldGFkYXRhCgkgICAgICovCgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0T3RoZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuc2V0T3RoZXIgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgdGhpcy5vdGhlciA9IG90aGVyOwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuaGFzU3RydWN0dXJlZEFwcGVuZCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuc3RydWN0dXJlZEFwcGVuZFBhcml0eSA+PSAwICYmIHRoaXMuc3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID49IDA7CgkgICAgfTsKCSAgICBEZWNvZGVyUmVzdWx0LnByb3RvdHlwZS5nZXRTdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kUGFyaXR5OwoJICAgIH07CgkgICAgRGVjb2RlclJlc3VsdC5wcm90b3R5cGUuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJ1Y3R1cmVkQXBwZW5kU2VxdWVuY2VOdW1iZXI7CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlclJlc3VsdDsKCX0oKSk7CglEZWNvZGVyUmVzdWx0JDEuZGVmYXVsdCA9IERlY29kZXJSZXN1bHQ7CgoJdmFyIE1vZGUgPSB7fTsKCgkoZnVuY3Rpb24gKGV4cG9ydHMpIHsKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJZXhwb3J0cy5Nb2RlVmFsdWVzID0gdm9pZCAwOwoJdmFyIElsbGVnYWxBcmd1bWVudEV4Y2VwdGlvbl8xID0gSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uJDE7Cgl2YXIgTW9kZVZhbHVlczsKCShmdW5jdGlvbiAoTW9kZVZhbHVlcykgewoJICAgIE1vZGVWYWx1ZXNbTW9kZVZhbHVlc1siVEVSTUlOQVRPUiJdID0gMF0gPSAiVEVSTUlOQVRPUiI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJOVU1FUklDIl0gPSAxXSA9ICJOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkFMUEhBTlVNRVJJQyJdID0gMl0gPSAiQUxQSEFOVU1FUklDIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIlNUUlVDVFVSRURfQVBQRU5EIl0gPSAzXSA9ICJTVFJVQ1RVUkVEX0FQUEVORCI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJCWVRFIl0gPSA0XSA9ICJCWVRFIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkVDSSJdID0gNV0gPSAiRUNJIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIktBTkpJIl0gPSA2XSA9ICJLQU5KSSI7CgkgICAgTW9kZVZhbHVlc1tNb2RlVmFsdWVzWyJGTkMxX0ZJUlNUX1BPU0lUSU9OIl0gPSA3XSA9ICJGTkMxX0ZJUlNUX1BPU0lUSU9OIjsKCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkZOQzFfU0VDT05EX1BPU0lUSU9OIl0gPSA4XSA9ICJGTkMxX1NFQ09ORF9QT1NJVElPTiI7CgkgICAgLyoqIFNlZSBHQlQgMTgyODQtMjAwMDsgIkhhbnppIiBpcyBhIHRyYW5zbGl0ZXJhdGlvbiBvZiB0aGlzIG1vZGUgbmFtZS4gKi8KCSAgICBNb2RlVmFsdWVzW01vZGVWYWx1ZXNbIkhBTlpJIl0gPSA5XSA9ICJIQU5aSSI7Cgl9KShNb2RlVmFsdWVzID0gZXhwb3J0cy5Nb2RlVmFsdWVzIHx8IChleHBvcnRzLk1vZGVWYWx1ZXMgPSB7fSkpOwoJLyoqCgkgKiA8cD5TZWUgSVNPIDE4MDA0OjIwMDYsIDYuNC4xLCBUYWJsZXMgMiBhbmQgMy4gVGhpcyBlbnVtIGVuY2Fwc3VsYXRlcyB0aGUgdmFyaW91cyBtb2RlcyBpbiB3aGljaAoJICogZGF0YSBjYW4gYmUgZW5jb2RlZCB0byBiaXRzIGluIHRoZSBRUiBjb2RlIHN0YW5kYXJkLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgTW9kZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBNb2RlKHZhbHVlLCBzdHJpbmdWYWx1ZSwgY2hhcmFjdGVyQ291bnRCaXRzRm9yVmVyc2lvbnMsIGJpdHMgLyppbnQqLykgewoJICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWU7CgkgICAgICAgIHRoaXMuc3RyaW5nVmFsdWUgPSBzdHJpbmdWYWx1ZTsKCSAgICAgICAgdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9ucyA9IGNoYXJhY3RlckNvdW50Qml0c0ZvclZlcnNpb25zOwoJICAgICAgICB0aGlzLmJpdHMgPSBiaXRzOwoJICAgICAgICBNb2RlLkZPUl9CSVRTLnNldChiaXRzLCB0aGlzKTsKCSAgICAgICAgTW9kZS5GT1JfVkFMVUUuc2V0KHZhbHVlLCB0aGlzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHBhcmFtIGJpdHMgZm91ciBiaXRzIGVuY29kaW5nIGEgUVIgQ29kZSBkYXRhIG1vZGUKCSAgICAgKiBAcmV0dXJuIE1vZGUgZW5jb2RlZCBieSB0aGVzZSBiaXRzCgkgICAgICogQHRocm93cyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb24gaWYgYml0cyBkbyBub3QgY29ycmVzcG9uZCB0byBhIGtub3duIG1vZGUKCSAgICAgKi8KCSAgICBNb2RlLmZvckJpdHMgPSBmdW5jdGlvbiAoYml0cyAvKmludCovKSB7CgkgICAgICAgIHZhciBtb2RlID0gTW9kZS5GT1JfQklUUy5nZXQoYml0cyk7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IG1vZGUpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBJbGxlZ2FsQXJndW1lbnRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG1vZGU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gdmVyc2lvbiB2ZXJzaW9uIGluIHF1ZXN0aW9uCgkgICAgICogQHJldHVybiBudW1iZXIgb2YgYml0cyB1c2VkLCBpbiB0aGlzIFFSIENvZGUgc3ltYm9sIHtAbGluayBWZXJzaW9ufSwgdG8gZW5jb2RlIHRoZQoJICAgICAqICAgICAgICAgY291bnQgb2YgY2hhcmFjdGVycyB0aGF0IHdpbGwgZm9sbG93IGVuY29kZWQgaW4gdGhpcyBNb2RlCgkgICAgICovCgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Q2hhcmFjdGVyQ291bnRCaXRzID0gZnVuY3Rpb24gKHZlcnNpb24pIHsKCSAgICAgICAgdmFyIHZlcnNpb25OdW1iZXIgPSB2ZXJzaW9uLmdldFZlcnNpb25OdW1iZXIoKTsKCSAgICAgICAgdmFyIG9mZnNldDsKCSAgICAgICAgaWYgKHZlcnNpb25OdW1iZXIgPD0gOSkgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmICh2ZXJzaW9uTnVtYmVyIDw9IDI2KSB7CgkgICAgICAgICAgICBvZmZzZXQgPSAxOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgb2Zmc2V0ID0gMjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gdGhpcy5jaGFyYWN0ZXJDb3VudEJpdHNGb3JWZXJzaW9uc1tvZmZzZXRdOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0VmFsdWUgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlOwoJICAgIH07CgkgICAgTW9kZS5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIChvKSB7CgkgICAgICAgIGlmICghKG8gaW5zdGFuY2VvZiBNb2RlKSkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlciA9IG87CgkgICAgICAgIHJldHVybiB0aGlzLnZhbHVlID09PSBvdGhlci52YWx1ZTsKCSAgICB9OwoJICAgIE1vZGUucHJvdG90eXBlLnRvU3RyaW5nID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5zdHJpbmdWYWx1ZTsKCSAgICB9OwoJICAgIE1vZGUuRk9SX0JJVFMgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5GT1JfVkFMVUUgPSBuZXcgTWFwKCk7CgkgICAgTW9kZS5URVJNSU5BVE9SID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5URVJNSU5BVE9SLCAnVEVSTUlOQVRPUicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDAwKTsgLy8gTm90IHJlYWxseSBhIG1vZGUuLi4KCSAgICBNb2RlLk5VTUVSSUMgPSBuZXcgTW9kZShNb2RlVmFsdWVzLk5VTUVSSUMsICdOVU1FUklDJywgSW50MzJBcnJheS5mcm9tKFsxMCwgMTIsIDE0XSksIDB4MDEpOwoJICAgIE1vZGUuQUxQSEFOVU1FUklDID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5BTFBIQU5VTUVSSUMsICdBTFBIQU5VTUVSSUMnLCBJbnQzMkFycmF5LmZyb20oWzksIDExLCAxM10pLCAweDAyKTsKCSAgICBNb2RlLlNUUlVDVFVSRURfQVBQRU5EID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5TVFJVQ1RVUkVEX0FQUEVORCwgJ1NUUlVDVFVSRURfQVBQRU5EJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDMpOyAvLyBOb3Qgc3VwcG9ydGVkCgkgICAgTW9kZS5CWVRFID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5CWVRFLCAnQllURScsIEludDMyQXJyYXkuZnJvbShbOCwgMTYsIDE2XSksIDB4MDQpOwoJICAgIE1vZGUuRUNJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5FQ0ksICdFQ0knLCBJbnQzMkFycmF5LmZyb20oWzAsIDAsIDBdKSwgMHgwNyk7IC8vIGNoYXJhY3RlciBjb3VudHMgZG9uJ3QgYXBwbHkKCSAgICBNb2RlLktBTkpJID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5LQU5KSSwgJ0tBTkpJJywgSW50MzJBcnJheS5mcm9tKFs4LCAxMCwgMTJdKSwgMHgwOCk7CgkgICAgTW9kZS5GTkMxX0ZJUlNUX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX0ZJUlNUX1BPU0lUSU9OLCAnRk5DMV9GSVJTVF9QT1NJVElPTicsIEludDMyQXJyYXkuZnJvbShbMCwgMCwgMF0pLCAweDA1KTsKCSAgICBNb2RlLkZOQzFfU0VDT05EX1BPU0lUSU9OID0gbmV3IE1vZGUoTW9kZVZhbHVlcy5GTkMxX1NFQ09ORF9QT1NJVElPTiwgJ0ZOQzFfU0VDT05EX1BPU0lUSU9OJywgSW50MzJBcnJheS5mcm9tKFswLCAwLCAwXSksIDB4MDkpOwoJICAgIC8qKiBTZWUgR0JUIDE4Mjg0LTIwMDA7ICJIYW56aSIgaXMgYSB0cmFuc2xpdGVyYXRpb24gb2YgdGhpcyBtb2RlIG5hbWUuICovCgkgICAgTW9kZS5IQU5aSSA9IG5ldyBNb2RlKE1vZGVWYWx1ZXMuSEFOWkksICdIQU5aSScsIEludDMyQXJyYXkuZnJvbShbOCwgMTAsIDEyXSksIDB4MEQpOwoJICAgIHJldHVybiBNb2RlOwoJfSgpKTsKCWV4cG9ydHMuZGVmYXVsdCA9IE1vZGU7CgoJfShNb2RlKSk7CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlLmRlY29kZXIgeyovCgl2YXIgQml0U291cmNlXzEgPSBCaXRTb3VyY2UkMTsKCXZhciBDaGFyYWN0ZXJTZXRFQ0lfMSA9IENoYXJhY3RlclNldEVDSTsKCXZhciBEZWNvZGVyUmVzdWx0XzEgPSBEZWNvZGVyUmVzdWx0JDE7Cgl2YXIgU3RyaW5nVXRpbHNfMSA9IFN0cmluZ1V0aWxzJDE7Cgl2YXIgRm9ybWF0RXhjZXB0aW9uXzEgPSBGb3JtYXRFeGNlcHRpb24kMTsKCXZhciBTdHJpbmdCdWlsZGVyXzEgPSBTdHJpbmdCdWlsZGVyJDE7Cgl2YXIgU3RyaW5nRW5jb2RpbmdfMSA9IFN0cmluZ0VuY29kaW5nJDE7Cgl2YXIgTW9kZV8xID0gTW9kZTsKCS8qaW1wb3J0IGphdmEuaW8uVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbjsqLwoJLyppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbGxlY3Rpb247Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlFSIENvZGVzIGNhbiBlbmNvZGUgdGV4dCBhcyBiaXRzIGluIG9uZSBvZiBzZXZlcmFsIG1vZGVzLCBhbmQgY2FuIHVzZSBtdWx0aXBsZSBtb2RlcwoJICogaW4gb25lIFFSIENvZGUuIFRoaXMgY2xhc3MgZGVjb2RlcyB0aGUgYml0cyBiYWNrIGludG8gdGV4dC48L3A+CgkgKgoJICogPHA+U2VlIElTTyAxODAwNDoyMDA2LCA2LjQuMyAtIDYuNC43PC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWNvZGVkQml0U3RyZWFtUGFyc2VyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERlY29kZWRCaXRTdHJlYW1QYXJzZXIoKSB7CgkgICAgfQoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlID0gZnVuY3Rpb24gKGJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cykgewoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRTb3VyY2VfMS5kZWZhdWx0KGJ5dGVzKTsKCSAgICAgICAgdmFyIHJlc3VsdCA9IG5ldyBTdHJpbmdCdWlsZGVyXzEuZGVmYXVsdCgpOwoJICAgICAgICB2YXIgYnl0ZVNlZ21lbnRzID0gbmV3IEFycmF5KCk7IC8vIDEKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IEkgZG8gbm90IHVzZSBjb25zdHJ1Y3RvciB3aXRoIHNpemUgMSBhcyBpbiBvcmlnaW5hbCBKYXZhIG1lYW5zIGNhcGFjaXR5IGFuZCB0aGUgYXJyYXkgbGVuZ3RoIGlzIGNoZWNrZWQgYmVsb3cKCSAgICAgICAgdmFyIHN5bWJvbFNlcXVlbmNlID0gLTE7CgkgICAgICAgIHZhciBwYXJpdHlEYXRhID0gLTE7CgkgICAgICAgIHRyeSB7CgkgICAgICAgICAgICB2YXIgY3VycmVudENoYXJhY3RlclNldEVDSSA9IG51bGw7CgkgICAgICAgICAgICB2YXIgZmMxSW5FZmZlY3QgPSBmYWxzZTsKCSAgICAgICAgICAgIHZhciBtb2RlID0gdm9pZCAwOwoJICAgICAgICAgICAgZG8gewoJICAgICAgICAgICAgICAgIC8vIFdoaWxlIHN0aWxsIGFub3RoZXIgc2VnbWVudCB0byByZWFkLi4uCgkgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA0KSB7CgkgICAgICAgICAgICAgICAgICAgIC8vIE9LLCBhc3N1bWUgd2UncmUgZG9uZS4gUmVhbGx5LCBhIFRFUk1JTkFUT1IgbW9kZSBzaG91bGQgaGF2ZSBiZWVuIHJlY29yZGVkIGhlcmUKCSAgICAgICAgICAgICAgICAgICAgbW9kZSA9IE1vZGVfMS5kZWZhdWx0LlRFUk1JTkFUT1I7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgICAgICAgICB2YXIgbW9kZUJpdHMgPSBiaXRzLnJlYWRCaXRzKDQpOwoJICAgICAgICAgICAgICAgICAgICBtb2RlID0gTW9kZV8xLmRlZmF1bHQuZm9yQml0cyhtb2RlQml0cyk7IC8vIG1vZGUgaXMgZW5jb2RlZCBieSA0IGJpdHMKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgc3dpdGNoIChtb2RlKSB7CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUjoKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkZOQzFfRklSU1RfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuRk5DMV9TRUNPTkRfUE9TSVRJT046CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBkbyBsaXR0bGUgd2l0aCBGTkMxIGV4Y2VwdCBhbHRlciB0aGUgcGFyc2VkIHJlc3VsdCBhIGJpdCBhY2NvcmRpbmcgdG8gdGhlIHNwZWMKCSAgICAgICAgICAgICAgICAgICAgICAgIGZjMUluRWZmZWN0ID0gdHJ1ZTsKCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LlNUUlVDVFVSRURfQVBQRU5EOgoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCAxNikgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBzZXF1ZW5jZSBudW1iZXIgYW5kIHBhcml0eSBpcyBhZGRlZCBsYXRlciB0byB0aGUgcmVzdWx0IG1ldGFkYXRhCgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWFkIG5leHQgOCBiaXRzIChzeW1ib2wgc2VxdWVuY2UgIykgYW5kIDggYml0cyAoZGF0YTogcGFyaXR5KSwgdGhlbiBjb250aW51ZQoJICAgICAgICAgICAgICAgICAgICAgICAgc3ltYm9sU2VxdWVuY2UgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgcGFyaXR5RGF0YSA9IGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5FQ0k6CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDb3VudCBkb2Vzbid0IGFwcGx5IHRvIEVDSQoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZhbHVlID0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5wYXJzZUVDSVZhbHVlKGJpdHMpOwoJICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudENoYXJhY3RlclNldEVDSSA9IENoYXJhY3RlclNldEVDSV8xLmRlZmF1bHQuZ2V0Q2hhcmFjdGVyU2V0RUNJQnlWYWx1ZSh2YWx1ZSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgY2FzZSBNb2RlXzEuZGVmYXVsdC5IQU5aSToKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZpcnN0IGhhbmRsZSBIYW56aSBtb2RlIHdoaWNoIGRvZXMgbm90IHN0YXJ0IHdpdGggY2hhcmFjdGVyIGNvdW50CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGluZXNlIG1vZGUgY29udGFpbnMgYSBzdWIgc2V0IGluZGljYXRvciByaWdodCBhZnRlciBtb2RlIGluZGljYXRvcgoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHN1YnNldCA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY291bnRIYW56aSA9IGJpdHMucmVhZEJpdHMobW9kZS5nZXRDaGFyYWN0ZXJDb3VudEJpdHModmVyc2lvbikpOwoJICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHN1YnNldCA9PT0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUKSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVIYW56aVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudEhhbnppKTsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gIk5vcm1hbCIgUVIgY29kZSBtb2RlczoKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEhvdyBtYW55IGNoYXJhY3RlcnMgd2lsbCBmb2xsb3csIGVuY29kZWQgaW4gdGhpcyBtb2RlPwoJICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGNvdW50ID0gYml0cy5yZWFkQml0cyhtb2RlLmdldENoYXJhY3RlckNvdW50Qml0cyh2ZXJzaW9uKSk7CgkgICAgICAgICAgICAgICAgICAgICAgICBzd2l0Y2ggKG1vZGUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0Lk5VTUVSSUM6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlTnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuQUxQSEFOVU1FUklDOgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgZmMxSW5FZmZlY3QpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlIE1vZGVfMS5kZWZhdWx0LkJZVEU6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQoYml0cywgcmVzdWx0LCBjb3VudCwgY3VycmVudENoYXJhY3RlclNldEVDSSwgYnl0ZVNlZ21lbnRzLCBoaW50cyk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgTW9kZV8xLmRlZmF1bHQuS0FOSkk6CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlS2FuamlTZWdtZW50KGJpdHMsIHJlc3VsdCwgY291bnQpOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSB3aGlsZSAobW9kZSAhPT0gTW9kZV8xLmRlZmF1bHQuVEVSTUlOQVRPUik7CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlhZSAvKjogSWxsZWdhbEFyZ3VtZW50RXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIGZyb20gcmVhZEJpdHMoKSBjYWxscwoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gbmV3IERlY29kZXJSZXN1bHRfMS5kZWZhdWx0KGJ5dGVzLCByZXN1bHQudG9TdHJpbmcoKSwgYnl0ZVNlZ21lbnRzLmxlbmd0aCA9PT0gMCA/IG51bGwgOiBieXRlU2VnbWVudHMsIGVjTGV2ZWwgPT09IG51bGwgPyBudWxsIDogZWNMZXZlbC50b1N0cmluZygpLCBzeW1ib2xTZXF1ZW5jZSwgcGFyaXR5RGF0YSk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBTZWUgc3BlY2lmaWNhdGlvbiBHQlQgMTgyODQtMjAwMAoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlSGFuemlTZWdtZW50ID0gZnVuY3Rpb24gKGJpdHMsIHJlc3VsdCwgY291bnQgLyppbnQqLykgewoJICAgICAgICAvLyBEb24ndCBjcmFzaCB0cnlpbmcgdG8gcmVhZCBtb3JlIGJpdHMgdGhhbiB3ZSBoYXZlIGF2YWlsYWJsZS4KCSAgICAgICAgaWYgKGNvdW50ICogMTMgPiBiaXRzLmF2YWlsYWJsZSgpKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIC8vIEVhY2ggY2hhcmFjdGVyIHdpbGwgcmVxdWlyZSAyIGJ5dGVzLiBSZWFkIHRoZSBjaGFyYWN0ZXJzIGFzIDItYnl0ZSBwYWlycwoJICAgICAgICAvLyBhbmQgZGVjb2RlIGFzIEdCMjMxMiBhZnRlcndhcmRzCgkgICAgICAgIHZhciBidWZmZXIgPSBuZXcgVWludDhBcnJheSgyICogY291bnQpOwoJICAgICAgICB2YXIgb2Zmc2V0ID0gMDsKCSAgICAgICAgd2hpbGUgKGNvdW50ID4gMCkgewoJICAgICAgICAgICAgLy8gRWFjaCAxMyBiaXRzIGVuY29kZXMgYSAyLWJ5dGUgY2hhcmFjdGVyCgkgICAgICAgICAgICB2YXIgdHdvQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDEzKTsKCSAgICAgICAgICAgIHZhciBhc3NlbWJsZWRUd29CeXRlcyA9ICgoKHR3b0J5dGVzIC8gMHgwNjApIDw8IDgpICYgMHhGRkZGRkZGRikgfCAodHdvQnl0ZXMgJSAweDA2MCk7CgkgICAgICAgICAgICBpZiAoYXNzZW1ibGVkVHdvQnl0ZXMgPCAweDAwM0JGKSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QTFBMSB0byAweEFBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBMUExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgLy8gSW4gdGhlIDB4QjBBMSB0byAweEZBRkUgcmFuZ2UKCSAgICAgICAgICAgICAgICBhc3NlbWJsZWRUd29CeXRlcyArPSAweDBBNkExOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYnVmZmVyW29mZnNldF0gPSAvKihieXRlKSAqLyAoKGFzc2VtYmxlZFR3b0J5dGVzID4+IDgpICYgMHhGRik7CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0ICsgMV0gPSAvKihieXRlKSAqLyAoYXNzZW1ibGVkVHdvQnl0ZXMgJiAweEZGKTsKCSAgICAgICAgICAgIG9mZnNldCArPSAyOwoJICAgICAgICAgICAgY291bnQtLTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKGJ1ZmZlciwgU3RyaW5nVXRpbHNfMS5kZWZhdWx0LkdCMjMxMikpOwoJICAgICAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IFRPRE86IGltcGxlbWVudCBHQjIzMTIgZGVjb2RlLiBTdHJpbmdWaWV3IGZyb20gTUROIGNvdWxkIGJlIGEgc3RhcnRpbmcgcG9pbnQKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVLYW5qaVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoY291bnQgKiAxMyA+IGJpdHMuYXZhaWxhYmxlKCkpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gRWFjaCBjaGFyYWN0ZXIgd2lsbCByZXF1aXJlIDIgYnl0ZXMuIFJlYWQgdGhlIGNoYXJhY3RlcnMgYXMgMi1ieXRlIHBhaXJzCgkgICAgICAgIC8vIGFuZCBkZWNvZGUgYXMgU2hpZnRfSklTIGFmdGVyd2FyZHMKCSAgICAgICAgdmFyIGJ1ZmZlciA9IG5ldyBVaW50OEFycmF5KDIgKiBjb3VudCk7CgkgICAgICAgIHZhciBvZmZzZXQgPSAwOwoJICAgICAgICB3aGlsZSAoY291bnQgPiAwKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEzIGJpdHMgZW5jb2RlcyBhIDItYnl0ZSBjaGFyYWN0ZXIKCSAgICAgICAgICAgIHZhciB0d29CeXRlcyA9IGJpdHMucmVhZEJpdHMoMTMpOwoJICAgICAgICAgICAgdmFyIGFzc2VtYmxlZFR3b0J5dGVzID0gKCgodHdvQnl0ZXMgLyAweDBDMCkgPDwgOCkgJiAweEZGRkZGRkZGKSB8ICh0d29CeXRlcyAlIDB4MEMwKTsKCSAgICAgICAgICAgIGlmIChhc3NlbWJsZWRUd29CeXRlcyA8IDB4MDFGMDApIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHg4MTQwIHRvIDB4OUZGQyByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MDgxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAvLyBJbiB0aGUgMHhFMDQwIHRvIDB4RUJCRiByYW5nZQoJICAgICAgICAgICAgICAgIGFzc2VtYmxlZFR3b0J5dGVzICs9IDB4MEMxNDA7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBidWZmZXJbb2Zmc2V0XSA9IC8qKGJ5dGUpICovIChhc3NlbWJsZWRUd29CeXRlcyA+PiA4KTsKCSAgICAgICAgICAgIGJ1ZmZlcltvZmZzZXQgKyAxXSA9IC8qKGJ5dGUpICovIGFzc2VtYmxlZFR3b0J5dGVzOwoJICAgICAgICAgICAgb2Zmc2V0ICs9IDI7CgkgICAgICAgICAgICBjb3VudC0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIFNoaWZ0X0pJUyBtYXkgbm90IGJlIHN1cHBvcnRlZCBpbiBzb21lIGVudmlyb25tZW50czoKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoU3RyaW5nRW5jb2RpbmdfMS5kZWZhdWx0LmRlY29kZShidWZmZXIsIFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5TSElGVF9KSVMpKTsKCSAgICAgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBUT0RPOiBpbXBsZW1lbnQgU0hJRlRfSklTIGRlY29kZS4gU3RyaW5nVmlldyBmcm9tIE1ETiBjb3VsZCBiZSBhIHN0YXJ0aW5nIHBvaW50CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGlnbm9yZWQgLyo6IFVuc3VwcG9ydGVkRW5jb2RpbmdFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoaWdub3JlZCk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuZGVjb2RlQnl0ZVNlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLCBieXRlU2VnbWVudHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIERvbid0IGNyYXNoIHRyeWluZyB0byByZWFkIG1vcmUgYml0cyB0aGFuIHdlIGhhdmUgYXZhaWxhYmxlLgoJICAgICAgICBpZiAoOCAqIGNvdW50ID4gYml0cy5hdmFpbGFibGUoKSkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgcmVhZEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkoY291bnQpOwoJICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGNvdW50OyBpKyspIHsKCSAgICAgICAgICAgIHJlYWRCeXRlc1tpXSA9IC8qKGJ5dGUpICovIGJpdHMucmVhZEJpdHMoOCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVuY29kaW5nOwoJICAgICAgICBpZiAoY3VycmVudENoYXJhY3RlclNldEVDSSA9PT0gbnVsbCkgewoJICAgICAgICAgICAgLy8gVGhlIHNwZWMgaXNuJ3QgY2xlYXIgb24gdGhpcyBtb2RlOyBzZWUKCSAgICAgICAgICAgIC8vIHNlY3Rpb24gNi40LjU6IHQgZG9lcyBub3Qgc2F5IHdoaWNoIGVuY29kaW5nIHRvIGFzc3VtaW5nCgkgICAgICAgICAgICAvLyB1cG9uIGRlY29kaW5nLiBJIGhhdmUgc2VlbiBJU08tODg1OS0xIHVzZWQgYXMgd2VsbCBhcwoJICAgICAgICAgICAgLy8gU2hpZnRfSklTIC0tIHdpdGhvdXQgYW55dGhpbmcgbGlrZSBhbiBFQ0kgZGVzaWduYXRvciB0bwoJICAgICAgICAgICAgLy8gZ2l2ZSBhIGhpbnQuCgkgICAgICAgICAgICBlbmNvZGluZyA9IFN0cmluZ1V0aWxzXzEuZGVmYXVsdC5ndWVzc0VuY29kaW5nKHJlYWRCeXRlcywgaGludHMpOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgZW5jb2RpbmcgPSBjdXJyZW50Q2hhcmFjdGVyU2V0RUNJLmdldE5hbWUoKTsKCSAgICAgICAgfQoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChTdHJpbmdFbmNvZGluZ18xLmRlZmF1bHQuZGVjb2RlKHJlYWRCeXRlcywgZW5jb2RpbmcpKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoaWdub3JlZCAvKjogVW5zdXBwb3J0ZWRFbmNvZGluZ0V4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdChpZ25vcmVkKTsKCSAgICAgICAgfQoJICAgICAgICBieXRlU2VnbWVudHMucHVzaChyZWFkQnl0ZXMpOwoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIgPSBmdW5jdGlvbiAodmFsdWUgLyppbnQqLykgewoJICAgICAgICBpZiAodmFsdWUgPj0gRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5BTFBIQU5VTUVSSUNfQ0hBUlMubGVuZ3RoKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLkFMUEhBTlVNRVJJQ19DSEFSU1t2YWx1ZV07CgkgICAgfTsKCSAgICBEZWNvZGVkQml0U3RyZWFtUGFyc2VyLmRlY29kZUFscGhhbnVtZXJpY1NlZ21lbnQgPSBmdW5jdGlvbiAoYml0cywgcmVzdWx0LCBjb3VudCAvKmludCovLCBmYzFJbkVmZmVjdCkgewoJICAgICAgICAvLyBSZWFkIHR3byBjaGFyYWN0ZXJzIGF0IGEgdGltZQoJICAgICAgICB2YXIgc3RhcnQgPSByZXN1bHQubGVuZ3RoKCk7CgkgICAgICAgIHdoaWxlIChjb3VudCA+IDEpIHsKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTEpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIG5leHRUd29DaGFyc0JpdHMgPSBiaXRzLnJlYWRCaXRzKDExKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcihuZXh0VHdvQ2hhcnNCaXRzIC8gNDUpKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKG5leHRUd29DaGFyc0JpdHMgJSA0NSkpOwoJICAgICAgICAgICAgY291bnQgLT0gMjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoY291bnQgPT09IDEpIHsKCSAgICAgICAgICAgIC8vIHNwZWNpYWwgY2FzZTogb25lIGNoYXJhY3RlciBsZWZ0CgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDYpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcihiaXRzLnJlYWRCaXRzKDYpKSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gU2VlIHNlY3Rpb24gNi40LjguMSwgNi40LjguMgoJICAgICAgICBpZiAoZmMxSW5FZmZlY3QpIHsKCSAgICAgICAgICAgIC8vIFdlIG5lZWQgdG8gbWFzc2FnZSB0aGUgcmVzdWx0IGEgYml0IGlmIGluIGFuIEZOQzEgbW9kZToKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IHJlc3VsdC5sZW5ndGgoKTsgaSsrKSB7CgkgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5jaGFyQXQoaSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaSA8IHJlc3VsdC5sZW5ndGgoKSAtIDEgJiYgcmVzdWx0LmNoYXJBdChpICsgMSkgPT09ICclJykgewoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gJSUgaXMgcmVuZGVyZWQgYXMgJQoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LmRlbGV0ZUNoYXJBdChpICsgMSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBJbiBhbHBoYSBtb2RlLCAlIHNob3VsZCBiZSBjb252ZXJ0ZWQgdG8gRk5DMSBzZXBhcmF0b3IgMHgxRAoJICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0LnNldENoYXJBdChpLCBTdHJpbmcuZnJvbUNoYXJDb2RlKDB4MUQpKTsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgIH07CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5kZWNvZGVOdW1lcmljU2VnbWVudCA9IGZ1bmN0aW9uIChiaXRzLCByZXN1bHQsIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgLy8gUmVhZCB0aHJlZSBkaWdpdHMgYXQgYSB0aW1lCgkgICAgICAgIHdoaWxlIChjb3VudCA+PSAzKSB7CgkgICAgICAgICAgICAvLyBFYWNoIDEwIGJpdHMgZW5jb2RlcyB0aHJlZSBkaWdpdHMKCSAgICAgICAgICAgIGlmIChiaXRzLmF2YWlsYWJsZSgpIDwgMTApIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIHRocmVlRGlnaXRzQml0cyA9IGJpdHMucmVhZEJpdHMoMTApOwoJICAgICAgICAgICAgaWYgKHRocmVlRGlnaXRzQml0cyA+PSAxMDAwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoTWF0aC5mbG9vcih0aHJlZURpZ2l0c0JpdHMgLyAxMDApKSk7CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodGhyZWVEaWdpdHNCaXRzIC8gMTApICUgMTApKTsKCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIodGhyZWVEaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgICAgIGNvdW50IC09IDM7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvdW50ID09PSAyKSB7CgkgICAgICAgICAgICAvLyBUd28gZGlnaXRzIGxlZnQgb3ZlciB0byByZWFkLCBlbmNvZGVkIGluIDcgYml0cwoJICAgICAgICAgICAgaWYgKGJpdHMuYXZhaWxhYmxlKCkgPCA3KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHZhciB0d29EaWdpdHNCaXRzID0gYml0cy5yZWFkQml0cyg3KTsKCSAgICAgICAgICAgIGlmICh0d29EaWdpdHNCaXRzID49IDEwMCkgewoJICAgICAgICAgICAgICAgIHRocm93IG5ldyBGb3JtYXRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICByZXN1bHQuYXBwZW5kKERlY29kZWRCaXRTdHJlYW1QYXJzZXIudG9BbHBoYU51bWVyaWNDaGFyKE1hdGguZmxvb3IodHdvRGlnaXRzQml0cyAvIDEwKSkpOwoJICAgICAgICAgICAgcmVzdWx0LmFwcGVuZChEZWNvZGVkQml0U3RyZWFtUGFyc2VyLnRvQWxwaGFOdW1lcmljQ2hhcih0d29EaWdpdHNCaXRzICUgMTApKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChjb3VudCA9PT0gMSkgewoJICAgICAgICAgICAgLy8gT25lIGRpZ2l0IGxlZnQgb3ZlciB0byByZWFkCgkgICAgICAgICAgICBpZiAoYml0cy5hdmFpbGFibGUoKSA8IDQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRm9ybWF0RXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdmFyIGRpZ2l0Qml0cyA9IGJpdHMucmVhZEJpdHMoNCk7CgkgICAgICAgICAgICBpZiAoZGlnaXRCaXRzID49IDEwKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIHJlc3VsdC5hcHBlbmQoRGVjb2RlZEJpdFN0cmVhbVBhcnNlci50b0FscGhhTnVtZXJpY0NoYXIoZGlnaXRCaXRzKSk7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIucGFyc2VFQ0lWYWx1ZSA9IGZ1bmN0aW9uIChiaXRzKSB7CgkgICAgICAgIHZhciBmaXJzdEJ5dGUgPSBiaXRzLnJlYWRCaXRzKDgpOwoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4ODApID09PSAwKSB7CgkgICAgICAgICAgICAvLyBqdXN0IG9uZSBieXRlCgkgICAgICAgICAgICByZXR1cm4gZmlyc3RCeXRlICYgMHg3RjsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4QzApID09PSAweDgwKSB7CgkgICAgICAgICAgICAvLyB0d28gYnl0ZXMKCSAgICAgICAgICAgIHZhciBzZWNvbmRCeXRlID0gYml0cy5yZWFkQml0cyg4KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDNGKSA8PCA4KSAmIDB4RkZGRkZGRkYpIHwgc2Vjb25kQnl0ZTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoKGZpcnN0Qnl0ZSAmIDB4RTApID09PSAweEMwKSB7CgkgICAgICAgICAgICAvLyB0aHJlZSBieXRlcwoJICAgICAgICAgICAgdmFyIHNlY29uZFRoaXJkQnl0ZXMgPSBiaXRzLnJlYWRCaXRzKDE2KTsKCSAgICAgICAgICAgIHJldHVybiAoKChmaXJzdEJ5dGUgJiAweDFGKSA8PCAxNikgJiAweEZGRkZGRkZGKSB8IHNlY29uZFRoaXJkQnl0ZXM7CgkgICAgICAgIH0KCSAgICAgICAgdGhyb3cgbmV3IEZvcm1hdEV4Y2VwdGlvbl8xLmRlZmF1bHQoKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFNlZSBJU08gMTgwMDQ6MjAwNiwgNi40LjQgVGFibGUgNQoJICAgICAqLwoJICAgIERlY29kZWRCaXRTdHJlYW1QYXJzZXIuQUxQSEFOVU1FUklDX0NIQVJTID0gJzAxMjM0NTY3ODlBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWiAkJSorLS4vOic7CgkgICAgRGVjb2RlZEJpdFN0cmVhbVBhcnNlci5HQjIzMTJfU1VCU0VUID0gMTsKCSAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcjsKCX0oKSk7CglEZWNvZGVkQml0U3RyZWFtUGFyc2VyJDEuZGVmYXVsdCA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXI7CgoJdmFyIFFSQ29kZURlY29kZXJNZXRhRGF0YSQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDEzIFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShRUkNvZGVEZWNvZGVyTWV0YURhdGEkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLyoqCgkgKiBNZXRhLWRhdGEgY29udGFpbmVyIGZvciBRUiBDb2RlIGRlY29kaW5nLiBJbnN0YW5jZXMgb2YgdGhpcyBjbGFzcyBtYXkgYmUgdXNlZCB0byBjb252ZXkgaW5mb3JtYXRpb24gYmFjayB0byB0aGUKCSAqIGRlY29kaW5nIGNhbGxlci4gQ2FsbGVycyBhcmUgZXhwZWN0ZWQgdG8gcHJvY2VzcyB0aGlzLgoJICoKCSAqIEBzZWUgY29tLmdvb2dsZS56eGluZy5jb21tb24uRGVjb2RlclJlc3VsdCNnZXRPdGhlcigpCgkgKi8KCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGEgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUVJDb2RlRGVjb2Rlck1ldGFEYXRhKG1pcnJvcmVkKSB7CgkgICAgICAgIHRoaXMubWlycm9yZWQgPSBtaXJyb3JlZDsKCSAgICB9CgkgICAgLyoqCgkgICAgICogQHJldHVybiB0cnVlIGlmIHRoZSBRUiBDb2RlIHdhcyBtaXJyb3JlZC4KCSAgICAgKi8KCSAgICBRUkNvZGVEZWNvZGVyTWV0YURhdGEucHJvdG90eXBlLmlzTWlycm9yZWQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLm1pcnJvcmVkOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQXBwbHkgdGhlIHJlc3VsdCBwb2ludHMnIG9yZGVyIGNvcnJlY3Rpb24gZHVlIHRvIG1pcnJvcmluZy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBwb2ludHMgQXJyYXkgb2YgcG9pbnRzIHRvIGFwcGx5IG1pcnJvciBjb3JyZWN0aW9uIHRvLgoJICAgICAqLwoJICAgIFFSQ29kZURlY29kZXJNZXRhRGF0YS5wcm90b3R5cGUuYXBwbHlNaXJyb3JlZENvcnJlY3Rpb24gPSBmdW5jdGlvbiAocG9pbnRzKSB7CgkgICAgICAgIGlmICghdGhpcy5taXJyb3JlZCB8fCBwb2ludHMgPT09IG51bGwgfHwgcG9pbnRzLmxlbmd0aCA8IDMpIHsKCSAgICAgICAgICAgIHJldHVybjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IHBvaW50c1swXTsKCSAgICAgICAgcG9pbnRzWzBdID0gcG9pbnRzWzJdOwoJICAgICAgICBwb2ludHNbMl0gPSBib3R0b21MZWZ0OwoJICAgICAgICAvLyBObyBuZWVkIHRvICdmaXgnIHRvcC1sZWZ0IGFuZCBhbGlnbm1lbnQgcGF0dGVybi4KCSAgICB9OwoJICAgIHJldHVybiBRUkNvZGVEZWNvZGVyTWV0YURhdGE7Cgl9KCkpOwoJUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDEuZGVmYXVsdCA9IFFSQ29kZURlY29kZXJNZXRhRGF0YTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX192YWx1ZXMpIHx8IGZ1bmN0aW9uKG8pIHsKCSAgICB2YXIgcyA9IHR5cGVvZiBTeW1ib2wgPT09ICJmdW5jdGlvbiIgJiYgU3ltYm9sLml0ZXJhdG9yLCBtID0gcyAmJiBvW3NdLCBpID0gMDsKCSAgICBpZiAobSkgcmV0dXJuIG0uY2FsbChvKTsKCSAgICBpZiAobyAmJiB0eXBlb2Ygby5sZW5ndGggPT09ICJudW1iZXIiKSByZXR1cm4gewoJICAgICAgICBuZXh0OiBmdW5jdGlvbiAoKSB7CgkgICAgICAgICAgICBpZiAobyAmJiBpID49IG8ubGVuZ3RoKSBvID0gdm9pZCAwOwoJICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IG8gJiYgb1tpKytdLCBkb25lOiAhbyB9OwoJICAgICAgICB9CgkgICAgfTsKCSAgICB0aHJvdyBuZXcgVHlwZUVycm9yKHMgPyAiT2JqZWN0IGlzIG5vdCBpdGVyYWJsZS4iIDogIlN5bWJvbC5pdGVyYXRvciBpcyBub3QgZGVmaW5lZC4iKTsKCX07CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVjb2RlciQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZWNvZGVyIHsqLwoJdmFyIENoZWNrc3VtRXhjZXB0aW9uXzEgPSBDaGVja3N1bUV4Y2VwdGlvbiQxOwoJdmFyIEJpdE1hdHJpeF8xJDIgPSBCaXRNYXRyaXgkMTsKCXZhciBHZW5lcmljR0ZfMSA9IEdlbmVyaWNHRiQxOwoJdmFyIFJlZWRTb2xvbW9uRGVjb2Rlcl8xID0gUmVlZFNvbG9tb25EZWNvZGVyJDE7Cgl2YXIgQml0TWF0cml4UGFyc2VyXzEgPSBCaXRNYXRyaXhQYXJzZXIkMTsKCXZhciBEYXRhQmxvY2tfMSA9IERhdGFCbG9jayQxOwoJdmFyIERlY29kZWRCaXRTdHJlYW1QYXJzZXJfMSA9IERlY29kZWRCaXRTdHJlYW1QYXJzZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxID0gUVJDb2RlRGVjb2Rlck1ldGFEYXRhJDE7CgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoZSBtYWluIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgUVIgQ29kZSBkZWNvZGluZyAtLSBhcyBvcHBvc2VkIHRvIGxvY2F0aW5nIGFuZCBleHRyYWN0aW5nCgkgKiB0aGUgUVIgQ29kZSBmcm9tIGFuIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGVjb2RlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBEZWNvZGVyKCkgewoJICAgICAgICB0aGlzLnJzRGVjb2RlciA9IG5ldyBSZWVkU29sb21vbkRlY29kZXJfMS5kZWZhdWx0KEdlbmVyaWNHRl8xLmRlZmF1bHQuUVJfQ09ERV9GSUVMRF8yNTYpOwoJICAgIH0KCSAgICAvLyBwdWJsaWMgZGVjb2RlKGltYWdlOiBib29sZWFuW11bXSk6IERlY29kZXJSZXN1bHQgLyp0aHJvd3MgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkNvbnZlbmllbmNlIG1ldGhvZCB0aGF0IGNhbiBkZWNvZGUgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEgMkQgYXJyYXkgb2YgYm9vbGVhbnMuCgkgICAgICogInRydWUiIGlzIHRha2VuIHRvIG1lYW4gYSBibGFjayBtb2R1bGUuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGJvb2xlYW5zIHJlcHJlc2VudGluZyB3aGl0ZS9ibGFjayBRUiBDb2RlIG1vZHVsZXMKCSAgICAgKiBAcGFyYW0gaGludHMgZGVjb2RpbmcgaGludHMgdGhhdCBzaG91bGQgYmUgdXNlZCB0byBpbmZsdWVuY2UgZGVjb2RpbmcKCSAgICAgKiBAcmV0dXJuIHRleHQgYW5kIGJ5dGVzIGVuY29kZWQgd2l0aGluIHRoZSBRUiBDb2RlCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgdGhlIFFSIENvZGUgY2Fubm90IGJlIGRlY29kZWQKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCb29sZWFuQXJyYXkgPSBmdW5jdGlvbiAoaW1hZ2UsIGhpbnRzKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeChCaXRNYXRyaXhfMSQyLmRlZmF1bHQucGFyc2VGcm9tQm9vbGVhbkFycmF5KGltYWdlKSwgaGludHMpOwoJICAgIH07CgkgICAgLy8gcHVibGljIGRlY29kZUJpdE1hdHJpeChiaXRzOiBCaXRNYXRyaXgpOiBEZWNvZGVyUmVzdWx0IC8qdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uLCBGb3JtYXRFeGNlcHRpb24qLyB7CgkgICAgLy8gICByZXR1cm4gZGVjb2RlKGJpdHMsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qKgoJICAgICAqIDxwPkRlY29kZXMgYSBRUiBDb2RlIHJlcHJlc2VudGVkIGFzIGEge0BsaW5rIEJpdE1hdHJpeH0uIEEgMSBvciAidHJ1ZSIgaXMgdGFrZW4gdG8gbWVhbiBhIGJsYWNrIG1vZHVsZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gYml0cyBib29sZWFucyByZXByZXNlbnRpbmcgd2hpdGUvYmxhY2sgUVIgQ29kZSBtb2R1bGVzCgkgICAgICogQHBhcmFtIGhpbnRzIGRlY29kaW5nIGhpbnRzIHRoYXQgc2hvdWxkIGJlIHVzZWQgdG8gaW5mbHVlbmNlIGRlY29kaW5nCgkgICAgICogQHJldHVybiB0ZXh0IGFuZCBieXRlcyBlbmNvZGVkIHdpdGhpbiB0aGUgUVIgQ29kZQoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIHRoZSBRUiBDb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgRGVjb2Rlci5wcm90b3R5cGUuZGVjb2RlQml0TWF0cml4ID0gZnVuY3Rpb24gKGJpdHMsIGhpbnRzKSB7CgkgICAgICAgIC8vIENvbnN0cnVjdCBhIHBhcnNlciBhbmQgcmVhZCB2ZXJzaW9uLCBlcnJvci1jb3JyZWN0aW9uIGxldmVsCgkgICAgICAgIHZhciBwYXJzZXIgPSBuZXcgQml0TWF0cml4UGFyc2VyXzEuZGVmYXVsdChiaXRzKTsKCSAgICAgICAgdmFyIGV4ID0gbnVsbDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHJldHVybiB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKjogRm9ybWF0RXhjZXB0aW9uLCBDaGVja3N1bUV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICBleCA9IGU7CgkgICAgICAgIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIC8vIFJldmVydCB0aGUgYml0IG1hdHJpeAoJICAgICAgICAgICAgcGFyc2VyLnJlbWFzaygpOwoJICAgICAgICAgICAgLy8gV2lsbCBiZSBhdHRlbXB0aW5nIGEgbWlycm9yZWQgcmVhZGluZyBvZiB0aGUgdmVyc2lvbiBhbmQgZm9ybWF0IGluZm8uCgkgICAgICAgICAgICBwYXJzZXIuc2V0TWlycm9yKHRydWUpOwoJICAgICAgICAgICAgLy8gUHJlZW1wdGl2ZWx5IHJlYWQgdGhlIHZlcnNpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgICAgIC8vIFByZWVtcHRpdmVseSByZWFkIHRoZSBmb3JtYXQgaW5mb3JtYXRpb24uCgkgICAgICAgICAgICBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCk7CgkgICAgICAgICAgICAvKgoJICAgICAgICAgICAgICogU2luY2Ugd2UncmUgaGVyZSwgdGhpcyBtZWFucyB3ZSBoYXZlIHN1Y2Nlc3NmdWxseSBkZXRlY3RlZCBzb21lIGtpbmQKCSAgICAgICAgICAgICAqIG9mIHZlcnNpb24gYW5kIGZvcm1hdCBpbmZvcm1hdGlvbiB3aGVuIG1pcnJvcmVkLiBUaGlzIGlzIGEgZ29vZCBzaWduLAoJICAgICAgICAgICAgICogdGhhdCB0aGUgUVIgY29kZSBtYXkgYmUgbWlycm9yZWQsIGFuZCB3ZSBzaG91bGQgdHJ5IG9uY2UgbW9yZSB3aXRoIGEKCSAgICAgICAgICAgICAqIG1pcnJvcmVkIGNvbnRlbnQuCgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIFByZXBhcmUgZm9yIGEgbWlycm9yZWQgcmVhZGluZy4KCSAgICAgICAgICAgIHBhcnNlci5taXJyb3IoKTsKCSAgICAgICAgICAgIHZhciByZXN1bHQgPSB0aGlzLmRlY29kZUJpdE1hdHJpeFBhcnNlcihwYXJzZXIsIGhpbnRzKTsKCSAgICAgICAgICAgIC8vIFN1Y2Nlc3MhIE5vdGlmeSB0aGUgY2FsbGVyIHRoYXQgdGhlIGNvZGUgd2FzIG1pcnJvcmVkLgoJICAgICAgICAgICAgcmVzdWx0LnNldE90aGVyKG5ldyBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSQxLmRlZmF1bHQodHJ1ZSkpOwoJICAgICAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZSAvKkZvcm1hdEV4Y2VwdGlvbiB8IENoZWNrc3VtRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgIC8vIFRocm93IHRoZSBleGNlcHRpb24gZnJvbSB0aGUgb3JpZ2luYWwgcmVhZGluZwoJICAgICAgICAgICAgaWYgKGV4ICE9PSBudWxsKSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgZXg7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0aHJvdyBlOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBEZWNvZGVyLnByb3RvdHlwZS5kZWNvZGVCaXRNYXRyaXhQYXJzZXIgPSBmdW5jdGlvbiAocGFyc2VyLCBoaW50cykgewoJICAgICAgICB2YXIgZV8xLCBfYSwgZV8yLCBfYjsKCSAgICAgICAgdmFyIHZlcnNpb24gPSBwYXJzZXIucmVhZFZlcnNpb24oKTsKCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBwYXJzZXIucmVhZEZvcm1hdEluZm9ybWF0aW9uKCkuZ2V0RXJyb3JDb3JyZWN0aW9uTGV2ZWwoKTsKCSAgICAgICAgLy8gUmVhZCBjb2Rld29yZHMKCSAgICAgICAgdmFyIGNvZGV3b3JkcyA9IHBhcnNlci5yZWFkQ29kZXdvcmRzKCk7CgkgICAgICAgIC8vIFNlcGFyYXRlIGludG8gZGF0YSBibG9ja3MKCSAgICAgICAgdmFyIGRhdGFCbG9ja3MgPSBEYXRhQmxvY2tfMS5kZWZhdWx0LmdldERhdGFCbG9ja3MoY29kZXdvcmRzLCB2ZXJzaW9uLCBlY0xldmVsKTsKCSAgICAgICAgLy8gQ291bnQgdG90YWwgbnVtYmVyIG9mIGRhdGEgYnl0ZXMKCSAgICAgICAgdmFyIHRvdGFsQnl0ZXMgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgZGF0YUJsb2Nrc18xID0gX192YWx1ZXMkMihkYXRhQmxvY2tzKSwgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpOyAhZGF0YUJsb2Nrc18xXzEuZG9uZTsgZGF0YUJsb2Nrc18xXzEgPSBkYXRhQmxvY2tzXzEubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIGRhdGFCbG9jayA9IGRhdGFCbG9ja3NfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgIHRvdGFsQnl0ZXMgKz0gZGF0YUJsb2NrLmdldE51bURhdGFDb2Rld29yZHMoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMV8xICYmICFkYXRhQmxvY2tzXzFfMS5kb25lICYmIChfYSA9IGRhdGFCbG9ja3NfMS5yZXR1cm4pKSBfYS5jYWxsKGRhdGFCbG9ja3NfMSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHJlc3VsdEJ5dGVzID0gbmV3IFVpbnQ4QXJyYXkodG90YWxCeXRlcyk7CgkgICAgICAgIHZhciByZXN1bHRPZmZzZXQgPSAwOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgLy8gRXJyb3ItY29ycmVjdCBhbmQgY29weSBkYXRhIGJsb2NrcyB0b2dldGhlciBpbnRvIGEgc3RyZWFtIG9mIGJ5dGVzCgkgICAgICAgICAgICBmb3IgKHZhciBkYXRhQmxvY2tzXzIgPSBfX3ZhbHVlcyQyKGRhdGFCbG9ja3MpLCBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCk7ICFkYXRhQmxvY2tzXzJfMS5kb25lOyBkYXRhQmxvY2tzXzJfMSA9IGRhdGFCbG9ja3NfMi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZGF0YUJsb2NrID0gZGF0YUJsb2Nrc18yXzEudmFsdWU7CgkgICAgICAgICAgICAgICAgdmFyIGNvZGV3b3JkQnl0ZXMgPSBkYXRhQmxvY2suZ2V0Q29kZXdvcmRzKCk7CgkgICAgICAgICAgICAgICAgdmFyIG51bURhdGFDb2Rld29yZHMgPSBkYXRhQmxvY2suZ2V0TnVtRGF0YUNvZGV3b3JkcygpOwoJICAgICAgICAgICAgICAgIHRoaXMuY29ycmVjdEVycm9ycyhjb2Rld29yZEJ5dGVzLCBudW1EYXRhQ29kZXdvcmRzKTsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IG51bURhdGFDb2Rld29yZHM7IGkrKykgewoJICAgICAgICAgICAgICAgICAgICByZXN1bHRCeXRlc1tyZXN1bHRPZmZzZXQrK10gPSBjb2Rld29yZEJ5dGVzW2ldOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICBjYXRjaCAoZV8yXzEpIHsgZV8yID0geyBlcnJvcjogZV8yXzEgfTsgfQoJICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgaWYgKGRhdGFCbG9ja3NfMl8xICYmICFkYXRhQmxvY2tzXzJfMS5kb25lICYmIChfYiA9IGRhdGFCbG9ja3NfMi5yZXR1cm4pKSBfYi5jYWxsKGRhdGFCbG9ja3NfMik7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gRGVjb2RlIHRoZSBjb250ZW50cyBvZiB0aGF0IHN0cmVhbSBvZiBieXRlcwoJICAgICAgICByZXR1cm4gRGVjb2RlZEJpdFN0cmVhbVBhcnNlcl8xLmRlZmF1bHQuZGVjb2RlKHJlc3VsdEJ5dGVzLCB2ZXJzaW9uLCBlY0xldmVsLCBoaW50cyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5HaXZlbiBkYXRhIGFuZCBlcnJvci1jb3JyZWN0aW9uIGNvZGV3b3JkcyByZWNlaXZlZCwgcG9zc2libHkgY29ycnVwdGVkIGJ5IGVycm9ycywgYXR0ZW1wdHMgdG8KCSAgICAgKiBjb3JyZWN0IHRoZSBlcnJvcnMgaW4tcGxhY2UgdXNpbmcgUmVlZC1Tb2xvbW9uIGVycm9yIGNvcnJlY3Rpb24uPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGNvZGV3b3JkQnl0ZXMgZGF0YSBhbmQgZXJyb3IgY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgKiBAcGFyYW0gbnVtRGF0YUNvZGV3b3JkcyBudW1iZXIgb2YgY29kZXdvcmRzIHRoYXQgYXJlIGRhdGEgYnl0ZXMKCSAgICAgKiBAdGhyb3dzIENoZWNrc3VtRXhjZXB0aW9uIGlmIGVycm9yIGNvcnJlY3Rpb24gZmFpbHMKCSAgICAgKi8KCSAgICBEZWNvZGVyLnByb3RvdHlwZS5jb3JyZWN0RXJyb3JzID0gZnVuY3Rpb24gKGNvZGV3b3JkQnl0ZXMsIG51bURhdGFDb2Rld29yZHMgLyppbnQqLykgewoJICAgICAgICAvLyBjb25zdCBudW1Db2Rld29yZHMgPSBjb2Rld29yZEJ5dGVzLmxlbmd0aDsKCSAgICAgICAgLy8gRmlyc3QgcmVhZCBpbnRvIGFuIGFycmF5IG9mIGludHMKCSAgICAgICAgdmFyIGNvZGV3b3Jkc0ludHMgPSBuZXcgSW50MzJBcnJheShjb2Rld29yZEJ5dGVzKTsKCSAgICAgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG5vdCByZWFseSBuZWNlc3NhcnkgdG8gdHJhbnNmb3JtIHRvIGludHM/IGNvdWxkIHJlZGVzaWduIGV2ZXJ5dGhpbmcgdG8gd29yayB3aXRoIHVuc2lnbmVkIGJ5dGVzPwoJICAgICAgICAvLyBjb25zdCBjb2Rld29yZHNJbnRzID0gbmV3IEludDMyQXJyYXkobnVtQ29kZXdvcmRzKQoJICAgICAgICAvLyBmb3IgKGxldCBpID0gMDsgaSA8IG51bUNvZGV3b3JkczsgaSsrKSB7CgkgICAgICAgIC8vICAgY29kZXdvcmRzSW50c1tpXSA9IGNvZGV3b3JkQnl0ZXNbaV0gJiAweEZGCgkgICAgICAgIC8vIH0KCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIHRoaXMucnNEZWNvZGVyLmRlY29kZShjb2Rld29yZHNJbnRzLCBjb2Rld29yZEJ5dGVzLmxlbmd0aCAtIG51bURhdGFDb2Rld29yZHMpOwoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChpZ25vcmVkIC8qOiBSZWVkU29sb21vbkV4Y2VwdGlvbiovKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgQ2hlY2tzdW1FeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29weSBiYWNrIGludG8gYXJyYXkgb2YgYnl0ZXMgLS0gb25seSBuZWVkIHRvIHdvcnJ5IGFib3V0IHRoZSBieXRlcyB0aGF0IHdlcmUgZGF0YQoJICAgICAgICAvLyBXZSBkb24ndCBjYXJlIGFib3V0IGVycm9ycyBpbiB0aGUgZXJyb3ItY29ycmVjdGlvbiBjb2Rld29yZHMKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBudW1EYXRhQ29kZXdvcmRzOyBpKyspIHsKCSAgICAgICAgICAgIGNvZGV3b3JkQnl0ZXNbaV0gPSAvKihieXRlKSAqLyBjb2Rld29yZHNJbnRzW2ldOwoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gRGVjb2RlcjsKCX0oKSk7CglEZWNvZGVyJDEuZGVmYXVsdCA9IERlY29kZXI7CgoJdmFyIERldGVjdG9yJDEgPSB7fTsKCgl2YXIgTWF0aFV0aWxzJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMTIgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KE1hdGhVdGlscyQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLmNvbW1vbi5kZXRlY3RvciB7Ki8KCS8qKgoJICogR2VuZXJhbCBtYXRoLXJlbGF0ZWQgYW5kIG51bWVyaWMgdXRpbGl0eSBmdW5jdGlvbnMuCgkgKi8KCXZhciBNYXRoVXRpbHMgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gTWF0aFV0aWxzKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBFbmRzIHVwIGJlaW5nIGEgYml0IGZhc3RlciB0aGFuIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0uIFRoaXMgbWVyZWx5IHJvdW5kcyBpdHMKCSAgICAgKiBhcmd1bWVudCB0byB0aGUgbmVhcmVzdCBpbnQsIHdoZXJlIHguNSByb3VuZHMgdXAgdG8geCsxLiBTZW1hbnRpY3Mgb2YgdGhpcyBzaG9ydGN1dAoJICAgICAqIGRpZmZlciBzbGlnaHRseSBmcm9tIHtAbGluayBNYXRoI3JvdW5kKGZsb2F0KX0gaW4gdGhhdCBoYWxmIHJvdW5kcyBkb3duIGZvciBuZWdhdGl2ZQoJICAgICAqIHZhbHVlcy4gLTIuNSByb3VuZHMgdG8gLTMsIG5vdCAtMi4gRm9yIHB1cnBvc2VzIGhlcmUgaXQgbWFrZXMgbm8gZGlmZmVyZW5jZS4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBkIHJlYWwgdmFsdWUgdG8gcm91bmQKCSAgICAgKiBAcmV0dXJuIG5lYXJlc3Qge0Bjb2RlIGludH0KCSAgICAgKi8KCSAgICBNYXRoVXRpbHMucm91bmQgPSBmdW5jdGlvbiAoZCAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE5hTiA9PT0gZCkKCSAgICAgICAgICAgIHJldHVybiAwOwoJICAgICAgICBpZiAoZCA8PSBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUikKCSAgICAgICAgICAgIHJldHVybiBOdW1iZXIuTUlOX1NBRkVfSU5URUdFUjsKCSAgICAgICAgaWYgKGQgPj0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVIpCgkgICAgICAgICAgICByZXR1cm4gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgICAgIHJldHVybiAvKihpbnQpICovIChkICsgKGQgPCAwLjAgPyAtMC41IDogMC41KSkgfCAwOwoJICAgIH07CgkgICAgLy8gVFlQRVNDUklQVFBPUlQ6IG1heWJlIHJlbW92ZSByb3VuZCBtZXRob2QgYW5kIGNhbGwgZGlyZWN0bHkgTWF0aC5yb3VuZCwgaXQgbG9va3MgbGlrZSBpdCBkb2Vzbid0IG1ha2Ugc2Vuc2UgZm9yIGpzCgkgICAgLyoqCgkgICAgICogQHBhcmFtIGFYIHBvaW50IEEgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGFZIHBvaW50IEEgeSBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJYIHBvaW50IEIgeCBjb29yZGluYXRlCgkgICAgICogQHBhcmFtIGJZIHBvaW50IEIgeSBjb29yZGluYXRlCgkgICAgICogQHJldHVybiBFdWNsaWRlYW4gZGlzdGFuY2UgYmV0d2VlbiBwb2ludHMgQSBhbmQgQgoJICAgICAqLwoJICAgIE1hdGhVdGlscy5kaXN0YW5jZSA9IGZ1bmN0aW9uIChhWCAvKmZsb2F0fGludCovLCBhWSAvKmZsb2F0fGludCovLCBiWCAvKmZsb2F0fGludCovLCBiWSAvKmZsb2F0fGludCovKSB7CgkgICAgICAgIHZhciB4RGlmZiA9IGFYIC0gYlg7CgkgICAgICAgIHZhciB5RGlmZiA9IGFZIC0gYlk7CgkgICAgICAgIHJldHVybiAvKihmbG9hdCkgKi8gTWF0aC5zcXJ0KHhEaWZmICogeERpZmYgKyB5RGlmZiAqIHlEaWZmKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBhWCBwb2ludCBBIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBhWSBwb2ludCBBIHkgY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWCBwb2ludCBCIHggY29vcmRpbmF0ZQoJICAgICAqIEBwYXJhbSBiWSBwb2ludCBCIHkgY29vcmRpbmF0ZQoJICAgICAqIEByZXR1cm4gRXVjbGlkZWFuIGRpc3RhbmNlIGJldHdlZW4gcG9pbnRzIEEgYW5kIEIKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgc3RhdGljIGRpc3RhbmNlKGFYOiBudW1iZXIgLyppbnQqLywgYVk6IG51bWJlciAvKmludCovLCBiWDogbnVtYmVyIC8qaW50Ki8sIGJZOiBudW1iZXIgLyppbnQqLyk6IGZsb2F0IHsKCSAgICAvLyAgIGNvbnN0IHhEaWZmID0gYVggLSBiWAoJICAgIC8vICAgY29uc3QgeURpZmYgPSBhWSAtIGJZCgkgICAgLy8gICByZXR1cm4gKGZsb2F0KSBNYXRoLnNxcnQoeERpZmYgKiB4RGlmZiArIHlEaWZmICogeURpZmYpOwoJICAgIC8vIH0KCSAgICAvKioKCSAgICAgKiBAcGFyYW0gYXJyYXkgdmFsdWVzIHRvIHN1bQoJICAgICAqIEByZXR1cm4gc3VtIG9mIHZhbHVlcyBpbiBhcnJheQoJICAgICAqLwoJICAgIE1hdGhVdGlscy5zdW0gPSBmdW5jdGlvbiAoYXJyYXkpIHsKCSAgICAgICAgdmFyIGNvdW50ID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDAsIGxlbmd0aF8xID0gYXJyYXkubGVuZ3RoOyBpICE9PSBsZW5ndGhfMTsgaSsrKSB7CgkgICAgICAgICAgICB2YXIgYSA9IGFycmF5W2ldOwoJICAgICAgICAgICAgY291bnQgKz0gYTsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gY291bnQ7CgkgICAgfTsKCSAgICByZXR1cm4gTWF0aFV0aWxzOwoJfSgpKTsKCU1hdGhVdGlscyQxLmRlZmF1bHQgPSBNYXRoVXRpbHM7CgoJdmFyIERldGVjdG9yUmVzdWx0JDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KERldGVjdG9yUmVzdWx0JDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIHRoZSByZXN1bHQgb2YgZGV0ZWN0aW5nIGEgYmFyY29kZSBpbiBhbiBpbWFnZS4gVGhpcyBpbmNsdWRlcyB0aGUgcmF3CgkgKiBtYXRyaXggb2YgYmxhY2svd2hpdGUgcGl4ZWxzIGNvcnJlc3BvbmRpbmcgdG8gdGhlIGJhcmNvZGUsIGFuZCBwb3NzaWJseSBwb2ludHMgb2YgaW50ZXJlc3QKCSAqIGluIHRoZSBpbWFnZSwgbGlrZSB0aGUgbG9jYXRpb24gb2YgZmluZGVyIHBhdHRlcm5zIG9yIGNvcm5lcnMgb2YgdGhlIGJhcmNvZGUgaW4gdGhlIGltYWdlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgRGV0ZWN0b3JSZXN1bHQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gRGV0ZWN0b3JSZXN1bHQoYml0cywgcG9pbnRzKSB7CgkgICAgICAgIHRoaXMuYml0cyA9IGJpdHM7CgkgICAgICAgIHRoaXMucG9pbnRzID0gcG9pbnRzOwoJICAgIH0KCSAgICBEZXRlY3RvclJlc3VsdC5wcm90b3R5cGUuZ2V0Qml0cyA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYml0czsKCSAgICB9OwoJICAgIERldGVjdG9yUmVzdWx0LnByb3RvdHlwZS5nZXRQb2ludHMgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLnBvaW50czsKCSAgICB9OwoJICAgIHJldHVybiBEZXRlY3RvclJlc3VsdDsKCX0oKSk7CglEZXRlY3RvclJlc3VsdCQxLmRlZmF1bHQgPSBEZXRlY3RvclJlc3VsdDsKCgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSQxID0ge307CgoJdmFyIERlZmF1bHRHcmlkU2FtcGxlciQxID0ge307CgoJdmFyIEdyaWRTYW1wbGVyJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDUgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyoqCgkgKiBJbXBsZW1lbnRhdGlvbnMgb2YgdGhpcyBjbGFzcyBjYW4sIGdpdmVuIGxvY2F0aW9ucyBvZiBmaW5kZXIgcGF0dGVybnMgZm9yIGEgUVIgY29kZSBpbiBhbgoJICogaW1hZ2UsIHNhbXBsZSB0aGUgcmlnaHQgcG9pbnRzIGluIHRoZSBpbWFnZSB0byByZWNvbnN0cnVjdCB0aGUgUVIgY29kZSwgYWNjb3VudGluZyBmb3IKCSAqIHBlcnNwZWN0aXZlIGRpc3RvcnRpb24uIEl0IGlzIGFic3RyYWN0ZWQgc2luY2UgaXQgaXMgcmVsYXRpdmVseSBleHBlbnNpdmUgYW5kIHNob3VsZCBiZSBhbGxvd2VkCgkgKiB0byB0YWtlIGFkdmFudGFnZSBvZiBwbGF0Zm9ybS1zcGVjaWZpYyBvcHRpbWl6ZWQgaW1wbGVtZW50YXRpb25zLCBsaWtlIFN1bidzIEphdmEgQWR2YW5jZWQKCSAqIEltYWdpbmcgbGlicmFyeSwgYnV0IHdoaWNoIG1heSBub3QgYmUgYXZhaWxhYmxlIGluIG90aGVyIGVudmlyb25tZW50cyBzdWNoIGFzIEoyTUUsIGFuZCB2aWNlCgkgKiB2ZXJzYS4KCSAqCgkgKiBUaGUgaW1wbGVtZW50YXRpb24gdXNlZCBjYW4gYmUgY29udHJvbGxlZCBieSBjYWxsaW5nIHtAbGluayAjc2V0R3JpZFNhbXBsZXIoR3JpZFNhbXBsZXIpfQoJICogd2l0aCBhbiBpbnN0YW5jZSBvZiBhIGNsYXNzIHdoaWNoIGltcGxlbWVudHMgdGhpcyBpbnRlcmZhY2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEdyaWRTYW1wbGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEdyaWRTYW1wbGVyKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiA8cD5DaGVja3MgYSBzZXQgb2YgcG9pbnRzIHRoYXQgaGF2ZSBiZWVuIHRyYW5zZm9ybWVkIHRvIHNhbXBsZSBwb2ludHMgb24gYW4gaW1hZ2UgYWdhaW5zdAoJICAgICAqIHRoZSBpbWFnZSdzIGRpbWVuc2lvbnMgdG8gc2VlIGlmIHRoZSBwb2ludCBhcmUgZXZlbiB3aXRoaW4gdGhlIGltYWdlLjwvcD4KCSAgICAgKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHdpbGwgYWN0dWFsbHkgIm51ZGdlIiB0aGUgZW5kcG9pbnRzIGJhY2sgb250byB0aGUgaW1hZ2UgaWYgdGhleSBhcmUgZm91bmQgdG8gYmUKCSAgICAgKiBiYXJlbHkgKGxlc3MgdGhhbiAxIHBpeGVsKSBvZmYgdGhlIGltYWdlLiBUaGlzIGFjY291bnRzIGZvciBpbXBlcmZlY3QgZGV0ZWN0aW9uIG9mIGZpbmRlcgoJICAgICAqIHBhdHRlcm5zIGluIGFuIGltYWdlIHdoZXJlIHRoZSBRUiBDb2RlIHJ1bnMgYWxsIHRoZSB3YXkgdG8gdGhlIGltYWdlIGJvcmRlci48L3A+CgkgICAgICoKCSAgICAgKiA8cD5Gb3IgZWZmaWNpZW5jeSwgdGhlIG1ldGhvZCB3aWxsIGNoZWNrIHBvaW50cyBmcm9tIGVpdGhlciBlbmQgb2YgdGhlIGxpbmUgdW50aWwgb25lIGlzIGZvdW5kCgkgICAgICogdG8gYmUgd2l0aGluIHRoZSBpbWFnZS4gQmVjYXVzZSB0aGUgc2V0IG9mIHBvaW50cyBhcmUgYXNzdW1lZCB0byBiZSBsaW5lYXIsIHRoaXMgaXMgdmFsaWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGltYWdlIGltYWdlIGludG8gd2hpY2ggdGhlIHBvaW50cyBzaG91bGQgbWFwCgkgICAgICogQHBhcmFtIHBvaW50cyBhY3R1YWwgcG9pbnRzIGluIHgxLHkxLC4uLix4bix5biBmb3JtCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhbiBlbmRwb2ludCBpcyBsaWVzIG91dHNpZGUgdGhlIGltYWdlIGJvdW5kYXJpZXMKCSAgICAgKi8KCSAgICBHcmlkU2FtcGxlci5jaGVja0FuZE51ZGdlUG9pbnRzID0gZnVuY3Rpb24gKGltYWdlLCBwb2ludHMpIHsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIGhlaWdodCA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gc3RhcnQgdW50aWwgd2Ugc2VlIHNvbWUgdGhhdCBhcmUgT0s6CgkgICAgICAgIHZhciBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSAwOyBvZmZzZXQgPCBwb2ludHMubGVuZ3RoICYmIG51ZGdlZDsgb2Zmc2V0ICs9IDIpIHsKCSAgICAgICAgICAgIHZhciB4ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0XSk7CgkgICAgICAgICAgICB2YXIgeSA9IE1hdGguZmxvb3IocG9pbnRzW29mZnNldCArIDFdKTsKCSAgICAgICAgICAgIGlmICh4IDwgLTEgfHwgeCA+IHdpZHRoIHx8IHkgPCAtMSB8fCB5ID4gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBudWRnZWQgPSBmYWxzZTsKCSAgICAgICAgICAgIGlmICh4ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gMC4wOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBlbHNlIGlmICh4ID09PSB3aWR0aCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXRdID0gd2lkdGggLSAxOwoJICAgICAgICAgICAgICAgIG51ZGdlZCA9IHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAoeSA9PT0gLTEpIHsKCSAgICAgICAgICAgICAgICBwb2ludHNbb2Zmc2V0ICsgMV0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IGhlaWdodCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBDaGVjayBhbmQgbnVkZ2UgcG9pbnRzIGZyb20gZW5kOgoJICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICBmb3IgKHZhciBvZmZzZXQgPSBwb2ludHMubGVuZ3RoIC0gMjsgb2Zmc2V0ID49IDAgJiYgbnVkZ2VkOyBvZmZzZXQgLT0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBNYXRoLmZsb29yKHBvaW50c1tvZmZzZXRdKTsKCSAgICAgICAgICAgIHZhciB5ID0gTWF0aC5mbG9vcihwb2ludHNbb2Zmc2V0ICsgMV0pOwoJICAgICAgICAgICAgaWYgKHggPCAtMSB8fCB4ID4gd2lkdGggfHwgeSA8IC0xIHx8IHkgPiBoZWlnaHQpIHsKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ1LmRlZmF1bHQoKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIG51ZGdlZCA9IGZhbHNlOwoJICAgICAgICAgICAgaWYgKHggPT09IC0xKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSAwLjA7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGVsc2UgaWYgKHggPT09IHdpZHRoKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldF0gPSB3aWR0aCAtIDE7CgkgICAgICAgICAgICAgICAgbnVkZ2VkID0gdHJ1ZTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGlmICh5ID09PSAtMSkgewoJICAgICAgICAgICAgICAgIHBvaW50c1tvZmZzZXQgKyAxXSA9IDAuMDsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZWxzZSBpZiAoeSA9PT0gaGVpZ2h0KSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW29mZnNldCArIDFdID0gaGVpZ2h0IC0gMTsKCSAgICAgICAgICAgICAgICBudWRnZWQgPSB0cnVlOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgfTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXI7Cgl9KCkpOwoJR3JpZFNhbXBsZXIkMS5kZWZhdWx0ID0gR3JpZFNhbXBsZXI7CgoJdmFyIFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KFBlcnNwZWN0aXZlVHJhbnNmb3JtJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJLyoqCgkgKiA8cD5UaGlzIGNsYXNzIGltcGxlbWVudHMgYSBwZXJzcGVjdGl2ZSB0cmFuc2Zvcm0gaW4gdHdvIGRpbWVuc2lvbnMuIEdpdmVuIGZvdXIgc291cmNlIGFuZCBmb3VyCgkgKiBkZXN0aW5hdGlvbiBwb2ludHMsIGl0IHdpbGwgY29tcHV0ZSB0aGUgdHJhbnNmb3JtYXRpb24gaW1wbGllZCBiZXR3ZWVuIHRoZW0uIFRoZSBjb2RlIGlzIGJhc2VkCgkgKiBkaXJlY3RseSB1cG9uIHNlY3Rpb24gMy40LjIgb2YgR2VvcmdlIFdvbGJlcmcncyAiRGlnaXRhbCBJbWFnZSBXYXJwaW5nIjsgc2VlIHBhZ2VzIDU0LTU2LjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm0gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUGVyc3BlY3RpdmVUcmFuc2Zvcm0oYTExIC8qZmxvYXQqLywgYTIxIC8qZmxvYXQqLywgYTMxIC8qZmxvYXQqLywgYTEyIC8qZmxvYXQqLywgYTIyIC8qZmxvYXQqLywgYTMyIC8qZmxvYXQqLywgYTEzIC8qZmxvYXQqLywgYTIzIC8qZmxvYXQqLywgYTMzIC8qZmxvYXQqLykgewoJICAgICAgICB0aGlzLmExMSA9IGExMTsKCSAgICAgICAgdGhpcy5hMjEgPSBhMjE7CgkgICAgICAgIHRoaXMuYTMxID0gYTMxOwoJICAgICAgICB0aGlzLmExMiA9IGExMjsKCSAgICAgICAgdGhpcy5hMjIgPSBhMjI7CgkgICAgICAgIHRoaXMuYTMyID0gYTMyOwoJICAgICAgICB0aGlzLmExMyA9IGExMzsKCSAgICAgICAgdGhpcy5hMjMgPSBhMjM7CgkgICAgICAgIHRoaXMuYTMzID0gYTMzOwoJICAgIH0KCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsID0gZnVuY3Rpb24gKHgwIC8qZmxvYXQqLywgeTAgLypmbG9hdCovLCB4MSAvKmZsb2F0Ki8sIHkxIC8qZmxvYXQqLywgeDIgLypmbG9hdCovLCB5MiAvKmZsb2F0Ki8sIHgzIC8qZmxvYXQqLywgeTMgLypmbG9hdCovLCB4MHAgLypmbG9hdCovLCB5MHAgLypmbG9hdCovLCB4MXAgLypmbG9hdCovLCB5MXAgLypmbG9hdCovLCB4MnAgLypmbG9hdCovLCB5MnAgLypmbG9hdCovLCB4M3AgLypmbG9hdCovLCB5M3AgLypmbG9hdCovKSB7CgkgICAgICAgIHZhciBxVG9TID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0ucXVhZHJpbGF0ZXJhbFRvU3F1YXJlKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5Myk7CgkgICAgICAgIHZhciBzVG9RID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwcCwgeTBwLCB4MXAsIHkxcCwgeDJwLCB5MnAsIHgzcCwgeTNwKTsKCSAgICAgICAgcmV0dXJuIHNUb1EudGltZXMocVRvUyk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUudHJhbnNmb3JtUG9pbnRzID0gZnVuY3Rpb24gKHBvaW50cykgewoJICAgICAgICB2YXIgbWF4ID0gcG9pbnRzLmxlbmd0aDsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBtYXg7IGkgKz0gMikgewoJICAgICAgICAgICAgdmFyIHggPSBwb2ludHNbaV07CgkgICAgICAgICAgICB2YXIgeSA9IHBvaW50c1tpICsgMV07CgkgICAgICAgICAgICB2YXIgZGVub21pbmF0b3IgPSBhMTMgKiB4ICsgYTIzICogeSArIGEzMzsKCSAgICAgICAgICAgIHBvaW50c1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHBvaW50c1tpICsgMV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50cmFuc2Zvcm1Qb2ludHNXaXRoVmFsdWVzID0gZnVuY3Rpb24gKHhWYWx1ZXMsIHlWYWx1ZXMpIHsKCSAgICAgICAgdmFyIGExMSA9IHRoaXMuYTExOwoJICAgICAgICB2YXIgYTEyID0gdGhpcy5hMTI7CgkgICAgICAgIHZhciBhMTMgPSB0aGlzLmExMzsKCSAgICAgICAgdmFyIGEyMSA9IHRoaXMuYTIxOwoJICAgICAgICB2YXIgYTIyID0gdGhpcy5hMjI7CgkgICAgICAgIHZhciBhMjMgPSB0aGlzLmEyMzsKCSAgICAgICAgdmFyIGEzMSA9IHRoaXMuYTMxOwoJICAgICAgICB2YXIgYTMyID0gdGhpcy5hMzI7CgkgICAgICAgIHZhciBhMzMgPSB0aGlzLmEzMzsKCSAgICAgICAgdmFyIG4gPSB4VmFsdWVzLmxlbmd0aDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBuOyBpKyspIHsKCSAgICAgICAgICAgIHZhciB4ID0geFZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciB5ID0geVZhbHVlc1tpXTsKCSAgICAgICAgICAgIHZhciBkZW5vbWluYXRvciA9IGExMyAqIHggKyBhMjMgKiB5ICsgYTMzOwoJICAgICAgICAgICAgeFZhbHVlc1tpXSA9IChhMTEgKiB4ICsgYTIxICogeSArIGEzMSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHlWYWx1ZXNbaV0gPSAoYTEyICogeCArIGEyMiAqIHkgKyBhMzIpIC8gZGVub21pbmF0b3I7CgkgICAgICAgIH0KCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnNxdWFyZVRvUXVhZHJpbGF0ZXJhbCA9IGZ1bmN0aW9uICh4MCAvKmZsb2F0Ki8sIHkwIC8qZmxvYXQqLywgeDEgLypmbG9hdCovLCB5MSAvKmZsb2F0Ki8sIHgyIC8qZmxvYXQqLywgeTIgLypmbG9hdCovLCB4MyAvKmZsb2F0Ki8sIHkzIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgZHgzID0geDAgLSB4MSArIHgyIC0geDM7CgkgICAgICAgIHZhciBkeTMgPSB5MCAtIHkxICsgeTIgLSB5MzsKCSAgICAgICAgaWYgKGR4MyA9PT0gMC4wICYmIGR5MyA9PT0gMC4wKSB7CgkgICAgICAgICAgICAvLyBBZmZpbmUKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCwgeDIgLSB4MSwgeDAsIHkxIC0geTAsIHkyIC0geTEsIHkwLCAwLjAsIDAuMCwgMS4wKTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHZhciBkeDEgPSB4MSAtIHgyOwoJICAgICAgICAgICAgdmFyIGR4MiA9IHgzIC0geDI7CgkgICAgICAgICAgICB2YXIgZHkxID0geTEgLSB5MjsKCSAgICAgICAgICAgIHZhciBkeTIgPSB5MyAtIHkyOwoJICAgICAgICAgICAgdmFyIGRlbm9taW5hdG9yID0gZHgxICogZHkyIC0gZHgyICogZHkxOwoJICAgICAgICAgICAgdmFyIGExMyA9IChkeDMgKiBkeTIgLSBkeDIgKiBkeTMpIC8gZGVub21pbmF0b3I7CgkgICAgICAgICAgICB2YXIgYTIzID0gKGR4MSAqIGR5MyAtIGR4MyAqIGR5MSkgLyBkZW5vbWluYXRvcjsKCSAgICAgICAgICAgIHJldHVybiBuZXcgUGVyc3BlY3RpdmVUcmFuc2Zvcm0oeDEgLSB4MCArIGExMyAqIHgxLCB4MyAtIHgwICsgYTIzICogeDMsIHgwLCB5MSAtIHkwICsgYTEzICogeTEsIHkzIC0geTAgKyBhMjMgKiB5MywgeTAsIGExMywgYTIzLCAxLjApOwoJICAgICAgICB9CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5xdWFkcmlsYXRlcmFsVG9TcXVhcmUgPSBmdW5jdGlvbiAoeDAgLypmbG9hdCovLCB5MCAvKmZsb2F0Ki8sIHgxIC8qZmxvYXQqLywgeTEgLypmbG9hdCovLCB4MiAvKmZsb2F0Ki8sIHkyIC8qZmxvYXQqLywgeDMgLypmbG9hdCovLCB5MyAvKmZsb2F0Ki8pIHsKCSAgICAgICAgLy8gSGVyZSwgdGhlIGFkam9pbnQgc2VydmVzIGFzIHRoZSBpbnZlcnNlOgoJICAgICAgICByZXR1cm4gUGVyc3BlY3RpdmVUcmFuc2Zvcm0uc3F1YXJlVG9RdWFkcmlsYXRlcmFsKHgwLCB5MCwgeDEsIHkxLCB4MiwgeTIsIHgzLCB5MykuYnVpbGRBZGpvaW50KCk7CgkgICAgfTsKCSAgICBQZXJzcGVjdGl2ZVRyYW5zZm9ybS5wcm90b3R5cGUuYnVpbGRBZGpvaW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBBZGpvaW50IGlzIHRoZSB0cmFuc3Bvc2Ugb2YgdGhlIGNvZmFjdG9yIG1hdHJpeDoKCSAgICAgICAgcmV0dXJuIG5ldyBQZXJzcGVjdGl2ZVRyYW5zZm9ybSh0aGlzLmEyMiAqIHRoaXMuYTMzIC0gdGhpcy5hMjMgKiB0aGlzLmEzMiwgdGhpcy5hMjMgKiB0aGlzLmEzMSAtIHRoaXMuYTIxICogdGhpcy5hMzMsIHRoaXMuYTIxICogdGhpcy5hMzIgLSB0aGlzLmEyMiAqIHRoaXMuYTMxLCB0aGlzLmExMyAqIHRoaXMuYTMyIC0gdGhpcy5hMTIgKiB0aGlzLmEzMywgdGhpcy5hMTEgKiB0aGlzLmEzMyAtIHRoaXMuYTEzICogdGhpcy5hMzEsIHRoaXMuYTEyICogdGhpcy5hMzEgLSB0aGlzLmExMSAqIHRoaXMuYTMyLCB0aGlzLmExMiAqIHRoaXMuYTIzIC0gdGhpcy5hMTMgKiB0aGlzLmEyMiwgdGhpcy5hMTMgKiB0aGlzLmEyMSAtIHRoaXMuYTExICogdGhpcy5hMjMsIHRoaXMuYTExICogdGhpcy5hMjIgLSB0aGlzLmExMiAqIHRoaXMuYTIxKTsKCSAgICB9OwoJICAgIFBlcnNwZWN0aXZlVHJhbnNmb3JtLnByb3RvdHlwZS50aW1lcyA9IGZ1bmN0aW9uIChvdGhlcikgewoJICAgICAgICByZXR1cm4gbmV3IFBlcnNwZWN0aXZlVHJhbnNmb3JtKHRoaXMuYTExICogb3RoZXIuYTExICsgdGhpcy5hMjEgKiBvdGhlci5hMTIgKyB0aGlzLmEzMSAqIG90aGVyLmExMywgdGhpcy5hMTEgKiBvdGhlci5hMjEgKyB0aGlzLmEyMSAqIG90aGVyLmEyMiArIHRoaXMuYTMxICogb3RoZXIuYTIzLCB0aGlzLmExMSAqIG90aGVyLmEzMSArIHRoaXMuYTIxICogb3RoZXIuYTMyICsgdGhpcy5hMzEgKiBvdGhlci5hMzMsIHRoaXMuYTEyICogb3RoZXIuYTExICsgdGhpcy5hMjIgKiBvdGhlci5hMTIgKyB0aGlzLmEzMiAqIG90aGVyLmExMywgdGhpcy5hMTIgKiBvdGhlci5hMjEgKyB0aGlzLmEyMiAqIG90aGVyLmEyMiArIHRoaXMuYTMyICogb3RoZXIuYTIzLCB0aGlzLmExMiAqIG90aGVyLmEzMSArIHRoaXMuYTIyICogb3RoZXIuYTMyICsgdGhpcy5hMzIgKiBvdGhlci5hMzMsIHRoaXMuYTEzICogb3RoZXIuYTExICsgdGhpcy5hMjMgKiBvdGhlci5hMTIgKyB0aGlzLmEzMyAqIG90aGVyLmExMywgdGhpcy5hMTMgKiBvdGhlci5hMjEgKyB0aGlzLmEyMyAqIG90aGVyLmEyMiArIHRoaXMuYTMzICogb3RoZXIuYTIzLCB0aGlzLmExMyAqIG90aGVyLmEzMSArIHRoaXMuYTIzICogb3RoZXIuYTMyICsgdGhpcy5hMzMgKiBvdGhlci5hMzMpOwoJICAgIH07CgkgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoJfSgpKTsKCVBlcnNwZWN0aXZlVHJhbnNmb3JtJDEuZGVmYXVsdCA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX19leHRlbmRzJDIgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGVmYXVsdEdyaWRTYW1wbGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcuY29tbW9uIHsqLwoJdmFyIEdyaWRTYW1wbGVyXzEgPSBHcmlkU2FtcGxlciQxOwoJdmFyIEJpdE1hdHJpeF8xJDEgPSBCaXRNYXRyaXgkMTsKCXZhciBQZXJzcGVjdGl2ZVRyYW5zZm9ybV8xJDEgPSBQZXJzcGVjdGl2ZVRyYW5zZm9ybSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEkNCA9IE5vdEZvdW5kRXhjZXB0aW9uJDE7CgkvKioKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBEZWZhdWx0R3JpZFNhbXBsZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDIoRGVmYXVsdEdyaWRTYW1wbGVyLCBfc3VwZXIpOwoJICAgIGZ1bmN0aW9uIERlZmF1bHRHcmlkU2FtcGxlcigpIHsKCSAgICAgICAgcmV0dXJuIF9zdXBlciAhPT0gbnVsbCAmJiBfc3VwZXIuYXBwbHkodGhpcywgYXJndW1lbnRzKSB8fCB0aGlzOwoJICAgIH0KCSAgICAvKkBPdmVycmlkZSovCgkgICAgRGVmYXVsdEdyaWRTYW1wbGVyLnByb3RvdHlwZS5zYW1wbGVHcmlkID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgcDFUb1ggLypmbG9hdCovLCBwMVRvWSAvKmZsb2F0Ki8sIHAyVG9YIC8qZmxvYXQqLywgcDJUb1kgLypmbG9hdCovLCBwM1RvWCAvKmZsb2F0Ki8sIHAzVG9ZIC8qZmxvYXQqLywgcDRUb1ggLypmbG9hdCovLCBwNFRvWSAvKmZsb2F0Ki8sIHAxRnJvbVggLypmbG9hdCovLCBwMUZyb21ZIC8qZmxvYXQqLywgcDJGcm9tWCAvKmZsb2F0Ki8sIHAyRnJvbVkgLypmbG9hdCovLCBwM0Zyb21YIC8qZmxvYXQqLywgcDNGcm9tWSAvKmZsb2F0Ki8sIHA0RnJvbVggLypmbG9hdCovLCBwNEZyb21ZIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSQxLmRlZmF1bHQucXVhZHJpbGF0ZXJhbFRvUXVhZHJpbGF0ZXJhbChwMVRvWCwgcDFUb1ksIHAyVG9YLCBwMlRvWSwgcDNUb1gsIHAzVG9ZLCBwNFRvWCwgcDRUb1ksIHAxRnJvbVgsIHAxRnJvbVksIHAyRnJvbVgsIHAyRnJvbVksIHAzRnJvbVgsIHAzRnJvbVksIHA0RnJvbVgsIHA0RnJvbVkpOwoJICAgICAgICByZXR1cm4gdGhpcy5zYW1wbGVHcmlkV2l0aFRyYW5zZm9ybShpbWFnZSwgZGltZW5zaW9uWCwgZGltZW5zaW9uWSwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBEZWZhdWx0R3JpZFNhbXBsZXIucHJvdG90eXBlLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtID0gZnVuY3Rpb24gKGltYWdlLCBkaW1lbnNpb25YIC8qaW50Ki8sIGRpbWVuc2lvblkgLyppbnQqLywgdHJhbnNmb3JtKSB7CgkgICAgICAgIGlmIChkaW1lbnNpb25YIDw9IDAgfHwgZGltZW5zaW9uWSA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQ0LmRlZmF1bHQoKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMSQxLmRlZmF1bHQoZGltZW5zaW9uWCwgZGltZW5zaW9uWSk7CgkgICAgICAgIHZhciBwb2ludHMgPSBuZXcgRmxvYXQzMkFycmF5KDIgKiBkaW1lbnNpb25YKTsKCSAgICAgICAgZm9yICh2YXIgeSA9IDA7IHkgPCBkaW1lbnNpb25ZOyB5KyspIHsKCSAgICAgICAgICAgIHZhciBtYXggPSBwb2ludHMubGVuZ3RoOwoJICAgICAgICAgICAgdmFyIGlWYWx1ZSA9IHkgKyAwLjU7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1heDsgeCArPSAyKSB7CgkgICAgICAgICAgICAgICAgcG9pbnRzW3hdID0gKHggLyAyKSArIDAuNTsKCSAgICAgICAgICAgICAgICBwb2ludHNbeCArIDFdID0gaVZhbHVlOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgdHJhbnNmb3JtLnRyYW5zZm9ybVBvaW50cyhwb2ludHMpOwoJICAgICAgICAgICAgLy8gUXVpY2sgY2hlY2sgdG8gc2VlIGlmIHBvaW50cyB0cmFuc2Zvcm1lZCB0byBzb21ldGhpbmcgaW5zaWRlIHRoZSBpbWFnZQoJICAgICAgICAgICAgLy8gc3VmZmljaWVudCB0byBjaGVjayB0aGUgZW5kcG9pbnRzCgkgICAgICAgICAgICBHcmlkU2FtcGxlcl8xLmRlZmF1bHQuY2hlY2tBbmROdWRnZVBvaW50cyhpbWFnZSwgcG9pbnRzKTsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgeCA9IDA7IHggPCBtYXg7IHggKz0gMikgewoJICAgICAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KE1hdGguZmxvb3IocG9pbnRzW3hdKSwgTWF0aC5mbG9vcihwb2ludHNbeCArIDFdKSkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEJsYWNrKC1pc2gpIHBpeGVsCgkgICAgICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4IC8gMiwgeSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoYWlvb2JlIC8qOiBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24qLykgewoJICAgICAgICAgICAgICAgIC8vIFRoaXMgZmVlbHMgd3JvbmcsIGJ1dCwgc29tZXRpbWVzIGlmIHRoZSBmaW5kZXIgcGF0dGVybnMgYXJlIG1pc2lkZW50aWZpZWQsIHRoZSByZXN1bHRpbmcKCSAgICAgICAgICAgICAgICAvLyB0cmFuc2Zvcm0gZ2V0cyAidHdpc3RlZCIgc3VjaCB0aGF0IGl0IG1hcHMgYSBzdHJhaWdodCBsaW5lIG9mIHBvaW50cyB0byBhIHNldCBvZiBwb2ludHMKCSAgICAgICAgICAgICAgICAvLyB3aG9zZSBlbmRwb2ludHMgYXJlIGluIGJvdW5kcywgYnV0IG90aGVycyBhcmUgbm90LiBUaGVyZSBpcyBwcm9iYWJseSBzb21lIG1hdGhlbWF0aWNhbAoJICAgICAgICAgICAgICAgIC8vIHdheSB0byBkZXRlY3QgdGhpcyBhYm91dCB0aGUgdHJhbnNmb3JtYXRpb24gdGhhdCBJIGRvbid0IGtub3cgeWV0LgoJICAgICAgICAgICAgICAgIC8vIFRoaXMgcmVzdWx0cyBpbiBhbiB1Z2x5IHJ1bnRpbWUgZXhjZXB0aW9uIGRlc3BpdGUgb3VyIGNsZXZlciBjaGVja3MgYWJvdmUgLS0gY2FuJ3QgaGF2ZQoJICAgICAgICAgICAgICAgIC8vIHRoYXQuIFdlIGNvdWxkIGNoZWNrIGVhY2ggcG9pbnQncyBjb29yZGluYXRlcyBidXQgdGhhdCBmZWVscyBkdXBsaWNhdGl2ZS4gV2Ugc2V0dGxlIGZvcgoJICAgICAgICAgICAgICAgIC8vIGNhdGNoaW5nIGFuZCB3cmFwcGluZyBBcnJheUluZGV4T3V0T2ZCb3VuZHNFeGNlcHRpb24uCgkgICAgICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkNC5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICByZXR1cm4gRGVmYXVsdEdyaWRTYW1wbGVyOwoJfShHcmlkU2FtcGxlcl8xLmRlZmF1bHQpKTsKCURlZmF1bHRHcmlkU2FtcGxlciQxLmRlZmF1bHQgPSBEZWZhdWx0R3JpZFNhbXBsZXI7CgoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEdyaWRTYW1wbGVySW5zdGFuY2UkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIERlZmF1bHRHcmlkU2FtcGxlcl8xID0gRGVmYXVsdEdyaWRTYW1wbGVyJDE7Cgl2YXIgR3JpZFNhbXBsZXJJbnN0YW5jZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBHcmlkU2FtcGxlckluc3RhbmNlKCkgewoJICAgIH0KCSAgICAvKioKCSAgICAgKiBTZXRzIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiBHcmlkU2FtcGxlciB1c2VkIGJ5IHRoZSBsaWJyYXJ5LiBPbmUgZ2xvYmFsCgkgICAgICogaW5zdGFuY2UgaXMgc3RvcmVkLCB3aGljaCBtYXkgc291bmQgcHJvYmxlbWF0aWMuIEJ1dCwgdGhlIGltcGxlbWVudGF0aW9uIHByb3ZpZGVkCgkgICAgICogb3VnaHQgdG8gYmUgYXBwcm9wcmlhdGUgZm9yIHRoZSBlbnRpcmUgcGxhdGZvcm0sIGFuZCBhbGwgdXNlcyBvZiB0aGlzIGxpYnJhcnkKCSAgICAgKiBpbiB0aGUgd2hvbGUgbGlmZXRpbWUgb2YgdGhlIEpWTS4gRm9yIGluc3RhbmNlLCBhbiBBbmRyb2lkIGFjdGl2aXR5IGNhbiBzd2FwIGluCgkgICAgICogYW4gaW1wbGVtZW50YXRpb24gdGhhdCB0YWtlcyBhZHZhbnRhZ2Ugb2YgbmF0aXZlIHBsYXRmb3JtIGxpYnJhcmllcy4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBuZXdHcmlkU2FtcGxlciBUaGUgcGxhdGZvcm0tc3BlY2lmaWMgb2JqZWN0IHRvIGluc3RhbGwuCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5zZXRHcmlkU2FtcGxlciA9IGZ1bmN0aW9uIChuZXdHcmlkU2FtcGxlcikgewoJICAgICAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3R3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSBjdXJyZW50IGltcGxlbWVudGF0aW9uIG9mIEdyaWRTYW1wbGVyCgkgICAgICovCgkgICAgR3JpZFNhbXBsZXJJbnN0YW5jZS5nZXRJbnN0YW5jZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIEdyaWRTYW1wbGVySW5zdGFuY2UuZ3JpZFNhbXBsZXI7CgkgICAgfTsKCSAgICBHcmlkU2FtcGxlckluc3RhbmNlLmdyaWRTYW1wbGVyID0gbmV3IERlZmF1bHRHcmlkU2FtcGxlcl8xLmRlZmF1bHQoKTsKCSAgICByZXR1cm4gR3JpZFNhbXBsZXJJbnN0YW5jZTsKCX0oKSk7CglHcmlkU2FtcGxlckluc3RhbmNlJDEuZGVmYXVsdCA9IEdyaWRTYW1wbGVySW5zdGFuY2U7CgoJdmFyIFJlc3VsdFBvaW50JDEgPSB7fTsKCgl2YXIgRmxvYXQkMSA9IHt9OwoKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShGbG9hdCQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKioKCSAqIFBvbnlmaWxsIGZvciBKYXZhJ3MgRmxvYXQgY2xhc3MuCgkgKi8KCXZhciBGbG9hdCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBGbG9hdCgpIHsKCSAgICB9CgkgICAgLyoqCgkgICAgICogU2luY1RTIGhhcyBubyBkaWZmZXJlbmNlIGJldHdlZW4gaW50IGFuZCBmbG9hdCwgdGhlcmUncyBhbGwgbnVtYmVycywKCSAgICAgKiB0aGlzIGlzIHVzZWQgb25seSB0byBwb2x5ZmlsbCBKYXZhIGNvZGUuCgkgICAgICovCgkgICAgRmxvYXQuZmxvYXRUb0ludEJpdHMgPSBmdW5jdGlvbiAoZikgewoJICAgICAgICByZXR1cm4gZjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFRoZSBmbG9hdCBtYXggdmFsdWUgaW4gSlMgaXMgdGhlIG51bWJlciBtYXggdmFsdWUuCgkgICAgICovCgkgICAgRmxvYXQuTUFYX1ZBTFVFID0gTnVtYmVyLk1BWF9TQUZFX0lOVEVHRVI7CgkgICAgcmV0dXJuIEZsb2F0OwoJfSgpKTsKCUZsb2F0JDEuZGVmYXVsdCA9IEZsb2F0OwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUmVzdWx0UG9pbnQkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZyB7Ki8KCXZhciBNYXRoVXRpbHNfMSQxID0gTWF0aFV0aWxzJDE7Cgl2YXIgRmxvYXRfMSA9IEZsb2F0JDE7CgkvKioKCSAqIDxwPkVuY2Fwc3VsYXRlcyBhIHBvaW50IG9mIGludGVyZXN0IGluIGFuIGltYWdlIGNvbnRhaW5pbmcgYSBiYXJjb2RlLiBUeXBpY2FsbHksIHRoaXMKCSAqIHdvdWxkIGJlIHRoZSBsb2NhdGlvbiBvZiBhIGZpbmRlciBwYXR0ZXJuIG9yIHRoZSBjb3JuZXIgb2YgdGhlIGJhcmNvZGUsIGZvciBleGFtcGxlLjwvcD4KCSAqCgkgKiBAYXV0aG9yIFNlYW4gT3dlbgoJICovCgl2YXIgUmVzdWx0UG9pbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgZnVuY3Rpb24gUmVzdWx0UG9pbnQoeCwgeSkgewoJICAgICAgICB0aGlzLnggPSB4OwoJICAgICAgICB0aGlzLnkgPSB5OwoJICAgIH0KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUuZ2V0WCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMueDsKCSAgICB9OwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5nZXRZID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy55OwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiAob3RoZXIpIHsKCSAgICAgICAgaWYgKG90aGVyIGluc3RhbmNlb2YgUmVzdWx0UG9pbnQpIHsKCSAgICAgICAgICAgIHZhciBvdGhlclBvaW50ID0gb3RoZXI7CgkgICAgICAgICAgICByZXR1cm4gdGhpcy54ID09PSBvdGhlclBvaW50LnggJiYgdGhpcy55ID09PSBvdGhlclBvaW50Lnk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIFJlc3VsdFBvaW50LnByb3RvdHlwZS5oYXNoQ29kZSA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIDMxICogRmxvYXRfMS5kZWZhdWx0LmZsb2F0VG9JbnRCaXRzKHRoaXMueCkgKyBGbG9hdF8xLmRlZmF1bHQuZmxvYXRUb0ludEJpdHModGhpcy55KTsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBSZXN1bHRQb2ludC5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiAnKCcgKyB0aGlzLnggKyAnLCcgKyB0aGlzLnkgKyAnKSc7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBPcmRlcnMgYW4gYXJyYXkgb2YgdGhyZWUgUmVzdWx0UG9pbnRzIGluIGFuIG9yZGVyIFtBLEIsQ10gc3VjaCB0aGF0IEFCIGlzIGxlc3MgdGhhbiBBQwoJICAgICAqIGFuZCBCQyBpcyBsZXNzIHRoYW4gQUMsIGFuZCB0aGUgYW5nbGUgYmV0d2VlbiBCQyBhbmQgQkEgaXMgbGVzcyB0aGFuIDE4MCBkZWdyZWVzLgoJICAgICAqCgkgICAgICogQHBhcmFtIHBhdHRlcm5zIGFycmF5IG9mIHRocmVlIHtAY29kZSBSZXN1bHRQb2ludH0gdG8gb3JkZXIKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5vcmRlckJlc3RQYXR0ZXJucyA9IGZ1bmN0aW9uIChwYXR0ZXJucykgewoJICAgICAgICAvLyBGaW5kIGRpc3RhbmNlcyBiZXR3ZWVuIHBhdHRlcm4gY2VudGVycwoJICAgICAgICB2YXIgemVyb09uZURpc3RhbmNlID0gdGhpcy5kaXN0YW5jZShwYXR0ZXJuc1swXSwgcGF0dGVybnNbMV0pOwoJICAgICAgICB2YXIgb25lVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzFdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciB6ZXJvVHdvRGlzdGFuY2UgPSB0aGlzLmRpc3RhbmNlKHBhdHRlcm5zWzBdLCBwYXR0ZXJuc1syXSk7CgkgICAgICAgIHZhciBwb2ludEE7CgkgICAgICAgIHZhciBwb2ludEI7CgkgICAgICAgIHZhciBwb2ludEM7CgkgICAgICAgIC8vIEFzc3VtZSBvbmUgY2xvc2VzdCB0byBvdGhlciB0d28gaXMgQjsgQSBhbmQgQyB3aWxsIGp1c3QgYmUgZ3Vlc3NlcyBhdCBmaXJzdAoJICAgICAgICBpZiAob25lVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlICYmIG9uZVR3b0Rpc3RhbmNlID49IHplcm9Ud29EaXN0YW5jZSkgewoJICAgICAgICAgICAgcG9pbnRCID0gcGF0dGVybnNbMF07CgkgICAgICAgICAgICBwb2ludEEgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QyA9IHBhdHRlcm5zWzJdOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgaWYgKHplcm9Ud29EaXN0YW5jZSA+PSBvbmVUd29EaXN0YW5jZSAmJiB6ZXJvVHdvRGlzdGFuY2UgPj0gemVyb09uZURpc3RhbmNlKSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1sxXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMl07CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICBwb2ludEIgPSBwYXR0ZXJuc1syXTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBhdHRlcm5zWzBdOwoJICAgICAgICAgICAgcG9pbnRDID0gcGF0dGVybnNbMV07CgkgICAgICAgIH0KCSAgICAgICAgLy8gVXNlIGNyb3NzIHByb2R1Y3QgdG8gZmlndXJlIG91dCB3aGV0aGVyIEEgYW5kIEMgYXJlIGNvcnJlY3Qgb3IgZmxpcHBlZC4KCSAgICAgICAgLy8gVGhpcyBhc2tzIHdoZXRoZXIgQkMgeCBCQSBoYXMgYSBwb3NpdGl2ZSB6IGNvbXBvbmVudCwgd2hpY2ggaXMgdGhlIGFycmFuZ2VtZW50CgkgICAgICAgIC8vIHdlIHdhbnQgZm9yIEEsIEIsIEMuIElmIGl0J3MgbmVnYXRpdmUsIHRoZW4gd2UndmUgZ290IGl0IGZsaXBwZWQgYXJvdW5kIGFuZAoJICAgICAgICAvLyBzaG91bGQgc3dhcCBBIGFuZCBDLgoJICAgICAgICBpZiAodGhpcy5jcm9zc1Byb2R1Y3RaKHBvaW50QSwgcG9pbnRCLCBwb2ludEMpIDwgMC4wKSB7CgkgICAgICAgICAgICB2YXIgdGVtcCA9IHBvaW50QTsKCSAgICAgICAgICAgIHBvaW50QSA9IHBvaW50QzsKCSAgICAgICAgICAgIHBvaW50QyA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgcGF0dGVybnNbMF0gPSBwb2ludEE7CgkgICAgICAgIHBhdHRlcm5zWzFdID0gcG9pbnRCOwoJICAgICAgICBwYXR0ZXJuc1syXSA9IHBvaW50QzsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEBwYXJhbSBwYXR0ZXJuMSBmaXJzdCBwYXR0ZXJuCgkgICAgICogQHBhcmFtIHBhdHRlcm4yIHNlY29uZCBwYXR0ZXJuCgkgICAgICogQHJldHVybiBkaXN0YW5jZSBiZXR3ZWVuIHR3byBwb2ludHMKCSAgICAgKi8KCSAgICBSZXN1bHRQb2ludC5kaXN0YW5jZSA9IGZ1bmN0aW9uIChwYXR0ZXJuMSwgcGF0dGVybjIpIHsKCSAgICAgICAgcmV0dXJuIE1hdGhVdGlsc18xJDEuZGVmYXVsdC5kaXN0YW5jZShwYXR0ZXJuMS54LCBwYXR0ZXJuMS55LCBwYXR0ZXJuMi54LCBwYXR0ZXJuMi55KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIFJldHVybnMgdGhlIHogY29tcG9uZW50IG9mIHRoZSBjcm9zcyBwcm9kdWN0IGJldHdlZW4gdmVjdG9ycyBCQyBhbmQgQkEuCgkgICAgICovCgkgICAgUmVzdWx0UG9pbnQuY3Jvc3NQcm9kdWN0WiA9IGZ1bmN0aW9uIChwb2ludEEsIHBvaW50QiwgcG9pbnRDKSB7CgkgICAgICAgIHZhciBiWCA9IHBvaW50Qi54OwoJICAgICAgICB2YXIgYlkgPSBwb2ludEIueTsKCSAgICAgICAgcmV0dXJuICgocG9pbnRDLnggLSBiWCkgKiAocG9pbnRBLnkgLSBiWSkpIC0gKChwb2ludEMueSAtIGJZKSAqIChwb2ludEEueCAtIGJYKSk7CgkgICAgfTsKCSAgICByZXR1cm4gUmVzdWx0UG9pbnQ7Cgl9KCkpOwoJUmVzdWx0UG9pbnQkMS5kZWZhdWx0ID0gUmVzdWx0UG9pbnQ7CgoJdmFyIEFsaWdubWVudFBhdHRlcm5GaW5kZXIkMSA9IHt9OwoKCXZhciBBbGlnbm1lbnRQYXR0ZXJuJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fZXh0ZW5kcyQxID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHsKCSAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MgPSBPYmplY3Quc2V0UHJvdG90eXBlT2YgfHwKCSAgICAgICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHwKCSAgICAgICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9OwoJICAgICAgICByZXR1cm4gZXh0ZW5kU3RhdGljcyhkLCBiKTsKCSAgICB9OwoJICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikgewoJICAgICAgICBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH0KCSAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpOwoJICAgIH07Cgl9KSgpOwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEFsaWdubWVudFBhdHRlcm4kMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgUmVzdWx0UG9pbnRfMSQzID0gUmVzdWx0UG9pbnQkMTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGFuIGFsaWdubWVudCBwYXR0ZXJuLCB3aGljaCBhcmUgdGhlIHNtYWxsZXIgc3F1YXJlIHBhdHRlcm5zIGZvdW5kIGluCgkgKiBhbGwgYnV0IHRoZSBzaW1wbGVzdCBRUiBDb2Rlcy48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEFsaWdubWVudFBhdHRlcm4gPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7CgkgICAgX19leHRlbmRzJDEoQWxpZ25tZW50UGF0dGVybiwgX3N1cGVyKTsKCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIHJldHVybiBfdGhpczsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZXJtaW5lcyBpZiB0aGlzIGFsaWdubWVudCBwYXR0ZXJuICJhYm91dCBlcXVhbHMiIGFuIGFsaWdubWVudCBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhbiBhdmVyYWdlIG9mIHRoZSB0d28uCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybi5wcm90b3R5cGUuY29tYmluZUVzdGltYXRlID0gZnVuY3Rpb24gKGkgLypmbG9hdCovLCBqIC8qZmxvYXQqLywgbmV3TW9kdWxlU2l6ZSAvKmZsb2F0Ki8pIHsKCSAgICAgICAgdmFyIGNvbWJpbmVkWCA9ICh0aGlzLmdldFgoKSArIGopIC8gMi4wOwoJICAgICAgICB2YXIgY29tYmluZWRZID0gKHRoaXMuZ2V0WSgpICsgaSkgLyAyLjA7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplICsgbmV3TW9kdWxlU2l6ZSkgLyAyLjA7CgkgICAgICAgIHJldHVybiBuZXcgQWxpZ25tZW50UGF0dGVybihjb21iaW5lZFgsIGNvbWJpbmVkWSwgY29tYmluZWRNb2R1bGVTaXplKTsKCSAgICB9OwoJICAgIHJldHVybiBBbGlnbm1lbnRQYXR0ZXJuOwoJfShSZXN1bHRQb2ludF8xJDMuZGVmYXVsdCkpOwoJQWxpZ25tZW50UGF0dGVybiQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCgl2YXIgX192YWx1ZXMkMSA9IChjb21tb25qc0dsb2JhbCAmJiBjb21tb25qc0dsb2JhbC5fX3ZhbHVlcykgfHwgZnVuY3Rpb24obykgewoJICAgIHZhciBzID0gdHlwZW9mIFN5bWJvbCA9PT0gImZ1bmN0aW9uIiAmJiBTeW1ib2wuaXRlcmF0b3IsIG0gPSBzICYmIG9bc10sIGkgPSAwOwoJICAgIGlmIChtKSByZXR1cm4gbS5jYWxsKG8pOwoJICAgIGlmIChvICYmIHR5cGVvZiBvLmxlbmd0aCA9PT0gIm51bWJlciIpIHJldHVybiB7CgkgICAgICAgIG5leHQ6IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgICAgIGlmIChvICYmIGkgPj0gby5sZW5ndGgpIG8gPSB2b2lkIDA7CgkgICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogbyAmJiBvW2krK10sIGRvbmU6ICFvIH07CgkgICAgICAgIH0KCSAgICB9OwoJICAgIHRocm93IG5ldyBUeXBlRXJyb3IocyA/ICJPYmplY3QgaXMgbm90IGl0ZXJhYmxlLiIgOiAiU3ltYm9sLml0ZXJhdG9yIGlzIG5vdCBkZWZpbmVkLiIpOwoJfTsKCU9iamVjdC5kZWZpbmVQcm9wZXJ0eShBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuXzEgPSBBbGlnbm1lbnRQYXR0ZXJuJDE7Cgl2YXIgTm90Rm91bmRFeGNlcHRpb25fMSQzID0gTm90Rm91bmRFeGNlcHRpb24kMTsKCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBhbGlnbm1lbnQgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBBbGlnbm1lbnQgcGF0dGVybnMgbG9vayBsaWtlIGZpbmRlcgoJICogcGF0dGVybnMgYnV0IGFyZSBzbWFsbGVyIGFuZCBhcHBlYXIgYXQgcmVndWxhciBpbnRlcnZhbHMgdGhyb3VnaG91dCB0aGUgaW1hZ2UuPC9wPgoJICoKCSAqIDxwPkF0IHRoZSBtb21lbnQgdGhpcyBvbmx5IGxvb2tzIGZvciB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAqCgkgKiA8cD5UaGlzIGlzIG1vc3RseSBhIHNpbXBsaWZpZWQgY29weSBvZiB7QGxpbmsgRmluZGVyUGF0dGVybkZpbmRlcn0uIEl0IGlzIGNvcGllZCwKCSAqIHBhc3RlZCBhbmQgc3RyaXBwZWQgZG93biBoZXJlIGZvciBtYXhpbXVtIHBlcmZvcm1hbmNlIGJ1dCBkb2VzIHVuZm9ydHVuYXRlbHkgZHVwbGljYXRlCgkgKiBzb21lIGNvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIC8qKgoJICAgICAqIDxwPkNyZWF0ZXMgYSBmaW5kZXIgdGhhdCB3aWxsIGxvb2sgaW4gYSBwb3J0aW9uIG9mIHRoZSB3aG9sZSBpbWFnZS48L3A+CgkgICAgICoKCSAgICAgKiBAcGFyYW0gaW1hZ2UgaW1hZ2UgdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIHN0YXJ0WCBsZWZ0IGNvbHVtbiBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSBzdGFydFkgdG9wIHJvdyBmcm9tIHdoaWNoIHRvIHN0YXJ0IHNlYXJjaGluZwoJICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWdpb24gdG8gc2VhcmNoCgkgICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVnaW9uIHRvIHNlYXJjaAoJICAgICAqIEBwYXJhbSBtb2R1bGVTaXplIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBzbyBmYXIKCSAgICAgKi8KCSAgICBmdW5jdGlvbiBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyKGltYWdlLCBzdGFydFggLyppbnQqLywgc3RhcnRZIC8qaW50Ki8sIHdpZHRoIC8qaW50Ki8sIGhlaWdodCAvKmludCovLCBtb2R1bGVTaXplIC8qZmxvYXQqLywgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMuc3RhcnRYID0gc3RhcnRYOwoJICAgICAgICB0aGlzLnN0YXJ0WSA9IHN0YXJ0WTsKCSAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoOwoJICAgICAgICB0aGlzLmhlaWdodCA9IGhlaWdodDsKCSAgICAgICAgdGhpcy5tb2R1bGVTaXplID0gbW9kdWxlU2l6ZTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICAgICAgdGhpcy5wb3NzaWJsZUNlbnRlcnMgPSBbXTsgLy8gbmV3IEFycmF5PGFueT4oNSkpCgkgICAgICAgIC8vIFRZUEVTQ1JJUFRQT1JUOiBhcnJheSBpbml0aWFsaXphdGlvbiB3aXRob3V0IHNpemUgYXMgdGhlIGxlbmd0aCBpcyBjaGVja2VkIGJlbG93CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSgzKTsKCSAgICB9CgkgICAgLyoqCgkgICAgICogPHA+VGhpcyBtZXRob2QgYXR0ZW1wdHMgdG8gZmluZCB0aGUgYm90dG9tLXJpZ2h0IGFsaWdubWVudCBwYXR0ZXJuIGluIHRoZSBpbWFnZS4gSXQgaXMgYSBiaXQgbWVzc3kgc2luY2UKCSAgICAgKiBpdCdzIHByZXR0eSBwZXJmb3JtYW5jZS1jcml0aWNhbCBhbmQgc28gaXMgd3JpdHRlbiB0byBiZSBmYXN0IGZvcmVtb3N0LjwvcD4KCSAgICAgKgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBub3QgZm91bmQKCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgc3RhcnRYID0gdGhpcy5zdGFydFg7CgkgICAgICAgIHZhciBoZWlnaHQgPSB0aGlzLmhlaWdodDsKCSAgICAgICAgdmFyIHdpZHRoID0gdGhpcy53aWR0aDsKCSAgICAgICAgdmFyIG1heEogPSBzdGFydFggKyB3aWR0aDsKCSAgICAgICAgdmFyIG1pZGRsZUkgPSB0aGlzLnN0YXJ0WSArIChoZWlnaHQgLyAyKTsKCSAgICAgICAgLy8gV2UgYXJlIGxvb2tpbmcgZm9yIGJsYWNrL3doaXRlL2JsYWNrIG1vZHVsZXMgaW4gMToxOjEgcmF0aW8KCSAgICAgICAgLy8gdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIHNlZW4gc28gZmFyCgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoMyk7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIGZvciAodmFyIGlHZW4gPSAwOyBpR2VuIDwgaGVpZ2h0OyBpR2VuKyspIHsKCSAgICAgICAgICAgIC8vIFNlYXJjaCBmcm9tIG1pZGRsZSBvdXR3YXJkcwoJICAgICAgICAgICAgdmFyIGkgPSBtaWRkbGVJICsgKChpR2VuICYgMHgwMSkgPT09IDAgPyBNYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSA6IC1NYXRoLmZsb29yKChpR2VuICsgMSkgLyAyKSk7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICB2YXIgaiA9IHN0YXJ0WDsKCSAgICAgICAgICAgIC8vIEJ1cm4gb2ZmIGxlYWRpbmcgd2hpdGUgcGl4ZWxzIGJlZm9yZSBhbnl0aGluZyBlbHNlOyBpZiB3ZSBzdGFydCBpbiB0aGUgbWlkZGxlIG9mCgkgICAgICAgICAgICAvLyBhIHdoaXRlIHJ1biwgaXQgZG9lc24ndCBtYWtlIHNlbnNlIHRvIGNvdW50IGl0cyBsZW5ndGgsIHNpbmNlIHdlIGRvbid0IGtub3cgaWYgdGhlCgkgICAgICAgICAgICAvLyB3aGl0ZSBydW4gY29udGludWVkIHRvIHRoZSBsZWZ0IG9mIHRoZSBzdGFydCBwb2ludAoJICAgICAgICAgICAgd2hpbGUgKGogPCBtYXhKICYmICFpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB2YXIgY3VycmVudFN0YXRlID0gMDsKCSAgICAgICAgICAgIHdoaWxlIChqIDwgbWF4SikgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMV0rKzsKCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICBlbHNlIHsgLy8gQ291bnRpbmcgd2hpdGUgcGl4ZWxzCgkgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudFN0YXRlID09PSAyKSB7IC8vIEEgd2lubmVyPwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGF0dGVybkNyb3NzKHN0YXRlQ291bnQpKSB7IC8vIFllcwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBqKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCAhPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gc3RhdGVDb3VudFsyXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gMTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsrK2N1cnJlbnRTdGF0ZV0rKzsKCSAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKGN1cnJlbnRTdGF0ZSA9PT0gMSkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBqKys7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBpZiAodGhpcy5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSkgewoJICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIG1heEopOwoJICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQgIT09IG51bGwpIHsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNvbmZpcm1lZDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgLy8gSG1tLCBub3RoaW5nIHdlIHNhdyB3YXMgb2JzZXJ2ZWQgYW5kIGNvbmZpcm1lZCB0d2ljZS4gSWYgd2UgaGFkCgkgICAgICAgIC8vIGFueSBndWVzcyBhdCBhbGwsIHJldHVybiBpdC4KCSAgICAgICAgaWYgKHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aCAhPT0gMCkgewoJICAgICAgICAgICAgcmV0dXJuIHRoaXMucG9zc2libGVDZW50ZXJzWzBdOwoJICAgICAgICB9CgkgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDMuZGVmYXVsdCgpOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogR2l2ZW4gYSBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCBzZWVuIGFuZCBhbiBlbmQgcG9zaXRpb24sCgkgICAgICogZmlndXJlcyB0aGUgbG9jYXRpb24gb2YgdGhlIGNlbnRlciBvZiB0aGlzIGJsYWNrL3doaXRlL2JsYWNrIHJ1bi4KCSAgICAgKi8KCSAgICBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCwgZW5kIC8qaW50Ki8pIHsKCSAgICAgICAgcmV0dXJuIChlbmQgLSBzdGF0ZUNvdW50WzJdKSAtIHN0YXRlQ291bnRbMV0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8xIHJhdGlvcwoJICAgICAqICAgICAgICAgdXNlZCBieSBhbGlnbm1lbnQgcGF0dGVybnMgdG8gYmUgY29uc2lkZXJlZCBhIG1hdGNoCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMubW9kdWxlU2l6ZTsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCAzOyBpKyspIHsKCSAgICAgICAgICAgIGlmIChNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFtpXSkgPj0gbWF4VmFyaWFuY2UpIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5BZnRlciBhIGhvcml6b250YWwgc2NhbiBmaW5kcyBhIHBvdGVudGlhbCBhbGlnbm1lbnQgcGF0dGVybiwgdGhpcyBtZXRob2QKCSAgICAgKiAiY3Jvc3MtY2hlY2tzIiBieSBzY2FubmluZyBkb3duIHZlcnRpY2FsbHkgdGhyb3VnaCB0aGUgY2VudGVyIG9mIHRoZSBwb3NzaWJsZQoJICAgICAqIGFsaWdubWVudCBwYXR0ZXJuIHRvIHNlZSBpZiB0aGUgc2FtZSBwcm9wb3J0aW9uIGlzIGRldGVjdGVkLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGFydEkgcm93IHdoZXJlIGFuIGFsaWdubWVudCBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYW4gYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBhbGlnbm1lbnQgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgQWxpZ25tZW50UGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAvLyBTdGFydCBjb3VudGluZyB1cCBmcm9tIGNlbnRlcgoJICAgICAgICB2YXIgaSA9IHN0YXJ0STsKCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbMF0gPD0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMF0rKzsKCSAgICAgICAgICAgIGktLTsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFswXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIC8vIE5vdyBhbHNvIGNvdW50IGRvd24gZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IHN0YXJ0SSArIDE7CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbMV0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA8IG1heEkgJiYgIWltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzJdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzJdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMl0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSAyICogb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRoaXMuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkgPyBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaSkgOiBOYU47CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5UaGlzIGlzIGNhbGxlZCB3aGVuIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4uIEl0IHdpbGwKCSAgICAgKiBjcm9zcyBjaGVjayB3aXRoIGEgdmVydGljYWwgc2NhbiwgYW5kIGlmIHN1Y2Nlc3NmdWwsIHdpbGwgc2VlIGlmIHRoaXMgcGF0dGVybiBoYWQgYmVlbgoJICAgICAqIGZvdW5kIG9uIGEgcHJldmlvdXMgaG9yaXpvbnRhbCBzY2FuLiBJZiBzbywgd2UgY29uc2lkZXIgaXQgY29uZmlybWVkIGFuZCBjb25jbHVkZSB3ZSBoYXZlCgkgICAgICogZm91bmQgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBzdGF0ZUNvdW50IHJlYWRpbmcgc3RhdGUgbW9kdWxlIGNvdW50cyBmcm9tIGhvcml6b250YWwgc2NhbgoJICAgICAqIEBwYXJhbSBpIHJvdyB3aGVyZSBhbGlnbm1lbnQgcGF0dGVybiBtYXkgYmUgZm91bmQKCSAgICAgKiBAcGFyYW0gaiBlbmQgb2YgcG9zc2libGUgYWxpZ25tZW50IHBhdHRlcm4gaW4gcm93CgkgICAgICogQHJldHVybiB7QGxpbmsgQWxpZ25tZW50UGF0dGVybn0gaWYgd2UgaGF2ZSBmb3VuZCB0aGUgc2FtZSBwYXR0ZXJuIHR3aWNlLCBvciBudWxsIGlmIG5vdAoJICAgICAqLwoJICAgIEFsaWdubWVudFBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmhhbmRsZVBvc3NpYmxlQ2VudGVyID0gZnVuY3Rpb24gKHN0YXRlQ291bnQsIGkgLyppbnQqLywgaiAvKmludCovKSB7CgkgICAgICAgIHZhciBlXzEsIF9hOwoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdOwoJICAgICAgICB2YXIgY2VudGVySiA9IEFsaWdubWVudFBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKTsKCSAgICAgICAgdmFyIGNlbnRlckkgPSB0aGlzLmNyb3NzQ2hlY2tWZXJ0aWNhbChpLCAvKihpbnQpICovIGNlbnRlckosIDIgKiBzdGF0ZUNvdW50WzFdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IChzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0pIC8gMy4wOwoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBmb3IgKHZhciBfYiA9IF9fdmFsdWVzJDEodGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfYyA9IF9iLm5leHQoKTsgIV9jLmRvbmU7IF9jID0gX2IubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgICAgIHZhciBjZW50ZXIgPSBfYy52YWx1ZTsKCSAgICAgICAgICAgICAgICAgICAgLy8gTG9vayBmb3IgYWJvdXQgdGhlIHNhbWUgY2VudGVyIGFuZCBtb2R1bGUgc2l6ZToKCSAgICAgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5hYm91dEVxdWFscyhlc3RpbWF0ZWRNb2R1bGVTaXplLCBjZW50ZXJJLCBjZW50ZXJKKSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNlbnRlci5jb21iaW5lRXN0aW1hdGUoY2VudGVySSwgY2VudGVySiwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBjYXRjaCAoZV8xXzEpIHsgZV8xID0geyBlcnJvcjogZV8xXzEgfTsgfQoJICAgICAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKF9jICYmICFfYy5kb25lICYmIChfYSA9IF9iLnJldHVybikpIF9hLmNhbGwoX2IpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMSkgdGhyb3cgZV8xLmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICAvLyBIYWRuJ3QgZm91bmQgdGhpcyBiZWZvcmU7IHNhdmUgaXQKCSAgICAgICAgICAgIHZhciBwb2ludCA9IG5ldyBBbGlnbm1lbnRQYXR0ZXJuXzEuZGVmYXVsdChjZW50ZXJKLCBjZW50ZXJJLCBlc3RpbWF0ZWRNb2R1bGVTaXplKTsKCSAgICAgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzLnB1c2gocG9pbnQpOwoJICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjay5mb3VuZFBvc3NpYmxlUmVzdWx0UG9pbnQocG9pbnQpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBudWxsOwoJICAgIH07CgkgICAgcmV0dXJuIEFsaWdubWVudFBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJQWxpZ25tZW50UGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyOwoKCXZhciBGaW5kZXJQYXR0ZXJuRmluZGVyJDEgPSB7fTsKCgl2YXIgRmluZGVyUGF0dGVybiQxID0ge307CgoJLyoKCSAqIENvcHlyaWdodCAyMDA3IFpYaW5nIGF1dGhvcnMKCSAqCgkgKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgIkxpY2Vuc2UiKTsKCSAqIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS4KCSAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdAoJICoKCSAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wCgkgKgoJICogVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZQoJICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gIkFTIElTIiBCQVNJUywKCSAqIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLgoJICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZAoJICogbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuCgkgKi8KCXZhciBfX2V4dGVuZHMgPSAoY29tbW9uanNHbG9iYWwgJiYgY29tbW9uanNHbG9iYWwuX19leHRlbmRzKSB8fCAoZnVuY3Rpb24gKCkgewoJICAgIHZhciBleHRlbmRTdGF0aWNzID0gZnVuY3Rpb24gKGQsIGIpIHsKCSAgICAgICAgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fAoJICAgICAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fAoJICAgICAgICAgICAgZnVuY3Rpb24gKGQsIGIpIHsgZm9yICh2YXIgcCBpbiBiKSBpZiAoYi5oYXNPd25Qcm9wZXJ0eShwKSkgZFtwXSA9IGJbcF07IH07CgkgICAgICAgIHJldHVybiBleHRlbmRTdGF0aWNzKGQsIGIpOwoJICAgIH07CgkgICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7CgkgICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7CgkgICAgICAgIGZ1bmN0aW9uIF9fKCkgeyB0aGlzLmNvbnN0cnVjdG9yID0gZDsgfQoJICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7CgkgICAgfTsKCX0pKCk7CglPYmplY3QuZGVmaW5lUHJvcGVydHkoRmluZGVyUGF0dGVybiQxLCAiX19lc01vZHVsZSIsIHsgdmFsdWU6IHRydWUgfSk7CgkvKm5hbWVzcGFjZSBjb20uZ29vZ2xlLnp4aW5nLnFyY29kZS5kZXRlY3RvciB7Ki8KCXZhciBSZXN1bHRQb2ludF8xJDIgPSBSZXN1bHRQb2ludCQxOwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgYSBmaW5kZXIgcGF0dGVybiwgd2hpY2ggYXJlIHRoZSB0aHJlZSBzcXVhcmUgcGF0dGVybnMgZm91bmQgaW4KCSAqIHRoZSBjb3JuZXJzIG9mIFFSIENvZGVzLiBJdCBhbHNvIGVuY2Fwc3VsYXRlcyBhIGNvdW50IG9mIHNpbWlsYXIgZmluZGVyIHBhdHRlcm5zLAoJICogYXMgYSBjb252ZW5pZW5jZSB0byB0aGUgZmluZGVyJ3MgYm9va2tlZXBpbmcuPC9wPgoJICoKCSAqIEBhdXRob3IgU2VhbiBPd2VuCgkgKi8KCXZhciBGaW5kZXJQYXR0ZXJuID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikgewoJICAgIF9fZXh0ZW5kcyhGaW5kZXJQYXR0ZXJuLCBfc3VwZXIpOwoJICAgIC8vIEZpbmRlclBhdHRlcm4ocG9zWDogbnVtYmVyLypmbG9hdCovLCBwb3NZOiBudW1iZXIvKmZsb2F0Ki8sIGVzdGltYXRlZE1vZHVsZVNpemU6IG51bWJlci8qZmxvYXQqLykgewoJICAgIC8vICAgdGhpcyhwb3NYLCBwb3NZLCBlc3RpbWF0ZWRNb2R1bGVTaXplLCAxKQoJICAgIC8vIH0KCSAgICBmdW5jdGlvbiBGaW5kZXJQYXR0ZXJuKHBvc1ggLypmbG9hdCovLCBwb3NZIC8qZmxvYXQqLywgZXN0aW1hdGVkTW9kdWxlU2l6ZSAvKmZsb2F0Ki8sIGNvdW50IC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgcG9zWCwgcG9zWSkgfHwgdGhpczsKCSAgICAgICAgX3RoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IGVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIF90aGlzLmNvdW50ID0gY291bnQ7CgkgICAgICAgIGlmICh1bmRlZmluZWQgPT09IGNvdW50KSB7CgkgICAgICAgICAgICBfdGhpcy5jb3VudCA9IDE7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIF90aGlzOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5lc3RpbWF0ZWRNb2R1bGVTaXplOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybi5wcm90b3R5cGUuZ2V0Q291bnQgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmNvdW50OwoJICAgIH07CgkgICAgLyoKCSAgICB2b2lkIGluY3JlbWVudENvdW50KCkgewoJICAgICAgdGhpcy5jb3VudCsrCgkgICAgfQoJICAgICAqLwoJICAgIC8qKgoJICAgICAqIDxwPkRldGVybWluZXMgaWYgdGhpcyBmaW5kZXIgcGF0dGVybiAiYWJvdXQgZXF1YWxzIiBhIGZpbmRlciBwYXR0ZXJuIGF0IHRoZSBzdGF0ZWQKCSAgICAgKiBwb3NpdGlvbiBhbmQgc2l6ZSAtLSBtZWFuaW5nLCBpdCBpcyBhdCBuZWFybHkgdGhlIHNhbWUgY2VudGVyIHdpdGggbmVhcmx5IHRoZSBzYW1lIHNpemUuPC9wPgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm4ucHJvdG90eXBlLmFib3V0RXF1YWxzID0gZnVuY3Rpb24gKG1vZHVsZVNpemUgLypmbG9hdCovLCBpIC8qZmxvYXQqLywgaiAvKmZsb2F0Ki8pIHsKCSAgICAgICAgaWYgKE1hdGguYWJzKGkgLSB0aGlzLmdldFkoKSkgPD0gbW9kdWxlU2l6ZSAmJiBNYXRoLmFicyhqIC0gdGhpcy5nZXRYKCkpIDw9IG1vZHVsZVNpemUpIHsKCSAgICAgICAgICAgIHZhciBtb2R1bGVTaXplRGlmZiA9IE1hdGguYWJzKG1vZHVsZVNpemUgLSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgcmV0dXJuIG1vZHVsZVNpemVEaWZmIDw9IDEuMCB8fCBtb2R1bGVTaXplRGlmZiA8PSB0aGlzLmVzdGltYXRlZE1vZHVsZVNpemU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQ29tYmluZXMgdGhpcyBvYmplY3QncyBjdXJyZW50IGVzdGltYXRlIG9mIGEgZmluZGVyIHBhdHRlcm4gcG9zaXRpb24gYW5kIG1vZHVsZSBzaXplCgkgICAgICogd2l0aCBhIG5ldyBlc3RpbWF0ZS4gSXQgcmV0dXJucyBhIG5ldyB7QGNvZGUgRmluZGVyUGF0dGVybn0gY29udGFpbmluZyBhIHdlaWdodGVkIGF2ZXJhZ2UKCSAgICAgKiBiYXNlZCBvbiBjb3VudC4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuLnByb3RvdHlwZS5jb21iaW5lRXN0aW1hdGUgPSBmdW5jdGlvbiAoaSAvKmZsb2F0Ki8sIGogLypmbG9hdCovLCBuZXdNb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgY29tYmluZWRDb3VudCA9IHRoaXMuY291bnQgKyAxOwoJICAgICAgICB2YXIgY29tYmluZWRYID0gKHRoaXMuY291bnQgKiB0aGlzLmdldFgoKSArIGopIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgdmFyIGNvbWJpbmVkWSA9ICh0aGlzLmNvdW50ICogdGhpcy5nZXRZKCkgKyBpKSAvIGNvbWJpbmVkQ291bnQ7CgkgICAgICAgIHZhciBjb21iaW5lZE1vZHVsZVNpemUgPSAodGhpcy5jb3VudCAqIHRoaXMuZXN0aW1hdGVkTW9kdWxlU2l6ZSArIG5ld01vZHVsZVNpemUpIC8gY29tYmluZWRDb3VudDsKCSAgICAgICAgcmV0dXJuIG5ldyBGaW5kZXJQYXR0ZXJuKGNvbWJpbmVkWCwgY29tYmluZWRZLCBjb21iaW5lZE1vZHVsZVNpemUsIGNvbWJpbmVkQ291bnQpOwoJICAgIH07CgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm47Cgl9KFJlc3VsdFBvaW50XzEkMi5kZWZhdWx0KSk7CglGaW5kZXJQYXR0ZXJuJDEuZGVmYXVsdCA9IEZpbmRlclBhdHRlcm47CgoJdmFyIEZpbmRlclBhdHRlcm5JbmZvJDEgPSB7fTsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5JbmZvJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qKgoJICogPHA+RW5jYXBzdWxhdGVzIGluZm9ybWF0aW9uIGFib3V0IGZpbmRlciBwYXR0ZXJucyBpbiBhbiBpbWFnZSwgaW5jbHVkaW5nIHRoZSBsb2NhdGlvbiBvZgoJICogdGhlIHRocmVlIGZpbmRlciBwYXR0ZXJucywgYW5kIHRoZWlyIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5JbmZvID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIEZpbmRlclBhdHRlcm5JbmZvKHBhdHRlcm5DZW50ZXJzKSB7CgkgICAgICAgIHRoaXMuYm90dG9tTGVmdCA9IHBhdHRlcm5DZW50ZXJzWzBdOwoJICAgICAgICB0aGlzLnRvcExlZnQgPSBwYXR0ZXJuQ2VudGVyc1sxXTsKCSAgICAgICAgdGhpcy50b3BSaWdodCA9IHBhdHRlcm5DZW50ZXJzWzJdOwoJICAgIH0KCSAgICBGaW5kZXJQYXR0ZXJuSW5mby5wcm90b3R5cGUuZ2V0Qm90dG9tTGVmdCA9IGZ1bmN0aW9uICgpIHsKCSAgICAgICAgcmV0dXJuIHRoaXMuYm90dG9tTGVmdDsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5JbmZvLnByb3RvdHlwZS5nZXRUb3BMZWZ0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BMZWZ0OwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkluZm8ucHJvdG90eXBlLmdldFRvcFJpZ2h0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy50b3BSaWdodDsKCSAgICB9OwoJICAgIHJldHVybiBGaW5kZXJQYXR0ZXJuSW5mbzsKCX0oKSk7CglGaW5kZXJQYXR0ZXJuSW5mbyQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuSW5mbzsKCgkvKgoJICogQ29weXJpZ2h0IDIwMDcgWlhpbmcgYXV0aG9ycwoJICoKCSAqIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSAiTGljZW5zZSIpOwoJICogeW91IG1heSBub3QgdXNlIHRoaXMgZmlsZSBleGNlcHQgaW4gY29tcGxpYW5jZSB3aXRoIHRoZSBMaWNlbnNlLgoJICogWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0CgkgKgoJICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjAKCSAqCgkgKiBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlCgkgKiBkaXN0cmlidXRlZCB1bmRlciB0aGUgTGljZW5zZSBpcyBkaXN0cmlidXRlZCBvbiBhbiAiQVMgSVMiIEJBU0lTLAoJICogV0lUSE9VVCBXQVJSQU5USUVTIE9SIENPTkRJVElPTlMgT0YgQU5ZIEtJTkQsIGVpdGhlciBleHByZXNzIG9yIGltcGxpZWQuCgkgKiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kCgkgKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS4KCSAqLwoJdmFyIF9fdmFsdWVzID0gKGNvbW1vbmpzR2xvYmFsICYmIGNvbW1vbmpzR2xvYmFsLl9fdmFsdWVzKSB8fCBmdW5jdGlvbihvKSB7CgkgICAgdmFyIHMgPSB0eXBlb2YgU3ltYm9sID09PSAiZnVuY3Rpb24iICYmIFN5bWJvbC5pdGVyYXRvciwgbSA9IHMgJiYgb1tzXSwgaSA9IDA7CgkgICAgaWYgKG0pIHJldHVybiBtLmNhbGwobyk7CgkgICAgaWYgKG8gJiYgdHlwZW9mIG8ubGVuZ3RoID09PSAibnVtYmVyIikgcmV0dXJuIHsKCSAgICAgICAgbmV4dDogZnVuY3Rpb24gKCkgewoJICAgICAgICAgICAgaWYgKG8gJiYgaSA+PSBvLmxlbmd0aCkgbyA9IHZvaWQgMDsKCSAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiBvICYmIG9baSsrXSwgZG9uZTogIW8gfTsKCSAgICAgICAgfQoJICAgIH07CgkgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihzID8gIk9iamVjdCBpcyBub3QgaXRlcmFibGUuIiA6ICJTeW1ib2wuaXRlcmF0b3IgaXMgbm90IGRlZmluZWQuIik7Cgl9OwoJT2JqZWN0LmRlZmluZVByb3BlcnR5KEZpbmRlclBhdHRlcm5GaW5kZXIkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJLypuYW1lc3BhY2UgY29tLmdvb2dsZS56eGluZy5xcmNvZGUuZGV0ZWN0b3IgeyovCgl2YXIgRGVjb2RlSGludFR5cGVfMSQyID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBSZXN1bHRQb2ludF8xJDEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIEZpbmRlclBhdHRlcm5fMSA9IEZpbmRlclBhdHRlcm4kMTsKCXZhciBGaW5kZXJQYXR0ZXJuSW5mb18xID0gRmluZGVyUGF0dGVybkluZm8kMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDIgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJLyppbXBvcnQgamF2YS5pby5TZXJpYWxpemFibGU7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5Db2xsZWN0aW9uczsqLwoJLyppbXBvcnQgamF2YS51dGlsLkNvbXBhcmF0b3I7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5MaXN0OyovCgkvKmltcG9ydCBqYXZhLnV0aWwuTWFwOyovCgkvKioKCSAqIDxwPlRoaXMgY2xhc3MgYXR0ZW1wdHMgdG8gZmluZCBmaW5kZXIgcGF0dGVybnMgaW4gYSBRUiBDb2RlLiBGaW5kZXIgcGF0dGVybnMgYXJlIHRoZSBzcXVhcmUKCSAqIG1hcmtlcnMgYXQgdGhyZWUgY29ybmVycyBvZiBhIFFSIENvZGUuPC9wPgoJICoKCSAqIDxwPlRoaXMgY2xhc3MgaXMgdGhyZWFkLXNhZmUgYnV0IG5vdCByZWVudHJhbnQuIEVhY2ggdGhyZWFkIG11c3QgYWxsb2NhdGUgaXRzIG93biBvYmplY3QuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIEZpbmRlclBhdHRlcm5GaW5kZXIgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7CgkgICAgLyoqCgkgICAgICogPHA+Q3JlYXRlcyBhIGZpbmRlciB0aGF0IHdpbGwgc2VhcmNoIHRoZSBpbWFnZSBmb3IgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBpbWFnZSBpbWFnZSB0byBzZWFyY2gKCSAgICAgKi8KCSAgICAvLyBwdWJsaWMgY29uc3RydWN0b3IoaW1hZ2U6IEJpdE1hdHJpeCkgewoJICAgIC8vICAgdGhpcyhpbWFnZSwgbnVsbCkKCSAgICAvLyB9CgkgICAgZnVuY3Rpb24gRmluZGVyUGF0dGVybkZpbmRlcihpbWFnZSwgcmVzdWx0UG9pbnRDYWxsYmFjaykgewoJICAgICAgICB0aGlzLmltYWdlID0gaW1hZ2U7CgkgICAgICAgIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayA9IHJlc3VsdFBvaW50Q2FsbGJhY2s7CgkgICAgICAgIHRoaXMucG9zc2libGVDZW50ZXJzID0gW107CgkgICAgICAgIHRoaXMuY3Jvc3NDaGVja1N0YXRlQ291bnQgPSBuZXcgSW50MzJBcnJheSg1KTsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gcmVzdWx0UG9pbnRDYWxsYmFjazsKCSAgICB9CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0SW1hZ2UgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmltYWdlOwoJICAgIH07CgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuZ2V0UG9zc2libGVDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5maW5kID0gZnVuY3Rpb24gKGhpbnRzKSB7CgkgICAgICAgIHZhciB0cnlIYXJkZXIgPSAoaGludHMgIT09IG51bGwgJiYgaGludHMgIT09IHVuZGVmaW5lZCkgJiYgdW5kZWZpbmVkICE9PSBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQyLmRlZmF1bHQuVFJZX0hBUkRFUik7CgkgICAgICAgIHZhciBwdXJlQmFyY29kZSA9IChoaW50cyAhPT0gbnVsbCAmJiBoaW50cyAhPT0gdW5kZWZpbmVkKSAmJiB1bmRlZmluZWQgIT09IGhpbnRzLmdldChEZWNvZGVIaW50VHlwZV8xJDIuZGVmYXVsdC5QVVJFX0JBUkNPREUpOwoJICAgICAgICB2YXIgaW1hZ2UgPSB0aGlzLmltYWdlOwoJICAgICAgICB2YXIgbWF4SSA9IGltYWdlLmdldEhlaWdodCgpOwoJICAgICAgICB2YXIgbWF4SiA9IGltYWdlLmdldFdpZHRoKCk7CgkgICAgICAgIC8vIFdlIGFyZSBsb29raW5nIGZvciBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBtb2R1bGVzIGluCgkgICAgICAgIC8vIDE6MTozOjE6MSByYXRpbzsgdGhpcyB0cmFja3MgdGhlIG51bWJlciBvZiBzdWNoIG1vZHVsZXMgc2VlbiBzbyBmYXIKCSAgICAgICAgLy8gTGV0J3MgYXNzdW1lIHRoYXQgdGhlIG1heGltdW0gdmVyc2lvbiBRUiBDb2RlIHdlIHN1cHBvcnQgdGFrZXMgdXAgMS80IHRoZSBoZWlnaHQgb2YgdGhlCgkgICAgICAgIC8vIGltYWdlLCBhbmQgdGhlbiBhY2NvdW50IGZvciB0aGUgY2VudGVyIGJlaW5nIDMgbW9kdWxlcyBpbiBzaXplLiBUaGlzIGdpdmVzIHRoZSBzbWFsbGVzdAoJICAgICAgICAvLyBudW1iZXIgb2YgcGl4ZWxzIHRoZSBjZW50ZXIgY291bGQgYmUsIHNvIHNraXAgdGhpcyBvZnRlbi4gV2hlbiB0cnlpbmcgaGFyZGVyLCBsb29rIGZvciBhbGwKCSAgICAgICAgLy8gUVIgdmVyc2lvbnMgcmVnYXJkbGVzcyBvZiBob3cgZGVuc2UgdGhleSBhcmUuCgkgICAgICAgIHZhciBpU2tpcCA9IE1hdGguZmxvb3IoKDMgKiBtYXhJKSAvICg0ICogRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUykpOwoJICAgICAgICBpZiAoaVNraXAgPCBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQIHx8IHRyeUhhcmRlcikgewoJICAgICAgICAgICAgaVNraXAgPSBGaW5kZXJQYXR0ZXJuRmluZGVyLk1JTl9TS0lQOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkb25lID0gZmFsc2U7CgkgICAgICAgIHZhciBzdGF0ZUNvdW50ID0gbmV3IEludDMyQXJyYXkoNSk7CgkgICAgICAgIGZvciAodmFyIGkgPSBpU2tpcCAtIDE7IGkgPCBtYXhJICYmICFkb25lOyBpICs9IGlTa2lwKSB7CgkgICAgICAgICAgICAvLyBHZXQgYSByb3cgb2YgYmxhY2svd2hpdGUgdmFsdWVzCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMV0gPSAwOwoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IDA7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0gPSAwOwoJICAgICAgICAgICAgdmFyIGN1cnJlbnRTdGF0ZSA9IDA7CgkgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IG1heEo7IGorKykgewoJICAgICAgICAgICAgICAgIGlmIChpbWFnZS5nZXQoaiwgaSkpIHsKCSAgICAgICAgICAgICAgICAgICAgLy8gQmxhY2sgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMSkgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRTdGF0ZSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBlbHNlIHsgLy8gV2hpdGUgcGl4ZWwKCSAgICAgICAgICAgICAgICAgICAgaWYgKChjdXJyZW50U3RhdGUgJiAxKSA9PT0gMCkgeyAvLyBDb3VudGluZyBibGFjayBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50U3RhdGUgPT09IDQpIHsgLy8gQSB3aW5uZXI/CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsgLy8gWWVzCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBjb25maXJtZWQgPSB0aGlzLmhhbmRsZVBvc3NpYmxlQ2VudGVyKHN0YXRlQ291bnQsIGksIGosIHB1cmVCYXJjb2RlKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU3RhcnQgZXhhbWluaW5nIGV2ZXJ5IG90aGVyIGxpbmUuIENoZWNraW5nIGVhY2ggbGluZSB0dXJuZWQgb3V0IHRvIGJlIHRvbwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gZXhwZW5zaXZlIGFuZCBkaWRuJ3QgaW1wcm92ZSBwZXJmb3JtYW5jZS4KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlTa2lwID0gMjsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQgPT09IHRydWUpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgcm93U2tpcCA9IHRoaXMuZmluZFJvd1NraXAoKTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAocm93U2tpcCA+IHN0YXRlQ291bnRbMl0pIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gU2tpcCByb3dzIGJldHdlZW4gcm93IG9mIGxvd2VyIGNvbmZpcm1lZCBjZW50ZXIKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gYW5kIHRvcCBvZiBwcmVzdW1lZCB0aGlyZCBjb25maXJtZWQgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGJ1dCBiYWNrIHVwIGEgYml0IHRvIGdldCBhIGZ1bGwgY2hhbmNlIG9mIGRldGVjdGluZwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBpdCwgZW50aXJlIHdpZHRoIG9mIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBTa2lwIGJ5IHJvd1NraXAsIGJ1dCBiYWNrIG9mZiBieSBzdGF0ZUNvdW50WzJdIChzaXplIG9mIGxhc3QgY2VudGVyCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9mIHBhdHRlcm4gd2Ugc2F3KSB0byBiZSBjb25zZXJ2YXRpdmUsIGFuZCBhbHNvIGJhY2sgb2ZmIGJ5IGlTa2lwIHdoaWNoCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIGlzIGFib3V0IHRvIGJlIHJlLWFkZGVkCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgKz0gcm93U2tpcCAtIHN0YXRlQ291bnRbMl0gLSBpU2tpcDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaiA9IG1heEogLSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IHN0YXRlQ291bnRbM107CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzJdID0gc3RhdGVDb3VudFs0XTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAzOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gQ2xlYXIgc3RhdGUgdG8gc3RhcnQgbG9va2luZyBhZ2FpbgoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50U3RhdGUgPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzBdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsxXSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzNdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFs0XSA9IDA7CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBObywgc2hpZnQgY291bnRzIGJhY2sgYnkgdHdvCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbMF0gPSBzdGF0ZUNvdW50WzJdOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzFdID0gc3RhdGVDb3VudFszXTsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVDb3VudFsyXSA9IHN0YXRlQ291bnRbNF07CgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPSAxOwoJICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFN0YXRlID0gMzsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGF0ZUNvdW50WysrY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIGVsc2UgeyAvLyBDb3VudGluZyB3aGl0ZSBwaXhlbHMKCSAgICAgICAgICAgICAgICAgICAgICAgIHN0YXRlQ291bnRbY3VycmVudFN0YXRlXSsrOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgaWYgKEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3Moc3RhdGVDb3VudCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY29uZmlybWVkID0gdGhpcy5oYW5kbGVQb3NzaWJsZUNlbnRlcihzdGF0ZUNvdW50LCBpLCBtYXhKLCBwdXJlQmFyY29kZSk7CgkgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCA9PT0gdHJ1ZSkgewoJICAgICAgICAgICAgICAgICAgICBpU2tpcCA9IHN0YXRlQ291bnRbMF07CgkgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLmhhc1NraXBwZWQpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZvdW5kIGEgdGhpcmQgb25lCgkgICAgICAgICAgICAgICAgICAgICAgICBkb25lID0gdGhpcy5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzKCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBhdHRlcm5JbmZvID0gdGhpcy5zZWxlY3RCZXN0UGF0dGVybnMoKTsKCSAgICAgICAgUmVzdWx0UG9pbnRfMSQxLmRlZmF1bHQub3JkZXJCZXN0UGF0dGVybnMocGF0dGVybkluZm8pOwoJICAgICAgICByZXR1cm4gbmV3IEZpbmRlclBhdHRlcm5JbmZvXzEuZGVmYXVsdChwYXR0ZXJuSW5mbyk7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBHaXZlbiBhIGNvdW50IG9mIGJsYWNrL3doaXRlL2JsYWNrL3doaXRlL2JsYWNrIHBpeGVscyBqdXN0IHNlZW4gYW5kIGFuIGVuZCBwb3NpdGlvbiwKCSAgICAgKiBmaWd1cmVzIHRoZSBsb2NhdGlvbiBvZiB0aGUgY2VudGVyIG9mIHRoaXMgcnVuLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZCA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBlbmQgLyppbnQqLykgewoJICAgICAgICByZXR1cm4gKGVuZCAtIHN0YXRlQ291bnRbNF0gLSBzdGF0ZUNvdW50WzNdKSAtIHN0YXRlQ291bnRbMl0gLyAyLjA7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcGFyYW0gc3RhdGVDb3VudCBjb3VudCBvZiBibGFjay93aGl0ZS9ibGFjay93aGl0ZS9ibGFjayBwaXhlbHMganVzdCByZWFkCgkgICAgICogQHJldHVybiB0cnVlIGlmZiB0aGUgcHJvcG9ydGlvbnMgb2YgdGhlIGNvdW50cyBpcyBjbG9zZSBlbm91Z2ggdG8gdGhlIDEvMS8zLzEvMSByYXRpb3MKCSAgICAgKiAgICAgICAgIHVzZWQgYnkgZmluZGVyIHBhdHRlcm5zIHRvIGJlIGNvbnNpZGVyZWQgYSBtYXRjaAoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuZm91bmRQYXR0ZXJuQ3Jvc3MgPSBmdW5jdGlvbiAoc3RhdGVDb3VudCkgewoJICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMDsKCSAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCA1OyBpKyspIHsKCSAgICAgICAgICAgIHZhciBjb3VudCA9IHN0YXRlQ291bnRbaV07CgkgICAgICAgICAgICBpZiAoY291bnQgPT09IDApIHsKCSAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gY291bnQ7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHRvdGFsTW9kdWxlU2l6ZSA8IDcpIHsKCSAgICAgICAgICAgIHJldHVybiBmYWxzZTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIDcuMDsKCSAgICAgICAgdmFyIG1heFZhcmlhbmNlID0gbW9kdWxlU2l6ZSAvIDIuMDsKCSAgICAgICAgLy8gQWxsb3cgbGVzcyB0aGFuIDUwJSB2YXJpYW5jZSBmcm9tIDEtMS0zLTEtMSBwcm9wb3J0aW9ucwoJICAgICAgICByZXR1cm4gTWF0aC5hYnMobW9kdWxlU2l6ZSAtIHN0YXRlQ291bnRbMF0pIDwgbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzFdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicygzLjAgKiBtb2R1bGVTaXplIC0gc3RhdGVDb3VudFsyXSkgPCAzICogbWF4VmFyaWFuY2UgJiYKCSAgICAgICAgICAgIE1hdGguYWJzKG1vZHVsZVNpemUgLSBzdGF0ZUNvdW50WzNdKSA8IG1heFZhcmlhbmNlICYmCgkgICAgICAgICAgICBNYXRoLmFicyhtb2R1bGVTaXplIC0gc3RhdGVDb3VudFs0XSkgPCBtYXhWYXJpYW5jZTsKCSAgICB9OwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgY3Jvc3NDaGVja1N0YXRlQ291bnQgPSB0aGlzLmNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFswXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzFdID0gMDsKCSAgICAgICAgY3Jvc3NDaGVja1N0YXRlQ291bnRbMl0gPSAwOwoJICAgICAgICBjcm9zc0NoZWNrU3RhdGVDb3VudFszXSA9IDA7CgkgICAgICAgIGNyb3NzQ2hlY2tTdGF0ZUNvdW50WzRdID0gMDsKCSAgICAgICAgcmV0dXJuIGNyb3NzQ2hlY2tTdGF0ZUNvdW50OwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQWZ0ZXIgYSB2ZXJ0aWNhbCBhbmQgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jcm9zcy1jcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gZGlhZ29uYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuCgkgICAgICoKCSAgICAgKiBAcGFyYW0gc3RhcnRJIHJvdyB3aGVyZSBhIGZpbmRlciBwYXR0ZXJuIHdhcyBkZXRlY3RlZAoJICAgICAqIEBwYXJhbSBjZW50ZXJKIGNlbnRlciBvZiB0aGUgc2VjdGlvbiB0aGF0IGFwcGVhcnMgdG8gY3Jvc3MgYSBmaW5kZXIgcGF0dGVybgoJICAgICAqIEBwYXJhbSBtYXhDb3VudCBtYXhpbXVtIHJlYXNvbmFibGUgbnVtYmVyIG9mIG1vZHVsZXMgdGhhdCBzaG91bGQgYmUKCSAgICAgKiAgb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcGFyYW0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgVGhlIG9yaWdpbmFsIHN0YXRlIGNvdW50IHRvdGFsLgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZiBwcm9wb3J0aW9ucyBhcmUgd2l0aGluZyBleHBlY3RlZCBsaW1pdHMKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrRGlhZ29uYWwgPSBmdW5jdGlvbiAoc3RhcnRJIC8qaW50Ki8sIGNlbnRlckogLyppbnQqLywgbWF4Q291bnQgLyppbnQqLywgb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwgLyppbnQqLykgewoJICAgICAgICB2YXIgc3RhdGVDb3VudCA9IHRoaXMuZ2V0Q3Jvc3NDaGVja1N0YXRlQ291bnQoKTsKCSAgICAgICAgLy8gU3RhcnQgY291bnRpbmcgdXAsIGxlZnQgZnJvbSBjZW50ZXIgZmluZGluZyBibGFjayBjZW50ZXIgbWFzcwoJICAgICAgICB2YXIgaSA9IDA7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHdoaWxlIChzdGFydEkgPj0gaSAmJiBjZW50ZXJKID49IGkgJiYgaW1hZ2UuZ2V0KGNlbnRlckogLSBpLCBzdGFydEkgLSBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgPCBpIHx8IGNlbnRlckogPCBpKSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyB3aGl0ZSBzcGFjZQoJICAgICAgICB3aGlsZSAoc3RhcnRJID49IGkgJiYgY2VudGVySiA+PSBpICYmICFpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzFdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgYWxyZWFkeSB0b28gbWFueSBtb2R1bGVzIGluIHRoaXMgc3RhdGUgb3IgcmFuIG9mZiB0aGUgZWRnZToKCSAgICAgICAgaWYgKHN0YXJ0SSA8IGkgfHwgY2VudGVySiA8IGkgfHwgc3RhdGVDb3VudFsxXSA+IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQ29udGludWUgdXAsIGxlZnQgZmluZGluZyBibGFjayBib3JkZXIKCSAgICAgICAgd2hpbGUgKHN0YXJ0SSA+PSBpICYmIGNlbnRlckogPj0gaSAmJiBpbWFnZS5nZXQoY2VudGVySiAtIGksIHN0YXJ0SSAtIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdIDw9IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzBdKys7CgkgICAgICAgICAgICBpKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbMF0gPiBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHZhciBtYXhJID0gaW1hZ2UuZ2V0SGVpZ2h0KCk7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biwgcmlnaHQgZnJvbSBjZW50ZXIKCSAgICAgICAgaSA9IDE7CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgaW1hZ2UuZ2V0KGNlbnRlckogKyBpLCBzdGFydEkgKyBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIC8vIFJhbiBvZmYgdGhlIGVkZ2U/CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChzdGFydEkgKyBpIDwgbWF4SSAmJiBjZW50ZXJKICsgaSA8IG1heEogJiYgIWltYWdlLmdldChjZW50ZXJKICsgaSwgc3RhcnRJICsgaSkgJiYKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGFydEkgKyBpID49IG1heEkgfHwgY2VudGVySiArIGkgPj0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gZmFsc2U7CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKHN0YXJ0SSArIGkgPCBtYXhJICYmIGNlbnRlckogKyBpIDwgbWF4SiAmJiBpbWFnZS5nZXQoY2VudGVySiArIGksIHN0YXJ0SSArIGkpICYmCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIHdlIGZvdW5kIGEgZmluZGVyLXBhdHRlcm4tbGlrZSBzZWN0aW9uLCBidXQgaXRzIHNpemUgaXMgbW9yZSB0aGFuIDEwMCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgcmV0dXJuIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA8IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAmJgoJICAgICAgICAgICAgRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkFmdGVyIGEgaG9yaXpvbnRhbCBzY2FuIGZpbmRzIGEgcG90ZW50aWFsIGZpbmRlciBwYXR0ZXJuLCB0aGlzIG1ldGhvZAoJICAgICAqICJjcm9zcy1jaGVja3MiIGJ5IHNjYW5uaW5nIGRvd24gdmVydGljYWxseSB0aHJvdWdoIHRoZSBjZW50ZXIgb2YgdGhlIHBvc3NpYmxlCgkgICAgICogZmluZGVyIHBhdHRlcm4gdG8gc2VlIGlmIHRoZSBzYW1lIHByb3BvcnRpb24gaXMgZGV0ZWN0ZWQuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXJ0SSByb3cgd2hlcmUgYSBmaW5kZXIgcGF0dGVybiB3YXMgZGV0ZWN0ZWQKCSAgICAgKiBAcGFyYW0gY2VudGVySiBjZW50ZXIgb2YgdGhlIHNlY3Rpb24gdGhhdCBhcHBlYXJzIHRvIGNyb3NzIGEgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gbWF4Q291bnQgbWF4aW11bSByZWFzb25hYmxlIG51bWJlciBvZiBtb2R1bGVzIHRoYXQgc2hvdWxkIGJlCgkgICAgICogb2JzZXJ2ZWQgaW4gYW55IHJlYWRpbmcgc3RhdGUsIGJhc2VkIG9uIHRoZSByZXN1bHRzIG9mIHRoZSBob3Jpem9udGFsIHNjYW4KCSAgICAgKiBAcmV0dXJuIHZlcnRpY2FsIGNlbnRlciBvZiBmaW5kZXIgcGF0dGVybiwgb3Ige0BsaW5rIEZsb2F0I05hTn0gaWYgbm90IGZvdW5kCgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuY3Jvc3NDaGVja1ZlcnRpY2FsID0gZnVuY3Rpb24gKHN0YXJ0SSAvKmludCovLCBjZW50ZXJKIC8qaW50Ki8sIG1heENvdW50IC8qaW50Ki8sIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGltYWdlID0gdGhpcy5pbWFnZTsKCSAgICAgICAgdmFyIG1heEkgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIC8vIFN0YXJ0IGNvdW50aW5nIHVwIGZyb20gY2VudGVyCgkgICAgICAgIHZhciBpID0gc3RhcnRJOwoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaSA+PSAwICYmICFpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIC8vIElmIGFscmVhZHkgdG9vIG1hbnkgbW9kdWxlcyBpbiB0aGlzIHN0YXRlIG9yIHJhbiBvZmYgdGhlIGVkZ2U6CgkgICAgICAgIGlmIChpIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPj0gMCAmJiBpbWFnZS5nZXQoY2VudGVySiwgaSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgaS0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gTm93IGFsc28gY291bnQgZG93biBmcm9tIGNlbnRlcgoJICAgICAgICBpID0gc3RhcnRJICsgMTsKCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJKSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChpIDwgbWF4SSAmJiAhaW1hZ2UuZ2V0KGNlbnRlckosIGkpICYmIHN0YXRlQ291bnRbM10gPCBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFszXSsrOwoJICAgICAgICAgICAgaSsrOwoJICAgICAgICB9CgkgICAgICAgIGlmIChpID09PSBtYXhJIHx8IHN0YXRlQ291bnRbM10gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGkgPCBtYXhJICYmIGltYWdlLmdldChjZW50ZXJKLCBpKSAmJiBzdGF0ZUNvdW50WzRdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF0rKzsKCSAgICAgICAgICAgIGkrKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoc3RhdGVDb3VudFs0XSA+PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB3ZSBmb3VuZCBhIGZpbmRlci1wYXR0ZXJuLWxpa2Ugc2VjdGlvbiwgYnV0IGl0cyBzaXplIGlzIG1vcmUgdGhhbiA0MCUgZGlmZmVyZW50IHRoYW4KCSAgICAgICAgLy8gdGhlIG9yaWdpbmFsLCBhc3N1bWUgaXQncyBhIGZhbHNlIHBvc2l0aXZlCgkgICAgICAgIHZhciBzdGF0ZUNvdW50VG90YWwgPSBzdGF0ZUNvdW50WzBdICsgc3RhdGVDb3VudFsxXSArIHN0YXRlQ291bnRbMl0gKyBzdGF0ZUNvdW50WzNdICsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbNF07CgkgICAgICAgIGlmICg1ICogTWF0aC5hYnMoc3RhdGVDb3VudFRvdGFsIC0gb3JpZ2luYWxTdGF0ZUNvdW50VG90YWwpID49IDIgKiBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBpKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkxpa2Uge0BsaW5rICNjcm9zc0NoZWNrVmVydGljYWwoaW50LCBpbnQsIGludCwgaW50KX0sIGFuZCBpbiBmYWN0IGlzIGJhc2ljYWxseSBpZGVudGljYWwsCgkgICAgICogZXhjZXB0IGl0IHJlYWRzIGhvcml6b250YWxseSBpbnN0ZWFkIG9mIHZlcnRpY2FsbHkuIFRoaXMgaXMgdXNlZCB0byBjcm9zcy1jcm9zcwoJICAgICAqIGNoZWNrIGEgdmVydGljYWwgY3Jvc3MgY2hlY2sgYW5kIGxvY2F0ZSB0aGUgcmVhbCBjZW50ZXIgb2YgdGhlIGFsaWdubWVudCBwYXR0ZXJuLjwvcD4KCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5jcm9zc0NoZWNrSG9yaXpvbnRhbCA9IGZ1bmN0aW9uIChzdGFydEogLyppbnQqLywgY2VudGVySSAvKmludCovLCBtYXhDb3VudCAvKmludCovLCBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCAvKmludCovKSB7CgkgICAgICAgIHZhciBpbWFnZSA9IHRoaXMuaW1hZ2U7CgkgICAgICAgIHZhciBtYXhKID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHN0YXRlQ291bnQgPSB0aGlzLmdldENyb3NzQ2hlY2tTdGF0ZUNvdW50KCk7CgkgICAgICAgIHZhciBqID0gc3RhcnRKOwoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmIGltYWdlLmdldChqLCBjZW50ZXJJKSkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsyXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA+PSAwICYmICFpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFsxXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFsxXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChqIDwgMCB8fCBzdGF0ZUNvdW50WzFdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgd2hpbGUgKGogPj0gMCAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFswXSA8PSBtYXhDb3VudCkgewoJICAgICAgICAgICAgc3RhdGVDb3VudFswXSsrOwoJICAgICAgICAgICAgai0tOwoJICAgICAgICB9CgkgICAgICAgIGlmIChzdGF0ZUNvdW50WzBdID4gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgaiA9IHN0YXJ0SiArIDE7CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbMl0rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SikgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICB3aGlsZSAoaiA8IG1heEogJiYgIWltYWdlLmdldChqLCBjZW50ZXJJKSAmJiBzdGF0ZUNvdW50WzNdIDwgbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHN0YXRlQ291bnRbM10rKzsKCSAgICAgICAgICAgIGorKzsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaiA9PT0gbWF4SiB8fCBzdGF0ZUNvdW50WzNdID49IG1heENvdW50KSB7CgkgICAgICAgICAgICByZXR1cm4gTmFOOwoJICAgICAgICB9CgkgICAgICAgIHdoaWxlIChqIDwgbWF4SiAmJiBpbWFnZS5nZXQoaiwgY2VudGVySSkgJiYgc3RhdGVDb3VudFs0XSA8IG1heENvdW50KSB7CgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdKys7CgkgICAgICAgICAgICBqKys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHN0YXRlQ291bnRbNF0gPj0gbWF4Q291bnQpIHsKCSAgICAgICAgICAgIHJldHVybiBOYU47CgkgICAgICAgIH0KCSAgICAgICAgLy8gSWYgd2UgZm91bmQgYSBmaW5kZXItcGF0dGVybi1saWtlIHNlY3Rpb24sIGJ1dCBpdHMgc2l6ZSBpcyBzaWduaWZpY2FudGx5IGRpZmZlcmVudCB0aGFuCgkgICAgICAgIC8vIHRoZSBvcmlnaW5hbCwgYXNzdW1lIGl0J3MgYSBmYWxzZSBwb3NpdGl2ZQoJICAgICAgICB2YXIgc3RhdGVDb3VudFRvdGFsID0gc3RhdGVDb3VudFswXSArIHN0YXRlQ291bnRbMV0gKyBzdGF0ZUNvdW50WzJdICsgc3RhdGVDb3VudFszXSArCgkgICAgICAgICAgICBzdGF0ZUNvdW50WzRdOwoJICAgICAgICBpZiAoNSAqIE1hdGguYWJzKHN0YXRlQ291bnRUb3RhbCAtIG9yaWdpbmFsU3RhdGVDb3VudFRvdGFsKSA+PSBvcmlnaW5hbFN0YXRlQ291bnRUb3RhbCkgewoJICAgICAgICAgICAgcmV0dXJuIE5hTjsKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gRmluZGVyUGF0dGVybkZpbmRlci5mb3VuZFBhdHRlcm5Dcm9zcyhzdGF0ZUNvdW50KSA/IEZpbmRlclBhdHRlcm5GaW5kZXIuY2VudGVyRnJvbUVuZChzdGF0ZUNvdW50LCBqKSA6IE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgaXMgY2FsbGVkIHdoZW4gYSBob3Jpem9udGFsIHNjYW4gZmluZHMgYSBwb3NzaWJsZSBhbGlnbm1lbnQgcGF0dGVybi4gSXQgd2lsbAoJICAgICAqIGNyb3NzIGNoZWNrIHdpdGggYSB2ZXJ0aWNhbCBzY2FuLCBhbmQgaWYgc3VjY2Vzc2Z1bCwgd2lsbCwgYWgsIGNyb3NzLWNyb3NzLWNoZWNrCgkgICAgICogd2l0aCBhbm90aGVyIGhvcml6b250YWwgc2Nhbi4gVGhpcyBpcyBuZWVkZWQgcHJpbWFyaWx5IHRvIGxvY2F0ZSB0aGUgcmVhbCBob3Jpem9udGFsCgkgICAgICogY2VudGVyIG9mIHRoZSBwYXR0ZXJuIGluIGNhc2VzIG9mIGV4dHJlbWUgc2tldy4KCSAgICAgKiBBbmQgdGhlbiB3ZSBjcm9zcy1jcm9zcy1jcm9zcyBjaGVjayB3aXRoIGFub3RoZXIgZGlhZ29uYWwgc2Nhbi48L3A+CgkgICAgICoKCSAgICAgKiA8cD5JZiB0aGF0IHN1Y2NlZWRzIHRoZSBmaW5kZXIgcGF0dGVybiBsb2NhdGlvbiBpcyBhZGRlZCB0byBhIGxpc3QgdGhhdCB0cmFja3MKCSAgICAgKiB0aGUgbnVtYmVyIG9mIHRpbWVzIGVhY2ggbG9jYXRpb24gaGFzIGJlZW4gbmVhcmx5LW1hdGNoZWQgYXMgYSBmaW5kZXIgcGF0dGVybi4KCSAgICAgKiBFYWNoIGFkZGl0aW9uYWwgZmluZCBpcyBtb3JlIGV2aWRlbmNlIHRoYXQgdGhlIGxvY2F0aW9uIGlzIGluIGZhY3QgYSBmaW5kZXIKCSAgICAgKiBwYXR0ZXJuIGNlbnRlcgoJICAgICAqCgkgICAgICogQHBhcmFtIHN0YXRlQ291bnQgcmVhZGluZyBzdGF0ZSBtb2R1bGUgY291bnRzIGZyb20gaG9yaXpvbnRhbCBzY2FuCgkgICAgICogQHBhcmFtIGkgcm93IHdoZXJlIGZpbmRlciBwYXR0ZXJuIG1heSBiZSBmb3VuZAoJICAgICAqIEBwYXJhbSBqIGVuZCBvZiBwb3NzaWJsZSBmaW5kZXIgcGF0dGVybiBpbiByb3cKCSAgICAgKiBAcGFyYW0gcHVyZUJhcmNvZGUgdHJ1ZSBpZiBpbiAicHVyZSBiYXJjb2RlIiBtb2RlCgkgICAgICogQHJldHVybiB0cnVlIGlmIGEgZmluZGVyIHBhdHRlcm4gY2FuZGlkYXRlIHdhcyBmb3VuZCB0aGlzIHRpbWUKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYW5kbGVQb3NzaWJsZUNlbnRlciA9IGZ1bmN0aW9uIChzdGF0ZUNvdW50LCBpIC8qaW50Ki8sIGogLyppbnQqLywgcHVyZUJhcmNvZGUpIHsKCSAgICAgICAgdmFyIHN0YXRlQ291bnRUb3RhbCA9IHN0YXRlQ291bnRbMF0gKyBzdGF0ZUNvdW50WzFdICsgc3RhdGVDb3VudFsyXSArIHN0YXRlQ291bnRbM10gKwoJICAgICAgICAgICAgc3RhdGVDb3VudFs0XTsKCSAgICAgICAgdmFyIGNlbnRlckogPSBGaW5kZXJQYXR0ZXJuRmluZGVyLmNlbnRlckZyb21FbmQoc3RhdGVDb3VudCwgaik7CgkgICAgICAgIHZhciBjZW50ZXJJID0gdGhpcy5jcm9zc0NoZWNrVmVydGljYWwoaSwgLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCBzdGF0ZUNvdW50WzJdLCBzdGF0ZUNvdW50VG90YWwpOwoJICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckkpKSB7CgkgICAgICAgICAgICAvLyBSZS1jcm9zcyBjaGVjawoJICAgICAgICAgICAgY2VudGVySiA9IHRoaXMuY3Jvc3NDaGVja0hvcml6b250YWwoLyooaW50KSAqLyBNYXRoLmZsb29yKGNlbnRlckopLCAvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIHN0YXRlQ291bnRbMl0sIHN0YXRlQ291bnRUb3RhbCk7CgkgICAgICAgICAgICBpZiAoIWlzTmFOKGNlbnRlckopICYmCgkgICAgICAgICAgICAgICAgKCFwdXJlQmFyY29kZSB8fCB0aGlzLmNyb3NzQ2hlY2tEaWFnb25hbCgvKihpbnQpICovIE1hdGguZmxvb3IoY2VudGVySSksIC8qKGludCkgKi8gTWF0aC5mbG9vcihjZW50ZXJKKSwgc3RhdGVDb3VudFsyXSwgc3RhdGVDb3VudFRvdGFsKSkpIHsKCSAgICAgICAgICAgICAgICB2YXIgZXN0aW1hdGVkTW9kdWxlU2l6ZSA9IHN0YXRlQ291bnRUb3RhbCAvIDcuMDsKCSAgICAgICAgICAgICAgICB2YXIgZm91bmQgPSBmYWxzZTsKCSAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXJzID0gdGhpcy5wb3NzaWJsZUNlbnRlcnM7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGhfMSA9IHBvc3NpYmxlQ2VudGVycy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoXzE7IGluZGV4KyspIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IHBvc3NpYmxlQ2VudGVyc1tpbmRleF07CgkgICAgICAgICAgICAgICAgICAgIC8vIExvb2sgZm9yIGFib3V0IHRoZSBzYW1lIGNlbnRlciBhbmQgbW9kdWxlIHNpemU6CgkgICAgICAgICAgICAgICAgICAgIGlmIChjZW50ZXIuYWJvdXRFcXVhbHMoZXN0aW1hdGVkTW9kdWxlU2l6ZSwgY2VudGVySSwgY2VudGVySikpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVyc1tpbmRleF0gPSBjZW50ZXIuY29tYmluZUVzdGltYXRlKGNlbnRlckksIGNlbnRlckosIGVzdGltYXRlZE1vZHVsZVNpemUpOwoJICAgICAgICAgICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlOwoJICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgaWYgKCFmb3VuZCkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9pbnQgPSBuZXcgRmluZGVyUGF0dGVybl8xLmRlZmF1bHQoY2VudGVySiwgY2VudGVySSwgZXN0aW1hdGVkTW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5wdXNoKHBvaW50KTsKCSAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayAhPT0gbnVsbCAmJiB0aGlzLnJlc3VsdFBvaW50Q2FsbGJhY2sgIT09IHVuZGVmaW5lZCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrLmZvdW5kUG9zc2libGVSZXN1bHRQb2ludChwb2ludCk7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogQHJldHVybiBudW1iZXIgb2Ygcm93cyB3ZSBjb3VsZCBzYWZlbHkgc2tpcCBkdXJpbmcgc2Nhbm5pbmcsIGJhc2VkIG9uIHRoZSBmaXJzdAoJICAgICAqICAgICAgICAgdHdvIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBsb2NhdGVkLiBJbiBzb21lIGNhc2VzIHRoZWlyIHBvc2l0aW9uIHdpbGwKCSAgICAgKiAgICAgICAgIGFsbG93IHVzIHRvIGluZmVyIHRoYXQgdGhlIHRoaXJkIHBhdHRlcm4gbXVzdCBsaWUgYmVsb3cgYSBjZXJ0YWluIHBvaW50IGZhcnRoZXIKCSAgICAgKiAgICAgICAgIGRvd24gaW4gdGhlIGltYWdlLgoJICAgICAqLwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIucHJvdG90eXBlLmZpbmRSb3dTa2lwID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8xLCBfYTsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKG1heCA8PSAxKSB7CgkgICAgICAgICAgICByZXR1cm4gMDsKCSAgICAgICAgfQoJICAgICAgICB2YXIgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBudWxsOwoJICAgICAgICB0cnkgewoJICAgICAgICAgICAgZm9yICh2YXIgX2IgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9jID0gX2IubmV4dCgpOyAhX2MuZG9uZTsgX2MgPSBfYi5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICB2YXIgY2VudGVyID0gX2MudmFsdWU7CgkgICAgICAgICAgICAgICAgaWYgKGNlbnRlci5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RDb25maXJtZWRDZW50ZXIgPT0gbnVsbCkgewoJICAgICAgICAgICAgICAgICAgICAgICAgZmlyc3RDb25maXJtZWRDZW50ZXIgPSBjZW50ZXI7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgICAgICAvLyBXZSBoYXZlIHR3byBjb25maXJtZWQgY2VudGVycwoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gSG93IGZhciBkb3duIGNhbiB3ZSBza2lwIGJlZm9yZSByZXN1bWluZyBsb29raW5nIGZvciB0aGUgbmV4dAoJICAgICAgICAgICAgICAgICAgICAgICAgLy8gcGF0dGVybj8gSW4gdGhlIHdvcnN0IGNhc2UsIG9ubHkgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiB0aGUKCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIGRpZmZlcmVuY2UgaW4gdGhlIHggLyB5IGNvb3JkaW5hdGVzIG9mIHRoZSB0d28gY2VudGVycy4KCSAgICAgICAgICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgdGhlIGNhc2Ugd2hlcmUgeW91IGZpbmQgdG9wIGxlZnQgbGFzdC4KCSAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuaGFzU2tpcHBlZCA9IHRydWU7CgkgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLyooaW50KSAqLyBNYXRoLmZsb29yKChNYXRoLmFicyhmaXJzdENvbmZpcm1lZENlbnRlci5nZXRYKCkgLSBjZW50ZXIuZ2V0WCgpKSAtCgkgICAgICAgICAgICAgICAgICAgICAgICAgICAgTWF0aC5hYnMoZmlyc3RDb25maXJtZWRDZW50ZXIuZ2V0WSgpIC0gY2VudGVyLmdldFkoKSkpIC8gMik7CgkgICAgICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgY2F0Y2ggKGVfMV8xKSB7IGVfMSA9IHsgZXJyb3I6IGVfMV8xIH07IH0KCSAgICAgICAgZmluYWxseSB7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGlmIChfYyAmJiAhX2MuZG9uZSAmJiAoX2EgPSBfYi5yZXR1cm4pKSBfYS5jYWxsKF9iKTsKCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGZpbmFsbHkgeyBpZiAoZV8xKSB0aHJvdyBlXzEuZXJyb3I7IH0KCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIEByZXR1cm4gdHJ1ZSBpZmYgd2UgaGF2ZSBmb3VuZCBhdCBsZWFzdCAzIGZpbmRlciBwYXR0ZXJucyB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZAoJICAgICAqICAgICAgICAgYXQgbGVhc3Qge0BsaW5rICNDRU5URVJfUVVPUlVNfSB0aW1lcyBlYWNoLCBhbmQsIHRoZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgb2YgdGhlCgkgICAgICogICAgICAgICBjYW5kaWRhdGVzIGlzICJwcmV0dHkgc2ltaWxhciIKCSAgICAgKi8KCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLnByb3RvdHlwZS5oYXZlTXVsdGlwbHlDb25maXJtZWRDZW50ZXJzID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV8yLCBfYSwgZV8zLCBfYjsKCSAgICAgICAgdmFyIGNvbmZpcm1lZENvdW50ID0gMDsKCSAgICAgICAgdmFyIHRvdGFsTW9kdWxlU2l6ZSA9IDAuMDsKCSAgICAgICAgdmFyIG1heCA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9jID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZCA9IF9jLm5leHQoKTsgIV9kLmRvbmU7IF9kID0gX2MubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZC52YWx1ZTsKCSAgICAgICAgICAgICAgICBpZiAocGF0dGVybi5nZXRDb3VudCgpID49IEZpbmRlclBhdHRlcm5GaW5kZXIuQ0VOVEVSX1FVT1JVTSkgewoJICAgICAgICAgICAgICAgICAgICBjb25maXJtZWRDb3VudCsrOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcGF0dGVybi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzJfMSkgeyBlXzIgPSB7IGVycm9yOiBlXzJfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2QgJiYgIV9kLmRvbmUgJiYgKF9hID0gX2MucmV0dXJuKSkgX2EuY2FsbChfYyk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMikgdGhyb3cgZV8yLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGNvbmZpcm1lZENvdW50IDwgMykgewoJICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwoJICAgICAgICB9CgkgICAgICAgIC8vIE9LLCB3ZSBoYXZlIGF0IGxlYXN0IDMgY29uZmlybWVkIGNlbnRlcnMsIGJ1dCwgaXQncyBwb3NzaWJsZSB0aGF0IG9uZSBpcyBhICJmYWxzZSBwb3NpdGl2ZSIKCSAgICAgICAgLy8gYW5kIHRoYXQgd2UgbmVlZCB0byBrZWVwIGxvb2tpbmcuIFdlIGRldGVjdCB0aGlzIGJ5IGFza2luZyBpZiB0aGUgZXN0aW1hdGVkIG1vZHVsZSBzaXplcwoJICAgICAgICAvLyB2YXJ5IHRvbyBtdWNoLiBXZSBhcmJpdHJhcmlseSBzYXkgdGhhdCB3aGVuIHRoZSB0b3RhbCBkZXZpYXRpb24gZnJvbSBhdmVyYWdlIGV4Y2VlZHMKCSAgICAgICAgLy8gNSUgb2YgdGhlIHRvdGFsIG1vZHVsZSBzaXplIGVzdGltYXRlcywgaXQncyB0b28gbXVjaC4KCSAgICAgICAgdmFyIGF2ZXJhZ2UgPSB0b3RhbE1vZHVsZVNpemUgLyBtYXg7CgkgICAgICAgIHZhciB0b3RhbERldmlhdGlvbiA9IDAuMDsKCSAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgIGZvciAodmFyIF9lID0gX192YWx1ZXModGhpcy5wb3NzaWJsZUNlbnRlcnMpLCBfZiA9IF9lLm5leHQoKTsgIV9mLmRvbmU7IF9mID0gX2UubmV4dCgpKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBfZi52YWx1ZTsKCSAgICAgICAgICAgICAgICB0b3RhbERldmlhdGlvbiArPSBNYXRoLmFicyhwYXR0ZXJuLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGNhdGNoIChlXzNfMSkgeyBlXzMgPSB7IGVycm9yOiBlXzNfMSB9OyB9CgkgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgdHJ5IHsKCSAgICAgICAgICAgICAgICBpZiAoX2YgJiYgIV9mLmRvbmUgJiYgKF9iID0gX2UucmV0dXJuKSkgX2IuY2FsbChfZSk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfMykgdGhyb3cgZV8zLmVycm9yOyB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHRvdGFsRGV2aWF0aW9uIDw9IDAuMDUgKiB0b3RhbE1vZHVsZVNpemU7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBAcmV0dXJuIHRoZSAzIGJlc3Qge0BsaW5rIEZpbmRlclBhdHRlcm59cyBmcm9tIG91ciBsaXN0IG9mIGNhbmRpZGF0ZXMuIFRoZSAiYmVzdCIgYXJlCgkgICAgICogICAgICAgICB0aG9zZSB0aGF0IGhhdmUgYmVlbiBkZXRlY3RlZCBhdCBsZWFzdCB7QGxpbmsgI0NFTlRFUl9RVU9SVU19IHRpbWVzLCBhbmQgd2hvc2UgbW9kdWxlCgkgICAgICogICAgICAgICBzaXplIGRpZmZlcnMgZnJvbSB0aGUgYXZlcmFnZSBhbW9uZyB0aG9zZSBwYXR0ZXJucyB0aGUgbGVhc3QKCSAgICAgKiBAdGhyb3dzIE5vdEZvdW5kRXhjZXB0aW9uIGlmIDMgc3VjaCBmaW5kZXIgcGF0dGVybnMgZG8gbm90IGV4aXN0CgkgICAgICovCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5wcm90b3R5cGUuc2VsZWN0QmVzdFBhdHRlcm5zID0gZnVuY3Rpb24gKCkgewoJICAgICAgICB2YXIgZV80LCBfYSwgZV81LCBfYjsKCSAgICAgICAgdmFyIHN0YXJ0U2l6ZSA9IHRoaXMucG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgaWYgKHN0YXJ0U2l6ZSA8IDMpIHsKCSAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgZW5vdWdoIGZpbmRlciBwYXR0ZXJucwoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMi5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIHBvc3NpYmxlQ2VudGVycyA9IHRoaXMucG9zc2libGVDZW50ZXJzOwoJICAgICAgICB2YXIgYXZlcmFnZTsKCSAgICAgICAgLy8gRmlsdGVyIG91dGxpZXIgcG9zc2liaWxpdGllcyB3aG9zZSBtb2R1bGUgc2l6ZSBpcyB0b28gZGlmZmVyZW50CgkgICAgICAgIGlmIChzdGFydFNpemUgPiAzKSB7CgkgICAgICAgICAgICAvLyBCdXQgd2UgY2FuIG9ubHkgYWZmb3JkIHRvIGRvIHNvIGlmIHdlIGhhdmUgYXQgbGVhc3QgNCBwb3NzaWJpbGl0aWVzIHRvIGNob29zZSBmcm9tCgkgICAgICAgICAgICB2YXIgdG90YWxNb2R1bGVTaXplID0gMC4wOwoJICAgICAgICAgICAgdmFyIHNxdWFyZSA9IDAuMDsKCSAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgZm9yICh2YXIgX2MgPSBfX3ZhbHVlcyh0aGlzLnBvc3NpYmxlQ2VudGVycyksIF9kID0gX2MubmV4dCgpOyAhX2QuZG9uZTsgX2QgPSBfYy5uZXh0KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGNlbnRlciA9IF9kLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB2YXIgc2l6ZSA9IGNlbnRlci5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCk7CgkgICAgICAgICAgICAgICAgICAgIHRvdGFsTW9kdWxlU2l6ZSArPSBzaXplOwoJICAgICAgICAgICAgICAgICAgICBzcXVhcmUgKz0gc2l6ZSAqIHNpemU7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgY2F0Y2ggKGVfNF8xKSB7IGVfNCA9IHsgZXJyb3I6IGVfNF8xIH07IH0KCSAgICAgICAgICAgIGZpbmFsbHkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGlmIChfZCAmJiAhX2QuZG9uZSAmJiAoX2EgPSBfYy5yZXR1cm4pKSBfYS5jYWxsKF9jKTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZmluYWxseSB7IGlmIChlXzQpIHRocm93IGVfNC5lcnJvcjsgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgYXZlcmFnZSA9IHRvdGFsTW9kdWxlU2l6ZSAvIHN0YXJ0U2l6ZTsKCSAgICAgICAgICAgIHZhciBzdGREZXYgPSBNYXRoLnNxcnQoc3F1YXJlIC8gc3RhcnRTaXplIC0gYXZlcmFnZSAqIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzLnNvcnQoCgkgICAgICAgICAgICAvKioKCSAgICAgICAgICAgICAqIDxwPk9yZGVycyBieSBmdXJ0aGVzdCBmcm9tIGF2ZXJhZ2U8L3A+CgkgICAgICAgICAgICAgKi8KCSAgICAgICAgICAgIC8vIEZ1cnRoZXN0RnJvbUF2ZXJhZ2VDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICB2YXIgZEEgPSBNYXRoLmFicyhjZW50ZXIyLmdldEVzdGltYXRlZE1vZHVsZVNpemUoKSAtIGF2ZXJhZ2UpOwoJICAgICAgICAgICAgICAgIHZhciBkQiA9IE1hdGguYWJzKGNlbnRlcjEuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSk7CgkgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAtMSA6IGRBID4gZEIgPyAxIDogMDsKCSAgICAgICAgICAgIH0pOwoJICAgICAgICAgICAgdmFyIGxpbWl0ID0gTWF0aC5tYXgoMC4yICogYXZlcmFnZSwgc3RkRGV2KTsKCSAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgcG9zc2libGVDZW50ZXJzLmxlbmd0aCAmJiBwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMzsgaSsrKSB7CgkgICAgICAgICAgICAgICAgdmFyIHBhdHRlcm4gPSBwb3NzaWJsZUNlbnRlcnNbaV07CgkgICAgICAgICAgICAgICAgaWYgKE1hdGguYWJzKHBhdHRlcm4uZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpIC0gYXZlcmFnZSkgPiBsaW1pdCkgewoJICAgICAgICAgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKGksIDEpOwoJICAgICAgICAgICAgICAgICAgICBpLS07CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICB9CgkgICAgICAgIGlmIChwb3NzaWJsZUNlbnRlcnMubGVuZ3RoID4gMykgewoJICAgICAgICAgICAgLy8gVGhyb3cgYXdheSBhbGwgYnV0IHRob3NlIGZpcnN0IHNpemUgY2FuZGlkYXRlIHBvaW50cyB3ZSBmb3VuZC4KCSAgICAgICAgICAgIHZhciB0b3RhbE1vZHVsZVNpemUgPSAwLjA7CgkgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgIGZvciAodmFyIHBvc3NpYmxlQ2VudGVyc18xID0gX192YWx1ZXMocG9zc2libGVDZW50ZXJzKSwgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKTsgIXBvc3NpYmxlQ2VudGVyc18xXzEuZG9uZTsgcG9zc2libGVDZW50ZXJzXzFfMSA9IHBvc3NpYmxlQ2VudGVyc18xLm5leHQoKSkgewoJICAgICAgICAgICAgICAgICAgICB2YXIgcG9zc2libGVDZW50ZXIgPSBwb3NzaWJsZUNlbnRlcnNfMV8xLnZhbHVlOwoJICAgICAgICAgICAgICAgICAgICB0b3RhbE1vZHVsZVNpemUgKz0gcG9zc2libGVDZW50ZXIuZ2V0RXN0aW1hdGVkTW9kdWxlU2l6ZSgpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgIH0KCSAgICAgICAgICAgIGNhdGNoIChlXzVfMSkgeyBlXzUgPSB7IGVycm9yOiBlXzVfMSB9OyB9CgkgICAgICAgICAgICBmaW5hbGx5IHsKCSAgICAgICAgICAgICAgICB0cnkgewoJICAgICAgICAgICAgICAgICAgICBpZiAocG9zc2libGVDZW50ZXJzXzFfMSAmJiAhcG9zc2libGVDZW50ZXJzXzFfMS5kb25lICYmIChfYiA9IHBvc3NpYmxlQ2VudGVyc18xLnJldHVybikpIF9iLmNhbGwocG9zc2libGVDZW50ZXJzXzEpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBmaW5hbGx5IHsgaWYgKGVfNSkgdGhyb3cgZV81LmVycm9yOyB9CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBhdmVyYWdlID0gdG90YWxNb2R1bGVTaXplIC8gcG9zc2libGVDZW50ZXJzLmxlbmd0aDsKCSAgICAgICAgICAgIHBvc3NpYmxlQ2VudGVycy5zb3J0KAoJICAgICAgICAgICAgLyoqCgkgICAgICAgICAgICAgKiA8cD5PcmRlcnMgYnkge0BsaW5rIEZpbmRlclBhdHRlcm4jZ2V0Q291bnQoKX0sIGRlc2NlbmRpbmcuPC9wPgoJICAgICAgICAgICAgICovCgkgICAgICAgICAgICAvLyBDZW50ZXJDb21wYXJhdG9yIGltcGxlbWVudHMgQ29tcGFyYXRvcjxGaW5kZXJQYXR0ZXJuPgoJICAgICAgICAgICAgZnVuY3Rpb24gKGNlbnRlcjEsIGNlbnRlcjIpIHsKCSAgICAgICAgICAgICAgICBpZiAoY2VudGVyMi5nZXRDb3VudCgpID09PSBjZW50ZXIxLmdldENvdW50KCkpIHsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRBID0gTWF0aC5hYnMoY2VudGVyMi5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgdmFyIGRCID0gTWF0aC5hYnMoY2VudGVyMS5nZXRFc3RpbWF0ZWRNb2R1bGVTaXplKCkgLSBhdmVyYWdlKTsKCSAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGRBIDwgZEIgPyAxIDogZEEgPiBkQiA/IC0xIDogMDsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAgICAgICAgIHJldHVybiBjZW50ZXIyLmdldENvdW50KCkgLSBjZW50ZXIxLmdldENvdW50KCk7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfSk7CgkgICAgICAgICAgICBwb3NzaWJsZUNlbnRlcnMuc3BsaWNlKDMpOyAvLyB0aGlzIGlzIG5vdCByZWFseSBuZWNlc3NhcnkgYXMgd2Ugb25seSByZXR1cm4gZmlyc3QgMyBhbnl3YXkKCSAgICAgICAgfQoJICAgICAgICByZXR1cm4gWwoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzBdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzFdLAoJICAgICAgICAgICAgcG9zc2libGVDZW50ZXJzWzJdCgkgICAgICAgIF07CgkgICAgfTsKCSAgICBGaW5kZXJQYXR0ZXJuRmluZGVyLkNFTlRFUl9RVU9SVU0gPSAyOwoJICAgIEZpbmRlclBhdHRlcm5GaW5kZXIuTUlOX1NLSVAgPSAzOyAvLyAxIHBpeGVsL21vZHVsZSB0aW1lcyAzIG1vZHVsZXMvY2VudGVyCgkgICAgRmluZGVyUGF0dGVybkZpbmRlci5NQVhfTU9EVUxFUyA9IDU3OyAvLyBzdXBwb3J0IHVwIHRvIHZlcnNpb24gMTAgZm9yIG1vYmlsZSBjbGllbnRzCgkgICAgcmV0dXJuIEZpbmRlclBhdHRlcm5GaW5kZXI7Cgl9KCkpOwoJRmluZGVyUGF0dGVybkZpbmRlciQxLmRlZmF1bHQgPSBGaW5kZXJQYXR0ZXJuRmluZGVyOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoRGV0ZWN0b3IkMSwgIl9fZXNNb2R1bGUiLCB7IHZhbHVlOiB0cnVlIH0pOwoJdmFyIE1hdGhVdGlsc18xID0gTWF0aFV0aWxzJDE7Cgl2YXIgRGV0ZWN0b3JSZXN1bHRfMSA9IERldGVjdG9yUmVzdWx0JDE7CgkvLyBpbXBvcnQgR3JpZFNhbXBsZXIgZnJvbSAnLi4vLi4vY29tbW9uL0dyaWRTYW1wbGVyJzsKCXZhciBHcmlkU2FtcGxlckluc3RhbmNlXzEgPSBHcmlkU2FtcGxlckluc3RhbmNlJDE7Cgl2YXIgUGVyc3BlY3RpdmVUcmFuc2Zvcm1fMSA9IFBlcnNwZWN0aXZlVHJhbnNmb3JtJDE7Cgl2YXIgRGVjb2RlSGludFR5cGVfMSQxID0gRGVjb2RlSGludFR5cGUkMTsKCXZhciBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdFBvaW50XzEgPSBSZXN1bHRQb2ludCQxOwoJdmFyIFZlcnNpb25fMSA9IFZlcnNpb24kMTsKCXZhciBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyXzEgPSBBbGlnbm1lbnRQYXR0ZXJuRmluZGVyJDE7Cgl2YXIgRmluZGVyUGF0dGVybkZpbmRlcl8xID0gRmluZGVyUGF0dGVybkZpbmRlciQxOwoJLyppbXBvcnQgamF2YS51dGlsLk1hcDsqLwoJLyoqCgkgKiA8cD5FbmNhcHN1bGF0ZXMgbG9naWMgdGhhdCBjYW4gZGV0ZWN0IGEgUVIgQ29kZSBpbiBhbiBpbWFnZSwgZXZlbiBpZiB0aGUgUVIgQ29kZQoJICogaXMgcm90YXRlZCBvciBza2V3ZWQsIG9yIHBhcnRpYWxseSBvYnNjdXJlZC48L3A+CgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIERldGVjdG9yID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKCkgewoJICAgIGZ1bmN0aW9uIERldGVjdG9yKGltYWdlKSB7CgkgICAgICAgIHRoaXMuaW1hZ2UgPSBpbWFnZTsKCSAgICB9CgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLmdldEltYWdlID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5pbWFnZTsKCSAgICB9OwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5nZXRSZXN1bHRQb2ludENhbGxiYWNrID0gZnVuY3Rpb24gKCkgewoJICAgICAgICByZXR1cm4gdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIC8vIHB1YmxpYyBkZXRlY3QoKTogRGV0ZWN0b3JSZXN1bHQgLyp0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiovIHsKCSAgICAvLyAgIHJldHVybiBkZXRlY3QobnVsbCkKCSAgICAvLyB9CgkgICAgLyoqCgkgICAgICogPHA+RGV0ZWN0cyBhIFFSIENvZGUgaW4gYW4gaW1hZ2UuPC9wPgoJICAgICAqCgkgICAgICogQHBhcmFtIGhpbnRzIG9wdGlvbmFsIGhpbnRzIHRvIGRldGVjdG9yCgkgICAgICogQHJldHVybiB7QGxpbmsgRGV0ZWN0b3JSZXN1bHR9IGVuY2Fwc3VsYXRpbmcgcmVzdWx0cyBvZiBkZXRlY3RpbmcgYSBRUiBDb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBRUiBDb2RlIGNhbm5vdCBiZSBmb3VuZAoJICAgICAqIEB0aHJvd3MgRm9ybWF0RXhjZXB0aW9uIGlmIGEgUVIgQ29kZSBjYW5ub3QgYmUgZGVjb2RlZAoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5kZXRlY3QgPSBmdW5jdGlvbiAoaGludHMpIHsKCSAgICAgICAgdGhpcy5yZXN1bHRQb2ludENhbGxiYWNrID0gKGhpbnRzID09PSBudWxsIHx8IGhpbnRzID09PSB1bmRlZmluZWQpID8gbnVsbCA6CgkgICAgICAgICAgICAvKihSZXN1bHRQb2ludENhbGxiYWNrKSAqLyBoaW50cy5nZXQoRGVjb2RlSGludFR5cGVfMSQxLmRlZmF1bHQuTkVFRF9SRVNVTFRfUE9JTlRfQ0FMTEJBQ0spOwoJICAgICAgICB2YXIgZmluZGVyID0gbmV3IEZpbmRlclBhdHRlcm5GaW5kZXJfMS5kZWZhdWx0KHRoaXMuaW1hZ2UsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHZhciBpbmZvID0gZmluZGVyLmZpbmQoaGludHMpOwoJICAgICAgICByZXR1cm4gdGhpcy5wcm9jZXNzRmluZGVyUGF0dGVybkluZm8oaW5mbyk7CgkgICAgfTsKCSAgICBEZXRlY3Rvci5wcm90b3R5cGUucHJvY2Vzc0ZpbmRlclBhdHRlcm5JbmZvID0gZnVuY3Rpb24gKGluZm8pIHsKCSAgICAgICAgdmFyIHRvcExlZnQgPSBpbmZvLmdldFRvcExlZnQoKTsKCSAgICAgICAgdmFyIHRvcFJpZ2h0ID0gaW5mby5nZXRUb3BSaWdodCgpOwoJICAgICAgICB2YXIgYm90dG9tTGVmdCA9IGluZm8uZ2V0Qm90dG9tTGVmdCgpOwoJICAgICAgICB2YXIgbW9kdWxlU2l6ZSA9IHRoaXMuY2FsY3VsYXRlTW9kdWxlU2l6ZSh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCk7CgkgICAgICAgIGlmIChtb2R1bGVTaXplIDwgMS4wKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ05vIHBhdHRlcm4gZm91bmQgaW4gcHJvY2Nlc3MgZmluZGVyLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBkaW1lbnNpb24gPSBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHByb3Zpc2lvbmFsVmVyc2lvbiA9IFZlcnNpb25fMS5kZWZhdWx0LmdldFByb3Zpc2lvbmFsVmVyc2lvbkZvckRpbWVuc2lvbihkaW1lbnNpb24pOwoJICAgICAgICB2YXIgbW9kdWxlc0JldHdlZW5GUENlbnRlcnMgPSBwcm92aXNpb25hbFZlcnNpb24uZ2V0RGltZW5zaW9uRm9yVmVyc2lvbigpIC0gNzsKCSAgICAgICAgdmFyIGFsaWdubWVudFBhdHRlcm4gPSBudWxsOwoJICAgICAgICAvLyBBbnl0aGluZyBhYm92ZSB2ZXJzaW9uIDEgaGFzIGFuIGFsaWdubWVudCBwYXR0ZXJuCgkgICAgICAgIGlmIChwcm92aXNpb25hbFZlcnNpb24uZ2V0QWxpZ25tZW50UGF0dGVybkNlbnRlcnMoKS5sZW5ndGggPiAwKSB7CgkgICAgICAgICAgICAvLyBHdWVzcyB3aGVyZSBhICJib3R0b20gcmlnaHQiIGZpbmRlciBwYXR0ZXJuIHdvdWxkIGhhdmUgYmVlbgoJICAgICAgICAgICAgdmFyIGJvdHRvbVJpZ2h0WCA9IHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpICsgYm90dG9tTGVmdC5nZXRYKCk7CgkgICAgICAgICAgICB2YXIgYm90dG9tUmlnaHRZID0gdG9wUmlnaHQuZ2V0WSgpIC0gdG9wTGVmdC5nZXRZKCkgKyBib3R0b21MZWZ0LmdldFkoKTsKCSAgICAgICAgICAgIC8vIEVzdGltYXRlIHRoYXQgYWxpZ25tZW50IHBhdHRlcm4gaXMgY2xvc2VyIGJ5IDMgbW9kdWxlcwoJICAgICAgICAgICAgLy8gZnJvbSAiYm90dG9tIHJpZ2h0IiB0byBrbm93biB0b3AgbGVmdCBsb2NhdGlvbgoJICAgICAgICAgICAgdmFyIGNvcnJlY3Rpb25Ub1RvcExlZnQgPSAxLjAgLSAzLjAgLyBtb2R1bGVzQmV0d2VlbkZQQ2VudGVyczsKCSAgICAgICAgICAgIHZhciBlc3RBbGlnbm1lbnRYID0gLyooaW50KSAqLyBNYXRoLmZsb29yKHRvcExlZnQuZ2V0WCgpICsgY29ycmVjdGlvblRvVG9wTGVmdCAqIChib3R0b21SaWdodFggLSB0b3BMZWZ0LmdldFgoKSkpOwoJICAgICAgICAgICAgdmFyIGVzdEFsaWdubWVudFkgPSAvKihpbnQpICovIE1hdGguZmxvb3IodG9wTGVmdC5nZXRZKCkgKyBjb3JyZWN0aW9uVG9Ub3BMZWZ0ICogKGJvdHRvbVJpZ2h0WSAtIHRvcExlZnQuZ2V0WSgpKSk7CgkgICAgICAgICAgICAvLyBLaW5kIG9mIGFyYml0cmFyeSAtLSBleHBhbmQgc2VhcmNoIHJhZGl1cyBiZWZvcmUgZ2l2aW5nIHVwCgkgICAgICAgICAgICBmb3IgKHZhciBpID0gNDsgaSA8PSAxNjsgaSA8PD0gMSkgewoJICAgICAgICAgICAgICAgIHRyeSB7CgkgICAgICAgICAgICAgICAgICAgIGFsaWdubWVudFBhdHRlcm4gPSB0aGlzLmZpbmRBbGlnbm1lbnRJblJlZ2lvbihtb2R1bGVTaXplLCBlc3RBbGlnbm1lbnRYLCBlc3RBbGlnbm1lbnRZLCBpKTsKCSAgICAgICAgICAgICAgICAgICAgYnJlYWs7CgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgICAgIGNhdGNoIChyZSAvKk5vdEZvdW5kRXhjZXB0aW9uKi8pIHsKCSAgICAgICAgICAgICAgICAgICAgaWYgKCEocmUgaW5zdGFuY2VvZiBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCkpIHsKCSAgICAgICAgICAgICAgICAgICAgICAgIHRocm93IHJlOwoJICAgICAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgICAgIC8vIHRyeSBuZXh0IHJvdW5kCgkgICAgICAgICAgICAgICAgfQoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgLy8gSWYgd2UgZGlkbid0IGZpbmQgYWxpZ25tZW50IHBhdHRlcm4uLi4gd2VsbCB0cnkgYW55d2F5IHdpdGhvdXQgaXQKCSAgICAgICAgfQoJICAgICAgICB2YXIgdHJhbnNmb3JtID0gRGV0ZWN0b3IuY3JlYXRlVHJhbnNmb3JtKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBhbGlnbm1lbnRQYXR0ZXJuLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgYml0cyA9IERldGVjdG9yLnNhbXBsZUdyaWQodGhpcy5pbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24pOwoJICAgICAgICB2YXIgcG9pbnRzOwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiA9PT0gbnVsbCkgewoJICAgICAgICAgICAgcG9pbnRzID0gW2JvdHRvbUxlZnQsIHRvcExlZnQsIHRvcFJpZ2h0XTsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIHsKCSAgICAgICAgICAgIHBvaW50cyA9IFtib3R0b21MZWZ0LCB0b3BMZWZ0LCB0b3BSaWdodCwgYWxpZ25tZW50UGF0dGVybl07CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIG5ldyBEZXRlY3RvclJlc3VsdF8xLmRlZmF1bHQoYml0cywgcG9pbnRzKTsKCSAgICB9OwoJICAgIERldGVjdG9yLmNyZWF0ZVRyYW5zZm9ybSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCwgYWxpZ25tZW50UGF0dGVybiwgZGltZW5zaW9uIC8qaW50Ki8pIHsKCSAgICAgICAgdmFyIGRpbU1pbnVzVGhyZWUgPSBkaW1lbnNpb24gLSAzLjU7CgkgICAgICAgIHZhciBib3R0b21SaWdodFg7IC8qZmxvYXQqLwoJICAgICAgICB2YXIgYm90dG9tUmlnaHRZOyAvKmZsb2F0Ki8KCSAgICAgICAgdmFyIHNvdXJjZUJvdHRvbVJpZ2h0WDsgLypmbG9hdCovCgkgICAgICAgIHZhciBzb3VyY2VCb3R0b21SaWdodFk7IC8qZmxvYXQqLwoJICAgICAgICBpZiAoYWxpZ25tZW50UGF0dGVybiAhPT0gbnVsbCkgewoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gYWxpZ25tZW50UGF0dGVybi5nZXRYKCk7CgkgICAgICAgICAgICBib3R0b21SaWdodFkgPSBhbGlnbm1lbnRQYXR0ZXJuLmdldFkoKTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WCA9IGRpbU1pbnVzVGhyZWUgLSAzLjA7CgkgICAgICAgICAgICBzb3VyY2VCb3R0b21SaWdodFkgPSBzb3VyY2VCb3R0b21SaWdodFg7CgkgICAgICAgIH0KCSAgICAgICAgZWxzZSB7CgkgICAgICAgICAgICAvLyBEb24ndCBoYXZlIGFuIGFsaWdubWVudCBwYXR0ZXJuLCBqdXN0IG1ha2UgdXAgdGhlIGJvdHRvbS1yaWdodCBwb2ludAoJICAgICAgICAgICAgYm90dG9tUmlnaHRYID0gKHRvcFJpZ2h0LmdldFgoKSAtIHRvcExlZnQuZ2V0WCgpKSArIGJvdHRvbUxlZnQuZ2V0WCgpOwoJICAgICAgICAgICAgYm90dG9tUmlnaHRZID0gKHRvcFJpZ2h0LmdldFkoKSAtIHRvcExlZnQuZ2V0WSgpKSArIGJvdHRvbUxlZnQuZ2V0WSgpOwoJICAgICAgICAgICAgc291cmNlQm90dG9tUmlnaHRYID0gZGltTWludXNUaHJlZTsKCSAgICAgICAgICAgIHNvdXJjZUJvdHRvbVJpZ2h0WSA9IGRpbU1pbnVzVGhyZWU7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIFBlcnNwZWN0aXZlVHJhbnNmb3JtXzEuZGVmYXVsdC5xdWFkcmlsYXRlcmFsVG9RdWFkcmlsYXRlcmFsKDMuNSwgMy41LCBkaW1NaW51c1RocmVlLCAzLjUsIHNvdXJjZUJvdHRvbVJpZ2h0WCwgc291cmNlQm90dG9tUmlnaHRZLCAzLjUsIGRpbU1pbnVzVGhyZWUsIHRvcExlZnQuZ2V0WCgpLCB0b3BMZWZ0LmdldFkoKSwgdG9wUmlnaHQuZ2V0WCgpLCB0b3BSaWdodC5nZXRZKCksIGJvdHRvbVJpZ2h0WCwgYm90dG9tUmlnaHRZLCBib3R0b21MZWZ0LmdldFgoKSwgYm90dG9tTGVmdC5nZXRZKCkpOwoJICAgIH07CgkgICAgRGV0ZWN0b3Iuc2FtcGxlR3JpZCA9IGZ1bmN0aW9uIChpbWFnZSwgdHJhbnNmb3JtLCBkaW1lbnNpb24gLyppbnQqLykgewoJICAgICAgICB2YXIgc2FtcGxlciA9IEdyaWRTYW1wbGVySW5zdGFuY2VfMS5kZWZhdWx0LmdldEluc3RhbmNlKCk7CgkgICAgICAgIHJldHVybiBzYW1wbGVyLnNhbXBsZUdyaWRXaXRoVHJhbnNmb3JtKGltYWdlLCBkaW1lbnNpb24sIGRpbWVuc2lvbiwgdHJhbnNmb3JtKTsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkNvbXB1dGVzIHRoZSBkaW1lbnNpb24gKG51bWJlciBvZiBtb2R1bGVzIG9uIGEgc2l6ZSkgb2YgdGhlIFFSIENvZGUgYmFzZWQgb24gdGhlIHBvc2l0aW9uCgkgICAgICogb2YgdGhlIGZpbmRlciBwYXR0ZXJucyBhbmQgZXN0aW1hdGVkIG1vZHVsZSBzaXplLjwvcD4KCSAgICAgKi8KCSAgICBEZXRlY3Rvci5jb21wdXRlRGltZW5zaW9uID0gZnVuY3Rpb24gKHRvcExlZnQsIHRvcFJpZ2h0LCBib3R0b21MZWZ0LCBtb2R1bGVTaXplIC8qZmxvYXQqLykgewoJICAgICAgICB2YXIgdGx0ckNlbnRlcnNEaW1lbnNpb24gPSBNYXRoVXRpbHNfMS5kZWZhdWx0LnJvdW5kKFJlc3VsdFBvaW50XzEuZGVmYXVsdC5kaXN0YW5jZSh0b3BMZWZ0LCB0b3BSaWdodCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIHRsYmxDZW50ZXJzRGltZW5zaW9uID0gTWF0aFV0aWxzXzEuZGVmYXVsdC5yb3VuZChSZXN1bHRQb2ludF8xLmRlZmF1bHQuZGlzdGFuY2UodG9wTGVmdCwgYm90dG9tTGVmdCkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIGRpbWVuc2lvbiA9IE1hdGguZmxvb3IoKHRsdHJDZW50ZXJzRGltZW5zaW9uICsgdGxibENlbnRlcnNEaW1lbnNpb24pIC8gMikgKyA3OwoJICAgICAgICBzd2l0Y2ggKGRpbWVuc2lvbiAmIDB4MDMpIHsgLy8gbW9kIDQKCSAgICAgICAgICAgIGNhc2UgMDoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24rKzsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIC8vIDE/IGRvIG5vdGhpbmcKCSAgICAgICAgICAgIGNhc2UgMjoKCSAgICAgICAgICAgICAgICBkaW1lbnNpb24tLTsKCSAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgIGNhc2UgMzoKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMSQxLmRlZmF1bHQoJ0RpbWVuc2lvbnMgY291bGQgYmUgbm90IGZvdW5kLicpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiBkaW1lbnNpb247CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiA8cD5Db21wdXRlcyBhbiBhdmVyYWdlIGVzdGltYXRlZCBtb2R1bGUgc2l6ZSBiYXNlZCBvbiBlc3RpbWF0ZWQgZGVyaXZlZCBmcm9tIHRoZSBwb3NpdGlvbnMKCSAgICAgKiBvZiB0aGUgdGhyZWUgZmluZGVyIHBhdHRlcm5zLjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSB0b3BMZWZ0IGRldGVjdGVkIHRvcC1sZWZ0IGZpbmRlciBwYXR0ZXJuIGNlbnRlcgoJICAgICAqIEBwYXJhbSB0b3BSaWdodCBkZXRlY3RlZCB0b3AtcmlnaHQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHBhcmFtIGJvdHRvbUxlZnQgZGV0ZWN0ZWQgYm90dG9tLWxlZnQgZmluZGVyIHBhdHRlcm4gY2VudGVyCgkgICAgICogQHJldHVybiBlc3RpbWF0ZWQgbW9kdWxlIHNpemUKCSAgICAgKi8KCSAgICBEZXRlY3Rvci5wcm90b3R5cGUuY2FsY3VsYXRlTW9kdWxlU2l6ZSA9IGZ1bmN0aW9uICh0b3BMZWZ0LCB0b3BSaWdodCwgYm90dG9tTGVmdCkgewoJICAgICAgICAvLyBUYWtlIHRoZSBhdmVyYWdlCgkgICAgICAgIHJldHVybiAodGhpcy5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5KHRvcExlZnQsIHRvcFJpZ2h0KSArCgkgICAgICAgICAgICB0aGlzLmNhbGN1bGF0ZU1vZHVsZVNpemVPbmVXYXkodG9wTGVmdCwgYm90dG9tTGVmdCkpIC8gMi4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogPHA+RXN0aW1hdGVzIG1vZHVsZSBzaXplIGJhc2VkIG9uIHR3byBmaW5kZXIgcGF0dGVybnMgLS0gaXQgdXNlcwoJICAgICAqIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuQm90aFdheXMoaW50LCBpbnQsIGludCwgaW50KX0gdG8gZmlndXJlIHRoZQoJICAgICAqIHdpZHRoIG9mIGVhY2gsIG1lYXN1cmluZyBhbG9uZyB0aGUgYXhpcyBiZXR3ZWVuIHRoZWlyIGNlbnRlcnMuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5jYWxjdWxhdGVNb2R1bGVTaXplT25lV2F5ID0gZnVuY3Rpb24gKHBhdHRlcm4sIG90aGVyUGF0dGVybikgewoJICAgICAgICB2YXIgbW9kdWxlU2l6ZUVzdDEgPSB0aGlzLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzKC8qKGludCkgKi8gTWF0aC5mbG9vcihwYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRZKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKG90aGVyUGF0dGVybi5nZXRZKCkpKTsKCSAgICAgICAgdmFyIG1vZHVsZVNpemVFc3QyID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW5Cb3RoV2F5cygvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFgoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3Iob3RoZXJQYXR0ZXJuLmdldFkoKSksIAoJICAgICAgICAvKihpbnQpICovIE1hdGguZmxvb3IocGF0dGVybi5nZXRYKCkpLCAKCSAgICAgICAgLyooaW50KSAqLyBNYXRoLmZsb29yKHBhdHRlcm4uZ2V0WSgpKSk7CgkgICAgICAgIGlmIChpc05hTihtb2R1bGVTaXplRXN0MSkpIHsKCSAgICAgICAgICAgIHJldHVybiBtb2R1bGVTaXplRXN0MiAvIDcuMDsKCSAgICAgICAgfQoJICAgICAgICBpZiAoaXNOYU4obW9kdWxlU2l6ZUVzdDIpKSB7CgkgICAgICAgICAgICByZXR1cm4gbW9kdWxlU2l6ZUVzdDEgLyA3LjA7CgkgICAgICAgIH0KCSAgICAgICAgLy8gQXZlcmFnZSB0aGVtLCBhbmQgZGl2aWRlIGJ5IDcgc2luY2Ugd2UndmUgY291bnRlZCB0aGUgd2lkdGggb2YgMyBibGFjayBtb2R1bGVzLAoJICAgICAgICAvLyBhbmQgMSB3aGl0ZSBhbmQgMSBibGFjayBtb2R1bGUgb24gZWl0aGVyIHNpZGUuIEVyZ28sIGRpdmlkZSBzdW0gYnkgMTQuCgkgICAgICAgIHJldHVybiAobW9kdWxlU2l6ZUVzdDEgKyBtb2R1bGVTaXplRXN0MikgLyAxNC4wOwoJICAgIH07CgkgICAgLyoqCgkgICAgICogU2VlIHtAbGluayAjc2l6ZU9mQmxhY2tXaGl0ZUJsYWNrUnVuKGludCwgaW50LCBpbnQsIGludCl9OyBjb21wdXRlcyB0aGUgdG90YWwgd2lkdGggb2YKCSAgICAgKiBhIGZpbmRlciBwYXR0ZXJuIGJ5IGxvb2tpbmcgZm9yIGEgYmxhY2std2hpdGUtYmxhY2sgcnVuIGZyb20gdGhlIGNlbnRlciBpbiB0aGUgZGlyZWN0aW9uCgkgICAgICogb2YgYW5vdGhlciBwb2ludCAoYW5vdGhlciBmaW5kZXIgcGF0dGVybiBjZW50ZXIpLCBhbmQgaW4gdGhlIG9wcG9zaXRlIGRpcmVjdGlvbiB0b28uCgkgICAgICovCgkgICAgRGV0ZWN0b3IucHJvdG90eXBlLnNpemVPZkJsYWNrV2hpdGVCbGFja1J1bkJvdGhXYXlzID0gZnVuY3Rpb24gKGZyb21YIC8qaW50Ki8sIGZyb21ZIC8qaW50Ki8sIHRvWCAvKmludCovLCB0b1kgLyppbnQqLykgewoJICAgICAgICB2YXIgcmVzdWx0ID0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCB0b1gsIHRvWSk7CgkgICAgICAgIC8vIE5vdyBjb3VudCBvdGhlciB3YXkgLS0gZG9uJ3QgcnVuIG9mZiBpbWFnZSB0aG91Z2ggb2YgY291cnNlCgkgICAgICAgIHZhciBzY2FsZSA9IDEuMDsKCSAgICAgICAgdmFyIG90aGVyVG9YID0gZnJvbVggLSAodG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAob3RoZXJUb1ggPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21YIC8gLyooZmxvYXQpICovIChmcm9tWCAtIG90aGVyVG9YKTsKCSAgICAgICAgICAgIG90aGVyVG9YID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWCA+PSB0aGlzLmltYWdlLmdldFdpZHRoKCkpIHsKCSAgICAgICAgICAgIHNjYWxlID0gKHRoaXMuaW1hZ2UuZ2V0V2lkdGgoKSAtIDEgLSBmcm9tWCkgLyAvKihmbG9hdCkgKi8gKG90aGVyVG9YIC0gZnJvbVgpOwoJICAgICAgICAgICAgb3RoZXJUb1ggPSB0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIHZhciBvdGhlclRvWSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihmcm9tWSAtICh0b1kgLSBmcm9tWSkgKiBzY2FsZSk7CgkgICAgICAgIHNjYWxlID0gMS4wOwoJICAgICAgICBpZiAob3RoZXJUb1kgPCAwKSB7CgkgICAgICAgICAgICBzY2FsZSA9IGZyb21ZIC8gLyooZmxvYXQpICovIChmcm9tWSAtIG90aGVyVG9ZKTsKCSAgICAgICAgICAgIG90aGVyVG9ZID0gMDsKCSAgICAgICAgfQoJICAgICAgICBlbHNlIGlmIChvdGhlclRvWSA+PSB0aGlzLmltYWdlLmdldEhlaWdodCgpKSB7CgkgICAgICAgICAgICBzY2FsZSA9ICh0aGlzLmltYWdlLmdldEhlaWdodCgpIC0gMSAtIGZyb21ZKSAvIC8qKGZsb2F0KSAqLyAob3RoZXJUb1kgLSBmcm9tWSk7CgkgICAgICAgICAgICBvdGhlclRvWSA9IHRoaXMuaW1hZ2UuZ2V0SGVpZ2h0KCkgLSAxOwoJICAgICAgICB9CgkgICAgICAgIG90aGVyVG9YID0gLyooaW50KSAqLyBNYXRoLmZsb29yKGZyb21YICsgKG90aGVyVG9YIC0gZnJvbVgpICogc2NhbGUpOwoJICAgICAgICByZXN1bHQgKz0gdGhpcy5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4oZnJvbVgsIGZyb21ZLCBvdGhlclRvWCwgb3RoZXJUb1kpOwoJICAgICAgICAvLyBNaWRkbGUgcGl4ZWwgaXMgZG91YmxlLWNvdW50ZWQgdGhpcyB3YXk7IHN1YnRyYWN0IDEKCSAgICAgICAgcmV0dXJuIHJlc3VsdCAtIDEuMDsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPlRoaXMgbWV0aG9kIHRyYWNlcyBhIGxpbmUgZnJvbSBhIHBvaW50IGluIHRoZSBpbWFnZSwgaW4gdGhlIGRpcmVjdGlvbiB0b3dhcmRzIGFub3RoZXIgcG9pbnQuCgkgICAgICogSXQgYmVnaW5zIGluIGEgYmxhY2sgcmVnaW9uLCBhbmQga2VlcHMgZ29pbmcgdW50aWwgaXQgZmluZHMgd2hpdGUsIHRoZW4gYmxhY2ssIHRoZW4gd2hpdGUgYWdhaW4uCgkgICAgICogSXQgcmVwb3J0cyB0aGUgZGlzdGFuY2UgZnJvbSB0aGUgc3RhcnQgdG8gdGhpcyBwb2ludC48L3A+CgkgICAgICoKCSAgICAgKiA8cD5UaGlzIGlzIHVzZWQgd2hlbiBmaWd1cmluZyBvdXQgaG93IHdpZGUgYSBmaW5kZXIgcGF0dGVybiBpcywgd2hlbiB0aGUgZmluZGVyIHBhdHRlcm4KCSAgICAgKiBtYXkgYmUgc2tld2VkIG9yIHJvdGF0ZWQuPC9wPgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5zaXplT2ZCbGFja1doaXRlQmxhY2tSdW4gPSBmdW5jdGlvbiAoZnJvbVggLyppbnQqLywgZnJvbVkgLyppbnQqLywgdG9YIC8qaW50Ki8sIHRvWSAvKmludCovKSB7CgkgICAgICAgIC8vIE1pbGQgdmFyaWFudCBvZiBCcmVzZW5oYW0ncyBhbGdvcml0aG0KCSAgICAgICAgLy8gc2VlIGh0dHA6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvQnJlc2VuaGFtJ3NfbGluZV9hbGdvcml0aG0KCSAgICAgICAgdmFyIHN0ZWVwID0gTWF0aC5hYnModG9ZIC0gZnJvbVkpID4gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICBpZiAoc3RlZXApIHsKCSAgICAgICAgICAgIHZhciB0ZW1wID0gZnJvbVg7CgkgICAgICAgICAgICBmcm9tWCA9IGZyb21ZOwoJICAgICAgICAgICAgZnJvbVkgPSB0ZW1wOwoJICAgICAgICAgICAgdGVtcCA9IHRvWDsKCSAgICAgICAgICAgIHRvWCA9IHRvWTsKCSAgICAgICAgICAgIHRvWSA9IHRlbXA7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGR4ID0gTWF0aC5hYnModG9YIC0gZnJvbVgpOwoJICAgICAgICB2YXIgZHkgPSBNYXRoLmFicyh0b1kgLSBmcm9tWSk7CgkgICAgICAgIHZhciBlcnJvciA9IC1keCAvIDI7CgkgICAgICAgIHZhciB4c3RlcCA9IGZyb21YIDwgdG9YID8gMSA6IC0xOwoJICAgICAgICB2YXIgeXN0ZXAgPSBmcm9tWSA8IHRvWSA/IDEgOiAtMTsKCSAgICAgICAgLy8gSW4gYmxhY2sgcGl4ZWxzLCBsb29raW5nIGZvciB3aGl0ZSwgZmlyc3Qgb3Igc2Vjb25kIHRpbWUuCgkgICAgICAgIHZhciBzdGF0ZSA9IDA7CgkgICAgICAgIC8vIExvb3AgdXAgdW50aWwgeCA9PSB0b1gsIGJ1dCBub3QgYmV5b25kCgkgICAgICAgIHZhciB4TGltaXQgPSB0b1ggKyB4c3RlcDsKCSAgICAgICAgZm9yICh2YXIgeCA9IGZyb21YLCB5ID0gZnJvbVk7IHggIT09IHhMaW1pdDsgeCArPSB4c3RlcCkgewoJICAgICAgICAgICAgdmFyIHJlYWxYID0gc3RlZXAgPyB5IDogeDsKCSAgICAgICAgICAgIHZhciByZWFsWSA9IHN0ZWVwID8geCA6IHk7CgkgICAgICAgICAgICAvLyBEb2VzIGN1cnJlbnQgcGl4ZWwgbWVhbiB3ZSBoYXZlIG1vdmVkIHdoaXRlIHRvIGJsYWNrIG9yIHZpY2UgdmVyc2E/CgkgICAgICAgICAgICAvLyBTY2FubmluZyBibGFjayBpbiBzdGF0ZSAwLDIgYW5kIHdoaXRlIGluIHN0YXRlIDEsIHNvIGlmIHdlIGZpbmQgdGhlIHdyb25nCgkgICAgICAgICAgICAvLyBjb2xvciwgYWR2YW5jZSB0byBuZXh0IHN0YXRlIG9yIGVuZCBpZiB3ZSBhcmUgaW4gc3RhdGUgMiBhbHJlYWR5CgkgICAgICAgICAgICBpZiAoKHN0YXRlID09PSAxKSA9PT0gdGhpcy5pbWFnZS5nZXQocmVhbFgsIHJlYWxZKSkgewoJICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gMikgewoJICAgICAgICAgICAgICAgICAgICByZXR1cm4gTWF0aFV0aWxzXzEuZGVmYXVsdC5kaXN0YW5jZSh4LCB5LCBmcm9tWCwgZnJvbVkpOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBzdGF0ZSsrOwoJICAgICAgICAgICAgfQoJICAgICAgICAgICAgZXJyb3IgKz0gZHk7CgkgICAgICAgICAgICBpZiAoZXJyb3IgPiAwKSB7CgkgICAgICAgICAgICAgICAgaWYgKHkgPT09IHRvWSkgewoJICAgICAgICAgICAgICAgICAgICBicmVhazsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICAgICAgeSArPSB5c3RlcDsKCSAgICAgICAgICAgICAgICBlcnJvciAtPSBkeDsKCSAgICAgICAgICAgIH0KCSAgICAgICAgfQoJICAgICAgICAvLyBGb3VuZCBibGFjay13aGl0ZS1ibGFjazsgZ2l2ZSB0aGUgYmVuZWZpdCBvZiB0aGUgZG91YnQgdGhhdCB0aGUgbmV4dCBwaXhlbCBvdXRzaWRlIHRoZSBpbWFnZQoJICAgICAgICAvLyBpcyAid2hpdGUiIHNvIHRoaXMgbGFzdCBwb2ludCBhdCAodG9YK3hTdGVwLHRvWSkgaXMgdGhlIHJpZ2h0IGVuZGluZy4gVGhpcyBpcyByZWFsbHkgYQoJICAgICAgICAvLyBzbWFsbCBhcHByb3hpbWF0aW9uOyAodG9YK3hTdGVwLHRvWSt5U3RlcCkgbWlnaHQgYmUgcmVhbGx5IGNvcnJlY3QuIElnbm9yZSB0aGlzLgoJICAgICAgICBpZiAoc3RhdGUgPT09IDIpIHsKCSAgICAgICAgICAgIHJldHVybiBNYXRoVXRpbHNfMS5kZWZhdWx0LmRpc3RhbmNlKHRvWCArIHhzdGVwLCB0b1ksIGZyb21YLCBmcm9tWSk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gZWxzZSB3ZSBkaWRuJ3QgZmluZCBldmVuIGJsYWNrLXdoaXRlLWJsYWNrOyBubyBlc3RpbWF0ZSBpcyByZWFsbHkgcG9zc2libGUKCSAgICAgICAgcmV0dXJuIE5hTjsKCSAgICB9OwoJICAgIC8qKgoJICAgICAqIDxwPkF0dGVtcHRzIHRvIGxvY2F0ZSBhbiBhbGlnbm1lbnQgcGF0dGVybiBpbiBhIGxpbWl0ZWQgcmVnaW9uIG9mIHRoZSBpbWFnZSwgd2hpY2ggaXMKCSAgICAgKiBndWVzc2VkIHRvIGNvbnRhaW4gaXQuIFRoaXMgbWV0aG9kIHVzZXMge0BsaW5rIEFsaWdubWVudFBhdHRlcm59LjwvcD4KCSAgICAgKgoJICAgICAqIEBwYXJhbSBvdmVyYWxsRXN0TW9kdWxlU2l6ZSBlc3RpbWF0ZWQgbW9kdWxlIHNpemUgc28gZmFyCgkgICAgICogQHBhcmFtIGVzdEFsaWdubWVudFggeCBjb29yZGluYXRlIG9mIGNlbnRlciBvZiBhcmVhIHByb2JhYmx5IGNvbnRhaW5pbmcgYWxpZ25tZW50IHBhdHRlcm4KCSAgICAgKiBAcGFyYW0gZXN0QWxpZ25tZW50WSB5IGNvb3JkaW5hdGUgb2YgYWJvdmUKCSAgICAgKiBAcGFyYW0gYWxsb3dhbmNlRmFjdG9yIG51bWJlciBvZiBwaXhlbHMgaW4gYWxsIGRpcmVjdGlvbnMgdG8gc2VhcmNoIGZyb20gdGhlIGNlbnRlcgoJICAgICAqIEByZXR1cm4ge0BsaW5rIEFsaWdubWVudFBhdHRlcm59IGlmIGZvdW5kLCBvciBudWxsIG90aGVyd2lzZQoJICAgICAqIEB0aHJvd3MgTm90Rm91bmRFeGNlcHRpb24gaWYgYW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnMgZHVyaW5nIGRldGVjdGlvbgoJICAgICAqLwoJICAgIERldGVjdG9yLnByb3RvdHlwZS5maW5kQWxpZ25tZW50SW5SZWdpb24gPSBmdW5jdGlvbiAob3ZlcmFsbEVzdE1vZHVsZVNpemUgLypmbG9hdCovLCBlc3RBbGlnbm1lbnRYIC8qaW50Ki8sIGVzdEFsaWdubWVudFkgLyppbnQqLywgYWxsb3dhbmNlRmFjdG9yIC8qZmxvYXQqLykgewoJICAgICAgICAvLyBMb29rIGZvciBhbiBhbGlnbm1lbnQgcGF0dGVybiAoMyBtb2R1bGVzIGluIHNpemUpIGFyb3VuZCB3aGVyZSBpdAoJICAgICAgICAvLyBzaG91bGQgYmUKCSAgICAgICAgdmFyIGFsbG93YW5jZSA9IC8qKGludCkgKi8gTWF0aC5mbG9vcihhbGxvd2FuY2VGYWN0b3IgKiBvdmVyYWxsRXN0TW9kdWxlU2l6ZSk7CgkgICAgICAgIHZhciBhbGlnbm1lbnRBcmVhTGVmdFggPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRYIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFSaWdodFggPSBNYXRoLm1pbih0aGlzLmltYWdlLmdldFdpZHRoKCkgLSAxLCBlc3RBbGlnbm1lbnRYICsgYWxsb3dhbmNlKTsKCSAgICAgICAgaWYgKGFsaWdubWVudEFyZWFSaWdodFggLSBhbGlnbm1lbnRBcmVhTGVmdFggPCBvdmVyYWxsRXN0TW9kdWxlU2l6ZSAqIDMpIHsKCSAgICAgICAgICAgIHRocm93IG5ldyBOb3RGb3VuZEV4Y2VwdGlvbl8xJDEuZGVmYXVsdCgnQWxpZ25tZW50IHRvcCBleGNlZWRzIGVzdGltYXRlZCBtb2R1bGUgc2l6ZS4nKTsKCSAgICAgICAgfQoJICAgICAgICB2YXIgYWxpZ25tZW50QXJlYVRvcFkgPSBNYXRoLm1heCgwLCBlc3RBbGlnbm1lbnRZIC0gYWxsb3dhbmNlKTsKCSAgICAgICAgdmFyIGFsaWdubWVudEFyZWFCb3R0b21ZID0gTWF0aC5taW4odGhpcy5pbWFnZS5nZXRIZWlnaHQoKSAtIDEsIGVzdEFsaWdubWVudFkgKyBhbGxvd2FuY2UpOwoJICAgICAgICBpZiAoYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSA8IG92ZXJhbGxFc3RNb2R1bGVTaXplICogMykgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEkMS5kZWZhdWx0KCdBbGlnbm1lbnQgYm90dG9tIGV4Y2VlZHMgZXN0aW1hdGVkIG1vZHVsZSBzaXplLicpOwoJICAgICAgICB9CgkgICAgICAgIHZhciBhbGlnbm1lbnRGaW5kZXIgPSBuZXcgQWxpZ25tZW50UGF0dGVybkZpbmRlcl8xLmRlZmF1bHQodGhpcy5pbWFnZSwgYWxpZ25tZW50QXJlYUxlZnRYLCBhbGlnbm1lbnRBcmVhVG9wWSwgYWxpZ25tZW50QXJlYVJpZ2h0WCAtIGFsaWdubWVudEFyZWFMZWZ0WCwgYWxpZ25tZW50QXJlYUJvdHRvbVkgLSBhbGlnbm1lbnRBcmVhVG9wWSwgb3ZlcmFsbEVzdE1vZHVsZVNpemUsIHRoaXMucmVzdWx0UG9pbnRDYWxsYmFjayk7CgkgICAgICAgIHJldHVybiBhbGlnbm1lbnRGaW5kZXIuZmluZCgpOwoJICAgIH07CgkgICAgcmV0dXJuIERldGVjdG9yOwoJfSgpKTsKCURldGVjdG9yJDEuZGVmYXVsdCA9IERldGVjdG9yOwoKCS8qCgkgKiBDb3B5cmlnaHQgMjAwNyBaWGluZyBhdXRob3JzCgkgKgoJICogTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlICJMaWNlbnNlIik7CgkgKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuCgkgKiBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXQKCSAqCgkgKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMAoJICoKCSAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmUKCSAqIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuICJBUyBJUyIgQkFTSVMsCgkgKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC4KCSAqIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmQKCSAqIGxpbWl0YXRpb25zIHVuZGVyIHRoZSBMaWNlbnNlLgoJICovCglPYmplY3QuZGVmaW5lUHJvcGVydHkoUVJDb2RlUmVhZGVyJDEsICJfX2VzTW9kdWxlIiwgeyB2YWx1ZTogdHJ1ZSB9KTsKCS8qbmFtZXNwYWNlIGNvbS5nb29nbGUuenhpbmcucXJjb2RlIHsqLwoJdmFyIEJhcmNvZGVGb3JtYXRfMSA9IEJhcmNvZGVGb3JtYXQkMTsKCXZhciBCaXRNYXRyaXhfMSA9IEJpdE1hdHJpeCQxOwoJdmFyIERlY29kZUhpbnRUeXBlXzEgPSBEZWNvZGVIaW50VHlwZSQxOwoJdmFyIE5vdEZvdW5kRXhjZXB0aW9uXzEgPSBOb3RGb3VuZEV4Y2VwdGlvbiQxOwoJdmFyIFJlc3VsdF8xID0gUmVzdWx0JDE7Cgl2YXIgUmVzdWx0TWV0YWRhdGFUeXBlXzEgPSBSZXN1bHRNZXRhZGF0YVR5cGUkMTsKCS8vIGltcG9ydCBEZXRlY3RvclJlc3VsdCBmcm9tICcuLi9jb21tb24vRGV0ZWN0b3JSZXN1bHQnOwoJdmFyIERlY29kZXJfMSA9IERlY29kZXIkMTsKCXZhciBRUkNvZGVEZWNvZGVyTWV0YURhdGFfMSA9IFFSQ29kZURlY29kZXJNZXRhRGF0YSQxOwoJdmFyIERldGVjdG9yXzEgPSBEZXRlY3RvciQxOwoJLyppbXBvcnQgamF2YS51dGlsLkxpc3Q7Ki8KCS8qaW1wb3J0IGphdmEudXRpbC5NYXA7Ki8KCS8qKgoJICogVGhpcyBpbXBsZW1lbnRhdGlvbiBjYW4gZGV0ZWN0IGFuZCBkZWNvZGUgUVIgQ29kZXMgaW4gYW4gaW1hZ2UuCgkgKgoJICogQGF1dGhvciBTZWFuIE93ZW4KCSAqLwoJdmFyIFFSQ29kZVJlYWRlciA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHsKCSAgICBmdW5jdGlvbiBRUkNvZGVSZWFkZXIoKSB7CgkgICAgICAgIHRoaXMuZGVjb2RlciA9IG5ldyBEZWNvZGVyXzEuZGVmYXVsdCgpOwoJICAgIH0KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmdldERlY29kZXIgPSBmdW5jdGlvbiAoKSB7CgkgICAgICAgIHJldHVybiB0aGlzLmRlY29kZXI7CgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBMb2NhdGVzIGFuZCBkZWNvZGVzIGEgUVIgY29kZSBpbiBhbiBpbWFnZS4KCSAgICAgKgoJICAgICAqIEByZXR1cm4gYSByZXByZXNlbnRpbmc6IHN0cmluZyB0aGUgY29udGVudCBlbmNvZGVkIGJ5IHRoZSBRUiBjb2RlCgkgICAgICogQHRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiBpZiBhIFFSIGNvZGUgY2Fubm90IGJlIGZvdW5kCgkgICAgICogQHRocm93cyBGb3JtYXRFeGNlcHRpb24gaWYgYSBRUiBjb2RlIGNhbm5vdCBiZSBkZWNvZGVkCgkgICAgICogQHRocm93cyBDaGVja3N1bUV4Y2VwdGlvbiBpZiBlcnJvciBjb3JyZWN0aW9uIGZhaWxzCgkgICAgICovCgkgICAgLypAT3ZlcnJpZGUqLwoJICAgIC8vIHB1YmxpYyBkZWNvZGUoaW1hZ2U6IEJpbmFyeUJpdG1hcCk6IFJlc3VsdCAvKnRocm93cyBOb3RGb3VuZEV4Y2VwdGlvbiwgQ2hlY2tzdW1FeGNlcHRpb24sIEZvcm1hdEV4Y2VwdGlvbiAqLyB7CgkgICAgLy8gICByZXR1cm4gdGhpcy5kZWNvZGUoaW1hZ2UsIG51bGwpCgkgICAgLy8gfQoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLmRlY29kZSA9IGZ1bmN0aW9uIChpbWFnZSwgaGludHMpIHsKCSAgICAgICAgdmFyIGRlY29kZXJSZXN1bHQ7CgkgICAgICAgIHZhciBwb2ludHM7CgkgICAgICAgIGlmIChoaW50cyAhPT0gdW5kZWZpbmVkICYmIGhpbnRzICE9PSBudWxsICYmIHVuZGVmaW5lZCAhPT0gaGludHMuZ2V0KERlY29kZUhpbnRUeXBlXzEuZGVmYXVsdC5QVVJFX0JBUkNPREUpKSB7CgkgICAgICAgICAgICB2YXIgYml0cyA9IFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMoaW1hZ2UuZ2V0QmxhY2tNYXRyaXgoKSk7CgkgICAgICAgICAgICBkZWNvZGVyUmVzdWx0ID0gdGhpcy5kZWNvZGVyLmRlY29kZUJpdE1hdHJpeChiaXRzLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTOwoJICAgICAgICB9CgkgICAgICAgIGVsc2UgewoJICAgICAgICAgICAgdmFyIGRldGVjdG9yUmVzdWx0ID0gbmV3IERldGVjdG9yXzEuZGVmYXVsdChpbWFnZS5nZXRCbGFja01hdHJpeCgpKS5kZXRlY3QoaGludHMpOwoJICAgICAgICAgICAgZGVjb2RlclJlc3VsdCA9IHRoaXMuZGVjb2Rlci5kZWNvZGVCaXRNYXRyaXgoZGV0ZWN0b3JSZXN1bHQuZ2V0Qml0cygpLCBoaW50cyk7CgkgICAgICAgICAgICBwb2ludHMgPSBkZXRlY3RvclJlc3VsdC5nZXRQb2ludHMoKTsKCSAgICAgICAgfQoJICAgICAgICAvLyBJZiB0aGUgY29kZSB3YXMgbWlycm9yZWQ6IHN3YXAgdGhlIGJvdHRvbS1sZWZ0IGFuZCB0aGUgdG9wLXJpZ2h0IHBvaW50cy4KCSAgICAgICAgaWYgKGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKSBpbnN0YW5jZW9mIFFSQ29kZURlY29kZXJNZXRhRGF0YV8xLmRlZmF1bHQpIHsKCSAgICAgICAgICAgIGRlY29kZXJSZXN1bHQuZ2V0T3RoZXIoKS5hcHBseU1pcnJvcmVkQ29ycmVjdGlvbihwb2ludHMpOwoJICAgICAgICB9CgkgICAgICAgIHZhciByZXN1bHQgPSBuZXcgUmVzdWx0XzEuZGVmYXVsdChkZWNvZGVyUmVzdWx0LmdldFRleHQoKSwgZGVjb2RlclJlc3VsdC5nZXRSYXdCeXRlcygpLCB1bmRlZmluZWQsIHBvaW50cywgQmFyY29kZUZvcm1hdF8xLmRlZmF1bHQuUVJfQ09ERSwgdW5kZWZpbmVkKTsKCSAgICAgICAgdmFyIGJ5dGVTZWdtZW50cyA9IGRlY29kZXJSZXN1bHQuZ2V0Qnl0ZVNlZ21lbnRzKCk7CgkgICAgICAgIGlmIChieXRlU2VnbWVudHMgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkJZVEVfU0VHTUVOVFMsIGJ5dGVTZWdtZW50cyk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIGVjTGV2ZWwgPSBkZWNvZGVyUmVzdWx0LmdldEVDTGV2ZWwoKTsKCSAgICAgICAgaWYgKGVjTGV2ZWwgIT09IG51bGwpIHsKCSAgICAgICAgICAgIHJlc3VsdC5wdXRNZXRhZGF0YShSZXN1bHRNZXRhZGF0YVR5cGVfMS5kZWZhdWx0LkVSUk9SX0NPUlJFQ1RJT05fTEVWRUwsIGVjTGV2ZWwpOwoJICAgICAgICB9CgkgICAgICAgIGlmIChkZWNvZGVyUmVzdWx0Lmhhc1N0cnVjdHVyZWRBcHBlbmQoKSkgewoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfU0VRVUVOQ0UsIGRlY29kZXJSZXN1bHQuZ2V0U3RydWN0dXJlZEFwcGVuZFNlcXVlbmNlTnVtYmVyKCkpOwoJICAgICAgICAgICAgcmVzdWx0LnB1dE1ldGFkYXRhKFJlc3VsdE1ldGFkYXRhVHlwZV8xLmRlZmF1bHQuU1RSVUNUVVJFRF9BUFBFTkRfUEFSSVRZLCBkZWNvZGVyUmVzdWx0LmdldFN0cnVjdHVyZWRBcHBlbmRQYXJpdHkoKSk7CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIHJlc3VsdDsKCSAgICB9OwoJICAgIC8qQE92ZXJyaWRlKi8KCSAgICBRUkNvZGVSZWFkZXIucHJvdG90eXBlLnJlc2V0ID0gZnVuY3Rpb24gKCkgewoJICAgICAgICAvLyBkbyBub3RoaW5nCgkgICAgfTsKCSAgICAvKioKCSAgICAgKiBUaGlzIG1ldGhvZCBkZXRlY3RzIGEgY29kZSBpbiBhICJwdXJlIiBpbWFnZSAtLSB0aGF0IGlzLCBwdXJlIG1vbm9jaHJvbWUgaW1hZ2UKCSAgICAgKiB3aGljaCBjb250YWlucyBvbmx5IGFuIHVucm90YXRlZCwgdW5za2V3ZWQsIGltYWdlIG9mIGEgY29kZSwgd2l0aCBzb21lIHdoaXRlIGJvcmRlcgoJICAgICAqIGFyb3VuZCBpdC4gVGhpcyBpcyBhIHNwZWNpYWxpemVkIG1ldGhvZCB0aGF0IHdvcmtzIGV4Y2VwdGlvbmFsbHkgZmFzdCBpbiB0aGlzIHNwZWNpYWwKCSAgICAgKiBjYXNlLgoJICAgICAqCgkgICAgICogQHNlZSBjb20uZ29vZ2xlLnp4aW5nLmRhdGFtYXRyaXguRGF0YU1hdHJpeFJlYWRlciNleHRyYWN0UHVyZUJpdHMoQml0TWF0cml4KQoJICAgICAqLwoJICAgIFFSQ29kZVJlYWRlci5leHRyYWN0UHVyZUJpdHMgPSBmdW5jdGlvbiAoaW1hZ2UpIHsKCSAgICAgICAgdmFyIGxlZnRUb3BCbGFjayA9IGltYWdlLmdldFRvcExlZnRPbkJpdCgpOwoJICAgICAgICB2YXIgcmlnaHRCb3R0b21CbGFjayA9IGltYWdlLmdldEJvdHRvbVJpZ2h0T25CaXQoKTsKCSAgICAgICAgaWYgKGxlZnRUb3BCbGFjayA9PT0gbnVsbCB8fCByaWdodEJvdHRvbUJsYWNrID09PSBudWxsKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1vZHVsZVNpemUgPSB0aGlzLm1vZHVsZVNpemUobGVmdFRvcEJsYWNrLCBpbWFnZSk7CgkgICAgICAgIHZhciB0b3AgPSBsZWZ0VG9wQmxhY2tbMV07CgkgICAgICAgIHZhciBib3R0b20gPSByaWdodEJvdHRvbUJsYWNrWzFdOwoJICAgICAgICB2YXIgbGVmdCA9IGxlZnRUb3BCbGFja1swXTsKCSAgICAgICAgdmFyIHJpZ2h0ID0gcmlnaHRCb3R0b21CbGFja1swXTsKCSAgICAgICAgLy8gU2FuaXR5IGNoZWNrIQoJICAgICAgICBpZiAobGVmdCA+PSByaWdodCB8fCB0b3AgPj0gYm90dG9tKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKGJvdHRvbSAtIHRvcCAhPT0gcmlnaHQgLSBsZWZ0KSB7CgkgICAgICAgICAgICAvLyBTcGVjaWFsIGNhc2UsIHdoZXJlIGJvdHRvbS1yaWdodCBtb2R1bGUgd2Fzbid0IGJsYWNrIHNvIHdlIGZvdW5kIHNvbWV0aGluZyBlbHNlIGluIHRoZSBsYXN0IHJvdwoJICAgICAgICAgICAgLy8gQXNzdW1lIGl0J3MgYSBzcXVhcmUsIHNvIHVzZSBoZWlnaHQgYXMgdGhlIHdpZHRoCgkgICAgICAgICAgICByaWdodCA9IGxlZnQgKyAoYm90dG9tIC0gdG9wKTsKCSAgICAgICAgICAgIGlmIChyaWdodCA+PSBpbWFnZS5nZXRXaWR0aCgpKSB7CgkgICAgICAgICAgICAgICAgLy8gQWJvcnQgaWYgdGhhdCB3b3VsZCBub3QgbWFrZSBzZW5zZSAtLSBvZmYgaW1hZ2UKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgdmFyIG1hdHJpeFdpZHRoID0gTWF0aC5yb3VuZCgocmlnaHQgLSBsZWZ0ICsgMSkgLyBtb2R1bGVTaXplKTsKCSAgICAgICAgdmFyIG1hdHJpeEhlaWdodCA9IE1hdGgucm91bmQoKGJvdHRvbSAtIHRvcCArIDEpIC8gbW9kdWxlU2l6ZSk7CgkgICAgICAgIGlmIChtYXRyaXhXaWR0aCA8PSAwIHx8IG1hdHJpeEhlaWdodCA8PSAwKSB7CgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKG1hdHJpeEhlaWdodCAhPT0gbWF0cml4V2lkdGgpIHsKCSAgICAgICAgICAgIC8vIE9ubHkgcG9zc2libHkgZGVjb2RlIHNxdWFyZSByZWdpb25zCgkgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgIH0KCSAgICAgICAgLy8gUHVzaCBpbiB0aGUgImJvcmRlciIgYnkgaGFsZiB0aGUgbW9kdWxlIHdpZHRoIHNvIHRoYXQgd2Ugc3RhcnQKCSAgICAgICAgLy8gc2FtcGxpbmcgaW4gdGhlIG1pZGRsZSBvZiB0aGUgbW9kdWxlLiBKdXN0IGluIGNhc2UgdGhlIGltYWdlIGlzIGEKCSAgICAgICAgLy8gbGl0dGxlIG9mZiwgdGhpcyB3aWxsIGhlbHAgcmVjb3Zlci4KCSAgICAgICAgdmFyIG51ZGdlID0gLyooaW50KSAqLyBNYXRoLmZsb29yKG1vZHVsZVNpemUgLyAyLjApOwoJICAgICAgICB0b3AgKz0gbnVkZ2U7CgkgICAgICAgIGxlZnQgKz0gbnVkZ2U7CgkgICAgICAgIC8vIEJ1dCBjYXJlZnVsIHRoYXQgdGhpcyBkb2VzIG5vdCBzYW1wbGUgb2ZmIHRoZSBlZGdlCgkgICAgICAgIC8vICJyaWdodCIgaXMgdGhlIGZhcnRoZXN0LXJpZ2h0IHZhbGlkIHBpeGVsIGxvY2F0aW9uIC0tIHJpZ2h0KzEgaXMgbm90IG5lY2Vzc2FyaWx5CgkgICAgICAgIC8vIFRoaXMgaXMgcG9zaXRpdmUgYnkgaG93IG11Y2ggdGhlIGlubmVyIHggbG9vcCBiZWxvdyB3b3VsZCBiZSB0b28gbGFyZ2UKCSAgICAgICAgdmFyIG51ZGdlZFRvb0ZhclJpZ2h0ID0gbGVmdCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4V2lkdGggLSAxKSAqIG1vZHVsZVNpemUpIC0gcmlnaHQ7CgkgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IDApIHsKCSAgICAgICAgICAgIGlmIChudWRnZWRUb29GYXJSaWdodCA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICBsZWZ0IC09IG51ZGdlZFRvb0ZhclJpZ2h0OwoJICAgICAgICB9CgkgICAgICAgIC8vIFNlZSBsb2dpYyBhYm92ZQoJICAgICAgICB2YXIgbnVkZ2VkVG9vRmFyRG93biA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcigobWF0cml4SGVpZ2h0IC0gMSkgKiBtb2R1bGVTaXplKSAtIGJvdHRvbTsKCSAgICAgICAgaWYgKG51ZGdlZFRvb0ZhckRvd24gPiAwKSB7CgkgICAgICAgICAgICBpZiAobnVkZ2VkVG9vRmFyRG93biA+IG51ZGdlKSB7CgkgICAgICAgICAgICAgICAgLy8gTmVpdGhlciB3YXkgZml0czsgYWJvcnQKCSAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm90Rm91bmRFeGNlcHRpb25fMS5kZWZhdWx0KCk7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB0b3AgLT0gbnVkZ2VkVG9vRmFyRG93bjsKCSAgICAgICAgfQoJICAgICAgICAvLyBOb3cganVzdCByZWFkIG9mZiB0aGUgYml0cwoJICAgICAgICB2YXIgYml0cyA9IG5ldyBCaXRNYXRyaXhfMS5kZWZhdWx0KG1hdHJpeFdpZHRoLCBtYXRyaXhIZWlnaHQpOwoJICAgICAgICBmb3IgKHZhciB5ID0gMDsgeSA8IG1hdHJpeEhlaWdodDsgeSsrKSB7CgkgICAgICAgICAgICB2YXIgaU9mZnNldCA9IHRvcCArIC8qKGludCkgKi8gTWF0aC5mbG9vcih5ICogbW9kdWxlU2l6ZSk7CgkgICAgICAgICAgICBmb3IgKHZhciB4ID0gMDsgeCA8IG1hdHJpeFdpZHRoOyB4KyspIHsKCSAgICAgICAgICAgICAgICBpZiAoaW1hZ2UuZ2V0KGxlZnQgKyAvKihpbnQpICovIE1hdGguZmxvb3IoeCAqIG1vZHVsZVNpemUpLCBpT2Zmc2V0KSkgewoJICAgICAgICAgICAgICAgICAgICBiaXRzLnNldCh4LCB5KTsKCSAgICAgICAgICAgICAgICB9CgkgICAgICAgICAgICB9CgkgICAgICAgIH0KCSAgICAgICAgcmV0dXJuIGJpdHM7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIubW9kdWxlU2l6ZSA9IGZ1bmN0aW9uIChsZWZ0VG9wQmxhY2ssIGltYWdlKSB7CgkgICAgICAgIHZhciBoZWlnaHQgPSBpbWFnZS5nZXRIZWlnaHQoKTsKCSAgICAgICAgdmFyIHdpZHRoID0gaW1hZ2UuZ2V0V2lkdGgoKTsKCSAgICAgICAgdmFyIHggPSBsZWZ0VG9wQmxhY2tbMF07CgkgICAgICAgIHZhciB5ID0gbGVmdFRvcEJsYWNrWzFdOwoJICAgICAgICB2YXIgaW5CbGFjayA9IHRydWU7CgkgICAgICAgIHZhciB0cmFuc2l0aW9ucyA9IDA7CgkgICAgICAgIHdoaWxlICh4IDwgd2lkdGggJiYgeSA8IGhlaWdodCkgewoJICAgICAgICAgICAgaWYgKGluQmxhY2sgIT09IGltYWdlLmdldCh4LCB5KSkgewoJICAgICAgICAgICAgICAgIGlmICgrK3RyYW5zaXRpb25zID09PSA1KSB7CgkgICAgICAgICAgICAgICAgICAgIGJyZWFrOwoJICAgICAgICAgICAgICAgIH0KCSAgICAgICAgICAgICAgICBpbkJsYWNrID0gIWluQmxhY2s7CgkgICAgICAgICAgICB9CgkgICAgICAgICAgICB4Kys7CgkgICAgICAgICAgICB5Kys7CgkgICAgICAgIH0KCSAgICAgICAgaWYgKHggPT09IHdpZHRoIHx8IHkgPT09IGhlaWdodCkgewoJICAgICAgICAgICAgdGhyb3cgbmV3IE5vdEZvdW5kRXhjZXB0aW9uXzEuZGVmYXVsdCgpOwoJICAgICAgICB9CgkgICAgICAgIHJldHVybiAoeCAtIGxlZnRUb3BCbGFja1swXSkgLyA3LjA7CgkgICAgfTsKCSAgICBRUkNvZGVSZWFkZXIuTk9fUE9JTlRTID0gbmV3IEFycmF5KCk7CgkgICAgcmV0dXJuIFFSQ29kZVJlYWRlcjsKCX0oKSk7Cgl2YXIgX2RlZmF1bHQgPSBRUkNvZGVSZWFkZXIkMS5kZWZhdWx0ID0gUVJDb2RlUmVhZGVyOwoKCXZhciB0b0dyYXlzY2FsZUJ1ZmZlciA9IGZ1bmN0aW9uIHRvR3JheXNjYWxlQnVmZmVyKGltYWdlQnVmZmVyLCB3aWR0aCwgaGVpZ2h0KSB7CgkgIHZhciBncmF5c2NhbGVCdWZmZXIgPSBuZXcgVWludDhDbGFtcGVkQXJyYXkod2lkdGggKiBoZWlnaHQpOwoKCSAgZm9yICh2YXIgaSA9IDAsIGogPSAwLCBsZW5ndGhfMSA9IGltYWdlQnVmZmVyLmxlbmd0aDsgaSA8IGxlbmd0aF8xOyBpICs9IDQsIGorKykgewoJICAgIHZhciBncmF5ID0gdm9pZCAwOwoJICAgIHZhciBhbHBoYSA9IGltYWdlQnVmZmVyW2kgKyAzXTsgLy8gVGhlIGNvbG9yIG9mIGZ1bGx5LXRyYW5zcGFyZW50IHBpeGVscyBpcyBpcnJlbGV2YW50LiBUaGV5IGFyZSBvZnRlbiwgdGVjaG5pY2FsbHksIGZ1bGx5LXRyYW5zcGFyZW50CgkgICAgLy8gYmxhY2sgKDAgYWxwaGEsIGFuZCB0aGVuIDAgUkdCKS4gVGhleSBhcmUgb2Z0ZW4gdXNlZCwgb2YgY291cnNlIGFzIHRoZSAid2hpdGUiIGFyZWEgaW4gYQoJICAgIC8vIGJhcmNvZGUgaW1hZ2UuIEZvcmNlIGFueSBzdWNoIHBpeGVsIHRvIGJlIHdoaXRlOgoKCSAgICBpZiAoYWxwaGEgPT09IDApIHsKCSAgICAgIGdyYXkgPSAweEZGOwoJICAgIH0gZWxzZSB7CgkgICAgICB2YXIgcGl4ZWxSID0gaW1hZ2VCdWZmZXJbaV07CgkgICAgICB2YXIgcGl4ZWxHID0gaW1hZ2VCdWZmZXJbaSArIDFdOwoJICAgICAgdmFyIHBpeGVsQiA9IGltYWdlQnVmZmVyW2kgKyAyXTsgLy8gLjI5OVIgKyAwLjU4N0cgKyAwLjExNEIgKFlVVi9ZSVEgZm9yIFBBTCBhbmQgTlRTQyksCgkgICAgICAvLyAoMzA2KlIpID4+IDEwIGlzIGFwcHJveGltYXRlbHkgZXF1YWwgdG8gUiowLjI5OSwgYW5kIHNvIG9uLgoJICAgICAgLy8gMHgyMDAgPj4gMTAgaXMgMC41LCBpdCBpbXBsZW1lbnRzIHJvdW5kaW5nLgoKCSAgICAgIGdyYXkgPSAzMDYgKiBwaXhlbFIgKyA2MDEgKiBwaXhlbEcgKyAxMTcgKiBwaXhlbEIgKyAweDIwMCA+PiAxMDsKCSAgICB9CgoJICAgIGdyYXlzY2FsZUJ1ZmZlcltqXSA9IGdyYXk7CgkgIH0KCgkgIHJldHVybiBncmF5c2NhbGVCdWZmZXI7Cgl9OwoKCXZhciByZWFkZXIgPSBuZXcgX2RlZmF1bHQoKTsKCXNlbGYuYWRkRXZlbnRMaXN0ZW5lcignbWVzc2FnZScsIGZ1bmN0aW9uIChlKSB7CgkgIC8vIGVzbGludC1kaXNhYmxlLWxpbmUgbm8tcmVzdHJpY3RlZC1nbG9iYWxzCgkgIHRyeSB7CgkgICAgdmFyIGx1bWluYW5jZXMgPSB0b0dyYXlzY2FsZUJ1ZmZlcihlLmRhdGEuZGF0YSwgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgbHVtaW5hbmNlU291cmNlID0gbmV3IF9kZWZhdWx0JDEobHVtaW5hbmNlcywgZS5kYXRhLndpZHRoLCBlLmRhdGEuaGVpZ2h0KTsKCSAgICB2YXIgaHlicmlkQmluYXJpemVyID0gbmV3IF9kZWZhdWx0JDIobHVtaW5hbmNlU291cmNlKTsKCSAgICB2YXIgYmluYXJ5Qml0bWFwID0gbmV3IF9kZWZhdWx0JDMoaHlicmlkQmluYXJpemVyKTsKCSAgICB2YXIgZGVjb2RlZCA9IHJlYWRlci5kZWNvZGUoYmluYXJ5Qml0bWFwKTsKCSAgICBwb3N0TWVzc2FnZShkZWNvZGVkKTsKCSAgfSBjYXRjaCAoZXJyKSB7CgkgICAgcG9zdE1lc3NhZ2UobnVsbCk7CgkgIH0KCX0pOwoKfSkoKTsKCg==",null,!1),p=["constraints","onError","onLoad","onScan","resolution"];function G(g,I){var e=Object.keys(g);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);I&&(C=C.filter((function(I){return Object.getOwnPropertyDescriptor(g,I).enumerable}))),e.push.apply(e,C)}return e}function h(g){for(var I=1;I<arguments.length;I++){var e=null!=arguments[I]?arguments[I]:{};I%2?G(Object(e),!0).forEach((function(I){l(g,I,e[I])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(e)):G(Object(e)).forEach((function(I){Object.defineProperty(g,I,Object.getOwnPropertyDescriptor(e,I))}))}return g}var y=function(){return new b},B=function(g){g&&(g.getVideoTracks&&g.getAudioTracks?(g.getVideoTracks().map((function(I){g.removeTrack(I),I.stop()})),g.getAudioTracks().map((function(I){g.removeTrack(I),I.stop()}))):g.stop())},W=function(I){var e=I.constraints,n=I.onError,l=I.onLoad,o=I.onScan,a=I.resolution,i=u(I,p),r=JSON.stringify(e),c=g.useRef(null),d=g.useRef(null),s=g.useRef(document.createElement("canvas")),m=g.useRef(null),Z=g.useRef(),b=A(g.useState(null),2),G=b[0],W=b[1],S=g.useRef(!1),V=g.useMemo(y,[y]);g.useEffect((function(){return function(){V.terminate()}}),[V]),g.useEffect((function(){V.onmessage=function(g){o&&o(g.data?h(h({},g.data),{},{canvas:s.current}):null),S.current=!1}}),[o,V]);var v=g.useCallback((function(){var g=d.current&&d.current.readyState===d.current.HAVE_ENOUGH_DATA;if(!S.current&&g){S.current=!0;var I=d.current.videoWidth,e=d.current.videoHeight,C=a/(I>e?I:e);e*=C,I*=C,s.current.width=I,s.current.height=e,m.current=s.current.getContext("2d"),m.current.drawImage(d.current,0,0,I,e);var n=m.current.getImageData(0,0,I,e);V.postMessage(n)}Z.current=requestAnimationFrame(v)}),[a,V]);return g.useEffect((function(){var g=JSON.parse(r),I=!0;return navigator.mediaDevices.getUserMedia(g).then((function(g){if(I){c.current=g;try{d.current&&(d.current.srcObject=g,d.current.setAttribute("playsinline",!0))}catch(e){W(window.URL.createObjectURL(g))}l&&l(),Z.current=requestAnimationFrame(v)}else B(g)})).catch((function(g){return I?n(g):null})),function(){cancelAnimationFrame(Z.current),I=!1,B(c.current),G&&window.URL.revokeObjectURL(G)}}),[v,r,n,l]),C.default.createElement("video",t({autoPlay:!0,playsInline:!0,src:G,ref:d},i))};return W.propTypes={constraints:n.default.object,onError:n.default.func.isRequired,onLoad:n.default.func,onScan:n.default.func.isRequired,resolution:n.default.number},W.defaultProps={constraints:{audio:!1,video:!0},resolution:640},W}(e(2791),e(2007))},6374:function(g,I,e){"use strict";e(1725);var C=e(2791),n=60103;if(I.Fragment=60107,"function"===typeof Symbol&&Symbol.for){var t=Symbol.for;n=t("react.element"),I.Fragment=t("react.fragment")}var l=C.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o=Object.prototype.hasOwnProperty,a={key:!0,ref:!0,__self:!0,__source:!0};function i(g,I,e){var C,t={},i=null,r=null;for(C in void 0!==e&&(i=""+e),void 0!==I.key&&(i=""+I.key),void 0!==I.ref&&(r=I.ref),I)o.call(I,C)&&!a.hasOwnProperty(C)&&(t[C]=I[C]);if(g&&g.defaultProps)for(C in I=g.defaultProps)void 0===t[C]&&(t[C]=I[C]);return{$$typeof:n,type:g,key:i,ref:r,props:t,_owner:l.current}}I.jsx=i,I.jsxs=i},9117:function(g,I,e){"use strict";var C=e(1725),n=60103,t=60106;I.Fragment=60107,I.StrictMode=60108,I.Profiler=60114;var l=60109,o=60110,a=60112;I.Suspense=60113;var i=60115,r=60116;if("function"===typeof Symbol&&Symbol.for){var c=Symbol.for;n=c("react.element"),t=c("react.portal"),I.Fragment=c("react.fragment"),I.StrictMode=c("react.strict_mode"),I.Profiler=c("react.profiler"),l=c("react.provider"),o=c("react.context"),a=c("react.forward_ref"),I.Suspense=c("react.suspense"),i=c("react.memo"),r=c("react.lazy")}var A="function"===typeof Symbol&&Symbol.iterator;function d(g){for(var I="https://reactjs.org/docs/error-decoder.html?invariant="+g,e=1;e<arguments.length;e++)I+="&args[]="+encodeURIComponent(arguments[e]);return"Minified React error #"+g+"; visit "+I+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},s={};function m(g,I,e){this.props=g,this.context=I,this.refs=s,this.updater=e||u}function Z(){}function b(g,I,e){this.props=g,this.context=I,this.refs=s,this.updater=e||u}m.prototype.isReactComponent={},m.prototype.setState=function(g,I){if("object"!==typeof g&&"function"!==typeof g&&null!=g)throw Error(d(85));this.updater.enqueueSetState(this,g,I,"setState")},m.prototype.forceUpdate=function(g){this.updater.enqueueForceUpdate(this,g,"forceUpdate")},Z.prototype=m.prototype;var p=b.prototype=new Z;p.constructor=b,C(p,m.prototype),p.isPureReactComponent=!0;var G={current:null},h=Object.prototype.hasOwnProperty,y={key:!0,ref:!0,__self:!0,__source:!0};function B(g,I,e){var C,t={},l=null,o=null;if(null!=I)for(C in void 0!==I.ref&&(o=I.ref),void 0!==I.key&&(l=""+I.key),I)h.call(I,C)&&!y.hasOwnProperty(C)&&(t[C]=I[C]);var a=arguments.length-2;if(1===a)t.children=e;else if(1<a){for(var i=Array(a),r=0;r<a;r++)i[r]=arguments[r+2];t.children=i}if(g&&g.defaultProps)for(C in a=g.defaultProps)void 0===t[C]&&(t[C]=a[C]);return{$$typeof:n,type:g,key:l,ref:o,props:t,_owner:G.current}}function W(g){return"object"===typeof g&&null!==g&&g.$$typeof===n}var S=/\/+/g;function V(g,I){return"object"===typeof g&&null!==g&&null!=g.key?function(g){var I={"=":"=0",":":"=2"};return"$"+g.replace(/[=:]/g,(function(g){return I[g]}))}(""+g.key):I.toString(36)}function v(g,I,e,C,l){var o=typeof g;"undefined"!==o&&"boolean"!==o||(g=null);var a=!1;if(null===g)a=!0;else switch(o){case"string":case"number":a=!0;break;case"object":switch(g.$$typeof){case n:case t:a=!0}}if(a)return l=l(a=g),g=""===C?"."+V(a,0):C,Array.isArray(l)?(e="",null!=g&&(e=g.replace(S,"$&/")+"/"),v(l,I,e,"",(function(g){return g}))):null!=l&&(W(l)&&(l=function(g,I){return{$$typeof:n,type:g.type,key:I,ref:g.ref,props:g.props,_owner:g._owner}}(l,e+(!l.key||a&&a.key===l.key?"":(""+l.key).replace(S,"$&/")+"/")+g)),I.push(l)),1;if(a=0,C=""===C?".":C+":",Array.isArray(g))for(var i=0;i<g.length;i++){var r=C+V(o=g[i],i);a+=v(o,I,e,r,l)}else if(r=function(g){return null===g||"object"!==typeof g?null:"function"===typeof(g=A&&g[A]||g["@@iterator"])?g:null}(g),"function"===typeof r)for(g=r.call(g),i=0;!(o=g.next()).done;)a+=v(o=o.value,I,e,r=C+V(o,i++),l);else if("object"===o)throw I=""+g,Error(d(31,"[object Object]"===I?"object with keys {"+Object.keys(g).join(", ")+"}":I));return a}function R(g,I,e){if(null==g)return g;var C=[],n=0;return v(g,C,"","",(function(g){return I.call(e,g,n++)})),C}function X(g){if(-1===g._status){var I=g._result;I=I(),g._status=0,g._result=I,I.then((function(I){0===g._status&&(I=I.default,g._status=1,g._result=I)}),(function(I){0===g._status&&(g._status=2,g._result=I)}))}if(1===g._status)return g._result;throw g._result}var f={current:null};function k(){var g=f.current;if(null===g)throw Error(d(321));return g}var J={ReactCurrentDispatcher:f,ReactCurrentBatchConfig:{transition:0},ReactCurrentOwner:G,IsSomeRendererActing:{current:!1},assign:C};I.Children={map:R,forEach:function(g,I,e){R(g,(function(){I.apply(this,arguments)}),e)},count:function(g){var I=0;return R(g,(function(){I++})),I},toArray:function(g){return R(g,(function(g){return g}))||[]},only:function(g){if(!W(g))throw Error(d(143));return g}},I.Component=m,I.PureComponent=b,I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=J,I.cloneElement=function(g,I,e){if(null===g||void 0===g)throw Error(d(267,g));var t=C({},g.props),l=g.key,o=g.ref,a=g._owner;if(null!=I){if(void 0!==I.ref&&(o=I.ref,a=G.current),void 0!==I.key&&(l=""+I.key),g.type&&g.type.defaultProps)var i=g.type.defaultProps;for(r in I)h.call(I,r)&&!y.hasOwnProperty(r)&&(t[r]=void 0===I[r]&&void 0!==i?i[r]:I[r])}var r=arguments.length-2;if(1===r)t.children=e;else if(1<r){i=Array(r);for(var c=0;c<r;c++)i[c]=arguments[c+2];t.children=i}return{$$typeof:n,type:g.type,key:l,ref:o,props:t,_owner:a}},I.createContext=function(g,I){return void 0===I&&(I=null),(g={$$typeof:o,_calculateChangedBits:I,_currentValue:g,_currentValue2:g,_threadCount:0,Provider:null,Consumer:null}).Provider={$$typeof:l,_context:g},g.Consumer=g},I.createElement=B,I.createFactory=function(g){var I=B.bind(null,g);return I.type=g,I},I.createRef=function(){return{current:null}},I.forwardRef=function(g){return{$$typeof:a,render:g}},I.isValidElement=W,I.lazy=function(g){return{$$typeof:r,_payload:{_status:-1,_result:g},_init:X}},I.memo=function(g,I){return{$$typeof:i,type:g,compare:void 0===I?null:I}},I.useCallback=function(g,I){return k().useCallback(g,I)},I.useContext=function(g,I){return k().useContext(g,I)},I.useDebugValue=function(){},I.useEffect=function(g,I){return k().useEffect(g,I)},I.useImperativeHandle=function(g,I,e){return k().useImperativeHandle(g,I,e)},I.useLayoutEffect=function(g,I){return k().useLayoutEffect(g,I)},I.useMemo=function(g,I){return k().useMemo(g,I)},I.useReducer=function(g,I,e){return k().useReducer(g,I,e)},I.useRef=function(g){return k().useRef(g)},I.useState=function(g){return k().useState(g)},I.version="17.0.2"},2791:function(g,I,e){"use strict";g.exports=e(9117)},184:function(g,I,e){"use strict";g.exports=e(6374)},6813:function(g,I){"use strict";var e,C,n,t;if("object"===typeof performance&&"function"===typeof performance.now){var l=performance;I.unstable_now=function(){return l.now()}}else{var o=Date,a=o.now();I.unstable_now=function(){return o.now()-a}}if("undefined"===typeof window||"function"!==typeof MessageChannel){var i=null,r=null,c=function g(){if(null!==i)try{var e=I.unstable_now();i(!0,e),i=null}catch(C){throw setTimeout(g,0),C}};e=function(g){null!==i?setTimeout(e,0,g):(i=g,setTimeout(c,0))},C=function(g,I){r=setTimeout(g,I)},n=function(){clearTimeout(r)},I.unstable_shouldYield=function(){return!1},t=I.unstable_forceFrameRate=function(){}}else{var A=window.setTimeout,d=window.clearTimeout;if("undefined"!==typeof console){var u=window.cancelAnimationFrame;"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills"),"function"!==typeof u&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://reactjs.org/link/react-polyfills")}var s=!1,m=null,Z=-1,b=5,p=0;I.unstable_shouldYield=function(){return I.unstable_now()>=p},t=function(){},I.unstable_forceFrameRate=function(g){0>g||125<g?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<g?Math.floor(1e3/g):5};var G=new MessageChannel,h=G.port2;G.port1.onmessage=function(){if(null!==m){var g=I.unstable_now();p=g+b;try{m(!0,g)?h.postMessage(null):(s=!1,m=null)}catch(e){throw h.postMessage(null),e}}else s=!1},e=function(g){m=g,s||(s=!0,h.postMessage(null))},C=function(g,e){Z=A((function(){g(I.unstable_now())}),e)},n=function(){d(Z),Z=-1}}function y(g,I){var e=g.length;g.push(I);g:for(;;){var C=e-1>>>1,n=g[C];if(!(void 0!==n&&0<S(n,I)))break g;g[C]=I,g[e]=n,e=C}}function B(g){return void 0===(g=g[0])?null:g}function W(g){var I=g[0];if(void 0!==I){var e=g.pop();if(e!==I){g[0]=e;g:for(var C=0,n=g.length;C<n;){var t=2*(C+1)-1,l=g[t],o=t+1,a=g[o];if(void 0!==l&&0>S(l,e))void 0!==a&&0>S(a,l)?(g[C]=a,g[o]=e,C=o):(g[C]=l,g[t]=e,C=t);else{if(!(void 0!==a&&0>S(a,e)))break g;g[C]=a,g[o]=e,C=o}}}return I}return null}function S(g,I){var e=g.sortIndex-I.sortIndex;return 0!==e?e:g.id-I.id}var V=[],v=[],R=1,X=null,f=3,k=!1,J=!1,Y=!1;function H(g){for(var I=B(v);null!==I;){if(null===I.callback)W(v);else{if(!(I.startTime<=g))break;W(v),I.sortIndex=I.expirationTime,y(V,I)}I=B(v)}}function w(g){if(Y=!1,H(g),!J)if(null!==B(V))J=!0,e(K);else{var I=B(v);null!==I&&C(w,I.startTime-g)}}function K(g,e){J=!1,Y&&(Y=!1,n()),k=!0;var t=f;try{for(H(e),X=B(V);null!==X&&(!(X.expirationTime>e)||g&&!I.unstable_shouldYield());){var l=X.callback;if("function"===typeof l){X.callback=null,f=X.priorityLevel;var o=l(X.expirationTime<=e);e=I.unstable_now(),"function"===typeof o?X.callback=o:X===B(V)&&W(V),H(e)}else W(V);X=B(V)}if(null!==X)var a=!0;else{var i=B(v);null!==i&&C(w,i.startTime-e),a=!1}return a}finally{X=null,f=t,k=!1}}var F=t;I.unstable_IdlePriority=5,I.unstable_ImmediatePriority=1,I.unstable_LowPriority=4,I.unstable_NormalPriority=3,I.unstable_Profiling=null,I.unstable_UserBlockingPriority=2,I.unstable_cancelCallback=function(g){g.callback=null},I.unstable_continueExecution=function(){J||k||(J=!0,e(K))},I.unstable_getCurrentPriorityLevel=function(){return f},I.unstable_getFirstCallbackNode=function(){return B(V)},I.unstable_next=function(g){switch(f){case 1:case 2:case 3:var I=3;break;default:I=f}var e=f;f=I;try{return g()}finally{f=e}},I.unstable_pauseExecution=function(){},I.unstable_requestPaint=F,I.unstable_runWithPriority=function(g,I){switch(g){case 1:case 2:case 3:case 4:case 5:break;default:g=3}var e=f;f=g;try{return I()}finally{f=e}},I.unstable_scheduleCallback=function(g,t,l){var o=I.unstable_now();switch("object"===typeof l&&null!==l?l="number"===typeof(l=l.delay)&&0<l?o+l:o:l=o,g){case 1:var a=-1;break;case 2:a=250;break;case 5:a=1073741823;break;case 4:a=1e4;break;default:a=5e3}return g={id:R++,callback:t,priorityLevel:g,startTime:l,expirationTime:a=l+a,sortIndex:-1},l>o?(g.sortIndex=l,y(v,g),null===B(V)&&g===B(v)&&(Y?n():Y=!0,C(w,l-o))):(g.sortIndex=a,y(V,g),J||k||(J=!0,e(K))),g},I.unstable_wrapCallback=function(g){var I=f;return function(){var e=f;f=I;try{return g.apply(this,arguments)}finally{f=e}}}},5296:function(g,I,e){"use strict";g.exports=e(6813)},9259:function(g,I,e){var C={"./_SAMPLE.json":9524,"./en.json":790,"./sv.json":3244};function n(g){var I=t(g);return e(I)}function t(g){if(!e.o(C,g)){var I=new Error("Cannot find module '"+g+"'");throw I.code="MODULE_NOT_FOUND",I}return C[g]}n.keys=function(){return Object.keys(C)},n.resolve=t,g.exports=n,n.id=9259},9495:function(g,I,e){"use strict";g.exports=e.p+"static/media/Asset 1.4078baa028ce63b94016.png"},907:function(g,I,e){"use strict";function C(g,I){(null==I||I>g.length)&&(I=g.length);for(var e=0,C=new Array(I);e<I;e++)C[e]=g[e];return C}e.d(I,{Z:function(){return C}})},4942:function(g,I,e){"use strict";function C(g,I,e){return I in g?Object.defineProperty(g,I,{value:e,enumerable:!0,configurable:!0,writable:!0}):g[I]=e,g}e.d(I,{Z:function(){return C}})},7462:function(g,I,e){"use strict";function C(){return C=Object.assign||function(g){for(var I=1;I<arguments.length;I++){var e=arguments[I];for(var C in e)Object.prototype.hasOwnProperty.call(e,C)&&(g[C]=e[C])}return g},C.apply(this,arguments)}e.d(I,{Z:function(){return C}})},3366:function(g,I,e){"use strict";function C(g,I){if(null==g)return{};var e,C,n={},t=Object.keys(g);for(C=0;C<t.length;C++)e=t[C],I.indexOf(e)>=0||(n[e]=g[e]);return n}e.d(I,{Z:function(){return C}})},885:function(g,I,e){"use strict";e.d(I,{Z:function(){return n}});var C=e(181);function n(g,I){return function(g){if(Array.isArray(g))return g}(g)||function(g,I){var e=null==g?null:"undefined"!==typeof Symbol&&g[Symbol.iterator]||g["@@iterator"];if(null!=e){var C,n,t=[],l=!0,o=!1;try{for(e=e.call(g);!(l=(C=e.next()).done)&&(t.push(C.value),!I||t.length!==I);l=!0);}catch(a){o=!0,n=a}finally{try{l||null==e.return||e.return()}finally{if(o)throw n}}return t}}(g,I)||(0,C.Z)(g,I)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},2982:function(g,I,e){"use strict";e.d(I,{Z:function(){return t}});var C=e(907);var n=e(181);function t(g){return function(g){if(Array.isArray(g))return(0,C.Z)(g)}(g)||function(g){if("undefined"!==typeof Symbol&&null!=g[Symbol.iterator]||null!=g["@@iterator"])return Array.from(g)}(g)||(0,n.Z)(g)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},181:function(g,I,e){"use strict";e.d(I,{Z:function(){return n}});var C=e(907);function n(g,I){if(g){if("string"===typeof g)return(0,C.Z)(g,I);var e=Object.prototype.toString.call(g).slice(8,-1);return"Object"===e&&g.constructor&&(e=g.constructor.name),"Map"===e||"Set"===e?Array.from(g):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?(0,C.Z)(g,I):void 0}}},9524:function(g){"use strict";g.exports=JSON.parse('{"loading":"","login":"","welcome":"","userId":"","addSensor":"","add":"","mostRecent":"","sensor":"","articleNumber":"","date":"","time":"","amount":"","dashboard":"","device":"","devices":"","user":"","users":"","profile":"","logout":"","admin":"","rules":"","companyName":"","supportEmail":"","supportPhone":"","adminMail":"","adminFirstName":"","adminLastName":"","adminUsername":"","addCompany":"","companies":"","tractAdminPanel":"","companiesInformation":"","companyAdminInformation":"","failing":"","errMessage":"","errMessages":"","node":"","nodes":"","nodeInformation":"","addNode":""}')},790:function(g){"use strict";g.exports=JSON.parse('{"loading":"Loading","login":"Login","welcome":"Welcome","userId":"User id","addSensor":"Add sensor","add":"Add","mostRecent":"Most recent","sensor":"Sensor","articleNumber":"Article number","date":"Date","time":"Time","amount":"Amount","dashboard":"Dashboard","device":"Device","devices":"Devices","user":"User","users":"Users","profile":"Profile","logout":"Logout","admin":"Admin","rules":"Rules","companyName":"Company Name","supportEmail":"Support Email","supportPhone":"Support Phone","adminMail":"Admin Mail","adminFirstName":"Admin First Name","adminLastName":"Admin Last Name","adminUsername":"Admin Username","addCompany":"Add Company","companies":"Companies","tractAdminPanel":"Tract Admin Panel","companiesInformation":"Companies Information","companyAdminInformation":"Company Admin Information","failing":"Failing","errMessage":"Error message","errMessages":"Error messages","node":"Node","nodes":"Nodes","nodeInformation":"Node Information","addNode":"Add Node","nodeId":"Node id","nodeType":"Node type","nodeCompany":"Node company","noNodes":"No nodes"}')},3244:function(g){"use strict";g.exports=JSON.parse('{"loading":"Laddar","login":"Logga in","welcome":"V\xe4lkommen","userId":"Anv\xe4ndar-ID","addSensor":"L\xe4gg till","add":"L\xe4gg till","mostRecent":"Senaste","sensor":"Sensor","articleNumber":"Artikelnummer","date":"Datum","time":"Tid","amount":"Antal","dashboard":"Dashboard","device":"Enhet","devices":"Enheter","user":"Anv\xe4ndare","users":"Anv\xe4ndare","profile":"Profil","logout":"Logga ut","admin":"Admin","rules":"Regler","companyName":"F\xf6retagsnamn","supportEmail":"Support Email","supportPhone":"Support Telefon","adminMail":"Admin Mail","adminFirstName":"Admin F\xf6rnamn","adminLastName":"Admin Efternamn","adminUsername":"Admin Anv\xe4ndarnamn","addCompany":"L\xe4gg till F\xf6retag","companies":"F\xf6retag","tractAdminPanel":"Tract Admin Panel","companiesInformation":"F\xf6retagsinformation","companyAdminInformation":"F\xf6retagsadmininformation","failing":"Misslyckande","errMessage":"Felmeddelande","errMessages":"Felmeddelanden","node":"Nod","nodes":"Noder","nodeInformation":"Node information","addNode":"L\xe4gg till en Node","nodeId":"Nod id","nodeType":"Nod typ","nodeCompany":"Nod f\xf6retag","noNodes":"Inga noder"}')}},I={};function e(C){var n=I[C];if(void 0!==n)return n.exports;var t=I[C]={exports:{}};return g[C].call(t.exports,t,t.exports,e),t.exports}e.m=g,e.n=function(g){var I=g&&g.__esModule?function(){return g.default}:function(){return g};return e.d(I,{a:I}),I},function(){var g,I=Object.getPrototypeOf?function(g){return Object.getPrototypeOf(g)}:function(g){return g.__proto__};e.t=function(C,n){if(1&n&&(C=this(C)),8&n)return C;if("object"===typeof C&&C){if(4&n&&C.__esModule)return C;if(16&n&&"function"===typeof C.then)return C}var t=Object.create(null);e.r(t);var l={};g=g||[null,I({}),I([]),I(I)];for(var o=2&n&&C;"object"==typeof o&&!~g.indexOf(o);o=I(o))Object.getOwnPropertyNames(o).forEach((function(g){l[g]=function(){return C[g]}}));return l.default=function(){return C},e.d(t,l),t}}(),e.d=function(g,I){for(var C in I)e.o(I,C)&&!e.o(g,C)&&Object.defineProperty(g,C,{enumerable:!0,get:I[C]})},e.f={},e.e=function(g){return Promise.all(Object.keys(e.f).reduce((function(I,C){return e.f[C](g,I),I}),[]))},e.u=function(g){return"static/js/"+g+".56867cdf.chunk.js"},e.miniCssF=function(g){},e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(g){if("object"===typeof window)return window}}(),e.o=function(g,I){return Object.prototype.hasOwnProperty.call(g,I)},function(){var g={},I="team-5:";e.l=function(C,n,t,l){if(g[C])g[C].push(n);else{var o,a;if(void 0!==t)for(var i=document.getElementsByTagName("script"),r=0;r<i.length;r++){var c=i[r];if(c.getAttribute("src")==C||c.getAttribute("data-webpack")==I+t){o=c;break}}o||(a=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,e.nc&&o.setAttribute("nonce",e.nc),o.setAttribute("data-webpack",I+t),o.src=C),g[C]=[n];var A=function(I,e){o.onerror=o.onload=null,clearTimeout(d);var n=g[C];if(delete g[C],o.parentNode&&o.parentNode.removeChild(o),n&&n.forEach((function(g){return g(e)})),I)return I(e)},d=setTimeout(A.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=A.bind(null,o.onerror),o.onload=A.bind(null,o.onload),a&&document.head.appendChild(o)}}}(),e.r=function(g){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(g,"__esModule",{value:!0})},e.p="/",function(){var g={179:0};e.f.j=function(I,C){var n=e.o(g,I)?g[I]:void 0;if(0!==n)if(n)C.push(n[2]);else{var t=new Promise((function(e,C){n=g[I]=[e,C]}));C.push(n[2]=t);var l=e.p+e.u(I),o=new Error;e.l(l,(function(C){if(e.o(g,I)&&(0!==(n=g[I])&&(g[I]=void 0),n)){var t=C&&("load"===C.type?"missing":C.type),l=C&&C.target&&C.target.src;o.message="Loading chunk "+I+" failed.\n("+t+": "+l+")",o.name="ChunkLoadError",o.type=t,o.request=l,n[1](o)}}),"chunk-"+I,I)}};var I=function(I,C){var n,t,l=C[0],o=C[1],a=C[2],i=0;if(l.some((function(I){return 0!==g[I]}))){for(n in o)e.o(o,n)&&(e.m[n]=o[n]);if(a)a(e)}for(I&&I(C);i<l.length;i++)t=l[i],e.o(g,t)&&g[t]&&g[t][0](),g[t]=0},C=self.webpackChunkteam_5=self.webpackChunkteam_5||[];C.forEach(I.bind(null,0)),C.push=I.bind(null,C.push.bind(C))}(),function(){"use strict";var g=e(2791),I=e.t(g,2),C=e(4164),n=e(885),t=e(4942);function l(g,I){var e=Object.keys(g);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(g);I&&(C=C.filter((function(I){return Object.getOwnPropertyDescriptor(g,I).enumerable}))),e.push.apply(e,C)}return e}function o(g){for(var I=1;I<arguments.length;I++){var e=null!=arguments[I]?arguments[I]:{};I%2?l(Object(e),!0).forEach((function(I){(0,t.Z)(g,I,e[I])})):Object.getOwnPropertyDescriptors?Object.defineProperties(g,Object.getOwnPropertyDescriptors(e)):l(Object(e)).forEach((function(I){Object.defineProperty(g,I,Object.getOwnPropertyDescriptor(e,I))}))}return g}var a,i=e(7462);!function(g){g.Pop="POP",g.Push="PUSH",g.Replace="REPLACE"}(a||(a={}));var r=function(g){return g};var c,A="beforeunload",d="popstate";function u(g){g.preventDefault(),g.returnValue=""}function s(){var g=[];return{get length(){return g.length},push:function(I){return g.push(I),function(){g=g.filter((function(g){return g!==I}))}},call:function(I){g.forEach((function(g){return g&&g(I)}))}}}function m(){return Math.random().toString(36).substr(2,8)}function Z(g){var I=g.pathname,e=void 0===I?"/":I,C=g.search,n=void 0===C?"":C,t=g.hash,l=void 0===t?"":t;return n&&"?"!==n&&(e+="?"===n.charAt(0)?n:"?"+n),l&&"#"!==l&&(e+="#"===l.charAt(0)?l:"#"+l),e}function b(g){var I={};if(g){var e=g.indexOf("#");e>=0&&(I.hash=g.substr(e),g=g.substr(0,e));var C=g.indexOf("?");C>=0&&(I.search=g.substr(C),g=g.substr(0,C)),g&&(I.pathname=g)}return I}!function(g){g.Pop="POP",g.Push="PUSH",g.Replace="REPLACE"}(c||(c={}));function p(g){var I={};if(g){var e=g.indexOf("#");e>=0&&(I.hash=g.substr(e),g=g.substr(0,e));var C=g.indexOf("?");C>=0&&(I.search=g.substr(C),g=g.substr(0,C)),g&&(I.pathname=g)}return I}function G(g,I){if(!g)throw new Error(I)}var h=(0,g.createContext)(null);var y=(0,g.createContext)(null);var B=(0,g.createContext)({outlet:null,matches:[]});function W(I){return function(I){var e=(0,g.useContext)(B).outlet;if(e)return(0,g.createElement)(J.Provider,{value:I},e);return e}(I.context)}function S(g){G(!1)}function V(I){var e=I.basename,C=void 0===e?"/":e,n=I.children,t=void 0===n?null:n,l=I.location,o=I.navigationType,a=void 0===o?c.Pop:o,i=I.navigator,r=I.static,A=void 0!==r&&r;X()&&G(!1);var d=L(C),u=(0,g.useMemo)((function(){return{basename:d,navigator:i,static:A}}),[d,i,A]);"string"===typeof l&&(l=p(l));var s=l,m=s.pathname,Z=void 0===m?"/":m,b=s.search,B=void 0===b?"":b,W=s.hash,S=void 0===W?"":W,V=s.state,v=void 0===V?null:V,R=s.key,f=void 0===R?"default":R,k=(0,g.useMemo)((function(){var g=U(Z,d);return null==g?null:{pathname:g,search:B,hash:S,state:v,key:f}}),[d,Z,B,S,v,f]);return null==k?null:(0,g.createElement)(h.Provider,{value:u},(0,g.createElement)(y.Provider,{children:t,value:{location:k,navigationType:a}}))}function v(I){var e=I.children,C=I.location;return function(I,e){X()||G(!1);var C=(0,g.useContext)(B).matches,n=C[C.length-1],t=n?n.params:{},l=(n&&n.pathname,n?n.pathnameBase:"/");n&&n.route;0;var o,a=f();if(e){var i,r="string"===typeof e?p(e):e;"/"===l||(null==(i=r.pathname)?void 0:i.startsWith(l))||G(!1),o=r}else o=a;var c=o.pathname||"/",A="/"===l?c:c.slice(l.length)||"/",d=function(g,I,e){void 0===e&&(e="/");var C=U(("string"===typeof I?p(I):I).pathname||"/",e);if(null==C)return null;var n=w(g);!function(g){g.sort((function(g,I){return g.score!==I.score?I.score-g.score:function(g,I){var e=g.length===I.length&&g.slice(0,-1).every((function(g,e){return g===I[e]}));return e?g[g.length-1]-I[I.length-1]:0}(g.routesMeta.map((function(g){return g.childrenIndex})),I.routesMeta.map((function(g){return g.childrenIndex})))}))}(n);for(var t=null,l=0;null==t&&l<n.length;++l)t=x(n[l],C);return t}(I,{pathname:A});0;return z(d&&d.map((function(g){return Object.assign({},g,{params:Object.assign({},t,g.params),pathname:Q([l,g.pathname]),pathnameBase:"/"===g.pathnameBase?l:Q([l,g.pathnameBase])})})),C)}(H(e),C)}function R(I){X()||G(!1);var e=(0,g.useContext)(h),C=e.basename,n=e.navigator,t=Y(I),l=t.hash,o=t.pathname,a=t.search,i=o;if("/"!==C){var r=function(g){return""===g||""===g.pathname?"/":"string"===typeof g?p(g).pathname:g.pathname}(I),c=null!=r&&r.endsWith("/");i="/"===o?C+(c?"/":""):Q([C,o])}return n.createHref({pathname:i,search:a,hash:l})}function X(){return null!=(0,g.useContext)(y)}function f(){return X()||G(!1),(0,g.useContext)(y).location}function k(){X()||G(!1);var I=(0,g.useContext)(h),e=I.basename,C=I.navigator,n=(0,g.useContext)(B).matches,t=f().pathname,l=JSON.stringify(n.map((function(g){return g.pathnameBase}))),o=(0,g.useRef)(!1);(0,g.useEffect)((function(){o.current=!0}));var a=(0,g.useCallback)((function(g,I){if(void 0===I&&(I={}),o.current)if("number"!==typeof g){var n=E(g,JSON.parse(l),t);"/"!==e&&(n.pathname=Q([e,n.pathname])),(I.replace?C.replace:C.push)(n,I.state)}else C.go(g)}),[e,C,l,t]);return a}var J=(0,g.createContext)(null);function Y(I){var e=(0,g.useContext)(B).matches,C=f().pathname,n=JSON.stringify(e.map((function(g){return g.pathnameBase})));return(0,g.useMemo)((function(){return E(I,JSON.parse(n),C)}),[I,n,C])}function H(I){var e=[];return g.Children.forEach(I,(function(I){if((0,g.isValidElement)(I))if(I.type!==g.Fragment){I.type!==S&&G(!1);var C={caseSensitive:I.props.caseSensitive,element:I.props.element,index:I.props.index,path:I.props.path};I.props.children&&(C.children=H(I.props.children)),e.push(C)}else e.push.apply(e,H(I.props.children))})),e}function w(g,I,e,C){return void 0===I&&(I=[]),void 0===e&&(e=[]),void 0===C&&(C=""),g.forEach((function(g,n){var t={relativePath:g.path||"",caseSensitive:!0===g.caseSensitive,childrenIndex:n,route:g};t.relativePath.startsWith("/")&&(t.relativePath.startsWith(C)||G(!1),t.relativePath=t.relativePath.slice(C.length));var l=Q([C,t.relativePath]),o=e.concat(t);g.children&&g.children.length>0&&(!0===g.index&&G(!1),w(g.children,I,o,l)),(null!=g.path||g.index)&&I.push({path:l,score:N(l,g.index),routesMeta:o})})),I}var K=/^:\w+$/,F=function(g){return"*"===g};function N(g,I){var e=g.split("/"),C=e.length;return e.some(F)&&(C+=-2),I&&(C+=2),e.filter((function(g){return!F(g)})).reduce((function(g,I){return g+(K.test(I)?3:""===I?1:10)}),C)}function x(g,I){for(var e=g.routesMeta,C={},n="/",t=[],l=0;l<e.length;++l){var o=e[l],a=l===e.length-1,i="/"===n?I:I.slice(n.length)||"/",r=M({path:o.relativePath,caseSensitive:o.caseSensitive,end:a},i);if(!r)return null;Object.assign(C,r.params);var c=o.route;t.push({params:C,pathname:Q([n,r.pathname]),pathnameBase:Q([n,r.pathnameBase]),route:c}),"/"!==r.pathnameBase&&(n=Q([n,r.pathnameBase]))}return t}function z(I,e){return void 0===e&&(e=[]),null==I?null:I.reduceRight((function(C,n,t){return(0,g.createElement)(B.Provider,{children:void 0!==n.route.element?n.route.element:(0,g.createElement)(W,null),value:{outlet:C,matches:e.concat(I.slice(0,t+1))}})}),null)}function M(g,I){"string"===typeof g&&(g={path:g,caseSensitive:!1,end:!0});var e=function(g,I,e){void 0===I&&(I=!1);void 0===e&&(e=!0);var C=[],n="^"+g.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/:(\w+)/g,(function(g,I){return C.push(I),"([^\\/]+)"}));g.endsWith("*")?(C.push("*"),n+="*"===g||"/*"===g?"(.*)$":"(?:\\/(.+)|\\/*)$"):n+=e?"\\/*$":"(?:\\b|\\/|$)";return[new RegExp(n,I?void 0:"i"),C]}(g.path,g.caseSensitive,g.end),C=(0,n.Z)(e,2),t=C[0],l=C[1],o=I.match(t);if(!o)return null;var a=o[0],i=a.replace(/(.)\/+$/,"$1"),r=o.slice(1);return{params:l.reduce((function(g,I,e){if("*"===I){var C=r[e]||"";i=a.slice(0,a.length-C.length).replace(/(.)\/+$/,"$1")}return g[I]=function(g,I){try{return decodeURIComponent(g)}catch(e){return g}}(r[e]||""),g}),{}),pathname:a,pathnameBase:i,pattern:g}}function E(g,I,e){var C,n="string"===typeof g?p(g):g,t=""===g||""===n.pathname?"/":n.pathname;if(null==t)C=e;else{var l=I.length-1;if(t.startsWith("..")){for(var o=t.split("/");".."===o[0];)o.shift(),l-=1;n.pathname=o.join("/")}C=l>=0?I[l]:"/"}var a=function(g,I){void 0===I&&(I="/");var e="string"===typeof g?p(g):g,C=e.pathname,n=e.search,t=void 0===n?"":n,l=e.hash,o=void 0===l?"":l,a=C?C.startsWith("/")?C:function(g,I){var e=I.replace(/\/+$/,"").split("/");return g.split("/").forEach((function(g){".."===g?e.length>1&&e.pop():"."!==g&&e.push(g)})),e.length>1?e.join("/"):"/"}(C,I):I;return{pathname:a,search:T(t),hash:D(o)}}(n,C);return t&&"/"!==t&&t.endsWith("/")&&!a.pathname.endsWith("/")&&(a.pathname+="/"),a}function U(g,I){if("/"===I)return g;if(!g.toLowerCase().startsWith(I.toLowerCase()))return null;var e=g.charAt(I.length);return e&&"/"!==e?null:g.slice(I.length)||"/"}var Q=function(g){return g.join("/").replace(/\/\/+/g,"/")},L=function(g){return g.replace(/\/+$/,"").replace(/^\/*/,"/")},T=function(g){return g&&"?"!==g?g.startsWith("?")?g:"?"+g:""},D=function(g){return g&&"#"!==g?g.startsWith("#")?g:"#"+g:""};function j(){return j=Object.assign||function(g){for(var I=1;I<arguments.length;I++){var e=arguments[I];for(var C in e)Object.prototype.hasOwnProperty.call(e,C)&&(g[C]=e[C])}return g},j.apply(this,arguments)}function P(g,I){if(null==g)return{};var e,C,n={},t=Object.keys(g);for(C=0;C<t.length;C++)e=t[C],I.indexOf(e)>=0||(n[e]=g[e]);return n}var O=["onClick","reloadDocument","replace","state","target","to"];function q(I){var e=I.basename,C=I.children,t=I.window,l=(0,g.useRef)();null==l.current&&(l.current=function(g){void 0===g&&(g={});var I=g.window,e=void 0===I?document.defaultView:I,C=e.history;function n(){var g=e.location,I=g.pathname,n=g.search,t=g.hash,l=C.state||{};return[l.idx,r({pathname:I,search:n,hash:t,state:l.usr||null,key:l.key||"default"})]}var t=null;e.addEventListener(d,(function(){if(t)h.call(t),t=null;else{var g=a.Pop,I=n(),e=I[0],C=I[1];if(h.length){if(null!=e){var l=c-e;l&&(t={action:g,location:C,retry:function(){v(-1*l)}},v(l))}}else V(g)}}));var l=a.Pop,o=n(),c=o[0],p=o[1],G=s(),h=s();function y(g){return"string"===typeof g?g:Z(g)}function B(g,I){return void 0===I&&(I=null),r((0,i.Z)({pathname:p.pathname,hash:"",search:""},"string"===typeof g?b(g):g,{state:I,key:m()}))}function W(g,I){return[{usr:g.state,key:g.key,idx:I},y(g)]}function S(g,I,e){return!h.length||(h.call({action:g,location:I,retry:e}),!1)}function V(g){l=g;var I=n();c=I[0],p=I[1],G.call({action:l,location:p})}function v(g){C.go(g)}null==c&&(c=0,C.replaceState((0,i.Z)({},C.state,{idx:c}),""));var R={get action(){return l},get location(){return p},createHref:y,push:function g(I,n){var t=a.Push,l=B(I,n);if(S(t,l,(function(){g(I,n)}))){var o=W(l,c+1),i=o[0],r=o[1];try{C.pushState(i,"",r)}catch(A){e.location.assign(r)}V(t)}},replace:function g(I,e){var n=a.Replace,t=B(I,e);if(S(n,t,(function(){g(I,e)}))){var l=W(t,c),o=l[0],i=l[1];C.replaceState(o,"",i),V(n)}},go:v,back:function(){v(-1)},forward:function(){v(1)},listen:function(g){return G.push(g)},block:function(g){var I=h.push(g);return 1===h.length&&e.addEventListener(A,u),function(){I(),h.length||e.removeEventListener(A,u)}}};return R}({window:t}));var o=l.current,c=(0,g.useState)({action:o.action,location:o.location}),p=(0,n.Z)(c,2),G=p[0],h=p[1];return(0,g.useLayoutEffect)((function(){return o.listen(h)}),[o]),(0,g.createElement)(V,{basename:e,children:C,location:G.location,navigationType:G.action,navigator:o})}var _=(0,g.forwardRef)((function(I,e){var C=I.onClick,n=I.reloadDocument,t=I.replace,l=void 0!==t&&t,o=I.state,a=I.target,i=I.to,r=P(I,O),c=R(i),A=function(I,e){var C=void 0===e?{}:e,n=C.target,t=C.replace,l=C.state,o=k(),a=f(),i=Y(I);return(0,g.useCallback)((function(g){if(0===g.button&&(!n||"_self"===n)&&!function(g){return!!(g.metaKey||g.altKey||g.ctrlKey||g.shiftKey)}(g)){g.preventDefault();var e=!!t||Z(a)===Z(i);o(I,{replace:e,state:l})}}),[a,o,i,t,l,n,I])}(i,{replace:l,state:o,target:a});return(0,g.createElement)("a",j({},r,{href:c,onClick:function(g){C&&C(g),g.defaultPrevented||n||A(g)},ref:e,target:a}))}));var $=e(2982),gg=e(3366),Ig=e(8182),eg=e(1184),Cg=e(2466),ng=e(6001),tg=["sx"];function lg(g){var I,e=g.sx,C=function(g){var I={systemProps:{},otherProps:{}};return Object.keys(g).forEach((function(e){ng.Gc[e]?I.systemProps[e]=g[e]:I.otherProps[e]=g[e]})),I}((0,gg.Z)(g,tg)),n=C.systemProps,t=C.otherProps;return I=Array.isArray(e)?[n].concat((0,$.Z)(e)):"function"===typeof e?function(){var g=e.apply(void 0,arguments);return(0,Cg.P)(g)?(0,i.Z)({},n,g):n}:(0,i.Z)({},n,e),(0,i.Z)({},t,{sx:I})}var og=e(767),ag=e(6934),ig=e(1402);var rg=g.createContext(),cg=e(5159),Ag=e(208);function dg(g){return(0,cg.Z)("MuiGrid",g)}var ug=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],sg=(0,Ag.Z)("MuiGrid",["root","container","item","zeroMinWidth"].concat((0,$.Z)([0,1,2,3,4,5,6,7,8,9,10].map((function(g){return"spacing-xs-".concat(g)}))),(0,$.Z)(["column-reverse","column","row-reverse","row"].map((function(g){return"direction-xs-".concat(g)}))),(0,$.Z)(["nowrap","wrap-reverse","wrap"].map((function(g){return"wrap-xs-".concat(g)}))),(0,$.Z)(ug.map((function(g){return"grid-xs-".concat(g)}))),(0,$.Z)(ug.map((function(g){return"grid-sm-".concat(g)}))),(0,$.Z)(ug.map((function(g){return"grid-md-".concat(g)}))),(0,$.Z)(ug.map((function(g){return"grid-lg-".concat(g)}))),(0,$.Z)(ug.map((function(g){return"grid-xl-".concat(g)}))))),mg=e(184),Zg=["className","columns","columnSpacing","component","container","direction","item","lg","md","rowSpacing","sm","spacing","wrap","xl","xs","zeroMinWidth"];function bg(g){var I=parseFloat(g);return"".concat(I).concat(String(g).replace(String(I),"")||"px")}function pg(g,I){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!I||!g||g<=0)return[];if("string"===typeof g&&!Number.isNaN(Number(g))||"number"===typeof g)return[e["spacing-xs-".concat(String(g))]||"spacing-xs-".concat(String(g))];var C=g.xs,n=g.sm,t=g.md,l=g.lg,o=g.xl;return[Number(C)>0&&(e["spacing-xs-".concat(String(C))]||"spacing-xs-".concat(String(C))),Number(n)>0&&(e["spacing-sm-".concat(String(n))]||"spacing-sm-".concat(String(n))),Number(t)>0&&(e["spacing-md-".concat(String(t))]||"spacing-md-".concat(String(t))),Number(l)>0&&(e["spacing-lg-".concat(String(l))]||"spacing-lg-".concat(String(l))),Number(o)>0&&(e["spacing-xl-".concat(String(o))]||"spacing-xl-".concat(String(o)))]}var Gg=(0,ag.ZP)("div",{name:"MuiGrid",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState,C=e.container,n=e.direction,t=e.item,l=e.lg,o=e.md,a=e.sm,i=e.spacing,r=e.wrap,c=e.xl,A=e.xs,d=e.zeroMinWidth;return[I.root,C&&I.container,t&&I.item,d&&I.zeroMinWidth].concat((0,$.Z)(pg(i,C,I)),["row"!==n&&I["direction-xs-".concat(String(n))],"wrap"!==r&&I["wrap-xs-".concat(String(r))],!1!==A&&I["grid-xs-".concat(String(A))],!1!==a&&I["grid-sm-".concat(String(a))],!1!==o&&I["grid-md-".concat(String(o))],!1!==l&&I["grid-lg-".concat(String(l))],!1!==c&&I["grid-xl-".concat(String(c))]])}})((function(g){var I=g.ownerState;return(0,i.Z)({boxSizing:"border-box"},I.container&&{display:"flex",flexWrap:"wrap",width:"100%"},I.item&&{margin:0},I.zeroMinWidth&&{minWidth:0},"wrap"!==I.wrap&&{flexWrap:I.wrap})}),(function(g){var I=g.theme,e=g.ownerState,C=(0,eg.P$)({values:e.direction,breakpoints:I.breakpoints.values});return(0,eg.k9)({theme:I},C,(function(g){var I={flexDirection:g};return 0===g.indexOf("column")&&(I["& > .".concat(sg.item)]={maxWidth:"none"}),I}))}),(function(g){var I=g.theme,e=g.ownerState,C=e.container,n=e.rowSpacing,l={};if(C&&0!==n){var o=(0,eg.P$)({values:n,breakpoints:I.breakpoints.values});l=(0,eg.k9)({theme:I},o,(function(g){var e=I.spacing(g);return"0px"!==e?(0,t.Z)({marginTop:"-".concat(bg(e))},"& > .".concat(sg.item),{paddingTop:bg(e)}):{}}))}return l}),(function(g){var I=g.theme,e=g.ownerState,C=e.container,n=e.columnSpacing,l={};if(C&&0!==n){var o=(0,eg.P$)({values:n,breakpoints:I.breakpoints.values});l=(0,eg.k9)({theme:I},o,(function(g){var e=I.spacing(g);return"0px"!==e?(0,t.Z)({width:"calc(100% + ".concat(bg(e),")"),marginLeft:"-".concat(bg(e))},"& > .".concat(sg.item),{paddingLeft:bg(e)}):{}}))}return l}),(function(g){var I,e=g.theme,C=g.ownerState;return e.breakpoints.keys.reduce((function(g,n){var t={};if(C[n]&&(I=C[n]),!I)return g;if(!0===I)t={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if("auto"===I)t={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{var l=(0,eg.P$)({values:C.columns,breakpoints:e.breakpoints.values}),o="object"===typeof l?l[n]:l;if(void 0===o||null===o)return g;var a="".concat(Math.round(I/o*1e8)/1e6,"%"),r={};if(C.container&&C.item&&0!==C.columnSpacing){var c=e.spacing(C.columnSpacing);if("0px"!==c){var A="calc(".concat(a," + ").concat(bg(c),")");r={flexBasis:A,maxWidth:A}}}t=(0,i.Z)({flexBasis:a,flexGrow:0,maxWidth:a},r)}return 0===e.breakpoints.values[n]?Object.assign(g,t):g[e.breakpoints.up(n)]=t,g}),{})})),hg=g.forwardRef((function(I,e){var C,n=lg((0,ig.Z)({props:I,name:"MuiGrid"})),t=n.className,l=n.columns,o=n.columnSpacing,a=n.component,r=void 0===a?"div":a,c=n.container,A=void 0!==c&&c,d=n.direction,u=void 0===d?"row":d,s=n.item,m=void 0!==s&&s,Z=n.lg,b=void 0!==Z&&Z,p=n.md,G=void 0!==p&&p,h=n.rowSpacing,y=n.sm,B=void 0!==y&&y,W=n.spacing,S=void 0===W?0:W,V=n.wrap,v=void 0===V?"wrap":V,R=n.xl,X=void 0!==R&&R,f=n.xs,k=void 0!==f&&f,J=n.zeroMinWidth,Y=void 0!==J&&J,H=(0,gg.Z)(n,Zg),w=h||S,K=o||S,F=g.useContext(rg),N=l||F||12,x=(0,i.Z)({},n,{columns:N,container:A,direction:u,item:m,lg:b,md:G,sm:B,rowSpacing:w,columnSpacing:K,wrap:v,xl:X,xs:k,zeroMinWidth:Y}),z=function(g){var I=g.classes,e=g.container,C=g.direction,n=g.item,t=g.lg,l=g.md,o=g.sm,a=g.spacing,i=g.wrap,r=g.xl,c=g.xs,A={root:["root",e&&"container",n&&"item",g.zeroMinWidth&&"zeroMinWidth"].concat((0,$.Z)(pg(a,e)),["row"!==C&&"direction-xs-".concat(String(C)),"wrap"!==i&&"wrap-xs-".concat(String(i)),!1!==c&&"grid-xs-".concat(String(c)),!1!==o&&"grid-sm-".concat(String(o)),!1!==l&&"grid-md-".concat(String(l)),!1!==t&&"grid-lg-".concat(String(t)),!1!==r&&"grid-xl-".concat(String(r))])};return(0,og.Z)(A,dg,I)}(x);return C=(0,mg.jsx)(Gg,(0,i.Z)({ownerState:x,className:(0,Ig.Z)(z.root,t),as:r,ref:e},H)),12!==N?(0,mg.jsx)(rg.Provider,{value:N,children:C}):C})),yg=e(2065);function Bg(g){return(0,cg.Z)("MuiPaper",g)}(0,Ag.Z)("MuiPaper",["root","rounded","outlined","elevation","elevation0","elevation1","elevation2","elevation3","elevation4","elevation5","elevation6","elevation7","elevation8","elevation9","elevation10","elevation11","elevation12","elevation13","elevation14","elevation15","elevation16","elevation17","elevation18","elevation19","elevation20","elevation21","elevation22","elevation23","elevation24"]);var Wg=["className","component","elevation","square","variant"],Sg=function(g){return((g<1?5.11916*Math.pow(g,2):4.5*Math.log(g+1)+2)/100).toFixed(2)},Vg=(0,ag.ZP)("div",{name:"MuiPaper",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,I[e.variant],!e.square&&I.rounded,"elevation"===e.variant&&I["elevation".concat(e.elevation)]]}})((function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({backgroundColor:I.palette.background.paper,color:I.palette.text.primary,transition:I.transitions.create("box-shadow")},!e.square&&{borderRadius:I.shape.borderRadius},"outlined"===e.variant&&{border:"1px solid ".concat(I.palette.divider)},"elevation"===e.variant&&(0,i.Z)({boxShadow:I.shadows[e.elevation]},"dark"===I.palette.mode&&{backgroundImage:"linear-gradient(".concat((0,yg.Fq)("#fff",Sg(e.elevation)),", ").concat((0,yg.Fq)("#fff",Sg(e.elevation)),")")}))})),vg=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiPaper"}),C=e.className,n=e.component,t=void 0===n?"div":n,l=e.elevation,o=void 0===l?1:l,a=e.square,r=void 0!==a&&a,c=e.variant,A=void 0===c?"elevation":c,d=(0,gg.Z)(e,Wg),u=(0,i.Z)({},e,{component:t,elevation:o,square:r,variant:A}),s=function(g){var I=g.square,e=g.elevation,C=g.variant,n=g.classes,t={root:["root",C,!I&&"rounded","elevation"===C&&"elevation".concat(e)]};return(0,og.Z)(t,Bg,n)}(u);return(0,mg.jsx)(Vg,(0,i.Z)({as:t,ownerState:u,className:(0,Ig.Z)(s.root,C),ref:I},d))})),Rg=e(4036);function Xg(g){return(0,cg.Z)("MuiTypography",g)}(0,Ag.Z)("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);var fg=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],kg=(0,ag.ZP)("span",{name:"MuiTypography",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,e.variant&&I[e.variant],"inherit"!==e.align&&I["align".concat((0,Rg.Z)(e.align))],e.noWrap&&I.noWrap,e.gutterBottom&&I.gutterBottom,e.paragraph&&I.paragraph]}})((function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({margin:0},e.variant&&I.typography[e.variant],"inherit"!==e.align&&{textAlign:e.align},e.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},e.gutterBottom&&{marginBottom:"0.35em"},e.paragraph&&{marginBottom:16})})),Jg={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},Yg={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Hg=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiTypography"}),C=function(g){return Yg[g]||g}(e.color),n=lg((0,i.Z)({},e,{color:C})),t=n.align,l=void 0===t?"inherit":t,o=n.className,a=n.component,r=n.gutterBottom,c=void 0!==r&&r,A=n.noWrap,d=void 0!==A&&A,u=n.paragraph,s=void 0!==u&&u,m=n.variant,Z=void 0===m?"body1":m,b=n.variantMapping,p=void 0===b?Jg:b,G=(0,gg.Z)(n,fg),h=(0,i.Z)({},n,{align:l,color:C,className:o,component:a,gutterBottom:c,noWrap:d,paragraph:s,variant:Z,variantMapping:p}),y=a||(s?"p":p[Z]||Jg[Z])||"span",B=function(g){var I=g.align,e=g.gutterBottom,C=g.noWrap,n=g.paragraph,t=g.variant,l=g.classes,o={root:["root",t,"inherit"!==g.align&&"align".concat((0,Rg.Z)(I)),e&&"gutterBottom",C&&"noWrap",n&&"paragraph"]};return(0,og.Z)(o,Xg,l)}(h);return(0,mg.jsx)(kg,(0,i.Z)({as:y,ref:I,ownerState:h,className:(0,Ig.Z)(B.root,o)},G))}));function wg(g){return(0,cg.Z)("MuiTableContainer",g)}(0,Ag.Z)("MuiTableContainer",["root"]);var Kg=["className","component"],Fg=(0,ag.ZP)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:function(g,I){return I.root}})({width:"100%",overflowX:"auto"}),Ng=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiTableContainer"}),C=e.className,n=e.component,t=void 0===n?"div":n,l=(0,gg.Z)(e,Kg),o=(0,i.Z)({},e,{component:t}),a=function(g){var I=g.classes;return(0,og.Z)({root:["root"]},wg,I)}(o);return(0,mg.jsx)(Fg,(0,i.Z)({ref:I,as:t,className:(0,Ig.Z)(a.root,C),ownerState:o},l))}));var xg=g.createContext();function zg(g){return(0,cg.Z)("MuiTable",g)}(0,Ag.Z)("MuiTable",["root","stickyHeader"]);var Mg=["className","component","padding","size","stickyHeader"],Eg=(0,ag.ZP)("table",{name:"MuiTable",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,e.stickyHeader&&I.stickyHeader]}})((function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({display:"table",width:"100%",borderCollapse:"collapse",borderSpacing:0,"& caption":(0,i.Z)({},I.typography.body2,{padding:I.spacing(2),color:I.palette.text.secondary,textAlign:"left",captionSide:"bottom"})},e.stickyHeader&&{borderCollapse:"separate"})})),Ug="table",Qg=g.forwardRef((function(I,e){var C=(0,ig.Z)({props:I,name:"MuiTable"}),n=C.className,t=C.component,l=void 0===t?Ug:t,o=C.padding,a=void 0===o?"normal":o,r=C.size,c=void 0===r?"medium":r,A=C.stickyHeader,d=void 0!==A&&A,u=(0,gg.Z)(C,Mg),s=(0,i.Z)({},C,{component:l,padding:a,size:c,stickyHeader:d}),m=function(g){var I=g.classes,e={root:["root",g.stickyHeader&&"stickyHeader"]};return(0,og.Z)(e,zg,I)}(s),Z=g.useMemo((function(){return{padding:a,size:c,stickyHeader:d}}),[a,c,d]);return(0,mg.jsx)(xg.Provider,{value:Z,children:(0,mg.jsx)(Eg,(0,i.Z)({as:l,role:l===Ug?null:"table",ref:e,className:(0,Ig.Z)(m.root,n),ownerState:s},u))})}));var Lg=g.createContext();function Tg(g){return(0,cg.Z)("MuiTableBody",g)}(0,Ag.Z)("MuiTableBody",["root"]);var Dg=["className","component"],jg=(0,ag.ZP)("tbody",{name:"MuiTableBody",slot:"Root",overridesResolver:function(g,I){return I.root}})({display:"table-row-group"}),Pg={variant:"body"},Og="tbody",qg=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiTableBody"}),C=e.className,n=e.component,t=void 0===n?Og:n,l=(0,gg.Z)(e,Dg),o=(0,i.Z)({},e,{component:t}),a=function(g){var I=g.classes;return(0,og.Z)({root:["root"]},Tg,I)}(o);return(0,mg.jsx)(Lg.Provider,{value:Pg,children:(0,mg.jsx)(jg,(0,i.Z)({className:(0,Ig.Z)(a.root,C),as:t,ref:I,role:t===Og?null:"rowgroup",ownerState:o},l))})}));function _g(g){return(0,cg.Z)("MuiTableRow",g)}var $g=(0,Ag.Z)("MuiTableRow",["root","selected","hover","head","footer"]),gI=["className","component","hover","selected"],II=(0,ag.ZP)("tr",{name:"MuiTableRow",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,e.head&&I.head,e.footer&&I.footer]}})((function(g){var I,e=g.theme;return I={color:"inherit",display:"table-row",verticalAlign:"middle",outline:0},(0,t.Z)(I,"&.".concat($g.hover,":hover"),{backgroundColor:e.palette.action.hover}),(0,t.Z)(I,"&.".concat($g.selected),{backgroundColor:(0,yg.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity),"&:hover":{backgroundColor:(0,yg.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}}),I})),eI=g.forwardRef((function(I,e){var C=(0,ig.Z)({props:I,name:"MuiTableRow"}),n=C.className,t=C.component,l=void 0===t?"tr":t,o=C.hover,a=void 0!==o&&o,r=C.selected,c=void 0!==r&&r,A=(0,gg.Z)(C,gI),d=g.useContext(Lg),u=(0,i.Z)({},C,{component:l,hover:a,selected:c,head:d&&"head"===d.variant,footer:d&&"footer"===d.variant}),s=function(g){var I=g.classes,e={root:["root",g.selected&&"selected",g.hover&&"hover",g.head&&"head",g.footer&&"footer"]};return(0,og.Z)(e,_g,I)}(u);return(0,mg.jsx)(II,(0,i.Z)({as:l,ref:e,className:(0,Ig.Z)(s.root,n),role:"tr"===l?null:"row",ownerState:u},A))})),CI=eI;function nI(g){return(0,cg.Z)("MuiTableCell",g)}var tI=(0,Ag.Z)("MuiTableCell",["root","head","body","footer","sizeSmall","sizeMedium","paddingCheckbox","paddingNone","alignLeft","alignCenter","alignRight","alignJustify","stickyHeader"]),lI=["align","className","component","padding","scope","size","sortDirection","variant"],oI=(0,ag.ZP)("td",{name:"MuiTableCell",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,I[e.variant],I["size".concat((0,Rg.Z)(e.size))],"normal"!==e.padding&&I["padding".concat((0,Rg.Z)(e.padding))],"inherit"!==e.align&&I["align".concat((0,Rg.Z)(e.align))],e.stickyHeader&&I.stickyHeader]}})((function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({},I.typography.body2,{display:"table-cell",verticalAlign:"inherit",borderBottom:"1px solid\n    ".concat("light"===I.palette.mode?(0,yg.$n)((0,yg.Fq)(I.palette.divider,1),.88):(0,yg._j)((0,yg.Fq)(I.palette.divider,1),.68)),textAlign:"left",padding:16},"head"===e.variant&&{color:I.palette.text.primary,lineHeight:I.typography.pxToRem(24),fontWeight:I.typography.fontWeightMedium},"body"===e.variant&&{color:I.palette.text.primary},"footer"===e.variant&&{color:I.palette.text.secondary,lineHeight:I.typography.pxToRem(21),fontSize:I.typography.pxToRem(12)},"small"===e.size&&(0,t.Z)({padding:"6px 16px"},"&.".concat(tI.paddingCheckbox),{width:24,padding:"0 12px 0 16px","& > *":{padding:0}}),"checkbox"===e.padding&&{width:48,padding:"0 0 0 4px"},"none"===e.padding&&{padding:0},"left"===e.align&&{textAlign:"left"},"center"===e.align&&{textAlign:"center"},"right"===e.align&&{textAlign:"right",flexDirection:"row-reverse"},"justify"===e.align&&{textAlign:"justify"},e.stickyHeader&&{position:"sticky",top:0,zIndex:2,backgroundColor:I.palette.background.default})})),aI=g.forwardRef((function(I,e){var C,n=(0,ig.Z)({props:I,name:"MuiTableCell"}),t=n.align,l=void 0===t?"inherit":t,o=n.className,a=n.component,r=n.padding,c=n.scope,A=n.size,d=n.sortDirection,u=n.variant,s=(0,gg.Z)(n,lI),m=g.useContext(xg),Z=g.useContext(Lg),b=Z&&"head"===Z.variant;C=a||(b?"th":"td");var p=c;!p&&b&&(p="col");var G=u||Z&&Z.variant,h=(0,i.Z)({},n,{align:l,component:C,padding:r||(m&&m.padding?m.padding:"normal"),size:A||(m&&m.size?m.size:"medium"),sortDirection:d,stickyHeader:"head"===G&&m&&m.stickyHeader,variant:G}),y=function(g){var I=g.classes,e=g.variant,C=g.align,n=g.padding,t=g.size,l={root:["root",e,g.stickyHeader&&"stickyHeader","inherit"!==C&&"align".concat((0,Rg.Z)(C)),"normal"!==n&&"padding".concat((0,Rg.Z)(n)),"size".concat((0,Rg.Z)(t))]};return(0,og.Z)(l,nI,I)}(h),B=null;return d&&(B="asc"===d?"ascending":"descending"),(0,mg.jsx)(oI,(0,i.Z)({as:C,ref:e,className:(0,Ig.Z)(y.root,o),"aria-sort":B,scope:p,ownerState:h},s))})),iI=aI;function rI(g){return(0,cg.Z)("MuiCard",g)}(0,Ag.Z)("MuiCard",["root"]);var cI=["className","raised"],AI=(0,ag.ZP)(vg,{name:"MuiCard",slot:"Root",overridesResolver:function(g,I){return I.root}})((function(){return{overflow:"hidden"}})),dI=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiCard"}),C=e.className,n=e.raised,t=void 0!==n&&n,l=(0,gg.Z)(e,cI),o=(0,i.Z)({},e,{raised:t}),a=function(g){var I=g.classes;return(0,og.Z)({root:["root"]},rI,I)}(o);return(0,mg.jsx)(AI,(0,i.Z)({className:(0,Ig.Z)(a.root,C),elevation:t?8:void 0,ref:I,ownerState:o},l))})),uI=e(594),sI=e(104),mI=e(886),ZI=["className","component"];function bI(){var I=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=I.defaultTheme,C=I.defaultClassName,n=void 0===C?"MuiBox-root":C,t=I.generateClassName,l=I.styleFunctionSx,o=void 0===l?sI.Z:l,a=(0,uI.ZP)("div")(o),r=g.forwardRef((function(g,I){var C=(0,mI.Z)(e),l=lg(g),o=l.className,r=l.component,c=void 0===r?"div":r,A=(0,gg.Z)(l,ZI);return(0,mg.jsx)(a,(0,i.Z)({as:c,ref:I,className:(0,Ig.Z)(o,t?t(n):n),theme:C},A))}));return r}var pI=e(7125),GI=bI({defaultTheme:(0,e(7107).Z)(),defaultClassName:"MuiBox-root",generateClassName:pI.Z.generate});function hI(g){return(0,cg.Z)("MuiCardContent",g)}(0,Ag.Z)("MuiCardContent",["root"]);var yI=["className","component"],BI=(0,ag.ZP)("div",{name:"MuiCardContent",slot:"Root",overridesResolver:function(g,I){return I.root}})((function(){return{padding:16,"&:last-child":{paddingBottom:24}}})),WI=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiCardContent"}),C=e.className,n=e.component,t=void 0===n?"div":n,l=(0,gg.Z)(e,yI),o=(0,i.Z)({},e,{component:t}),a=function(g){var I=g.classes;return(0,og.Z)({root:["root"]},hI,I)}(o);return(0,mg.jsx)(BI,(0,i.Z)({as:t,className:(0,Ig.Z)(a.root,C),ownerState:o,ref:I},l))})),SI=e(2071),VI=e(9683),vI=e(8221);function RI(g,I){return I||(I=g.slice(0)),Object.freeze(Object.defineProperties(g,{raw:{value:Object.freeze(I)}}))}function XI(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function fI(g,I){return fI=Object.setPrototypeOf||function(g,I){return g.__proto__=I,g},fI(g,I)}function kI(g,I){g.prototype=Object.create(I.prototype),g.prototype.constructor=g,fI(g,I)}var JI=g.createContext(null);function YI(I,e){var C=Object.create(null);return I&&g.Children.map(I,(function(g){return g})).forEach((function(I){C[I.key]=function(I){return e&&(0,g.isValidElement)(I)?e(I):I}(I)})),C}function HI(g,I,e){return null!=e[I]?e[I]:g.props[I]}function wI(I,e,C){var n=YI(I.children),t=function(g,I){function e(e){return e in I?I[e]:g[e]}g=g||{},I=I||{};var C,n=Object.create(null),t=[];for(var l in g)l in I?t.length&&(n[l]=t,t=[]):t.push(l);var o={};for(var a in I){if(n[a])for(C=0;C<n[a].length;C++){var i=n[a][C];o[n[a][C]]=e(i)}o[a]=e(a)}for(C=0;C<t.length;C++)o[t[C]]=e(t[C]);return o}(e,n);return Object.keys(t).forEach((function(l){var o=t[l];if((0,g.isValidElement)(o)){var a=l in e,i=l in n,r=e[l],c=(0,g.isValidElement)(r)&&!r.props.in;!i||a&&!c?i||!a||c?i&&a&&(0,g.isValidElement)(r)&&(t[l]=(0,g.cloneElement)(o,{onExited:C.bind(null,o),in:r.props.in,exit:HI(o,"exit",I),enter:HI(o,"enter",I)})):t[l]=(0,g.cloneElement)(o,{in:!1}):t[l]=(0,g.cloneElement)(o,{onExited:C.bind(null,o),in:!0,exit:HI(o,"exit",I),enter:HI(o,"enter",I)})}})),t}var KI=Object.values||function(g){return Object.keys(g).map((function(I){return g[I]}))},FI=function(I){function e(g,e){var C,n=(C=I.call(this,g,e)||this).handleExited.bind(XI(C));return C.state={contextValue:{isMounting:!0},handleExited:n,firstRender:!0},C}kI(e,I);var C=e.prototype;return C.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},C.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(I,e){var C,n,t=e.children,l=e.handleExited;return{children:e.firstRender?(C=I,n=l,YI(C.children,(function(I){return(0,g.cloneElement)(I,{onExited:n.bind(null,I),in:!0,appear:HI(I,"appear",C),enter:HI(I,"enter",C),exit:HI(I,"exit",C)})}))):wI(I,t,l),firstRender:!1}},C.handleExited=function(g,I){var e=YI(this.props.children);g.key in e||(g.props.onExited&&g.props.onExited(I),this.mounted&&this.setState((function(I){var e=(0,i.Z)({},I.children);return delete e[g.key],{children:e}})))},C.render=function(){var I=this.props,e=I.component,C=I.childFactory,n=(0,gg.Z)(I,["component","childFactory"]),t=this.state.contextValue,l=KI(this.state.children).map(C);return delete n.appear,delete n.enter,delete n.exit,null===e?g.createElement(JI.Provider,{value:t},l):g.createElement(JI.Provider,{value:t},g.createElement(e,n,l))},e}(g.Component);FI.propTypes={},FI.defaultProps={component:"div",childFactory:function(g){return g}};var NI=FI,xI=(e(8677),e(1688)),zI=(e(2110),e(5438)),MI=e(1346),EI=e(6567),UI=I.useInsertionEffect?I.useInsertionEffect:g.useLayoutEffect,QI=(0,xI.w)((function(I,e){var C=I.styles,n=(0,MI.O)([C],void 0,(0,g.useContext)(xI.T)),t=(0,g.useRef)();return UI((function(){var g=e.key+"-global",I=new EI.m({key:g,nonce:e.sheet.nonce,container:e.sheet.container,speedy:e.sheet.isSpeedy}),C=!1,l=document.querySelector('style[data-emotion="'+g+" "+n.name+'"]');return e.sheet.tags.length&&(I.before=e.sheet.tags[0]),null!==l&&(C=!0,l.setAttribute("data-emotion",g),I.hydrate([l])),t.current=[I,C],function(){I.flush()}}),[e]),UI((function(){var g=t.current,I=g[0];if(g[1])g[1]=!1;else{if(void 0!==n.next&&(0,zI.My)(e,n.next,!0),I.tags.length){var C=I.tags[I.tags.length-1].nextElementSibling;I.before=C,I.flush()}e.insert("",n,I,!1)}}),[e,n.name]),null}));function LI(){for(var g=arguments.length,I=new Array(g),e=0;e<g;e++)I[e]=arguments[e];return(0,MI.O)(I)}var TI=function(){var g=LI.apply(void 0,arguments),I="animation-"+g.name;return{name:I,styles:"@keyframes "+I+"{"+g.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};var DI=function(I){var e=I.className,C=I.classes,t=I.pulsate,l=void 0!==t&&t,o=I.rippleX,a=I.rippleY,i=I.rippleSize,r=I.in,c=I.onExited,A=I.timeout,d=g.useState(!1),u=(0,n.Z)(d,2),s=u[0],m=u[1],Z=(0,Ig.Z)(e,C.ripple,C.rippleVisible,l&&C.ripplePulsate),b={width:i,height:i,top:-i/2+a,left:-i/2+o},p=(0,Ig.Z)(C.child,s&&C.childLeaving,l&&C.childPulsate);return r||s||m(!0),g.useEffect((function(){if(!r&&null!=c){var g=setTimeout(c,A);return function(){clearTimeout(g)}}}),[c,r,A]),(0,mg.jsx)("span",{className:Z,style:b,children:(0,mg.jsx)("span",{className:p})})};var jI,PI,OI,qI,_I,$I,ge,Ie,ee=(0,Ag.Z)("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),Ce=["center","classes","className"],ne=TI(_I||(_I=jI||(jI=RI(["\n  0% {\n    transform: scale(0);\n    opacity: 0.1;\n  }\n\n  100% {\n    transform: scale(1);\n    opacity: 0.3;\n  }\n"])))),te=TI($I||($I=PI||(PI=RI(["\n  0% {\n    opacity: 1;\n  }\n\n  100% {\n    opacity: 0;\n  }\n"])))),le=TI(ge||(ge=OI||(OI=RI(["\n  0% {\n    transform: scale(1);\n  }\n\n  50% {\n    transform: scale(0.92);\n  }\n\n  100% {\n    transform: scale(1);\n  }\n"])))),oe=(0,ag.ZP)("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),ae=(0,ag.ZP)(DI,{name:"MuiTouchRipple",slot:"Ripple"})(Ie||(Ie=qI||(qI=RI(["\n  opacity: 0;\n  position: absolute;\n\n  &."," {\n    opacity: 0.3;\n    transform: scale(1);\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  &."," {\n    animation-duration: ","ms;\n  }\n\n  & ."," {\n    opacity: 1;\n    display: block;\n    width: 100%;\n    height: 100%;\n    border-radius: 50%;\n    background-color: currentColor;\n  }\n\n  & ."," {\n    opacity: 0;\n    animation-name: ",";\n    animation-duration: ","ms;\n    animation-timing-function: ",";\n  }\n\n  & ."," {\n    position: absolute;\n    /* @noflip */\n    left: 0px;\n    top: 0;\n    animation-name: ",";\n    animation-duration: 2500ms;\n    animation-timing-function: ",";\n    animation-iteration-count: infinite;\n    animation-delay: 200ms;\n  }\n"]))),ee.rippleVisible,ne,550,(function(g){return g.theme.transitions.easing.easeInOut}),ee.ripplePulsate,(function(g){return g.theme.transitions.duration.shorter}),ee.child,ee.childLeaving,te,550,(function(g){return g.theme.transitions.easing.easeInOut}),ee.childPulsate,le,(function(g){return g.theme.transitions.easing.easeInOut})),ie=g.forwardRef((function(I,e){var C=(0,ig.Z)({props:I,name:"MuiTouchRipple"}),t=C.center,l=void 0!==t&&t,o=C.classes,a=void 0===o?{}:o,r=C.className,c=(0,gg.Z)(C,Ce),A=g.useState([]),d=(0,n.Z)(A,2),u=d[0],s=d[1],m=g.useRef(0),Z=g.useRef(null);g.useEffect((function(){Z.current&&(Z.current(),Z.current=null)}),[u]);var b=g.useRef(!1),p=g.useRef(null),G=g.useRef(null),h=g.useRef(null);g.useEffect((function(){return function(){clearTimeout(p.current)}}),[]);var y=g.useCallback((function(g){var I=g.pulsate,e=g.rippleX,C=g.rippleY,n=g.rippleSize,t=g.cb;s((function(g){return[].concat((0,$.Z)(g),[(0,mg.jsx)(ae,{classes:{ripple:(0,Ig.Z)(a.ripple,ee.ripple),rippleVisible:(0,Ig.Z)(a.rippleVisible,ee.rippleVisible),ripplePulsate:(0,Ig.Z)(a.ripplePulsate,ee.ripplePulsate),child:(0,Ig.Z)(a.child,ee.child),childLeaving:(0,Ig.Z)(a.childLeaving,ee.childLeaving),childPulsate:(0,Ig.Z)(a.childPulsate,ee.childPulsate)},timeout:550,pulsate:I,rippleX:e,rippleY:C,rippleSize:n},m.current)])})),m.current+=1,Z.current=t}),[a]),B=g.useCallback((function(){var g=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0,C=I.pulsate,n=void 0!==C&&C,t=I.center,o=void 0===t?l||I.pulsate:t,a=I.fakeElement,i=void 0!==a&&a;if("mousedown"===g.type&&b.current)b.current=!1;else{"touchstart"===g.type&&(b.current=!0);var r,c,A,d=i?null:h.current,u=d?d.getBoundingClientRect():{width:0,height:0,left:0,top:0};if(o||0===g.clientX&&0===g.clientY||!g.clientX&&!g.touches)r=Math.round(u.width/2),c=Math.round(u.height/2);else{var s=g.touches?g.touches[0]:g,m=s.clientX,Z=s.clientY;r=Math.round(m-u.left),c=Math.round(Z-u.top)}if(o)(A=Math.sqrt((2*Math.pow(u.width,2)+Math.pow(u.height,2))/3))%2===0&&(A+=1);else{var B=2*Math.max(Math.abs((d?d.clientWidth:0)-r),r)+2,W=2*Math.max(Math.abs((d?d.clientHeight:0)-c),c)+2;A=Math.sqrt(Math.pow(B,2)+Math.pow(W,2))}g.touches?null===G.current&&(G.current=function(){y({pulsate:n,rippleX:r,rippleY:c,rippleSize:A,cb:e})},p.current=setTimeout((function(){G.current&&(G.current(),G.current=null)}),80)):y({pulsate:n,rippleX:r,rippleY:c,rippleSize:A,cb:e})}}),[l,y]),W=g.useCallback((function(){B({},{pulsate:!0})}),[B]),S=g.useCallback((function(g,I){if(clearTimeout(p.current),"touchend"===g.type&&G.current)return G.current(),G.current=null,void(p.current=setTimeout((function(){S(g,I)})));G.current=null,s((function(g){return g.length>0?g.slice(1):g})),Z.current=I}),[]);return g.useImperativeHandle(e,(function(){return{pulsate:W,start:B,stop:S}}),[W,B,S]),(0,mg.jsx)(oe,(0,i.Z)({className:(0,Ig.Z)(a.root,ee.root,r),ref:h},c,{children:(0,mg.jsx)(NI,{component:null,exit:!0,children:u})}))})),re=ie;function ce(g){return(0,cg.Z)("MuiButtonBase",g)}var Ae,de=(0,Ag.Z)("MuiButtonBase",["root","disabled","focusVisible"]),ue=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],se=(0,ag.ZP)("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:function(g,I){return I.root}})((Ae={display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"}},(0,t.Z)(Ae,"&.".concat(de.disabled),{pointerEvents:"none",cursor:"default"}),(0,t.Z)(Ae,"@media print",{colorAdjust:"exact"}),Ae)),me=g.forwardRef((function(I,e){var C=(0,ig.Z)({props:I,name:"MuiButtonBase"}),t=C.action,l=C.centerRipple,o=void 0!==l&&l,a=C.children,r=C.className,c=C.component,A=void 0===c?"button":c,d=C.disabled,u=void 0!==d&&d,s=C.disableRipple,m=void 0!==s&&s,Z=C.disableTouchRipple,b=void 0!==Z&&Z,p=C.focusRipple,G=void 0!==p&&p,h=C.LinkComponent,y=void 0===h?"a":h,B=C.onBlur,W=C.onClick,S=C.onContextMenu,V=C.onDragLeave,v=C.onFocus,R=C.onFocusVisible,X=C.onKeyDown,f=C.onKeyUp,k=C.onMouseDown,J=C.onMouseLeave,Y=C.onMouseUp,H=C.onTouchEnd,w=C.onTouchMove,K=C.onTouchStart,F=C.tabIndex,N=void 0===F?0:F,x=C.TouchRippleProps,z=C.touchRippleRef,M=C.type,E=(0,gg.Z)(C,ue),U=g.useRef(null),Q=g.useRef(null),L=(0,SI.Z)(Q,z),T=(0,vI.Z)(),D=T.isFocusVisibleRef,j=T.onFocus,P=T.onBlur,O=T.ref,q=g.useState(!1),_=(0,n.Z)(q,2),$=_[0],eg=_[1];function Cg(g,I){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b;return(0,VI.Z)((function(C){return I&&I(C),!e&&Q.current&&Q.current[g](C),!0}))}u&&$&&eg(!1),g.useImperativeHandle(t,(function(){return{focusVisible:function(){eg(!0),U.current.focus()}}}),[]),g.useEffect((function(){$&&G&&!m&&Q.current.pulsate()}),[m,G,$]);var ng=Cg("start",k),tg=Cg("stop",S),lg=Cg("stop",V),ag=Cg("stop",Y),rg=Cg("stop",(function(g){$&&g.preventDefault(),J&&J(g)})),cg=Cg("start",K),Ag=Cg("stop",H),dg=Cg("stop",w),ug=Cg("stop",(function(g){P(g),!1===D.current&&eg(!1),B&&B(g)}),!1),sg=(0,VI.Z)((function(g){U.current||(U.current=g.currentTarget),j(g),!0===D.current&&(eg(!0),R&&R(g)),v&&v(g)})),Zg=function(){var g=U.current;return A&&"button"!==A&&!("A"===g.tagName&&g.href)},bg=g.useRef(!1),pg=(0,VI.Z)((function(g){G&&!bg.current&&$&&Q.current&&" "===g.key&&(bg.current=!0,Q.current.stop(g,(function(){Q.current.start(g)}))),g.target===g.currentTarget&&Zg()&&" "===g.key&&g.preventDefault(),X&&X(g),g.target===g.currentTarget&&Zg()&&"Enter"===g.key&&!u&&(g.preventDefault(),W&&W(g))})),Gg=(0,VI.Z)((function(g){G&&" "===g.key&&Q.current&&$&&!g.defaultPrevented&&(bg.current=!1,Q.current.stop(g,(function(){Q.current.pulsate(g)}))),f&&f(g),W&&g.target===g.currentTarget&&Zg()&&" "===g.key&&!g.defaultPrevented&&W(g)})),hg=A;"button"===hg&&(E.href||E.to)&&(hg=y);var yg={};"button"===hg?(yg.type=void 0===M?"button":M,yg.disabled=u):(E.href||E.to||(yg.role="button"),u&&(yg["aria-disabled"]=u));var Bg=(0,SI.Z)(O,U),Wg=(0,SI.Z)(e,Bg),Sg=g.useState(!1),Vg=(0,n.Z)(Sg,2),vg=Vg[0],Rg=Vg[1];g.useEffect((function(){Rg(!0)}),[]);var Xg=vg&&!m&&!u;var fg=(0,i.Z)({},C,{centerRipple:o,component:A,disabled:u,disableRipple:m,disableTouchRipple:b,focusRipple:G,tabIndex:N,focusVisible:$}),kg=function(g){var I=g.disabled,e=g.focusVisible,C=g.focusVisibleClassName,n=g.classes,t={root:["root",I&&"disabled",e&&"focusVisible"]},l=(0,og.Z)(t,ce,n);return e&&C&&(l.root+=" ".concat(C)),l}(fg);return(0,mg.jsxs)(se,(0,i.Z)({as:hg,className:(0,Ig.Z)(kg.root,r),ownerState:fg,onBlur:ug,onClick:W,onContextMenu:tg,onFocus:sg,onKeyDown:pg,onKeyUp:Gg,onMouseDown:ng,onMouseLeave:rg,onMouseUp:ag,onDragLeave:lg,onTouchEnd:Ag,onTouchMove:dg,onTouchStart:cg,ref:Wg,tabIndex:u?-1:N,type:M},yg,E,{children:[a,Xg?(0,mg.jsx)(re,(0,i.Z)({ref:L,center:o},x)):null]}))})),Ze=me;function be(g){return(0,cg.Z)("MuiIconButton",g)}var pe=(0,Ag.Z)("MuiIconButton",["root","disabled","colorInherit","colorPrimary","colorSecondary","edgeStart","edgeEnd","sizeSmall","sizeMedium","sizeLarge"]),Ge=["edge","children","className","color","disabled","disableFocusRipple","size"],he=(0,ag.ZP)(Ze,{name:"MuiIconButton",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,"default"!==e.color&&I["color".concat((0,Rg.Z)(e.color))],e.edge&&I["edge".concat((0,Rg.Z)(e.edge))],I["size".concat((0,Rg.Z)(e.size))]]}})((function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({textAlign:"center",flex:"0 0 auto",fontSize:I.typography.pxToRem(24),padding:8,borderRadius:"50%",overflow:"visible",color:I.palette.action.active,transition:I.transitions.create("background-color",{duration:I.transitions.duration.shortest})},!e.disableRipple&&{"&:hover":{backgroundColor:(0,yg.Fq)(I.palette.action.active,I.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"start"===e.edge&&{marginLeft:"small"===e.size?-3:-12},"end"===e.edge&&{marginRight:"small"===e.size?-3:-12})}),(function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({},"inherit"===e.color&&{color:"inherit"},"inherit"!==e.color&&"default"!==e.color&&(0,i.Z)({color:I.palette[e.color].main},!e.disableRipple&&{"&:hover":{backgroundColor:(0,yg.Fq)(I.palette[e.color].main,I.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}}),"small"===e.size&&{padding:5,fontSize:I.typography.pxToRem(18)},"large"===e.size&&{padding:12,fontSize:I.typography.pxToRem(28)},(0,t.Z)({},"&.".concat(pe.disabled),{backgroundColor:"transparent",color:I.palette.action.disabled}))})),ye=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiIconButton"}),C=e.edge,n=void 0!==C&&C,t=e.children,l=e.className,o=e.color,a=void 0===o?"default":o,r=e.disabled,c=void 0!==r&&r,A=e.disableFocusRipple,d=void 0!==A&&A,u=e.size,s=void 0===u?"medium":u,m=(0,gg.Z)(e,Ge),Z=(0,i.Z)({},e,{edge:n,color:a,disabled:c,disableFocusRipple:d,size:s}),b=function(g){var I=g.classes,e=g.disabled,C=g.color,n=g.edge,t=g.size,l={root:["root",e&&"disabled","default"!==C&&"color".concat((0,Rg.Z)(C)),n&&"edge".concat((0,Rg.Z)(n)),"size".concat((0,Rg.Z)(t))]};return(0,og.Z)(l,be,I)}(Z);return(0,mg.jsx)(he,(0,i.Z)({className:(0,Ig.Z)(b.root,l),centerRipple:!0,focusRipple:!d,disabled:c,ref:I,ownerState:Z},m,{children:t}))})),Be=e(7781),We=e(5875);var Se=function(I){var e=I.devices,C=g.useState(null),t=(0,n.Z)(C,2),l=(t[0],t[1]),o=function(g){l(g.currentTarget)};return(0,mg.jsx)(Ng,{component:vg,style:{boxShadow:"none"},children:(0,mg.jsx)(Qg,{size:"small","aria-label":"a dense table",style:{borderCollapse:"separate",borderSpacing:"0 0.7em",boxShadow:"none"},children:(0,mg.jsx)(qg,{children:e.map((function(g){return(0,mg.jsx)(CI,{children:(0,mg.jsx)(iI,{component:"th",scope:"row",style:{border:"none",padding:"7px"},children:(0,mg.jsxs)(dI,{sx:{display:"flex",border:"1px solid #e0e0e0",textDecoration:"none",padding:"0 1em",boxShadow:"none"},children:[(0,mg.jsx)(GI,{sx:{display:"flex",flexDirection:"column",width:"100%"},children:(0,mg.jsxs)(WI,{sx:{flex:"1 0 auto",padding:"1em 0"},children:[(0,mg.jsx)(Hg,{component:"div",variant:"h5",sx:{textTransform:"capitalize"},children:g.name}),(0,mg.jsxs)(Hg,{variant:"subtitle1",color:"text.secondary",component:"div",children:["Lite info ",(0,mg.jsx)("b",{children:g.installed})]})]})}),(0,mg.jsxs)(GI,{sx:{display:"flex",flexDirection:"column",margin:"auto",gap:"1em",alignItems:"flex-start"},children:[(0,mg.jsx)(ye,{title:g.name,variant:"contained",onClick:o,sx:{width:"fit-content",alignSelf:"flex-end"},children:(0,mg.jsx)(Be.Z,{})}),(0,mg.jsxs)(GI,{style:{display:"flex",flexDirection:"row",margin:"0 auto",textTransform:"capitalize",alignSelf:"flex-end"},children:[(0,mg.jsx)(Hg,{variant:"subtitle2",color:"text.secondary",component:"div",children:g.status}),(0,mg.jsx)(We.Z,{sx:{fontSize:20,margin:"auto",color:"red",padding:"0 0.45em"}})]})]})]})})})}))})})})};var Ve=function(I){var e=I.errors,C=g.useState(null),t=(0,n.Z)(C,2);return t[0],t[1],(0,mg.jsx)(Ng,{component:vg,style:{boxShadow:"none"},children:(0,mg.jsx)(Qg,{size:"small","aria-label":"a dense table",style:{borderCollapse:"separate",borderSpacing:"0 0.7em",boxShadow:"none"},children:(0,mg.jsx)(qg,{children:e.map((function(g){return(0,mg.jsx)(CI,{children:(0,mg.jsx)(iI,{component:"th",scope:"row",style:{border:"none",padding:"7px"},children:(0,mg.jsx)(dI,{sx:{display:"flex",border:"1px solid #e0e0e0",textDecoration:"none",padding:"0 1em",boxShadow:"none",height:"7rem"},children:(0,mg.jsx)(GI,{sx:{display:"flex",flexDirection:"column",width:"100%"},children:(0,mg.jsxs)(WI,{sx:{flex:"1 0 auto",padding:"1em 0",margin:"0"},children:[(0,mg.jsx)(Hg,{component:"div",variant:"h5",sx:{textTransform:"capitalize"},children:g.name}),(0,mg.jsx)(Hg,{variant:"subtitle2",color:"text.secondary",component:"div",children:g.dateAndTime}),(0,mg.jsx)(Hg,{variant:"subtitle1",color:"text.secondary",component:"div",children:g.msg})]})})})})},g.name)}))})})})},ve=function(g){g.text,g.cookies;var I=g.t;function e(g,I,e,C,n){return{name:g,calories:I,status:e,carbs:C,protein:n}}var C=[e("hiss Entr\xe9 1",18,"status",24,4),e("temperatursensor 3",18,"status",24,4),e("d\xf6rr 3",237,"status",37,4.3)];return(0,mg.jsx)(mg.Fragment,{children:(0,mg.jsxs)(hg,{container:!0,spacing:5,children:[(0,mg.jsx)(hg,{item:!0,xs:12,md:6,children:(0,mg.jsxs)(vg,{elevation:3,style:{padding:"1rem"},children:[(0,mg.jsx)(Hg,{variant:"h3",component:"h2",children:I("failing")}),(0,mg.jsx)(Se,{devices:C})]})}),(0,mg.jsx)(hg,{item:!0,xs:12,md:6,children:(0,mg.jsxs)(vg,{elevation:4,style:{padding:"1rem",marginBottom:"1rem"},children:[(0,mg.jsx)(Hg,{variant:"h3",component:"h2",children:I("errMessages")}),(0,mg.jsx)(Ve,{errors:[{name:"hiss Entr\xe9 1",msg:"Error 1",status:"error",dateAndTime:"2020-01-01 12:00:00"},{name:"hiss Entr\xe9 2",msg:"Error 2",status:"Warning",dateAndTime:"2020-01-01 12:00:00"},{name:"hiss Entr\xe9 3",msg:"Error 3",status:"error",dateAndTime:"2020-01-01 12:00:00"}]})]})})]})})};function Re(g){return(0,cg.Z)("MuiFab",g)}var Xe=(0,Ag.Z)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]),fe=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],ke=(0,ag.ZP)(Ze,{name:"MuiFab",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,I[e.variant],I["size".concat((0,Rg.Z)(e.size))],"inherit"===e.color&&I.colorInherit,I[(0,Rg.Z)(e.size)],I[e.color]]}})((function(g){var I,e=g.theme,C=g.ownerState;return(0,i.Z)({},e.typography.button,(I={minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,boxShadow:e.shadows[6],"&:active":{boxShadow:e.shadows[12]},color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],"&:hover":{backgroundColor:e.palette.grey.A100,"@media (hover: none)":{backgroundColor:e.palette.grey[300]},textDecoration:"none"}},(0,t.Z)(I,"&.".concat(Xe.focusVisible),{boxShadow:e.shadows[6]}),(0,t.Z)(I,"&.".concat(Xe.disabled),{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground}),I),"small"===C.size&&{width:40,height:40},"medium"===C.size&&{width:48,height:48},"extended"===C.variant&&{borderRadius:24,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},"extended"===C.variant&&"small"===C.size&&{width:"auto",padding:"0 8px",borderRadius:17,minWidth:34,height:34},"extended"===C.variant&&"medium"===C.size&&{width:"auto",padding:"0 16px",borderRadius:20,minWidth:40,height:40},"inherit"===C.color&&{color:"inherit"})}),(function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({},"inherit"!==e.color&&"default"!==e.color&&null!=I.palette[e.color]&&{color:I.palette[e.color].contrastText,backgroundColor:I.palette[e.color].main,"&:hover":{backgroundColor:I.palette[e.color].dark,"@media (hover: none)":{backgroundColor:I.palette[e.color].main}}})})),Je=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiFab"}),C=e.children,n=e.className,t=e.color,l=void 0===t?"default":t,o=e.component,a=void 0===o?"button":o,r=e.disabled,c=void 0!==r&&r,A=e.disableFocusRipple,d=void 0!==A&&A,u=e.focusVisibleClassName,s=e.size,m=void 0===s?"large":s,Z=e.variant,b=void 0===Z?"circular":Z,p=(0,gg.Z)(e,fe),G=(0,i.Z)({},e,{color:l,component:a,disabled:c,disableFocusRipple:d,size:m,variant:b}),h=function(g){var I=g.color,e=g.variant,C=g.classes,n=g.size,t={root:["root",e,"size".concat((0,Rg.Z)(n)),"inherit"===I?"colorInherit":I]};return(0,og.Z)(t,Re,C)}(G);return(0,mg.jsx)(ke,(0,i.Z)({className:(0,Ig.Z)(h.root,n),component:a,disabled:c,focusRipple:!d,focusVisibleClassName:(0,Ig.Z)(h.focusVisible,u),ownerState:G,ref:I},p,{children:C}))})),Ye=e(2419),He=e(1960);function we(g,I){return{category:g,installed:I}}var Ke=[we("hissensorer",4),we("temperatursensorer",8),we("d\xf6rrsensorer",10)],Fe=function(g){g.text;return(0,mg.jsxs)("main",{children:[(0,mg.jsx)("h1",{children:"'F\xf6retaget's sensorer"}),(0,mg.jsx)(GI,{style:{position:"fixed",bottom:0,right:0},sx:{"& > :not(style)":{m:3}},children:(0,mg.jsx)(Je,{size:"large",color:"primary","aria-label":"add",children:(0,mg.jsx)(Ye.Z,{})})}),(0,mg.jsx)(Ng,{component:vg,style:{boxShadow:"none"},children:(0,mg.jsx)(Qg,{size:"small","aria-label":"a dense table",style:{borderCollapse:"separate",borderSpacing:"0 0.7em",boxShadow:"none"},children:(0,mg.jsx)(qg,{children:Ke.map((function(g){return(0,mg.jsx)(CI,{children:(0,mg.jsx)(iI,{component:"th",scope:"row",style:{border:"none",padding:"7px"},children:(0,mg.jsxs)(dI,{component:_,to:"/devices/"+g.category,sx:{display:"flex",border:"1px solid #F0F0F0",textDecoration:"none",padding:"0.5em",boxShadow:"5px 5px 5px #e0e0e0",gap:"0.5em"},children:[(0,mg.jsx)(GI,{sx:{display:"flex",flexDirection:"column",width:"fit-content",margin:"auto 0",padding:"1em"},children:(0,mg.jsx)(He.Z,{sx:{fontSize:30,margin:"0 auto",color:"black",backgroundColor:"#F0F0F0",borderRadius:"50%",padding:"0.2em"},children:"sensorIcon"})}),(0,mg.jsx)(GI,{sx:{display:"flex",flexDirection:"column",width:"100%"},children:(0,mg.jsxs)(WI,{sx:{flex:"1 0 auto",padding:"1em 0"},children:[(0,mg.jsx)(Hg,{component:"div",variant:"h5",sx:{textTransform:"capitalize"},children:g.category}),(0,mg.jsxs)(Hg,{variant:"subtitle1",color:"text.secondary",component:"div",sx:{color:"black"},children:["Antal installerade sensorer: ",(0,mg.jsx)("b",{children:g.installed})]})]})})]})})})}))})})})]})},Ne=e(5735);function xe(g){return(0,cg.Z)("MuiButton",g)}var ze=(0,Ag.Z)("MuiButton",["root","text","textInherit","textPrimary","textSecondary","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","contained","containedInherit","containedPrimary","containedSecondary","disableElevation","focusVisible","disabled","colorInherit","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]);var Me=g.createContext({}),Ee=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],Ue=function(g){return(0,i.Z)({},"small"===g.size&&{"& > *:nth-of-type(1)":{fontSize:18}},"medium"===g.size&&{"& > *:nth-of-type(1)":{fontSize:20}},"large"===g.size&&{"& > *:nth-of-type(1)":{fontSize:22}})},Qe=(0,ag.ZP)(Ze,{shouldForwardProp:function(g){return(0,ag.FO)(g)||"classes"===g},name:"MuiButton",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,I[e.variant],I["".concat(e.variant).concat((0,Rg.Z)(e.color))],I["size".concat((0,Rg.Z)(e.size))],I["".concat(e.variant,"Size").concat((0,Rg.Z)(e.size))],"inherit"===e.color&&I.colorInherit,e.disableElevation&&I.disableElevation,e.fullWidth&&I.fullWidth]}})((function(g){var I,e=g.theme,C=g.ownerState;return(0,i.Z)({},e.typography.button,(I={minWidth:64,padding:"6px 16px",borderRadius:e.shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":(0,i.Z)({textDecoration:"none",backgroundColor:(0,yg.Fq)(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"text"===C.variant&&"inherit"!==C.color&&{backgroundColor:(0,yg.Fq)(e.palette[C.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"outlined"===C.variant&&"inherit"!==C.color&&{border:"1px solid ".concat(e.palette[C.color].main),backgroundColor:(0,yg.Fq)(e.palette[C.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},"contained"===C.variant&&{backgroundColor:e.palette.grey.A100,boxShadow:e.shadows[4],"@media (hover: none)":{boxShadow:e.shadows[2],backgroundColor:e.palette.grey[300]}},"contained"===C.variant&&"inherit"!==C.color&&{backgroundColor:e.palette[C.color].dark,"@media (hover: none)":{backgroundColor:e.palette[C.color].main}}),"&:active":(0,i.Z)({},"contained"===C.variant&&{boxShadow:e.shadows[8]})},(0,t.Z)(I,"&.".concat(ze.focusVisible),(0,i.Z)({},"contained"===C.variant&&{boxShadow:e.shadows[6]})),(0,t.Z)(I,"&.".concat(ze.disabled),(0,i.Z)({color:e.palette.action.disabled},"outlined"===C.variant&&{border:"1px solid ".concat(e.palette.action.disabledBackground)},"outlined"===C.variant&&"secondary"===C.color&&{border:"1px solid ".concat(e.palette.action.disabled)},"contained"===C.variant&&{color:e.palette.action.disabled,boxShadow:e.shadows[0],backgroundColor:e.palette.action.disabledBackground})),I),"text"===C.variant&&{padding:"6px 8px"},"text"===C.variant&&"inherit"!==C.color&&{color:e.palette[C.color].main},"outlined"===C.variant&&{padding:"5px 15px",border:"1px solid ".concat("light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)")},"outlined"===C.variant&&"inherit"!==C.color&&{color:e.palette[C.color].main,border:"1px solid ".concat((0,yg.Fq)(e.palette[C.color].main,.5))},"contained"===C.variant&&{color:e.palette.getContrastText(e.palette.grey[300]),backgroundColor:e.palette.grey[300],boxShadow:e.shadows[2]},"contained"===C.variant&&"inherit"!==C.color&&{color:e.palette[C.color].contrastText,backgroundColor:e.palette[C.color].main},"inherit"===C.color&&{color:"inherit",borderColor:"currentColor"},"small"===C.size&&"text"===C.variant&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},"large"===C.size&&"text"===C.variant&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},"small"===C.size&&"outlined"===C.variant&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},"large"===C.size&&"outlined"===C.variant&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},"small"===C.size&&"contained"===C.variant&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},"large"===C.size&&"contained"===C.variant&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},C.fullWidth&&{width:"100%"})}),(function(g){var I;return g.ownerState.disableElevation&&(I={boxShadow:"none","&:hover":{boxShadow:"none"}},(0,t.Z)(I,"&.".concat(ze.focusVisible),{boxShadow:"none"}),(0,t.Z)(I,"&:active",{boxShadow:"none"}),(0,t.Z)(I,"&.".concat(ze.disabled),{boxShadow:"none"}),I)})),Le=(0,ag.ZP)("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:function(g,I){var e=g.ownerState;return[I.startIcon,I["iconSize".concat((0,Rg.Z)(e.size))]]}})((function(g){var I=g.ownerState;return(0,i.Z)({display:"inherit",marginRight:8,marginLeft:-4},"small"===I.size&&{marginLeft:-2},Ue(I))})),Te=(0,ag.ZP)("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:function(g,I){var e=g.ownerState;return[I.endIcon,I["iconSize".concat((0,Rg.Z)(e.size))]]}})((function(g){var I=g.ownerState;return(0,i.Z)({display:"inherit",marginRight:-4,marginLeft:8},"small"===I.size&&{marginRight:-2},Ue(I))})),De=g.forwardRef((function(I,e){var C=g.useContext(Me),n=(0,Ne.Z)(C,I),t=(0,ig.Z)({props:n,name:"MuiButton"}),l=t.children,o=t.color,a=void 0===o?"primary":o,r=t.component,c=void 0===r?"button":r,A=t.className,d=t.disabled,u=void 0!==d&&d,s=t.disableElevation,m=void 0!==s&&s,Z=t.disableFocusRipple,b=void 0!==Z&&Z,p=t.endIcon,G=t.focusVisibleClassName,h=t.fullWidth,y=void 0!==h&&h,B=t.size,W=void 0===B?"medium":B,S=t.startIcon,V=t.type,v=t.variant,R=void 0===v?"text":v,X=(0,gg.Z)(t,Ee),f=(0,i.Z)({},t,{color:a,component:c,disabled:u,disableElevation:m,disableFocusRipple:b,fullWidth:y,size:W,type:V,variant:R}),k=function(g){var I=g.color,e=g.disableElevation,C=g.fullWidth,n=g.size,t=g.variant,l=g.classes,o={root:["root",t,"".concat(t).concat((0,Rg.Z)(I)),"size".concat((0,Rg.Z)(n)),"".concat(t,"Size").concat((0,Rg.Z)(n)),"inherit"===I&&"colorInherit",e&&"disableElevation",C&&"fullWidth"],label:["label"],startIcon:["startIcon","iconSize".concat((0,Rg.Z)(n))],endIcon:["endIcon","iconSize".concat((0,Rg.Z)(n))]},a=(0,og.Z)(o,xe,l);return(0,i.Z)({},l,a)}(f),J=S&&(0,mg.jsx)(Le,{className:k.startIcon,ownerState:f,children:S}),Y=p&&(0,mg.jsx)(Te,{className:k.endIcon,ownerState:f,children:p});return(0,mg.jsxs)(Qe,(0,i.Z)({ownerState:f,className:(0,Ig.Z)(A,C.className),component:c,disabled:u,focusRipple:!b,focusVisibleClassName:(0,Ig.Z)(k.focusVisible,G),ref:e,type:V},X,{classes:k,children:[J,l,Y]}))})),je=e(3199),Pe=e(8301),Oe=e(7602),qe=!1,_e="unmounted",$e="exited",gC="entering",IC="entered",eC="exiting",CC=function(I){function e(g,e){var C;C=I.call(this,g,e)||this;var n,t=e&&!e.isMounting?g.enter:g.appear;return C.appearStatus=null,g.in?t?(n=$e,C.appearStatus=gC):n=IC:n=g.unmountOnExit||g.mountOnEnter?_e:$e,C.state={status:n},C.nextCallback=null,C}kI(e,I),e.getDerivedStateFromProps=function(g,I){return g.in&&I.status===_e?{status:$e}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(g){var I=null;if(g!==this.props){var e=this.state.status;this.props.in?e!==gC&&e!==IC&&(I=gC):e!==gC&&e!==IC||(I=eC)}this.updateStatus(!1,I)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var g,I,e,C=this.props.timeout;return g=I=e=C,null!=C&&"number"!==typeof C&&(g=C.exit,I=C.enter,e=void 0!==C.appear?C.appear:I),{exit:g,enter:I,appear:e}},n.updateStatus=function(g,I){void 0===g&&(g=!1),null!==I?(this.cancelNextCallback(),I===gC?this.performEnter(g):this.performExit()):this.props.unmountOnExit&&this.state.status===$e&&this.setState({status:_e})},n.performEnter=function(g){var I=this,e=this.props.enter,n=this.context?this.context.isMounting:g,t=this.props.nodeRef?[n]:[C.findDOMNode(this),n],l=t[0],o=t[1],a=this.getTimeouts(),i=n?a.appear:a.enter;!g&&!e||qe?this.safeSetState({status:IC},(function(){I.props.onEntered(l)})):(this.props.onEnter(l,o),this.safeSetState({status:gC},(function(){I.props.onEntering(l,o),I.onTransitionEnd(i,(function(){I.safeSetState({status:IC},(function(){I.props.onEntered(l,o)}))}))})))},n.performExit=function(){var g=this,I=this.props.exit,e=this.getTimeouts(),n=this.props.nodeRef?void 0:C.findDOMNode(this);I&&!qe?(this.props.onExit(n),this.safeSetState({status:eC},(function(){g.props.onExiting(n),g.onTransitionEnd(e.exit,(function(){g.safeSetState({status:$e},(function(){g.props.onExited(n)}))}))}))):this.safeSetState({status:$e},(function(){g.props.onExited(n)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(g,I){I=this.setNextCallback(I),this.setState(g,I)},n.setNextCallback=function(g){var I=this,e=!0;return this.nextCallback=function(C){e&&(e=!1,I.nextCallback=null,g(C))},this.nextCallback.cancel=function(){e=!1},this.nextCallback},n.onTransitionEnd=function(g,I){this.setNextCallback(I);var e=this.props.nodeRef?this.props.nodeRef.current:C.findDOMNode(this),n=null==g&&!this.props.addEndListener;if(e&&!n){if(this.props.addEndListener){var t=this.props.nodeRef?[this.nextCallback]:[e,this.nextCallback],l=t[0],o=t[1];this.props.addEndListener(l,o)}null!=g&&setTimeout(this.nextCallback,g)}else setTimeout(this.nextCallback,0)},n.render=function(){var I=this.state.status;if(I===_e)return null;var e=this.props,C=e.children,n=(e.in,e.mountOnEnter,e.unmountOnExit,e.appear,e.enter,e.exit,e.timeout,e.addEndListener,e.onEnter,e.onEntering,e.onEntered,e.onExit,e.onExiting,e.onExited,e.nodeRef,(0,gg.Z)(e,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return g.createElement(JI.Provider,{value:null},"function"===typeof C?C(I,n):g.cloneElement(g.Children.only(C),n))},e}(g.Component);function nC(){}CC.contextType=JI,CC.propTypes={},CC.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:nC,onEntering:nC,onEntered:nC,onExit:nC,onExiting:nC,onExited:nC},CC.UNMOUNTED=_e,CC.EXITED=$e,CC.ENTERING=gC,CC.ENTERED=IC,CC.EXITING=eC;var tC=CC,lC=e(6482);function oC(){return(0,mI.Z)(lC.Z)}var aC=function(g){return g.scrollTop};function iC(g,I){var e,C,n=g.timeout,t=g.easing,l=g.style,o=void 0===l?{}:l;return{duration:null!=(e=o.transitionDuration)?e:"number"===typeof n?n:n[I.mode]||0,easing:null!=(C=o.transitionTimingFunction)?C:"object"===typeof t?t[I.mode]:t,delay:o.transitionDelay}}var rC=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function cC(g){return"scale(".concat(g,", ").concat(Math.pow(g,2),")")}var AC={entering:{opacity:1,transform:cC(1)},entered:{opacity:1,transform:"none"}},dC=g.forwardRef((function(I,e){var C=I.addEndListener,n=I.appear,t=void 0===n||n,l=I.children,o=I.easing,a=I.in,r=I.onEnter,c=I.onEntered,A=I.onEntering,d=I.onExit,u=I.onExited,s=I.onExiting,m=I.style,Z=I.timeout,b=void 0===Z?"auto":Z,p=I.TransitionComponent,G=void 0===p?tC:p,h=(0,gg.Z)(I,rC),y=g.useRef(),B=g.useRef(),W=oC(),S=g.useRef(null),V=(0,SI.Z)(l.ref,e),v=(0,SI.Z)(S,V),R=function(g){return function(I){if(g){var e=S.current;void 0===I?g(e):g(e,I)}}},X=R(A),f=R((function(g,I){aC(g);var e,C=iC({style:m,timeout:b,easing:o},{mode:"enter"}),n=C.duration,t=C.delay,l=C.easing;"auto"===b?(e=W.transitions.getAutoHeightDuration(g.clientHeight),B.current=e):e=n,g.style.transition=[W.transitions.create("opacity",{duration:e,delay:t}),W.transitions.create("transform",{duration:.666*e,delay:t,easing:l})].join(","),r&&r(g,I)})),k=R(c),J=R(s),Y=R((function(g){var I,e=iC({style:m,timeout:b,easing:o},{mode:"exit"}),C=e.duration,n=e.delay,t=e.easing;"auto"===b?(I=W.transitions.getAutoHeightDuration(g.clientHeight),B.current=I):I=C,g.style.transition=[W.transitions.create("opacity",{duration:I,delay:n}),W.transitions.create("transform",{duration:.666*I,delay:n||.333*I,easing:t})].join(","),g.style.opacity="0",g.style.transform=cC(.75),d&&d(g)})),H=R(u);return g.useEffect((function(){return function(){clearTimeout(y.current)}}),[]),(0,mg.jsx)(G,(0,i.Z)({appear:t,in:a,nodeRef:S,onEnter:f,onEntered:k,onEntering:X,onExit:Y,onExited:H,onExiting:J,addEndListener:function(g){"auto"===b&&(y.current=setTimeout(g,B.current||0)),C&&C(S.current,g)},timeout:"auto"===b?null:b},h,{children:function(I,e){return g.cloneElement(l,(0,i.Z)({style:(0,i.Z)({opacity:0,transform:cC(.75),visibility:"exited"!==I||a?void 0:"hidden"},AC[I],m,l.props.style),ref:v},e))}}))}));dC.muiSupportAuto=!0;var uC=dC;var sC=function(g){return"string"===typeof g},mC=e(7563),ZC=e(9723),bC=e(8956),pC=e(8949),GC=e(5721),hC=e(2971);var yC=g.forwardRef((function(I,e){var t=I.children,l=I.container,o=I.disablePortal,a=void 0!==o&&o,i=g.useState(null),r=(0,n.Z)(i,2),c=r[0],A=r[1],d=(0,mC.Z)(g.isValidElement(t)?t.ref:null,e);return(0,GC.Z)((function(){a||A(function(g){return"function"===typeof g?g():g}(l)||document.body)}),[l,a]),(0,GC.Z)((function(){if(c&&!a)return(0,hC.Z)(e,c),function(){(0,hC.Z)(e,null)}}),[e,c,a]),a?g.isValidElement(t)?g.cloneElement(t,{ref:d}):t:c?C.createPortal(t,c):c}));function BC(g,I){if(!(g instanceof I))throw new TypeError("Cannot call a class as a function")}function WC(g,I){for(var e=0;e<I.length;e++){var C=I[e];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(g,C.key,C)}}function SC(g,I,e){return I&&WC(g.prototype,I),e&&WC(g,e),Object.defineProperty(g,"prototype",{writable:!1}),g}var VC=e(7979);function vC(g){var I=g.documentElement.clientWidth;return Math.abs(window.innerWidth-I)}function RC(g,I){I?g.setAttribute("aria-hidden","true"):g.removeAttribute("aria-hidden")}function XC(g){return parseInt((0,VC.Z)(g).getComputedStyle(g).paddingRight,10)||0}function fC(g,I,e){var C=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],n=arguments.length>4?arguments[4]:void 0,t=[I,e].concat((0,$.Z)(C)),l=["TEMPLATE","SCRIPT","STYLE"];[].forEach.call(g.children,(function(g){-1===t.indexOf(g)&&-1===l.indexOf(g.tagName)&&RC(g,n)}))}function kC(g,I){var e=-1;return g.some((function(g,C){return!!I(g)&&(e=C,!0)})),e}function JC(g,I){var e=[],C=g.container;if(!I.disableScrollLock){if(function(g){var I=(0,ZC.Z)(g);return I.body===g?(0,VC.Z)(g).innerWidth>I.documentElement.clientWidth:g.scrollHeight>g.clientHeight}(C)){var n=vC((0,ZC.Z)(C));e.push({value:C.style.paddingRight,property:"padding-right",el:C}),C.style.paddingRight="".concat(XC(C)+n,"px");var t=(0,ZC.Z)(C).querySelectorAll(".mui-fixed");[].forEach.call(t,(function(g){e.push({value:g.style.paddingRight,property:"padding-right",el:g}),g.style.paddingRight="".concat(XC(g)+n,"px")}))}var l=C.parentElement,o=(0,VC.Z)(C),a="HTML"===(null==l?void 0:l.nodeName)&&"scroll"===o.getComputedStyle(l).overflowY?l:C;e.push({value:a.style.overflow,property:"overflow",el:a},{value:a.style.overflowX,property:"overflow-x",el:a},{value:a.style.overflowY,property:"overflow-y",el:a}),a.style.overflow="hidden"}return function(){e.forEach((function(g){var I=g.value,e=g.el,C=g.property;I?e.style.setProperty(C,I):e.style.removeProperty(C)}))}}var YC=function(){function g(){BC(this,g),this.containers=void 0,this.modals=void 0,this.modals=[],this.containers=[]}return SC(g,[{key:"add",value:function(g,I){var e=this.modals.indexOf(g);if(-1!==e)return e;e=this.modals.length,this.modals.push(g),g.modalRef&&RC(g.modalRef,!1);var C=function(g){var I=[];return[].forEach.call(g.children,(function(g){"true"===g.getAttribute("aria-hidden")&&I.push(g)})),I}(I);fC(I,g.mount,g.modalRef,C,!0);var n=kC(this.containers,(function(g){return g.container===I}));return-1!==n?(this.containers[n].modals.push(g),e):(this.containers.push({modals:[g],container:I,restore:null,hiddenSiblings:C}),e)}},{key:"mount",value:function(g,I){var e=kC(this.containers,(function(I){return-1!==I.modals.indexOf(g)})),C=this.containers[e];C.restore||(C.restore=JC(C,I))}},{key:"remove",value:function(g){var I=this.modals.indexOf(g);if(-1===I)return I;var e=kC(this.containers,(function(I){return-1!==I.modals.indexOf(g)})),C=this.containers[e];if(C.modals.splice(C.modals.indexOf(g),1),this.modals.splice(I,1),0===C.modals.length)C.restore&&C.restore(),g.modalRef&&RC(g.modalRef,!0),fC(C.container,g.mount,g.modalRef,C.hiddenSiblings,!1),this.containers.splice(e,1);else{var n=C.modals[C.modals.length-1];n.modalRef&&RC(n.modalRef,!1)}return I}},{key:"isTopModal",value:function(g){return this.modals.length>0&&this.modals[this.modals.length-1]===g}}]),g}(),HC=["input","select","textarea","a[href]","button","[tabindex]","audio[controls]","video[controls]",'[contenteditable]:not([contenteditable="false"])'].join(",");function wC(g){var I=[],e=[];return Array.from(g.querySelectorAll(HC)).forEach((function(g,C){var n=function(g){var I=parseInt(g.getAttribute("tabindex"),10);return Number.isNaN(I)?"true"===g.contentEditable||("AUDIO"===g.nodeName||"VIDEO"===g.nodeName||"DETAILS"===g.nodeName)&&null===g.getAttribute("tabindex")?0:g.tabIndex:I}(g);-1!==n&&function(g){return!(g.disabled||"INPUT"===g.tagName&&"hidden"===g.type||function(g){if("INPUT"!==g.tagName||"radio"!==g.type)return!1;if(!g.name)return!1;var I=function(I){return g.ownerDocument.querySelector('input[type="radio"]'.concat(I))},e=I('[name="'.concat(g.name,'"]:checked'));return e||(e=I('[name="'.concat(g.name,'"]'))),e!==g}(g))}(g)&&(0===n?I.push(g):e.push({documentOrder:C,tabIndex:n,node:g}))})),e.sort((function(g,I){return g.tabIndex===I.tabIndex?g.documentOrder-I.documentOrder:g.tabIndex-I.tabIndex})).map((function(g){return g.node})).concat(I)}function KC(){return!0}var FC=function(I){var e=I.children,C=I.disableAutoFocus,n=void 0!==C&&C,t=I.disableEnforceFocus,l=void 0!==t&&t,o=I.disableRestoreFocus,a=void 0!==o&&o,i=I.getTabbable,r=void 0===i?wC:i,c=I.isEnabled,A=void 0===c?KC:c,d=I.open,u=g.useRef(),s=g.useRef(null),m=g.useRef(null),Z=g.useRef(null),b=g.useRef(null),p=g.useRef(!1),G=g.useRef(null),h=(0,mC.Z)(e.ref,G),y=g.useRef(null);g.useEffect((function(){d&&G.current&&(p.current=!n)}),[n,d]),g.useEffect((function(){if(d&&G.current){var g=(0,ZC.Z)(G.current);return G.current.contains(g.activeElement)||(G.current.hasAttribute("tabIndex")||G.current.setAttribute("tabIndex",-1),p.current&&G.current.focus()),function(){a||(Z.current&&Z.current.focus&&(u.current=!0,Z.current.focus()),Z.current=null)}}}),[d]),g.useEffect((function(){if(d&&G.current){var g=(0,ZC.Z)(G.current),I=function(I){var e=G.current;if(null!==e)if(g.hasFocus()&&!l&&A()&&!u.current){if(!e.contains(g.activeElement)){if(I&&b.current!==I.target||g.activeElement!==b.current)b.current=null;else if(null!==b.current)return;if(!p.current)return;var C=[];if(g.activeElement!==s.current&&g.activeElement!==m.current||(C=r(G.current)),C.length>0){var n,t,o=Boolean((null==(n=y.current)?void 0:n.shiftKey)&&"Tab"===(null==(t=y.current)?void 0:t.key)),a=C[0],i=C[C.length-1];o?i.focus():a.focus()}else e.focus()}}else u.current=!1},e=function(I){y.current=I,!l&&A()&&"Tab"===I.key&&g.activeElement===G.current&&I.shiftKey&&(u.current=!0,m.current.focus())};g.addEventListener("focusin",I),g.addEventListener("keydown",e,!0);var C=setInterval((function(){"BODY"===g.activeElement.tagName&&I()}),50);return function(){clearInterval(C),g.removeEventListener("focusin",I),g.removeEventListener("keydown",e,!0)}}}),[n,l,a,A,d,r]);var B=function(g){null===Z.current&&(Z.current=g.relatedTarget),p.current=!0};return(0,mg.jsxs)(g.Fragment,{children:[(0,mg.jsx)("div",{tabIndex:0,onFocus:B,ref:s,"data-test":"sentinelStart"}),g.cloneElement(e,{ref:h,onFocus:function(g){null===Z.current&&(Z.current=g.relatedTarget),p.current=!0,b.current=g.target;var I=e.props.onFocus;I&&I(g)}}),(0,mg.jsx)("div",{tabIndex:0,onFocus:B,ref:m,"data-test":"sentinelEnd"})]})};function NC(g){return(0,cg.Z)("MuiModal",g)}(0,Ag.Z)("MuiModal",["root","hidden"]);var xC=["BackdropComponent","BackdropProps","children","classes","className","closeAfterTransition","component","components","componentsProps","container","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted","manager","onBackdropClick","onClose","onKeyDown","open","theme","onTransitionEnter","onTransitionExited"];var zC=new YC,MC=g.forwardRef((function(I,e){var C=I.BackdropComponent,t=I.BackdropProps,l=I.children,o=I.classes,a=I.className,r=I.closeAfterTransition,c=void 0!==r&&r,A=I.component,d=void 0===A?"div":A,u=I.components,s=void 0===u?{}:u,m=I.componentsProps,Z=void 0===m?{}:m,b=I.container,p=I.disableAutoFocus,G=void 0!==p&&p,h=I.disableEnforceFocus,y=void 0!==h&&h,B=I.disableEscapeKeyDown,W=void 0!==B&&B,S=I.disablePortal,V=void 0!==S&&S,v=I.disableRestoreFocus,R=void 0!==v&&v,X=I.disableScrollLock,f=void 0!==X&&X,k=I.hideBackdrop,J=void 0!==k&&k,Y=I.keepMounted,H=void 0!==Y&&Y,w=I.manager,K=void 0===w?zC:w,F=I.onBackdropClick,N=I.onClose,x=I.onKeyDown,z=I.open,M=I.theme,E=I.onTransitionEnter,U=I.onTransitionExited,Q=(0,gg.Z)(I,xC),L=g.useState(!0),T=(0,n.Z)(L,2),D=T[0],j=T[1],P=g.useRef({}),O=g.useRef(null),q=g.useRef(null),_=(0,mC.Z)(q,e),$=function(g){return!!g.children&&g.children.props.hasOwnProperty("in")}(I),eg=function(){return P.current.modalRef=q.current,P.current.mountNode=O.current,P.current},Cg=function(){K.mount(eg(),{disableScrollLock:f}),q.current.scrollTop=0},ng=(0,bC.Z)((function(){var g=function(g){return"function"===typeof g?g():g}(b)||(0,ZC.Z)(O.current).body;K.add(eg(),g),q.current&&Cg()})),tg=g.useCallback((function(){return K.isTopModal(eg())}),[K]),lg=(0,bC.Z)((function(g){O.current=g,g&&(z&&tg()?Cg():RC(q.current,!0))})),ag=g.useCallback((function(){K.remove(eg())}),[K]);g.useEffect((function(){return function(){ag()}}),[ag]),g.useEffect((function(){z?ng():$&&c||ag()}),[z,ag,$,c,ng]);var ig=(0,i.Z)({},I,{classes:o,closeAfterTransition:c,disableAutoFocus:G,disableEnforceFocus:y,disableEscapeKeyDown:W,disablePortal:V,disableRestoreFocus:R,disableScrollLock:f,exited:D,hideBackdrop:J,keepMounted:H}),rg=function(g){var I=g.open,e=g.exited,C=g.classes,n={root:["root",!I&&e&&"hidden"]};return(0,og.Z)(n,NC,C)}(ig);if(!H&&!z&&(!$||D))return null;var cg={};void 0===l.props.tabIndex&&(cg.tabIndex="-1"),$&&(cg.onEnter=(0,pC.Z)((function(){j(!1),E&&E()}),l.props.onEnter),cg.onExited=(0,pC.Z)((function(){j(!0),U&&U(),c&&ag()}),l.props.onExited));var Ag=s.Root||d,dg=Z.root||{};return(0,mg.jsx)(yC,{ref:lg,container:b,disablePortal:V,children:(0,mg.jsxs)(Ag,(0,i.Z)({role:"presentation"},dg,!sC(Ag)&&{as:d,ownerState:(0,i.Z)({},ig,dg.ownerState),theme:M},Q,{ref:_,onKeyDown:function(g){x&&x(g),"Escape"===g.key&&tg()&&(W||(g.stopPropagation(),N&&N(g,"escapeKeyDown")))},className:(0,Ig.Z)(rg.root,dg.className,a),children:[!J&&C?(0,mg.jsx)(C,(0,i.Z)({open:z,onClick:function(g){g.target===g.currentTarget&&(F&&F(g),N&&N(g,"backdropClick"))}},t)):null,(0,mg.jsx)(FC,{disableEnforceFocus:y,disableAutoFocus:G,disableRestoreFocus:R,isEnabled:tg,open:z,children:g.cloneElement(l,cg)})]}))})}));function EC(g){return(0,cg.Z)("MuiBackdrop",g)}(0,Ag.Z)("MuiBackdrop",["root","invisible"]);var UC=["classes","className","invisible","component","components","componentsProps","theme"],QC=g.forwardRef((function(g,I){var e=g.classes,C=g.className,n=g.invisible,t=void 0!==n&&n,l=g.component,o=void 0===l?"div":l,a=g.components,r=void 0===a?{}:a,c=g.componentsProps,A=void 0===c?{}:c,d=g.theme,u=(0,gg.Z)(g,UC),s=(0,i.Z)({},g,{classes:e,invisible:t}),m=function(g){var I=g.classes,e={root:["root",g.invisible&&"invisible"]};return(0,og.Z)(e,EC,I)}(s),Z=r.Root||o,b=A.root||{};return(0,mg.jsx)(Z,(0,i.Z)({"aria-hidden":!0},b,!sC(Z)&&{as:o,ownerState:(0,i.Z)({},s,b.ownerState),theme:d},{ref:I},u,{className:(0,Ig.Z)(m.root,b.className,C)}))})),LC=["addEndListener","appear","children","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"],TC={entering:{opacity:1},entered:{opacity:1}},DC=g.forwardRef((function(I,e){var C=oC(),n={enter:C.transitions.duration.enteringScreen,exit:C.transitions.duration.leavingScreen},t=I.addEndListener,l=I.appear,o=void 0===l||l,a=I.children,r=I.easing,c=I.in,A=I.onEnter,d=I.onEntered,u=I.onEntering,s=I.onExit,m=I.onExited,Z=I.onExiting,b=I.style,p=I.timeout,G=void 0===p?n:p,h=I.TransitionComponent,y=void 0===h?tC:h,B=(0,gg.Z)(I,LC),W=g.useRef(null),S=(0,SI.Z)(a.ref,e),V=(0,SI.Z)(W,S),v=function(g){return function(I){if(g){var e=W.current;void 0===I?g(e):g(e,I)}}},R=v(u),X=v((function(g,I){aC(g);var e=iC({style:b,timeout:G,easing:r},{mode:"enter"});g.style.webkitTransition=C.transitions.create("opacity",e),g.style.transition=C.transitions.create("opacity",e),A&&A(g,I)})),f=v(d),k=v(Z),J=v((function(g){var I=iC({style:b,timeout:G,easing:r},{mode:"exit"});g.style.webkitTransition=C.transitions.create("opacity",I),g.style.transition=C.transitions.create("opacity",I),s&&s(g)})),Y=v(m);return(0,mg.jsx)(y,(0,i.Z)({appear:o,in:c,nodeRef:W,onEnter:X,onEntered:f,onEntering:R,onExit:J,onExited:Y,onExiting:k,addEndListener:function(g){t&&t(W.current,g)},timeout:G},B,{children:function(I,e){return g.cloneElement(a,(0,i.Z)({style:(0,i.Z)({opacity:0,visibility:"exited"!==I||c?void 0:"hidden"},TC[I],b,a.props.style),ref:V},e))}}))})),jC=["children","components","componentsProps","className","invisible","open","transitionDuration","TransitionComponent"],PC=(0,ag.ZP)("div",{name:"MuiBackdrop",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,e.invisible&&I.invisible]}})((function(g){var I=g.ownerState;return(0,i.Z)({position:"fixed",display:"flex",alignItems:"center",justifyContent:"center",right:0,bottom:0,top:0,left:0,backgroundColor:"rgba(0, 0, 0, 0.5)",WebkitTapHighlightColor:"transparent"},I.invisible&&{backgroundColor:"transparent"})})),OC=g.forwardRef((function(g,I){var e,C=(0,ig.Z)({props:g,name:"MuiBackdrop"}),n=C.children,t=C.components,l=void 0===t?{}:t,o=C.componentsProps,a=void 0===o?{}:o,r=C.className,c=C.invisible,A=void 0!==c&&c,d=C.open,u=C.transitionDuration,s=C.TransitionComponent,m=void 0===s?DC:s,Z=(0,gg.Z)(C,jC),b=function(g){return g.classes}((0,i.Z)({},C,{invisible:A}));return(0,mg.jsx)(m,(0,i.Z)({in:d,timeout:u},Z,{children:(0,mg.jsx)(QC,{className:r,invisible:A,components:(0,i.Z)({Root:PC},l),componentsProps:{root:(0,i.Z)({},a.root,(!l.Root||!sC(l.Root))&&{ownerState:(0,i.Z)({},null==(e=a.root)?void 0:e.ownerState)})},classes:b,ref:I,children:n})}))})),qC=["BackdropComponent","closeAfterTransition","children","components","componentsProps","disableAutoFocus","disableEnforceFocus","disableEscapeKeyDown","disablePortal","disableRestoreFocus","disableScrollLock","hideBackdrop","keepMounted"],_C=(0,ag.ZP)("div",{name:"MuiModal",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,!e.open&&e.exited&&I.hidden]}})((function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({position:"fixed",zIndex:I.zIndex.modal,right:0,bottom:0,top:0,left:0},!e.open&&e.exited&&{visibility:"hidden"})})),$C=(0,ag.ZP)(OC,{name:"MuiModal",slot:"Backdrop",overridesResolver:function(g,I){return I.backdrop}})({zIndex:-1}),gn=g.forwardRef((function(I,e){var C,t=(0,ig.Z)({name:"MuiModal",props:I}),l=t.BackdropComponent,o=void 0===l?$C:l,a=t.closeAfterTransition,r=void 0!==a&&a,c=t.children,A=t.components,d=void 0===A?{}:A,u=t.componentsProps,s=void 0===u?{}:u,m=t.disableAutoFocus,Z=void 0!==m&&m,b=t.disableEnforceFocus,p=void 0!==b&&b,G=t.disableEscapeKeyDown,h=void 0!==G&&G,y=t.disablePortal,B=void 0!==y&&y,W=t.disableRestoreFocus,S=void 0!==W&&W,V=t.disableScrollLock,v=void 0!==V&&V,R=t.hideBackdrop,X=void 0!==R&&R,f=t.keepMounted,k=void 0!==f&&f,J=(0,gg.Z)(t,qC),Y=g.useState(!0),H=(0,n.Z)(Y,2),w=H[0],K=H[1],F={closeAfterTransition:r,disableAutoFocus:Z,disableEnforceFocus:p,disableEscapeKeyDown:h,disablePortal:B,disableRestoreFocus:S,disableScrollLock:v,hideBackdrop:X,keepMounted:k},N=function(g){return g.classes}((0,i.Z)({},t,F,{exited:w}));return(0,mg.jsx)(MC,(0,i.Z)({components:(0,i.Z)({Root:_C},d),componentsProps:{root:(0,i.Z)({},s.root,(!d.Root||!sC(d.Root))&&{ownerState:(0,i.Z)({},null==(C=s.root)?void 0:C.ownerState)})},BackdropComponent:o,onTransitionEnter:function(){return K(!1)},onTransitionExited:function(){return K(!0)},ref:e},J,{classes:N},F,{children:c}))}));function In(g){return(0,cg.Z)("MuiPopover",g)}(0,Ag.Z)("MuiPopover",["root","paper"]);var en=["onEntering"],Cn=["action","anchorEl","anchorOrigin","anchorPosition","anchorReference","children","className","container","elevation","marginThreshold","open","PaperProps","transformOrigin","TransitionComponent","transitionDuration","TransitionProps"];function nn(g,I){var e=0;return"number"===typeof I?e=I:"center"===I?e=g.height/2:"bottom"===I&&(e=g.height),e}function tn(g,I){var e=0;return"number"===typeof I?e=I:"center"===I?e=g.width/2:"right"===I&&(e=g.width),e}function ln(g){return[g.horizontal,g.vertical].map((function(g){return"number"===typeof g?"".concat(g,"px"):g})).join(" ")}function on(g){return"function"===typeof g?g():g}var an=(0,ag.ZP)(gn,{name:"MuiPopover",slot:"Root",overridesResolver:function(g,I){return I.root}})({}),rn=(0,ag.ZP)(vg,{name:"MuiPopover",slot:"Paper",overridesResolver:function(g,I){return I.paper}})({position:"absolute",overflowY:"auto",overflowX:"hidden",minWidth:16,minHeight:16,maxWidth:"calc(100% - 32px)",maxHeight:"calc(100% - 32px)",outline:0}),cn=g.forwardRef((function(I,e){var C=(0,ig.Z)({props:I,name:"MuiPopover"}),n=C.action,t=C.anchorEl,l=C.anchorOrigin,o=void 0===l?{vertical:"top",horizontal:"left"}:l,a=C.anchorPosition,r=C.anchorReference,c=void 0===r?"anchorEl":r,A=C.children,d=C.className,u=C.container,s=C.elevation,m=void 0===s?8:s,Z=C.marginThreshold,b=void 0===Z?16:Z,p=C.open,G=C.PaperProps,h=void 0===G?{}:G,y=C.transformOrigin,B=void 0===y?{vertical:"top",horizontal:"left"}:y,W=C.TransitionComponent,S=void 0===W?uC:W,V=C.transitionDuration,v=void 0===V?"auto":V,R=C.TransitionProps,X=(R=void 0===R?{}:R).onEntering,f=(0,gg.Z)(C.TransitionProps,en),k=(0,gg.Z)(C,Cn),J=g.useRef(),Y=(0,SI.Z)(J,h.ref),H=(0,i.Z)({},C,{anchorOrigin:o,anchorReference:c,elevation:m,marginThreshold:b,PaperProps:h,transformOrigin:B,TransitionComponent:S,transitionDuration:v,TransitionProps:f}),w=function(g){var I=g.classes;return(0,og.Z)({root:["root"],paper:["paper"]},In,I)}(H),K=g.useCallback((function(){if("anchorPosition"===c)return a;var g=on(t),I=(g&&1===g.nodeType?g:(0,Pe.Z)(J.current).body).getBoundingClientRect();return{top:I.top+nn(I,o.vertical),left:I.left+tn(I,o.horizontal)}}),[t,o.horizontal,o.vertical,a,c]),F=g.useCallback((function(g){return{vertical:nn(g,B.vertical),horizontal:tn(g,B.horizontal)}}),[B.horizontal,B.vertical]),N=g.useCallback((function(g){var I={width:g.offsetWidth,height:g.offsetHeight},e=F(I);if("none"===c)return{top:null,left:null,transformOrigin:ln(e)};var C=K(),n=C.top-e.vertical,l=C.left-e.horizontal,o=n+I.height,a=l+I.width,i=(0,Oe.Z)(on(t)),r=i.innerHeight-b,A=i.innerWidth-b;if(n<b){var d=n-b;n-=d,e.vertical+=d}else if(o>r){var u=o-r;n-=u,e.vertical+=u}if(l<b){var s=l-b;l-=s,e.horizontal+=s}else if(a>A){var m=a-A;l-=m,e.horizontal+=m}return{top:"".concat(Math.round(n),"px"),left:"".concat(Math.round(l),"px"),transformOrigin:ln(e)}}),[t,c,K,F,b]),x=g.useCallback((function(){var g=J.current;if(g){var I=N(g);null!==I.top&&(g.style.top=I.top),null!==I.left&&(g.style.left=I.left),g.style.transformOrigin=I.transformOrigin}}),[N]);g.useEffect((function(){p&&x()})),g.useImperativeHandle(n,(function(){return p?{updatePosition:function(){x()}}:null}),[p,x]),g.useEffect((function(){if(p){var g=(0,je.Z)((function(){x()})),I=(0,Oe.Z)(t);return I.addEventListener("resize",g),function(){g.clear(),I.removeEventListener("resize",g)}}}),[t,p,x]);var z=v;"auto"!==v||S.muiSupportAuto||(z=void 0);var M=u||(t?(0,Pe.Z)(on(t)).body:void 0);return(0,mg.jsx)(an,(0,i.Z)({BackdropProps:{invisible:!0},className:(0,Ig.Z)(w.root,d),container:M,open:p,ref:e,ownerState:H},k,{children:(0,mg.jsx)(S,(0,i.Z)({appear:!0,in:p,onEntering:function(g,I){X&&X(g,I),x()},timeout:z},f,{children:(0,mg.jsx)(rn,(0,i.Z)({elevation:m},h,{ref:Y,className:(0,Ig.Z)(w.paper,h.className),children:A}))}))}))})),An=e(7247),dn=e(1286),un=e(6248),sn=e(6189),mn=e(3981),Zn=["onChange","maxRows","minRows","style","value"];function bn(g,I){return parseInt(g[I],10)||0}var pn={visibility:"hidden",position:"absolute",overflow:"hidden",height:0,top:0,left:0,transform:"translateZ(0)"},Gn=g.forwardRef((function(I,e){var C=I.onChange,t=I.maxRows,l=I.minRows,o=void 0===l?1:l,a=I.style,r=I.value,c=(0,gg.Z)(I,Zn),A=g.useRef(null!=r).current,d=g.useRef(null),u=(0,mC.Z)(e,d),s=g.useRef(null),m=g.useRef(0),Z=g.useState({}),b=(0,n.Z)(Z,2),p=b[0],G=b[1],h=g.useCallback((function(){var g=d.current,e=(0,VC.Z)(g).getComputedStyle(g);if("0px"!==e.width){var C=s.current;C.style.width=e.width,C.value=g.value||I.placeholder||"x","\n"===C.value.slice(-1)&&(C.value+=" ");var n=e["box-sizing"],l=bn(e,"padding-bottom")+bn(e,"padding-top"),a=bn(e,"border-bottom-width")+bn(e,"border-top-width"),i=C.scrollHeight;C.value="x";var r=C.scrollHeight,c=i;o&&(c=Math.max(Number(o)*r,c)),t&&(c=Math.min(Number(t)*r,c));var A=(c=Math.max(c,r))+("border-box"===n?l+a:0),u=Math.abs(c-i)<=1;G((function(g){return m.current<20&&(A>0&&Math.abs((g.outerHeightStyle||0)-A)>1||g.overflow!==u)?(m.current+=1,{overflow:u,outerHeightStyle:A}):g}))}}),[t,o,I.placeholder]);g.useEffect((function(){var g,I=(0,mn.Z)((function(){m.current=0,h()})),e=(0,VC.Z)(d.current);return e.addEventListener("resize",I),"undefined"!==typeof ResizeObserver&&(g=new ResizeObserver(I)).observe(d.current),function(){I.clear(),e.removeEventListener("resize",I),g&&g.disconnect()}}),[h]),(0,GC.Z)((function(){h()})),g.useEffect((function(){m.current=0}),[r]);return(0,mg.jsxs)(g.Fragment,{children:[(0,mg.jsx)("textarea",(0,i.Z)({value:r,onChange:function(g){m.current=0,A||h(),C&&C(g)},ref:u,rows:o,style:(0,i.Z)({height:p.outerHeightStyle,overflow:p.overflow?"hidden":null},a)},c)),(0,mg.jsx)("textarea",{"aria-hidden":!0,className:I.className,readOnly:!0,ref:s,tabIndex:-1,style:(0,i.Z)({},pn,a,{padding:0})})]})}));function hn(g){var I=g.props,e=g.states,C=g.muiFormControl;return e.reduce((function(g,e){return g[e]=I[e],C&&"undefined"===typeof I[e]&&(g[e]=C[e]),g}),{})}var yn=g.createContext();function Bn(){return g.useContext(yn)}var Wn=e(162);function Sn(g){var I=g.styles,e=g.defaultTheme,C=void 0===e?{}:e,n="function"===typeof I?function(g){return I(void 0===(e=g)||null===e||0===Object.keys(e).length?C:g);var e}:I;return(0,mg.jsx)(QI,{styles:n})}var Vn=function(g){return(0,mg.jsx)(Sn,(0,i.Z)({},g,{defaultTheme:lC.Z}))};function vn(g){return null!=g&&!(Array.isArray(g)&&0===g.length)}function Rn(g){var I=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return g&&(vn(g.value)&&""!==g.value||I&&vn(g.defaultValue)&&""!==g.defaultValue)}function Xn(g){return(0,cg.Z)("MuiInputBase",g)}var fn=(0,Ag.Z)("MuiInputBase",["root","formControl","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","colorSecondary","fullWidth","hiddenLabel","input","inputSizeSmall","inputMultiline","inputTypeSearch","inputAdornedStart","inputAdornedEnd","inputHiddenLabel"]),kn=["aria-describedby","autoComplete","autoFocus","className","color","components","componentsProps","defaultValue","disabled","disableInjectingGlobalStyles","endAdornment","error","fullWidth","id","inputComponent","inputProps","inputRef","margin","maxRows","minRows","multiline","name","onBlur","onChange","onClick","onFocus","onKeyDown","onKeyUp","placeholder","readOnly","renderSuffix","rows","size","startAdornment","type","value"],Jn=function(g,I){var e=g.ownerState;return[I.root,e.formControl&&I.formControl,e.startAdornment&&I.adornedStart,e.endAdornment&&I.adornedEnd,e.error&&I.error,"small"===e.size&&I.sizeSmall,e.multiline&&I.multiline,e.color&&I["color".concat((0,Rg.Z)(e.color))],e.fullWidth&&I.fullWidth,e.hiddenLabel&&I.hiddenLabel]},Yn=function(g,I){var e=g.ownerState;return[I.input,"small"===e.size&&I.inputSizeSmall,e.multiline&&I.inputMultiline,"search"===e.type&&I.inputTypeSearch,e.startAdornment&&I.inputAdornedStart,e.endAdornment&&I.inputAdornedEnd,e.hiddenLabel&&I.inputHiddenLabel]},Hn=(0,ag.ZP)("div",{name:"MuiInputBase",slot:"Root",overridesResolver:Jn})((function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({},I.typography.body1,(0,t.Z)({color:I.palette.text.primary,lineHeight:"1.4375em",boxSizing:"border-box",position:"relative",cursor:"text",display:"inline-flex",alignItems:"center"},"&.".concat(fn.disabled),{color:I.palette.text.disabled,cursor:"default"}),e.multiline&&(0,i.Z)({padding:"4px 0 5px"},"small"===e.size&&{paddingTop:1}),e.fullWidth&&{width:"100%"})})),wn=(0,ag.ZP)("input",{name:"MuiInputBase",slot:"Input",overridesResolver:Yn})((function(g){var I,e=g.theme,C=g.ownerState,n="light"===e.palette.mode,l={color:"currentColor",opacity:n?.42:.5,transition:e.transitions.create("opacity",{duration:e.transitions.duration.shorter})},o={opacity:"0 !important"},a={opacity:n?.42:.5};return(0,i.Z)((I={font:"inherit",letterSpacing:"inherit",color:"currentColor",padding:"4px 0 5px",border:0,boxSizing:"content-box",background:"none",height:"1.4375em",margin:0,WebkitTapHighlightColor:"transparent",display:"block",minWidth:0,width:"100%",animationName:"mui-auto-fill-cancel",animationDuration:"10ms","&::-webkit-input-placeholder":l,"&::-moz-placeholder":l,"&:-ms-input-placeholder":l,"&::-ms-input-placeholder":l,"&:focus":{outline:0},"&:invalid":{boxShadow:"none"},"&::-webkit-search-decoration":{WebkitAppearance:"none"}},(0,t.Z)(I,"label[data-shrink=false] + .".concat(fn.formControl," &"),{"&::-webkit-input-placeholder":o,"&::-moz-placeholder":o,"&:-ms-input-placeholder":o,"&::-ms-input-placeholder":o,"&:focus::-webkit-input-placeholder":a,"&:focus::-moz-placeholder":a,"&:focus:-ms-input-placeholder":a,"&:focus::-ms-input-placeholder":a}),(0,t.Z)(I,"&.".concat(fn.disabled),{opacity:1,WebkitTextFillColor:e.palette.text.disabled}),(0,t.Z)(I,"&:-webkit-autofill",{animationDuration:"5000s",animationName:"mui-auto-fill"}),I),"small"===C.size&&{paddingTop:1},C.multiline&&{height:"auto",resize:"none",padding:0,paddingTop:0},"search"===C.type&&{MozAppearance:"textfield"})})),Kn=(0,mg.jsx)(Vn,{styles:{"@keyframes mui-auto-fill":{from:{display:"block"}},"@keyframes mui-auto-fill-cancel":{from:{display:"block"}}}}),Fn=g.forwardRef((function(I,e){var C=(0,ig.Z)({props:I,name:"MuiInputBase"}),t=C["aria-describedby"],l=C.autoComplete,o=C.autoFocus,a=C.className,r=C.components,c=void 0===r?{}:r,A=C.componentsProps,d=void 0===A?{}:A,u=C.defaultValue,s=C.disabled,m=C.disableInjectingGlobalStyles,Z=C.endAdornment,b=C.fullWidth,p=void 0!==b&&b,G=C.id,h=C.inputComponent,y=void 0===h?"input":h,B=C.inputProps,W=void 0===B?{}:B,S=C.inputRef,V=C.maxRows,v=C.minRows,R=C.multiline,X=void 0!==R&&R,f=C.name,k=C.onBlur,J=C.onChange,Y=C.onClick,H=C.onFocus,w=C.onKeyDown,K=C.onKeyUp,F=C.placeholder,N=C.readOnly,x=C.renderSuffix,z=C.rows,M=C.startAdornment,E=C.type,U=void 0===E?"text":E,Q=C.value,L=(0,gg.Z)(C,kn),T=null!=W.value?W.value:Q,D=g.useRef(null!=T).current,j=g.useRef(),P=g.useCallback((function(g){0}),[]),O=(0,SI.Z)(W.ref,P),q=(0,SI.Z)(S,O),_=(0,SI.Z)(j,q),$=g.useState(!1),eg=(0,n.Z)($,2),Cg=eg[0],ng=eg[1],tg=Bn();var lg=hn({props:C,muiFormControl:tg,states:["color","disabled","error","hiddenLabel","size","required","filled"]});lg.focused=tg?tg.focused:Cg,g.useEffect((function(){!tg&&s&&Cg&&(ng(!1),k&&k())}),[tg,s,Cg,k]);var ag=tg&&tg.onFilled,rg=tg&&tg.onEmpty,cg=g.useCallback((function(g){Rn(g)?ag&&ag():rg&&rg()}),[ag,rg]);(0,Wn.Z)((function(){D&&cg({value:T})}),[T,cg,D]);g.useEffect((function(){cg(j.current)}),[]);var Ag=y,dg=W;X&&"input"===Ag&&(dg=z?(0,i.Z)({type:void 0,minRows:z,maxRows:z},dg):(0,i.Z)({type:void 0,maxRows:V,minRows:v},dg),Ag=Gn);g.useEffect((function(){tg&&tg.setAdornedStart(Boolean(M))}),[tg,M]);var ug=(0,i.Z)({},C,{color:lg.color||"primary",disabled:lg.disabled,endAdornment:Z,error:lg.error,focused:lg.focused,formControl:tg,fullWidth:p,hiddenLabel:lg.hiddenLabel,multiline:X,size:lg.size,startAdornment:M,type:U}),sg=function(g){var I=g.classes,e=g.color,C=g.disabled,n=g.error,t=g.endAdornment,l=g.focused,o=g.formControl,a=g.fullWidth,i=g.hiddenLabel,r=g.multiline,c=g.size,A=g.startAdornment,d=g.type,u={root:["root","color".concat((0,Rg.Z)(e)),C&&"disabled",n&&"error",a&&"fullWidth",l&&"focused",o&&"formControl","small"===c&&"sizeSmall",r&&"multiline",A&&"adornedStart",t&&"adornedEnd",i&&"hiddenLabel"],input:["input",C&&"disabled","search"===d&&"inputTypeSearch",r&&"inputMultiline","small"===c&&"inputSizeSmall",i&&"inputHiddenLabel",A&&"inputAdornedStart",t&&"inputAdornedEnd"]};return(0,og.Z)(u,Xn,I)}(ug),Zg=c.Root||Hn,bg=d.root||{},pg=c.Input||wn;return dg=(0,i.Z)({},dg,d.input),(0,mg.jsxs)(g.Fragment,{children:[!m&&Kn,(0,mg.jsxs)(Zg,(0,i.Z)({},bg,!sC(Zg)&&{ownerState:(0,i.Z)({},ug,bg.ownerState)},{ref:e,onClick:function(g){j.current&&g.currentTarget===g.target&&j.current.focus(),Y&&Y(g)}},L,{className:(0,Ig.Z)(sg.root,bg.className,a),children:[M,(0,mg.jsx)(yn.Provider,{value:null,children:(0,mg.jsx)(pg,(0,i.Z)({ownerState:ug,"aria-invalid":lg.error,"aria-describedby":t,autoComplete:l,autoFocus:o,defaultValue:u,disabled:lg.disabled,id:G,onAnimationStart:function(g){cg("mui-auto-fill-cancel"===g.animationName?j.current:{value:"x"})},name:f,placeholder:F,readOnly:N,required:lg.required,rows:z,value:T,onKeyDown:w,onKeyUp:K,type:U},dg,!sC(pg)&&{as:Ag,ownerState:(0,i.Z)({},ug,dg.ownerState)},{ref:_,className:(0,Ig.Z)(sg.input,dg.className),onBlur:function(g){k&&k(g),W.onBlur&&W.onBlur(g),tg&&tg.onBlur?tg.onBlur(g):ng(!1)},onChange:function(g){if(!D){var I=g.target||j.current;if(null==I)throw new Error((0,sn.Z)(1));cg({value:I.value})}for(var e=arguments.length,C=new Array(e>1?e-1:0),n=1;n<e;n++)C[n-1]=arguments[n];W.onChange&&W.onChange.apply(W,[g].concat(C)),J&&J.apply(void 0,[g].concat(C))},onFocus:function(g){lg.disabled?g.stopPropagation():(H&&H(g),W.onFocus&&W.onFocus(g),tg&&tg.onFocus?tg.onFocus(g):ng(!0))}}))}),Z,x?x((0,i.Z)({},lg,{startAdornment:M})):null]}))]})})),Nn=Fn;function xn(g){return(0,cg.Z)("MuiInput",g)}var zn=(0,Ag.Z)("MuiInput",["root","formControl","focused","disabled","colorSecondary","underline","error","sizeSmall","multiline","fullWidth","input","inputSizeSmall","inputMultiline","inputTypeSearch"]),Mn=["disableUnderline","components","componentsProps","fullWidth","inputComponent","multiline","type"],En=(0,ag.ZP)(Hn,{shouldForwardProp:function(g){return(0,ag.FO)(g)||"classes"===g},name:"MuiInput",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[].concat((0,$.Z)(Jn(g,I)),[!e.disableUnderline&&I.underline])}})((function(g){var I,e=g.theme,C=g.ownerState,n="light"===e.palette.mode?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)";return(0,i.Z)({position:"relative"},C.formControl&&{"label + &":{marginTop:16}},!C.disableUnderline&&(I={"&:after":{borderBottom:"2px solid ".concat(e.palette[C.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shorter,easing:e.transitions.easing.easeOut}),pointerEvents:"none"}},(0,t.Z)(I,"&.".concat(zn.focused,":after"),{transform:"scaleX(1)"}),(0,t.Z)(I,"&.".concat(zn.error,":after"),{borderBottomColor:e.palette.error.main,transform:"scaleX(1)"}),(0,t.Z)(I,"&:before",{borderBottom:"1px solid ".concat(n),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:e.transitions.create("border-bottom-color",{duration:e.transitions.duration.shorter}),pointerEvents:"none"}),(0,t.Z)(I,"&:hover:not(.".concat(zn.disabled,"):before"),{borderBottom:"2px solid ".concat(e.palette.text.primary),"@media (hover: none)":{borderBottom:"1px solid ".concat(n)}}),(0,t.Z)(I,"&.".concat(zn.disabled,":before"),{borderBottomStyle:"dotted"}),I))})),Un=(0,ag.ZP)(wn,{name:"MuiInput",slot:"Input",overridesResolver:Yn})({}),Qn=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiInput"}),C=e.disableUnderline,n=e.components,t=void 0===n?{}:n,l=e.componentsProps,o=e.fullWidth,a=void 0!==o&&o,r=e.inputComponent,c=void 0===r?"input":r,A=e.multiline,d=void 0!==A&&A,u=e.type,s=void 0===u?"text":u,m=(0,gg.Z)(e,Mn),Z=function(g){var I=g.classes,e={root:["root",!g.disableUnderline&&"underline"],input:["input"]},C=(0,og.Z)(e,xn,I);return(0,i.Z)({},I,C)}(e),b={root:{ownerState:{disableUnderline:C}}},p=l?(0,Cg.Z)(l,b):b;return(0,mg.jsx)(Nn,(0,i.Z)({components:(0,i.Z)({Root:En,Input:Un},t),componentsProps:p,fullWidth:a,inputComponent:c,multiline:d,ref:I,type:s},m,{classes:Z}))}));Qn.muiName="Input";var Ln=Qn;function Tn(g){return(0,cg.Z)("MuiFilledInput",g)}var Dn=(0,Ag.Z)("MuiFilledInput",["root","colorSecondary","underline","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","hiddenLabel","input","inputSizeSmall","inputHiddenLabel","inputMultiline","inputAdornedStart","inputAdornedEnd"]),jn=["disableUnderline","components","componentsProps","fullWidth","hiddenLabel","inputComponent","multiline","type"],Pn=(0,ag.ZP)(Hn,{shouldForwardProp:function(g){return(0,ag.FO)(g)||"classes"===g},name:"MuiFilledInput",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[].concat((0,$.Z)(Jn(g,I)),[!e.disableUnderline&&I.underline])}})((function(g){var I,e,C=g.theme,n=g.ownerState,l="light"===C.palette.mode,o=l?"rgba(0, 0, 0, 0.42)":"rgba(255, 255, 255, 0.7)",a=l?"rgba(0, 0, 0, 0.06)":"rgba(255, 255, 255, 0.09)";return(0,i.Z)((I={position:"relative",backgroundColor:a,borderTopLeftRadius:C.shape.borderRadius,borderTopRightRadius:C.shape.borderRadius,transition:C.transitions.create("background-color",{duration:C.transitions.duration.shorter,easing:C.transitions.easing.easeOut}),"&:hover":{backgroundColor:l?"rgba(0, 0, 0, 0.09)":"rgba(255, 255, 255, 0.13)","@media (hover: none)":{backgroundColor:a}}},(0,t.Z)(I,"&.".concat(Dn.focused),{backgroundColor:a}),(0,t.Z)(I,"&.".concat(Dn.disabled),{backgroundColor:l?"rgba(0, 0, 0, 0.12)":"rgba(255, 255, 255, 0.12)"}),I),!n.disableUnderline&&(e={"&:after":{borderBottom:"2px solid ".concat(C.palette[n.color].main),left:0,bottom:0,content:'""',position:"absolute",right:0,transform:"scaleX(0)",transition:C.transitions.create("transform",{duration:C.transitions.duration.shorter,easing:C.transitions.easing.easeOut}),pointerEvents:"none"}},(0,t.Z)(e,"&.".concat(Dn.focused,":after"),{transform:"scaleX(1)"}),(0,t.Z)(e,"&.".concat(Dn.error,":after"),{borderBottomColor:C.palette.error.main,transform:"scaleX(1)"}),(0,t.Z)(e,"&:before",{borderBottom:"1px solid ".concat(o),left:0,bottom:0,content:'"\\00a0"',position:"absolute",right:0,transition:C.transitions.create("border-bottom-color",{duration:C.transitions.duration.shorter}),pointerEvents:"none"}),(0,t.Z)(e,"&:hover:not(.".concat(Dn.disabled,"):before"),{borderBottom:"1px solid ".concat(C.palette.text.primary)}),(0,t.Z)(e,"&.".concat(Dn.disabled,":before"),{borderBottomStyle:"dotted"}),e),n.startAdornment&&{paddingLeft:12},n.endAdornment&&{paddingRight:12},n.multiline&&(0,i.Z)({padding:"25px 12px 8px"},"small"===n.size&&{paddingTop:21,paddingBottom:4},n.hiddenLabel&&{paddingTop:16,paddingBottom:17}))})),On=(0,ag.ZP)(wn,{name:"MuiFilledInput",slot:"Input",overridesResolver:Yn})((function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({paddingTop:25,paddingRight:12,paddingBottom:8,paddingLeft:12,"&:-webkit-autofill":{WebkitBoxShadow:"light"===I.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===I.palette.mode?null:"#fff",caretColor:"light"===I.palette.mode?null:"#fff",borderTopLeftRadius:"inherit",borderTopRightRadius:"inherit"}},"small"===e.size&&{paddingTop:21,paddingBottom:4},e.hiddenLabel&&{paddingTop:16,paddingBottom:17},e.multiline&&{paddingTop:0,paddingBottom:0,paddingLeft:0,paddingRight:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0},e.hiddenLabel&&"small"===e.size&&{paddingTop:8,paddingBottom:9})})),qn=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiFilledInput"}),C=e.components,n=void 0===C?{}:C,t=e.componentsProps,l=e.fullWidth,o=void 0!==l&&l,a=e.inputComponent,r=void 0===a?"input":a,c=e.multiline,A=void 0!==c&&c,d=e.type,u=void 0===d?"text":d,s=(0,gg.Z)(e,jn),m=(0,i.Z)({},e,{fullWidth:o,inputComponent:r,multiline:A,type:u}),Z=function(g){var I=g.classes,e={root:["root",!g.disableUnderline&&"underline"],input:["input"]},C=(0,og.Z)(e,Tn,I);return(0,i.Z)({},I,C)}(e),b={root:{ownerState:m},input:{ownerState:m}},p=t?(0,Cg.Z)(t,b):b;return(0,mg.jsx)(Nn,(0,i.Z)({components:(0,i.Z)({Root:Pn,Input:On},n),componentsProps:p,fullWidth:o,inputComponent:r,multiline:A,ref:I,type:u},s,{classes:Z}))}));qn.muiName="Input";var _n,$n=qn,gt=["children","classes","className","label","notched"],It=(0,ag.ZP)("fieldset")({textAlign:"left",position:"absolute",bottom:0,right:0,top:-5,left:0,margin:0,padding:"0 8px",pointerEvents:"none",borderRadius:"inherit",borderStyle:"solid",borderWidth:1,overflow:"hidden",minWidth:"0%"}),et=(0,ag.ZP)("legend")((function(g){var I=g.ownerState,e=g.theme;return(0,i.Z)({float:"unset"},!I.withLabel&&{padding:0,lineHeight:"11px",transition:e.transitions.create("width",{duration:150,easing:e.transitions.easing.easeOut})},I.withLabel&&(0,i.Z)({display:"block",width:"auto",padding:0,height:11,fontSize:"0.75em",visibility:"hidden",maxWidth:.01,transition:e.transitions.create("max-width",{duration:50,easing:e.transitions.easing.easeOut}),whiteSpace:"nowrap","& > span":{paddingLeft:5,paddingRight:5,display:"inline-block"}},I.notched&&{maxWidth:"100%",transition:e.transitions.create("max-width",{duration:100,easing:e.transitions.easing.easeOut,delay:50})}))}));function Ct(g){return(0,cg.Z)("MuiOutlinedInput",g)}var nt=(0,Ag.Z)("MuiOutlinedInput",["root","colorSecondary","focused","disabled","adornedStart","adornedEnd","error","sizeSmall","multiline","notchedOutline","input","inputSizeSmall","inputMultiline","inputAdornedStart","inputAdornedEnd"]),tt=["components","fullWidth","inputComponent","label","multiline","notched","type"],lt=(0,ag.ZP)(Hn,{shouldForwardProp:function(g){return(0,ag.FO)(g)||"classes"===g},name:"MuiOutlinedInput",slot:"Root",overridesResolver:Jn})((function(g){var I,e=g.theme,C=g.ownerState,n="light"===e.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)";return(0,i.Z)((I={position:"relative",borderRadius:e.shape.borderRadius},(0,t.Z)(I,"&:hover .".concat(nt.notchedOutline),{borderColor:e.palette.text.primary}),(0,t.Z)(I,"@media (hover: none)",(0,t.Z)({},"&:hover .".concat(nt.notchedOutline),{borderColor:n})),(0,t.Z)(I,"&.".concat(nt.focused," .").concat(nt.notchedOutline),{borderColor:e.palette[C.color].main,borderWidth:2}),(0,t.Z)(I,"&.".concat(nt.error," .").concat(nt.notchedOutline),{borderColor:e.palette.error.main}),(0,t.Z)(I,"&.".concat(nt.disabled," .").concat(nt.notchedOutline),{borderColor:e.palette.action.disabled}),I),C.startAdornment&&{paddingLeft:14},C.endAdornment&&{paddingRight:14},C.multiline&&(0,i.Z)({padding:"16.5px 14px"},"small"===C.size&&{padding:"8.5px 14px"}))})),ot=(0,ag.ZP)((function(g){var I=g.className,e=g.label,C=g.notched,n=(0,gg.Z)(g,gt),t=null!=e&&""!==e,l=(0,i.Z)({},g,{notched:C,withLabel:t});return(0,mg.jsx)(It,(0,i.Z)({"aria-hidden":!0,className:I,ownerState:l},n,{children:(0,mg.jsx)(et,{ownerState:l,children:t?(0,mg.jsx)("span",{children:e}):_n||(_n=(0,mg.jsx)("span",{className:"notranslate",children:"\u200b"}))})}))}),{name:"MuiOutlinedInput",slot:"NotchedOutline",overridesResolver:function(g,I){return I.notchedOutline}})((function(g){return{borderColor:"light"===g.theme.palette.mode?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}})),at=(0,ag.ZP)(wn,{name:"MuiOutlinedInput",slot:"Input",overridesResolver:Yn})((function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({padding:"16.5px 14px","&:-webkit-autofill":{WebkitBoxShadow:"light"===I.palette.mode?null:"0 0 0 100px #266798 inset",WebkitTextFillColor:"light"===I.palette.mode?null:"#fff",caretColor:"light"===I.palette.mode?null:"#fff",borderRadius:"inherit"}},"small"===e.size&&{padding:"8.5px 14px"},e.multiline&&{padding:0},e.startAdornment&&{paddingLeft:0},e.endAdornment&&{paddingRight:0})})),it=g.forwardRef((function(I,e){var C,n=(0,ig.Z)({props:I,name:"MuiOutlinedInput"}),t=n.components,l=void 0===t?{}:t,o=n.fullWidth,a=void 0!==o&&o,r=n.inputComponent,c=void 0===r?"input":r,A=n.label,d=n.multiline,u=void 0!==d&&d,s=n.notched,m=n.type,Z=void 0===m?"text":m,b=(0,gg.Z)(n,tt),p=function(g){var I=g.classes,e=(0,og.Z)({root:["root"],notchedOutline:["notchedOutline"],input:["input"]},Ct,I);return(0,i.Z)({},I,e)}(n),G=hn({props:n,muiFormControl:Bn(),states:["required"]});return(0,mg.jsx)(Nn,(0,i.Z)({components:(0,i.Z)({Root:lt,Input:at},l),renderSuffix:function(I){return(0,mg.jsx)(ot,{className:p.notchedOutline,label:null!=A&&""!==A&&G.required?C||(C=(0,mg.jsxs)(g.Fragment,{children:[A,"\xa0","*"]})):A,notched:"undefined"!==typeof s?s:Boolean(I.startAdornment||I.filled||I.focused)})},fullWidth:a,inputComponent:c,multiline:u,ref:e,type:Z},b,{classes:(0,i.Z)({},p,{notchedOutline:null})}))}));it.muiName="Input";var rt=it;function ct(g){return(0,cg.Z)("MuiFormLabel",g)}var At=(0,Ag.Z)("MuiFormLabel",["root","colorSecondary","focused","disabled","error","filled","required","asterisk"]),dt=["children","className","color","component","disabled","error","filled","focused","required"],ut=(0,ag.ZP)("label",{name:"MuiFormLabel",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return(0,i.Z)({},I.root,"secondary"===e.color&&I.colorSecondary,e.filled&&I.filled)}})((function(g){var I,e=g.theme,C=g.ownerState;return(0,i.Z)({color:e.palette.text.secondary},e.typography.body1,(I={lineHeight:"1.4375em",padding:0,position:"relative"},(0,t.Z)(I,"&.".concat(At.focused),{color:e.palette[C.color].main}),(0,t.Z)(I,"&.".concat(At.disabled),{color:e.palette.text.disabled}),(0,t.Z)(I,"&.".concat(At.error),{color:e.palette.error.main}),I))})),st=(0,ag.ZP)("span",{name:"MuiFormLabel",slot:"Asterisk",overridesResolver:function(g,I){return I.asterisk}})((function(g){var I=g.theme;return(0,t.Z)({},"&.".concat(At.error),{color:I.palette.error.main})})),mt=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiFormLabel"}),C=e.children,n=e.className,t=e.component,l=void 0===t?"label":t,o=(0,gg.Z)(e,dt),a=hn({props:e,muiFormControl:Bn(),states:["color","required","focused","disabled","error","filled"]}),r=(0,i.Z)({},e,{color:a.color||"primary",component:l,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=function(g){var I=g.classes,e=g.color,C=g.focused,n=g.disabled,t=g.error,l=g.filled,o=g.required,a={root:["root","color".concat((0,Rg.Z)(e)),n&&"disabled",t&&"error",l&&"filled",C&&"focused",o&&"required"],asterisk:["asterisk",t&&"error"]};return(0,og.Z)(a,ct,I)}(r);return(0,mg.jsxs)(ut,(0,i.Z)({as:l,ownerState:r,className:(0,Ig.Z)(c.root,n),ref:I},o,{children:[C,a.required&&(0,mg.jsxs)(st,{ownerState:r,"aria-hidden":!0,className:c.asterisk,children:["\u2009","*"]})]}))}));function Zt(g){return(0,cg.Z)("MuiInputLabel",g)}(0,Ag.Z)("MuiInputLabel",["root","focused","disabled","error","required","asterisk","formControl","sizeSmall","shrink","animated","standard","filled","outlined"]);var bt=["disableAnimation","margin","shrink","variant"],pt=(0,ag.ZP)(mt,{shouldForwardProp:function(g){return(0,ag.FO)(g)||"classes"===g},name:"MuiInputLabel",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[(0,t.Z)({},"& .".concat(At.asterisk),I.asterisk),I.root,e.formControl&&I.formControl,"small"===e.size&&I.sizeSmall,e.shrink&&I.shrink,!e.disableAnimation&&I.animated,I[e.variant]]}})((function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({display:"block",transformOrigin:"top left",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",maxWidth:"100%"},e.formControl&&{position:"absolute",left:0,top:0,transform:"translate(0, 20px) scale(1)"},"small"===e.size&&{transform:"translate(0, 17px) scale(1)"},e.shrink&&{transform:"translate(0, -1.5px) scale(0.75)",transformOrigin:"top left",maxWidth:"133%"},!e.disableAnimation&&{transition:I.transitions.create(["color","transform","max-width"],{duration:I.transitions.duration.shorter,easing:I.transitions.easing.easeOut})},"filled"===e.variant&&(0,i.Z)({zIndex:1,pointerEvents:"none",transform:"translate(12px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===e.size&&{transform:"translate(12px, 13px) scale(1)"},e.shrink&&(0,i.Z)({userSelect:"none",pointerEvents:"auto",transform:"translate(12px, 7px) scale(0.75)",maxWidth:"calc(133% - 24px)"},"small"===e.size&&{transform:"translate(12px, 4px) scale(0.75)"})),"outlined"===e.variant&&(0,i.Z)({zIndex:1,pointerEvents:"none",transform:"translate(14px, 16px) scale(1)",maxWidth:"calc(100% - 24px)"},"small"===e.size&&{transform:"translate(14px, 9px) scale(1)"},e.shrink&&{userSelect:"none",pointerEvents:"auto",maxWidth:"calc(133% - 24px)",transform:"translate(14px, -9px) scale(0.75)"}))})),Gt=g.forwardRef((function(g,I){var e=(0,ig.Z)({name:"MuiInputLabel",props:g}),C=e.disableAnimation,n=void 0!==C&&C,t=e.shrink,l=(0,gg.Z)(e,bt),o=Bn(),a=t;"undefined"===typeof a&&o&&(a=o.filled||o.focused||o.adornedStart);var r=hn({props:e,muiFormControl:o,states:["size","variant","required"]}),c=(0,i.Z)({},e,{disableAnimation:n,formControl:o,shrink:a,size:r.size,variant:r.variant,required:r.required}),A=function(g){var I=g.classes,e=g.formControl,C=g.size,n=g.shrink,t={root:["root",e&&"formControl",!g.disableAnimation&&"animated",n&&"shrink","small"===C&&"sizeSmall",g.variant],asterisk:[g.required&&"asterisk"]},l=(0,og.Z)(t,Zt,I);return(0,i.Z)({},I,l)}(c);return(0,mg.jsx)(pt,(0,i.Z)({"data-shrink":a,ownerState:c,ref:I},l,{classes:A}))})),ht=e(9103);function yt(g){return(0,cg.Z)("MuiFormControl",g)}(0,Ag.Z)("MuiFormControl",["root","marginNone","marginNormal","marginDense","fullWidth","disabled"]);var Bt=["children","className","color","component","disabled","error","focused","fullWidth","hiddenLabel","margin","required","size","variant"],Wt=(0,ag.ZP)("div",{name:"MuiFormControl",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return(0,i.Z)({},I.root,I["margin".concat((0,Rg.Z)(e.margin))],e.fullWidth&&I.fullWidth)}})((function(g){var I=g.ownerState;return(0,i.Z)({display:"inline-flex",flexDirection:"column",position:"relative",minWidth:0,padding:0,margin:0,border:0,verticalAlign:"top"},"normal"===I.margin&&{marginTop:16,marginBottom:8},"dense"===I.margin&&{marginTop:8,marginBottom:4},I.fullWidth&&{width:"100%"})})),St=g.forwardRef((function(I,e){var C=(0,ig.Z)({props:I,name:"MuiFormControl"}),t=C.children,l=C.className,o=C.color,a=void 0===o?"primary":o,r=C.component,c=void 0===r?"div":r,A=C.disabled,d=void 0!==A&&A,u=C.error,s=void 0!==u&&u,m=C.focused,Z=C.fullWidth,b=void 0!==Z&&Z,p=C.hiddenLabel,G=void 0!==p&&p,h=C.margin,y=void 0===h?"none":h,B=C.required,W=void 0!==B&&B,S=C.size,V=void 0===S?"medium":S,v=C.variant,R=void 0===v?"outlined":v,X=(0,gg.Z)(C,Bt),f=(0,i.Z)({},C,{color:a,component:c,disabled:d,error:s,fullWidth:b,hiddenLabel:G,margin:y,required:W,size:V,variant:R}),k=function(g){var I=g.classes,e=g.margin,C=g.fullWidth,n={root:["root","none"!==e&&"margin".concat((0,Rg.Z)(e)),C&&"fullWidth"]};return(0,og.Z)(n,yt,I)}(f),J=g.useState((function(){var I=!1;return t&&g.Children.forEach(t,(function(g){if((0,ht.Z)(g,["Input","Select"])){var e=(0,ht.Z)(g,["Select"])?g.props.input:g;e&&e.props.startAdornment&&(I=!0)}})),I})),Y=(0,n.Z)(J,2),H=Y[0],w=Y[1],K=g.useState((function(){var I=!1;return t&&g.Children.forEach(t,(function(g){(0,ht.Z)(g,["Input","Select"])&&Rn(g.props,!0)&&(I=!0)})),I})),F=(0,n.Z)(K,2),N=F[0],x=F[1],z=g.useState(!1),M=(0,n.Z)(z,2),E=M[0],U=M[1];d&&E&&U(!1);var Q=void 0===m||d?E:m,L=g.useCallback((function(){x(!0)}),[]),T={adornedStart:H,setAdornedStart:w,color:a,disabled:d,error:s,filled:N,focused:Q,fullWidth:b,hiddenLabel:G,size:V,onBlur:function(){U(!1)},onEmpty:g.useCallback((function(){x(!1)}),[]),onFilled:L,onFocus:function(){U(!0)},registerEffect:undefined,required:W,variant:R};return(0,mg.jsx)(yn.Provider,{value:T,children:(0,mg.jsx)(Wt,(0,i.Z)({as:c,ownerState:f,className:(0,Ig.Z)(k.root,l),ref:e},X,{children:t}))})}));function Vt(g){return(0,cg.Z)("MuiFormHelperText",g)}var vt,Rt=(0,Ag.Z)("MuiFormHelperText",["root","error","disabled","sizeSmall","sizeMedium","contained","focused","filled","required"]),Xt=["children","className","component","disabled","error","filled","focused","margin","required","variant"],ft=(0,ag.ZP)("p",{name:"MuiFormHelperText",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,e.size&&I["size".concat((0,Rg.Z)(e.size))],e.contained&&I.contained,e.filled&&I.filled]}})((function(g){var I,e=g.theme,C=g.ownerState;return(0,i.Z)({color:e.palette.text.secondary},e.typography.caption,(I={textAlign:"left",marginTop:3,marginRight:0,marginBottom:0,marginLeft:0},(0,t.Z)(I,"&.".concat(Rt.disabled),{color:e.palette.text.disabled}),(0,t.Z)(I,"&.".concat(Rt.error),{color:e.palette.error.main}),I),"small"===C.size&&{marginTop:4},C.contained&&{marginLeft:14,marginRight:14})})),kt=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiFormHelperText"}),C=e.children,n=e.className,t=e.component,l=void 0===t?"p":t,o=(0,gg.Z)(e,Xt),a=hn({props:e,muiFormControl:Bn(),states:["variant","size","disabled","error","filled","focused","required"]}),r=(0,i.Z)({},e,{component:l,contained:"filled"===a.variant||"outlined"===a.variant,variant:a.variant,size:a.size,disabled:a.disabled,error:a.error,filled:a.filled,focused:a.focused,required:a.required}),c=function(g){var I=g.classes,e=g.contained,C=g.size,n=g.disabled,t=g.error,l=g.filled,o=g.focused,a=g.required,i={root:["root",n&&"disabled",t&&"error",C&&"size".concat((0,Rg.Z)(C)),e&&"contained",o&&"focused",l&&"filled",a&&"required"]};return(0,og.Z)(i,Vt,I)}(r);return(0,mg.jsx)(ft,(0,i.Z)({as:l,ownerState:r,className:(0,Ig.Z)(c.root,n),ref:I},o,{children:" "===C?vt||(vt=(0,mg.jsx)("span",{className:"notranslate",children:"\u200b"})):C}))}));e(8457);var Jt=g.createContext({});function Yt(g){return(0,cg.Z)("MuiList",g)}(0,Ag.Z)("MuiList",["root","padding","dense","subheader"]);var Ht=["children","className","component","dense","disablePadding","subheader"],wt=(0,ag.ZP)("ul",{name:"MuiList",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,!e.disablePadding&&I.padding,e.dense&&I.dense,e.subheader&&I.subheader]}})((function(g){var I=g.ownerState;return(0,i.Z)({listStyle:"none",margin:0,padding:0,position:"relative"},!I.disablePadding&&{paddingTop:8,paddingBottom:8},I.subheader&&{paddingTop:0})})),Kt=g.forwardRef((function(I,e){var C=(0,ig.Z)({props:I,name:"MuiList"}),n=C.children,t=C.className,l=C.component,o=void 0===l?"ul":l,a=C.dense,r=void 0!==a&&a,c=C.disablePadding,A=void 0!==c&&c,d=C.subheader,u=(0,gg.Z)(C,Ht),s=g.useMemo((function(){return{dense:r}}),[r]),m=(0,i.Z)({},C,{component:o,dense:r,disablePadding:A}),Z=function(g){var I=g.classes,e={root:["root",!g.disablePadding&&"padding",g.dense&&"dense",g.subheader&&"subheader"]};return(0,og.Z)(e,Yt,I)}(m);return(0,mg.jsx)(Jt.Provider,{value:s,children:(0,mg.jsxs)(wt,(0,i.Z)({as:o,className:(0,Ig.Z)(Z.root,t),ref:e,ownerState:m},u,{children:[d,n]}))})})),Ft=vC,Nt=["actions","autoFocus","autoFocusItem","children","className","disabledItemsFocusable","disableListWrap","onKeyDown","variant"];function xt(g,I,e){return g===I?g.firstChild:I&&I.nextElementSibling?I.nextElementSibling:e?null:g.firstChild}function zt(g,I,e){return g===I?e?g.firstChild:g.lastChild:I&&I.previousElementSibling?I.previousElementSibling:e?null:g.lastChild}function Mt(g,I){if(void 0===I)return!0;var e=g.innerText;return void 0===e&&(e=g.textContent),0!==(e=e.trim().toLowerCase()).length&&(I.repeating?e[0]===I.keys[0]:0===e.indexOf(I.keys.join("")))}function Et(g,I,e,C,n,t){for(var l=!1,o=n(g,I,!!I&&e);o;){if(o===g.firstChild){if(l)return!1;l=!0}var a=!C&&(o.disabled||"true"===o.getAttribute("aria-disabled"));if(o.hasAttribute("tabindex")&&Mt(o,t)&&!a)return o.focus(),!0;o=n(g,o,e)}return!1}var Ut=g.forwardRef((function(I,e){var C=I.actions,n=I.autoFocus,t=void 0!==n&&n,l=I.autoFocusItem,o=void 0!==l&&l,a=I.children,r=I.className,c=I.disabledItemsFocusable,A=void 0!==c&&c,d=I.disableListWrap,u=void 0!==d&&d,s=I.onKeyDown,m=I.variant,Z=void 0===m?"selectedMenu":m,b=(0,gg.Z)(I,Nt),p=g.useRef(null),G=g.useRef({keys:[],repeating:!0,previousKeyMatched:!0,lastTime:null});(0,Wn.Z)((function(){t&&p.current.focus()}),[t]),g.useImperativeHandle(C,(function(){return{adjustStyleForScrollbar:function(g,I){var e=!p.current.style.width;if(g.clientHeight<p.current.clientHeight&&e){var C="".concat(Ft((0,Pe.Z)(g)),"px");p.current.style["rtl"===I.direction?"paddingLeft":"paddingRight"]=C,p.current.style.width="calc(100% + ".concat(C,")")}return p.current}}}),[]);var h=(0,SI.Z)(p,e),y=-1;g.Children.forEach(a,(function(I,e){g.isValidElement(I)&&(I.props.disabled||("selectedMenu"===Z&&I.props.selected||-1===y)&&(y=e))}));var B=g.Children.map(a,(function(I,e){if(e===y){var C={};return o&&(C.autoFocus=!0),void 0===I.props.tabIndex&&"selectedMenu"===Z&&(C.tabIndex=0),g.cloneElement(I,C)}return I}));return(0,mg.jsx)(Kt,(0,i.Z)({role:"menu",ref:h,className:r,onKeyDown:function(g){var I=p.current,e=g.key,C=(0,Pe.Z)(I).activeElement;if("ArrowDown"===e)g.preventDefault(),Et(I,C,u,A,xt);else if("ArrowUp"===e)g.preventDefault(),Et(I,C,u,A,zt);else if("Home"===e)g.preventDefault(),Et(I,null,u,A,xt);else if("End"===e)g.preventDefault(),Et(I,null,u,A,zt);else if(1===e.length){var n=G.current,t=e.toLowerCase(),l=performance.now();n.keys.length>0&&(l-n.lastTime>500?(n.keys=[],n.repeating=!0,n.previousKeyMatched=!0):n.repeating&&t!==n.keys[0]&&(n.repeating=!1)),n.lastTime=l,n.keys.push(t);var o=C&&!n.repeating&&Mt(C,n);n.previousKeyMatched&&(o||Et(I,C,!1,A,xt,n))?g.preventDefault():n.previousKeyMatched=!1}s&&s(g)},tabIndex:t?0:-1},b,{children:B}))}));function Qt(g){return(0,cg.Z)("MuiMenu",g)}(0,Ag.Z)("MuiMenu",["root","paper","list"]);var Lt=["onEntering"],Tt=["autoFocus","children","disableAutoFocusItem","MenuListProps","onClose","open","PaperProps","PopoverClasses","transitionDuration","TransitionProps","variant"],Dt={vertical:"top",horizontal:"right"},jt={vertical:"top",horizontal:"left"},Pt=(0,ag.ZP)(cn,{shouldForwardProp:function(g){return(0,ag.FO)(g)||"classes"===g},name:"MuiMenu",slot:"Root",overridesResolver:function(g,I){return I.root}})({}),Ot=(0,ag.ZP)(vg,{name:"MuiMenu",slot:"Paper",overridesResolver:function(g,I){return I.paper}})({maxHeight:"calc(100% - 96px)",WebkitOverflowScrolling:"touch"}),qt=(0,ag.ZP)(Ut,{name:"MuiMenu",slot:"List",overridesResolver:function(g,I){return I.list}})({outline:0}),_t=g.forwardRef((function(I,e){var C=(0,ig.Z)({props:I,name:"MuiMenu"}),n=C.autoFocus,t=void 0===n||n,l=C.children,o=C.disableAutoFocusItem,a=void 0!==o&&o,r=C.MenuListProps,c=void 0===r?{}:r,A=C.onClose,d=C.open,u=C.PaperProps,s=void 0===u?{}:u,m=C.PopoverClasses,Z=C.transitionDuration,b=void 0===Z?"auto":Z,p=C.TransitionProps,G=(p=void 0===p?{}:p).onEntering,h=C.variant,y=void 0===h?"selectedMenu":h,B=(0,gg.Z)(C.TransitionProps,Lt),W=(0,gg.Z)(C,Tt),S=oC(),V="rtl"===S.direction,v=(0,i.Z)({},C,{autoFocus:t,disableAutoFocusItem:a,MenuListProps:c,onEntering:G,PaperProps:s,transitionDuration:b,TransitionProps:B,variant:y}),R=function(g){var I=g.classes;return(0,og.Z)({root:["root"],paper:["paper"],list:["list"]},Qt,I)}(v),X=t&&!a&&d,f=g.useRef(null),k=-1;return g.Children.map(l,(function(I,e){g.isValidElement(I)&&(I.props.disabled||("selectedMenu"===y&&I.props.selected||-1===k)&&(k=e))})),(0,mg.jsx)(Pt,(0,i.Z)({classes:m,onClose:A,anchorOrigin:{vertical:"bottom",horizontal:V?"right":"left"},transformOrigin:V?Dt:jt,PaperProps:(0,i.Z)({component:Ot},s,{classes:(0,i.Z)({},s.classes,{root:R.paper})}),className:R.root,open:d,ref:e,transitionDuration:b,TransitionProps:(0,i.Z)({onEntering:function(g,I){f.current&&f.current.adjustStyleForScrollbar(g,S),G&&G(g,I)}},B),ownerState:v},W,{children:(0,mg.jsx)(qt,(0,i.Z)({onKeyDown:function(g){"Tab"===g.key&&(g.preventDefault(),A&&A(g,"tabKeyDown"))},actions:f,autoFocus:t&&(-1===k||a),autoFocusItem:X,variant:y},c,{className:(0,Ig.Z)(R.list,c.className),children:l}))}))}));function $t(g){return(0,cg.Z)("MuiNativeSelect",g)}var gl=(0,Ag.Z)("MuiNativeSelect",["root","select","multiple","filled","outlined","standard","disabled","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),Il=["className","disabled","IconComponent","inputRef","variant"],el=function(g){var I,e=g.ownerState,C=g.theme;return(0,i.Z)((I={MozAppearance:"none",WebkitAppearance:"none",userSelect:"none",borderRadius:0,cursor:"pointer","&:focus":{backgroundColor:"light"===C.palette.mode?"rgba(0, 0, 0, 0.05)":"rgba(255, 255, 255, 0.05)",borderRadius:0},"&::-ms-expand":{display:"none"}},(0,t.Z)(I,"&.".concat(gl.disabled),{cursor:"default"}),(0,t.Z)(I,"&[multiple]",{height:"auto"}),(0,t.Z)(I,"&:not([multiple]) option, &:not([multiple]) optgroup",{backgroundColor:C.palette.background.paper}),(0,t.Z)(I,"&&&",{paddingRight:24,minWidth:16}),I),"filled"===e.variant&&{"&&&":{paddingRight:32}},"outlined"===e.variant&&{borderRadius:C.shape.borderRadius,"&:focus":{borderRadius:C.shape.borderRadius},"&&&":{paddingRight:32}})},Cl=(0,ag.ZP)("select",{name:"MuiNativeSelect",slot:"Select",shouldForwardProp:ag.FO,overridesResolver:function(g,I){var e=g.ownerState;return[I.select,I[e.variant],(0,t.Z)({},"&.".concat(gl.multiple),I.multiple)]}})(el),nl=function(g){var I=g.ownerState,e=g.theme;return(0,i.Z)((0,t.Z)({position:"absolute",right:0,top:"calc(50% - .5em)",pointerEvents:"none",color:e.palette.action.active},"&.".concat(gl.disabled),{color:e.palette.action.disabled}),I.open&&{transform:"rotate(180deg)"},"filled"===I.variant&&{right:7},"outlined"===I.variant&&{right:7})},tl=(0,ag.ZP)("svg",{name:"MuiNativeSelect",slot:"Icon",overridesResolver:function(g,I){var e=g.ownerState;return[I.icon,e.variant&&I["icon".concat((0,Rg.Z)(e.variant))],e.open&&I.iconOpen]}})(nl),ll=g.forwardRef((function(I,e){var C=I.className,n=I.disabled,t=I.IconComponent,l=I.inputRef,o=I.variant,a=void 0===o?"standard":o,r=(0,gg.Z)(I,Il),c=(0,i.Z)({},I,{disabled:n,variant:a}),A=function(g){var I=g.classes,e=g.variant,C=g.disabled,n=g.multiple,t=g.open,l={select:["select",e,C&&"disabled",n&&"multiple"],icon:["icon","icon".concat((0,Rg.Z)(e)),t&&"iconOpen",C&&"disabled"]};return(0,og.Z)(l,$t,I)}(c);return(0,mg.jsxs)(g.Fragment,{children:[(0,mg.jsx)(Cl,(0,i.Z)({ownerState:c,className:(0,Ig.Z)(A.select,C),disabled:n,ref:l||e},r)),I.multiple?null:(0,mg.jsx)(tl,{as:t,ownerState:c,className:A.icon})]})})),ol=e(8278);function al(g){return(0,cg.Z)("MuiSelect",g)}var il,rl=(0,Ag.Z)("MuiSelect",["select","multiple","filled","outlined","standard","disabled","focused","icon","iconOpen","iconFilled","iconOutlined","iconStandard","nativeInput"]),cl=["aria-describedby","aria-label","autoFocus","autoWidth","children","className","defaultOpen","defaultValue","disabled","displayEmpty","IconComponent","inputRef","labelId","MenuProps","multiple","name","onBlur","onChange","onClose","onFocus","onOpen","open","readOnly","renderValue","SelectDisplayProps","tabIndex","type","value","variant"],Al=(0,ag.ZP)("div",{name:"MuiSelect",slot:"Select",overridesResolver:function(g,I){var e=g.ownerState;return[(0,t.Z)({},"&.".concat(rl.select),I.select),(0,t.Z)({},"&.".concat(rl.select),I[e.variant]),(0,t.Z)({},"&.".concat(rl.multiple),I.multiple)]}})(el,(0,t.Z)({},"&.".concat(rl.select),{height:"auto",minHeight:"1.4375em",textOverflow:"ellipsis",whiteSpace:"nowrap",overflow:"hidden"})),dl=(0,ag.ZP)("svg",{name:"MuiSelect",slot:"Icon",overridesResolver:function(g,I){var e=g.ownerState;return[I.icon,e.variant&&I["icon".concat((0,Rg.Z)(e.variant))],e.open&&I.iconOpen]}})(nl),ul=(0,ag.ZP)("input",{shouldForwardProp:function(g){return(0,ag.Dz)(g)&&"classes"!==g},name:"MuiSelect",slot:"NativeInput",overridesResolver:function(g,I){return I.nativeInput}})({bottom:0,left:0,position:"absolute",opacity:0,pointerEvents:"none",width:"100%",boxSizing:"border-box"});function sl(g,I){return"object"===typeof I&&null!==I?g===I:String(g)===String(I)}function ml(g){return null==g||"string"===typeof g&&!g.trim()}var Zl,bl,pl=g.forwardRef((function(I,e){var C=I["aria-describedby"],t=I["aria-label"],l=I.autoFocus,o=I.autoWidth,a=I.children,r=I.className,c=I.defaultOpen,A=I.defaultValue,d=I.disabled,u=I.displayEmpty,s=I.IconComponent,m=I.inputRef,Z=I.labelId,b=I.MenuProps,p=void 0===b?{}:b,G=I.multiple,h=I.name,y=I.onBlur,B=I.onChange,W=I.onClose,S=I.onFocus,V=I.onOpen,v=I.open,R=I.readOnly,X=I.renderValue,f=I.SelectDisplayProps,k=void 0===f?{}:f,J=I.tabIndex,Y=I.value,H=I.variant,w=void 0===H?"standard":H,K=(0,gg.Z)(I,cl),F=(0,ol.Z)({controlled:Y,default:A,name:"Select"}),N=(0,n.Z)(F,2),x=N[0],z=N[1],M=(0,ol.Z)({controlled:v,default:c,name:"Select"}),E=(0,n.Z)(M,2),U=E[0],Q=E[1],L=g.useRef(null),T=g.useRef(null),D=g.useState(null),j=(0,n.Z)(D,2),P=j[0],O=j[1],q=g.useRef(null!=v).current,_=g.useState(),$=(0,n.Z)(_,2),eg=$[0],Cg=$[1],ng=(0,SI.Z)(e,m),tg=g.useCallback((function(g){T.current=g,g&&O(g)}),[]);g.useImperativeHandle(ng,(function(){return{focus:function(){T.current.focus()},node:L.current,value:x}}),[x]),g.useEffect((function(){c&&U&&P&&!q&&(Cg(o?null:P.clientWidth),T.current.focus())}),[P,o]),g.useEffect((function(){l&&T.current.focus()}),[l]),g.useEffect((function(){if(Z){var g=(0,Pe.Z)(T.current).getElementById(Z);if(g){var I=function(){getSelection().isCollapsed&&T.current.focus()};return g.addEventListener("click",I),function(){g.removeEventListener("click",I)}}}}),[Z]);var lg,ag,ig=function(g,I){g?V&&V(I):W&&W(I),q||(Cg(o?null:P.clientWidth),Q(g))},rg=g.Children.toArray(a),cg=function(g){return function(I){var e;if(I.currentTarget.hasAttribute("tabindex")){if(G){e=Array.isArray(x)?x.slice():[];var C=x.indexOf(g.props.value);-1===C?e.push(g.props.value):e.splice(C,1)}else e=g.props.value;if(g.props.onClick&&g.props.onClick(I),x!==e&&(z(e),B)){var n=I.nativeEvent||I,t=new n.constructor(n.type,n);Object.defineProperty(t,"target",{writable:!0,value:{value:e,name:h}}),B(t,g)}G||ig(!1,I)}}},Ag=null!==P&&U;delete K["aria-invalid"];var dg=[],ug=!1;(Rn({value:x})||u)&&(X?lg=X(x):ug=!0);var sg=rg.map((function(I){if(!g.isValidElement(I))return null;var e;if(G){if(!Array.isArray(x))throw new Error((0,sn.Z)(2));e=x.some((function(g){return sl(g,I.props.value)})),e&&ug&&dg.push(I.props.children)}else(e=sl(x,I.props.value))&&ug&&(ag=I.props.children);return e&&!0,g.cloneElement(I,{"aria-selected":e?"true":"false",onClick:cg(I),onKeyUp:function(g){" "===g.key&&g.preventDefault(),I.props.onKeyUp&&I.props.onKeyUp(g)},role:"option",selected:e,value:void 0,"data-value":I.props.value})}));ug&&(lg=G?0===dg.length?null:dg.reduce((function(g,I,e){return g.push(I),e<dg.length-1&&g.push(", "),g}),[]):ag);var Zg,bg=eg;!o&&q&&P&&(bg=P.clientWidth),Zg="undefined"!==typeof J?J:d?null:0;var pg=k.id||(h?"mui-component-select-".concat(h):void 0),Gg=(0,i.Z)({},I,{variant:w,value:x,open:Ag}),hg=function(g){var I=g.classes,e=g.variant,C=g.disabled,n=g.multiple,t=g.open,l={select:["select",e,C&&"disabled",n&&"multiple"],icon:["icon","icon".concat((0,Rg.Z)(e)),t&&"iconOpen",C&&"disabled"],nativeInput:["nativeInput"]};return(0,og.Z)(l,al,I)}(Gg);return(0,mg.jsxs)(g.Fragment,{children:[(0,mg.jsx)(Al,(0,i.Z)({ref:tg,tabIndex:Zg,role:"button","aria-disabled":d?"true":void 0,"aria-expanded":Ag?"true":"false","aria-haspopup":"listbox","aria-label":t,"aria-labelledby":[Z,pg].filter(Boolean).join(" ")||void 0,"aria-describedby":C,onKeyDown:function(g){if(!R){-1!==[" ","ArrowUp","ArrowDown","Enter"].indexOf(g.key)&&(g.preventDefault(),ig(!0,g))}},onMouseDown:d||R?null:function(g){0===g.button&&(g.preventDefault(),T.current.focus(),ig(!0,g))},onBlur:function(g){!Ag&&y&&(Object.defineProperty(g,"target",{writable:!0,value:{value:x,name:h}}),y(g))},onFocus:S},k,{ownerState:Gg,className:(0,Ig.Z)(hg.select,r,k.className),id:pg,children:ml(lg)?il||(il=(0,mg.jsx)("span",{className:"notranslate",children:"\u200b"})):lg})),(0,mg.jsx)(ul,(0,i.Z)({value:Array.isArray(x)?x.join(","):x,name:h,ref:L,"aria-hidden":!0,onChange:function(g){var I=rg.map((function(g){return g.props.value})).indexOf(g.target.value);if(-1!==I){var e=rg[I];z(e.props.value),B&&B(g,e)}},tabIndex:-1,disabled:d,className:hg.nativeInput,autoFocus:l,ownerState:Gg},K)),(0,mg.jsx)(dl,{as:s,className:hg.icon,ownerState:Gg}),(0,mg.jsx)(_t,(0,i.Z)({id:"menu-".concat(h||""),anchorEl:P,open:Ag,onClose:function(g){ig(!1,g)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"}},p,{MenuListProps:(0,i.Z)({"aria-labelledby":Z,role:"listbox",disableListWrap:!0},p.MenuListProps),PaperProps:(0,i.Z)({},p.PaperProps,{style:(0,i.Z)({minWidth:bg},null!=p.PaperProps?p.PaperProps.style:null)}),children:sg}))]})})),Gl=pl,hl=e(9201),yl=(0,hl.Z)((0,mg.jsx)("path",{d:"M7 10l5 5 5-5z"}),"ArrowDropDown"),Bl=["autoWidth","children","classes","className","defaultOpen","displayEmpty","IconComponent","id","input","inputProps","label","labelId","MenuProps","multiple","native","onClose","onOpen","open","renderValue","SelectDisplayProps","variant"],Wl={name:"MuiSelect",overridesResolver:function(g,I){return I.root},shouldForwardProp:function(g){return(0,ag.FO)(g)&&"variant"!==g},slot:"Root"},Sl=(0,ag.ZP)(Ln,Wl)(""),Vl=(0,ag.ZP)(rt,Wl)(""),vl=(0,ag.ZP)($n,Wl)(""),Rl=g.forwardRef((function(I,e){var C=(0,ig.Z)({name:"MuiSelect",props:I}),n=C.autoWidth,t=void 0!==n&&n,l=C.children,o=C.classes,a=void 0===o?{}:o,r=C.className,c=C.defaultOpen,A=void 0!==c&&c,d=C.displayEmpty,u=void 0!==d&&d,s=C.IconComponent,m=void 0===s?yl:s,Z=C.id,b=C.input,p=C.inputProps,G=C.label,h=C.labelId,y=C.MenuProps,B=C.multiple,W=void 0!==B&&B,S=C.native,V=void 0!==S&&S,v=C.onClose,R=C.onOpen,X=C.open,f=C.renderValue,k=C.SelectDisplayProps,J=C.variant,Y=void 0===J?"outlined":J,H=(0,gg.Z)(C,Bl),w=V?ll:Gl,K=hn({props:C,muiFormControl:Bn(),states:["variant"]}).variant||Y,F=b||{standard:Zl||(Zl=(0,mg.jsx)(Sl,{})),outlined:(0,mg.jsx)(Vl,{label:G}),filled:bl||(bl=(0,mg.jsx)(vl,{}))}[K],N=function(g){return g.classes}((0,i.Z)({},C,{variant:K,classes:a})),x=(0,SI.Z)(e,F.ref);return g.cloneElement(F,(0,i.Z)({inputComponent:w,inputProps:(0,i.Z)({children:l,IconComponent:m,variant:K,type:void 0,multiple:W},V?{id:Z}:{autoWidth:t,defaultOpen:A,displayEmpty:u,labelId:h,MenuProps:y,onClose:v,onOpen:R,open:X,renderValue:f,SelectDisplayProps:(0,i.Z)({id:Z},k)},p,{classes:p?(0,Cg.Z)(N,p.classes):N},b?b.props.inputProps:{})},W&&V&&"outlined"===K?{notched:!0}:{},{ref:x,className:(0,Ig.Z)(F.props.className,r),variant:K},H))}));Rl.muiName="Select";var Xl=Rl;function fl(g){return(0,cg.Z)("MuiTextField",g)}(0,Ag.Z)("MuiTextField",["root"]);var kl=["autoComplete","autoFocus","children","className","color","defaultValue","disabled","error","FormHelperTextProps","fullWidth","helperText","id","InputLabelProps","inputProps","InputProps","inputRef","label","maxRows","minRows","multiline","name","onBlur","onChange","onFocus","placeholder","required","rows","select","SelectProps","type","value","variant"],Jl={standard:Ln,filled:$n,outlined:rt},Yl=(0,ag.ZP)(St,{name:"MuiTextField",slot:"Root",overridesResolver:function(g,I){return I.root}})({}),Hl=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiTextField"}),C=e.autoComplete,n=e.autoFocus,t=void 0!==n&&n,l=e.children,o=e.className,a=e.color,r=void 0===a?"primary":a,c=e.defaultValue,A=e.disabled,d=void 0!==A&&A,u=e.error,s=void 0!==u&&u,m=e.FormHelperTextProps,Z=e.fullWidth,b=void 0!==Z&&Z,p=e.helperText,G=e.id,h=e.InputLabelProps,y=e.inputProps,B=e.InputProps,W=e.inputRef,S=e.label,V=e.maxRows,v=e.minRows,R=e.multiline,X=void 0!==R&&R,f=e.name,k=e.onBlur,J=e.onChange,Y=e.onFocus,H=e.placeholder,w=e.required,K=void 0!==w&&w,F=e.rows,N=e.select,x=void 0!==N&&N,z=e.SelectProps,M=e.type,E=e.value,U=e.variant,Q=void 0===U?"outlined":U,L=(0,gg.Z)(e,kl),T=(0,i.Z)({},e,{autoFocus:t,color:r,disabled:d,error:s,fullWidth:b,multiline:X,required:K,select:x,variant:Q}),D=function(g){var I=g.classes;return(0,og.Z)({root:["root"]},fl,I)}(T);var j={};"outlined"===Q&&(h&&"undefined"!==typeof h.shrink&&(j.notched=h.shrink),j.label=S),x&&(z&&z.native||(j.id=void 0),j["aria-describedby"]=void 0);var P=(0,un.Z)(G),O=p&&P?"".concat(P,"-helper-text"):void 0,q=S&&P?"".concat(P,"-label"):void 0,_=Jl[Q],$=(0,mg.jsx)(_,(0,i.Z)({"aria-describedby":O,autoComplete:C,autoFocus:t,defaultValue:c,fullWidth:b,multiline:X,name:f,rows:F,maxRows:V,minRows:v,type:M,value:E,id:P,inputRef:W,onBlur:k,onChange:J,onFocus:Y,placeholder:H,inputProps:y},j,B));return(0,mg.jsxs)(Yl,(0,i.Z)({className:(0,Ig.Z)(D.root,o),disabled:d,error:s,fullWidth:b,ref:I,required:K,color:r,variant:Q,ownerState:T},L,{children:[null!=S&&""!==S&&(0,mg.jsx)(Gt,(0,i.Z)({htmlFor:P,id:q},h,{children:S})),x?(0,mg.jsx)(Xl,(0,i.Z)({"aria-describedby":O,id:P,labelId:q,value:E,input:$},z,{children:l})):$,p&&(0,mg.jsx)(kt,(0,i.Z)({id:O},m,{children:p}))]}))})),wl=Hl,Kl=e(872),Fl=e(9823);function Nl(g){return(0,cg.Z)("MuiDialog",g)}var xl=(0,Ag.Z)("MuiDialog",["root","scrollPaper","scrollBody","container","paper","paperScrollPaper","paperScrollBody","paperWidthFalse","paperWidthXs","paperWidthSm","paperWidthMd","paperWidthLg","paperWidthXl","paperFullWidth","paperFullScreen"]);var zl=(0,g.createContext)({}),Ml=["aria-describedby","aria-labelledby","BackdropComponent","BackdropProps","children","className","disableEscapeKeyDown","fullScreen","fullWidth","maxWidth","onBackdropClick","onClose","open","PaperComponent","PaperProps","scroll","TransitionComponent","transitionDuration","TransitionProps"],El=(0,ag.ZP)(OC,{name:"MuiDialog",slot:"Backdrop",overrides:function(g,I){return I.backdrop}})({zIndex:-1}),Ul=(0,ag.ZP)(gn,{name:"MuiDialog",slot:"Root",overridesResolver:function(g,I){return I.root}})({"@media print":{position:"absolute !important"}}),Ql=(0,ag.ZP)("div",{name:"MuiDialog",slot:"Container",overridesResolver:function(g,I){var e=g.ownerState;return[I.container,I["scroll".concat((0,Rg.Z)(e.scroll))]]}})((function(g){var I=g.ownerState;return(0,i.Z)({height:"100%","@media print":{height:"auto"},outline:0},"paper"===I.scroll&&{display:"flex",justifyContent:"center",alignItems:"center"},"body"===I.scroll&&{overflowY:"auto",overflowX:"hidden",textAlign:"center","&:after":{content:'""',display:"inline-block",verticalAlign:"middle",height:"100%",width:"0"}})})),Ll=(0,ag.ZP)(vg,{name:"MuiDialog",slot:"Paper",overridesResolver:function(g,I){var e=g.ownerState;return[I.paper,I["scrollPaper".concat((0,Rg.Z)(e.scroll))],I["paperWidth".concat((0,Rg.Z)(String(e.maxWidth)))],e.fullWidth&&I.paperFullWidth,e.fullScreen&&I.paperFullScreen]}})((function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({margin:32,position:"relative",overflowY:"auto","@media print":{overflowY:"visible",boxShadow:"none"}},"paper"===e.scroll&&{display:"flex",flexDirection:"column",maxHeight:"calc(100% - 64px)"},"body"===e.scroll&&{display:"inline-block",verticalAlign:"middle",textAlign:"left"},!e.maxWidth&&{maxWidth:"calc(100% - 64px)"},"xs"===e.maxWidth&&(0,t.Z)({maxWidth:"px"===I.breakpoints.unit?Math.max(I.breakpoints.values.xs,444):"".concat(I.breakpoints.values.xs).concat(I.breakpoints.unit)},"&.".concat(xl.paperScrollBody),(0,t.Z)({},I.breakpoints.down(Math.max(I.breakpoints.values.xs,444)+64),{maxWidth:"calc(100% - 64px)"})),"xs"!==e.maxWidth&&(0,t.Z)({maxWidth:"".concat(I.breakpoints.values[e.maxWidth]).concat(I.breakpoints.unit)},"&.".concat(xl.paperScrollBody),(0,t.Z)({},I.breakpoints.down(I.breakpoints.values[e.maxWidth]+64),{maxWidth:"calc(100% - 64px)"})),e.fullWidth&&{width:"calc(100% - 64px)"},e.fullScreen&&(0,t.Z)({margin:0,width:"100%",maxWidth:"100%",height:"100%",maxHeight:"none",borderRadius:0},"&.".concat(xl.paperScrollBody),{margin:0,maxWidth:"100%"}))})),Tl=g.forwardRef((function(I,e){var C=(0,ig.Z)({props:I,name:"MuiDialog"}),n=oC(),t={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},l=C["aria-describedby"],o=C["aria-labelledby"],a=C.BackdropComponent,r=C.BackdropProps,c=C.children,A=C.className,d=C.disableEscapeKeyDown,u=void 0!==d&&d,s=C.fullScreen,m=void 0!==s&&s,Z=C.fullWidth,b=void 0!==Z&&Z,p=C.maxWidth,G=void 0===p?"sm":p,h=C.onBackdropClick,y=C.onClose,B=C.open,W=C.PaperComponent,S=void 0===W?vg:W,V=C.PaperProps,v=void 0===V?{}:V,R=C.scroll,X=void 0===R?"paper":R,f=C.TransitionComponent,k=void 0===f?DC:f,J=C.transitionDuration,Y=void 0===J?t:J,H=C.TransitionProps,w=(0,gg.Z)(C,Ml),K=(0,i.Z)({},C,{disableEscapeKeyDown:u,fullScreen:m,fullWidth:b,maxWidth:G,scroll:X}),F=function(g){var I=g.classes,e=g.scroll,C=g.maxWidth,n=g.fullWidth,t=g.fullScreen,l={root:["root"],container:["container","scroll".concat((0,Rg.Z)(e))],paper:["paper","paperScroll".concat((0,Rg.Z)(e)),"paperWidth".concat((0,Rg.Z)(String(C))),n&&"paperFullWidth",t&&"paperFullScreen"]};return(0,og.Z)(l,Nl,I)}(K),N=g.useRef(),x=(0,un.Z)(o),z=g.useMemo((function(){return{titleId:x}}),[x]);return(0,mg.jsx)(Ul,(0,i.Z)({className:(0,Ig.Z)(F.root,A),BackdropProps:(0,i.Z)({transitionDuration:Y,as:a},r),closeAfterTransition:!0,BackdropComponent:El,disableEscapeKeyDown:u,onClose:y,open:B,ref:e,onClick:function(g){N.current&&(N.current=null,h&&h(g),y&&y(g,"backdropClick"))},ownerState:K},w,{children:(0,mg.jsx)(k,(0,i.Z)({appear:!0,in:B,timeout:Y,role:"presentation"},H,{children:(0,mg.jsx)(Ql,{className:(0,Ig.Z)(F.container),onMouseDown:function(g){N.current=g.target===g.currentTarget},ownerState:K,children:(0,mg.jsx)(Ll,(0,i.Z)({as:S,elevation:24,role:"dialog","aria-describedby":l,"aria-labelledby":x},v,{className:(0,Ig.Z)(F.paper,v.className),ownerState:K,children:(0,mg.jsx)(zl.Provider,{value:z,children:c})}))})}))}))}));function Dl(g){return(0,cg.Z)("MuiDialogActions",g)}(0,Ag.Z)("MuiDialogActions",["root","spacing"]);var jl=["className","disableSpacing"],Pl=(0,ag.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,!e.disableSpacing&&I.spacing]}})((function(g){var I=g.ownerState;return(0,i.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!I.disableSpacing&&{"& > :not(:first-of-type)":{marginLeft:8}})})),Ol=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiDialogActions"}),C=e.className,n=e.disableSpacing,t=void 0!==n&&n,l=(0,gg.Z)(e,jl),o=(0,i.Z)({},e,{disableSpacing:t}),a=function(g){var I=g.classes,e={root:["root",!g.disableSpacing&&"spacing"]};return(0,og.Z)(e,Dl,I)}(o);return(0,mg.jsx)(Pl,(0,i.Z)({className:(0,Ig.Z)(a.root,C),ownerState:o,ref:I},l))}));function ql(g){return(0,cg.Z)("MuiDialogContent",g)}(0,Ag.Z)("MuiDialogContent",["root","dividers"]);function _l(g){return(0,cg.Z)("MuiDialogTitle",g)}var $l=(0,Ag.Z)("MuiDialogTitle",["root"]),go=["className","dividers"],Io=(0,ag.ZP)("div",{name:"MuiDialogContent",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,e.dividers&&I.dividers]}})((function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({flex:"1 1 auto",WebkitOverflowScrolling:"touch",overflowY:"auto",padding:"20px 24px"},e.dividers?{padding:"16px 24px",borderTop:"1px solid ".concat(I.palette.divider),borderBottom:"1px solid ".concat(I.palette.divider)}:(0,t.Z)({},".".concat($l.root," + &"),{paddingTop:0}))})),eo=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiDialogContent"}),C=e.className,n=e.dividers,t=void 0!==n&&n,l=(0,gg.Z)(e,go),o=(0,i.Z)({},e,{dividers:t}),a=function(g){var I=g.classes,e={root:["root",g.dividers&&"dividers"]};return(0,og.Z)(e,ql,I)}(o);return(0,mg.jsx)(Io,(0,i.Z)({className:(0,Ig.Z)(a.root,C),ownerState:o,ref:I},l))})),Co=["className","id"],no=(0,ag.ZP)(Hg,{name:"MuiDialogTitle",slot:"Root",overridesResolver:function(g,I){return I.root}})({padding:"16px 24px",flex:"0 0 auto"}),to=g.forwardRef((function(I,e){var C=(0,ig.Z)({props:I,name:"MuiDialogTitle"}),n=C.className,t=C.id,l=(0,gg.Z)(C,Co),o=C,a=function(g){var I=g.classes;return(0,og.Z)({root:["root"]},_l,I)}(o),r=g.useContext(zl).titleId,c=void 0===r?t:r;return(0,mg.jsx)(no,(0,i.Z)({component:"h2",className:(0,Ig.Z)(a.root,n),ownerState:o,ref:e,variant:"h6",id:c},l))})),lo=function(){var I=function(){var I=(0,g.useContext)(B).matches,e=I[I.length-1];return e?e.params:{}}().category;function e(g,I,e,C,n){return{name:g,calories:I,status:e,carbs:C,protein:n}}var C=[];"hissensorer"===I&&(C=[e("hiss Entr\xe9 1",18,"status",24,4),e("hiss Entr\xe9 2",237,"status",37,4.3),e("hiss Entr\xe9 3",18,"status",24,4),e("hiss Entr\xe9 4",237,"status",37,4.3)]),"temperatursensorer"===I&&(C=[e("temperatursensor 1",18,"status",24,4),e("temperatursensor 2",237,"status",37,4.3),e("temperatursensor 3",18,"status",24,4),e("temperatursensor 4",237,"status",37,4.3),e("temperatursensor 5",18,"status",24,4),e("temperatursensor 6",237,"status",37,4.3),e("temperatursensor 7",18,"status",24,4),e("temperatursensor 8",237,"status",37,4.3)]),"d\xf6rrsensorer"===I&&(C=[e("d\xf6rr 1",18,"status",24,4),e("d\xf6rr 2",237,"status",37,4.3),e("d\xf6rr 3",237,"status",37,4.3),e("d\xf6rr 4",18,"status",24,4),e("d\xf6rr 5",237,"status",37,4.3),e("d\xf6rr 6",18,"status",24,4),e("d\xf6rr 7",237,"status",37,4.3),e("d\xf6rr 8",18,"status",24,4),e("d\xf6rr 9",237,"status",37,4.3),e("d\xf6rr 10",237,"status",37,4.3)]);var t=g.useState(!1),l=(0,n.Z)(t,2),o=l[0],a=l[1],i=g.useState(null),r=(0,n.Z)(i,2),c=r[0],A=r[1],d=function(){a(!1)},u=g.useState(null),s=(0,n.Z)(u,2),m=s[0],Z=s[1],b=g.useState(null),p=(0,n.Z)(b,2),G=p[0],h=p[1],y=function(g){Z(g.currentTarget),h(g.currentTarget.title)},W=Boolean(m);return(0,mg.jsxs)("main",{children:[(0,mg.jsx)("h1",{style:{textTransform:"capitalize"},children:I}),(0,mg.jsx)(GI,{style:{position:"fixed",bottom:0,right:0,zIndex:2},sx:{"& > :not(style)":{m:3}},children:(0,mg.jsx)(Je,{size:"large",color:"primary","aria-label":"add",children:(0,mg.jsx)(Ye.Z,{})})}),(0,mg.jsx)(Ng,{component:vg,style:{boxShadow:"none",marginBottom:"4em"},children:(0,mg.jsx)(Qg,{size:"small","aria-label":"a dense table",style:{borderCollapse:"separate",borderSpacing:"0 0.7em",boxShadow:"none"},children:(0,mg.jsx)(qg,{children:C.map((function(g){return(0,mg.jsx)(CI,{children:(0,mg.jsx)(iI,{component:"th",scope:"row",style:{border:"none",padding:"7px"},children:(0,mg.jsxs)(dI,{sx:{display:"flex",border:"1px solid #e0e0e0",textDecoration:"none",padding:"0.5em 1em",boxShadow:"5px 5px 5px #F0F0F0"},children:[(0,mg.jsx)(GI,{sx:{display:"flex",flexDirection:"column",width:"100%"},children:(0,mg.jsxs)(WI,{sx:{flex:"1 0 auto",padding:"1em 0"},children:[(0,mg.jsx)(Hg,{component:"div",variant:"h5",sx:{textTransform:"capitalize"},children:g.name}),(0,mg.jsxs)(Hg,{variant:"subtitle1",color:"text.secondary",component:"div",children:["Lite info ",(0,mg.jsx)("b",{children:g.installed})]})]})}),(0,mg.jsxs)(GI,{sx:{display:"flex",flexDirection:"column",margin:"auto",gap:"1em",alignItems:"flex-start"},children:[(0,mg.jsx)(ye,{title:g.name,variant:"contained",onClick:y,sx:{width:"fit-content",alignSelf:"flex-end"},children:(0,mg.jsx)(Be.Z,{})}),(0,mg.jsxs)(GI,{style:{display:"flex",flexDirection:"row",margin:"0 auto",textTransform:"capitalize",alignSelf:"flex-end"},children:[(0,mg.jsx)(Hg,{variant:"subtitle2",color:"text.secondary",component:"div",children:g.status}),(0,mg.jsx)(We.Z,{sx:{fontSize:20,margin:"auto",color:"orange",padding:"0 0.45em"},children:"sensorIcon"})]})]})]})})})}))})})}),(0,mg.jsx)(cn,{open:W,title:G,anchorEl:m,onClose:function(){return Z(null)},anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,mg.jsxs)(GI,{sx:{display:"flex",flexDirection:"column",margin:"0 auto",padding:"0.5em",alignItems:"flex-start"},children:[(0,mg.jsxs)(De,{onClick:function(g){A(g.currentTarget.title),a(!0),Z(null)},title:G,startIcon:(0,mg.jsx)(dn.Z,{}),sx:{textTransform:"none"},children:["Redigera ",G]}),(0,mg.jsxs)(De,{startIcon:(0,mg.jsx)(An.Z,{}),sx:{textTransform:"none",color:"#EB4440"},children:["Radera ",G]})]})}),(0,mg.jsxs)(Tl,{open:o,title:c,onClose:d,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",fullWidth:!0,children:[(0,mg.jsxs)(to,{id:"alert-dialog-title",style:{textAlign:"center",paddingTop:"1em",textTransform:"capitalize"},children:[G,(0,mg.jsxs)(GI,{style:{display:"flex",flexDirection:"row",justifyContent:"center",padding:"0.6em 0 1em"},children:[(0,mg.jsx)(We.Z,{sx:{fontSize:20,color:"orange",padding:"0 0.3em"},children:"sensorIcon"}),(0,mg.jsx)(Hg,{variant:"subtitle2",color:"text.secondary",component:"div",children:"Status"})]})]}),(0,mg.jsx)(eo,{children:(0,mg.jsx)(wl,{autoFocus:!0,margin:"dense",id:"name",label:"\xc4ndra namn p\xe5 sensor",type:"name",variant:"outlined",placeholder:G,fullWidth:!0,autoComplete:"off"})}),(0,mg.jsxs)(Ol,{style:{marginTop:"2em"},children:[(0,mg.jsx)(De,{onClick:d,variant:"outlined",startIcon:(0,mg.jsx)(Fl.Z,{}),children:"Avbryt"}),(0,mg.jsx)(De,{onClick:d,variant:"contained",startIcon:(0,mg.jsx)(Kl.Z,{}),sx:{bgcolor:"#0C3B69",fontWeight:"bold",marginLeft:"1em"},children:"Spara"})]})]})]})},oo=function(){return(0,mg.jsx)("h1",{children:"Users"})};function ao(g){return(0,cg.Z)("MuiCardMedia",g)}(0,Ag.Z)("MuiCardMedia",["root","media","img"]);var io=["children","className","component","image","src","style"],ro=(0,ag.ZP)("div",{name:"MuiCardMedia",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState,C=e.isMediaComponent,n=e.isImageComponent;return[I.root,C&&I.media,n&&I.img]}})((function(g){var I=g.ownerState;return(0,i.Z)({display:"block",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center"},I.isMediaComponent&&{width:"100%"},I.isImageComponent&&{objectFit:"cover"})})),co=["video","audio","picture","iframe","img"],Ao=["picture","img"],uo=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiCardMedia"}),C=e.children,n=e.className,t=e.component,l=void 0===t?"div":t,o=e.image,a=e.src,r=e.style,c=(0,gg.Z)(e,io),A=-1!==co.indexOf(l),d=!A&&o?(0,i.Z)({backgroundImage:'url("'.concat(o,'")')},r):r,u=(0,i.Z)({},e,{component:l,isMediaComponent:A,isImageComponent:-1!==Ao.indexOf(l)}),s=function(g){var I=g.classes,e={root:["root",g.isMediaComponent&&"media",g.isImageComponent&&"img"]};return(0,og.Z)(e,ao,I)}(u);return(0,mg.jsx)(ro,(0,i.Z)({className:(0,Ig.Z)(s.root,n),as:l,role:!A&&o?"img":void 0,ref:I,style:d,ownerState:u,src:A?o||a:void 0},c,{children:C}))})),so=uo;function mo(g){return(0,cg.Z)("MuiCircularProgress",g)}(0,Ag.Z)("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);var Zo,bo,po,Go,ho,yo,Bo,Wo,So,Vo=["className","color","disableShrink","size","style","thickness","value","variant"],vo=44,Ro=TI(ho||(ho=Zo||(Zo=RI(["\n  0% {\n    transform: rotate(0deg);\n  }\n\n  100% {\n    transform: rotate(360deg);\n  }\n"])))),Xo=TI(yo||(yo=bo||(bo=RI(["\n  0% {\n    stroke-dasharray: 1px, 200px;\n    stroke-dashoffset: 0;\n  }\n\n  50% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -15px;\n  }\n\n  100% {\n    stroke-dasharray: 100px, 200px;\n    stroke-dashoffset: -125px;\n  }\n"])))),fo=(0,ag.ZP)("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,I[e.variant],I["color".concat((0,Rg.Z)(e.color))]]}})((function(g){var I=g.ownerState,e=g.theme;return(0,i.Z)({display:"inline-block"},"determinate"===I.variant&&{transition:e.transitions.create("transform")},"inherit"!==I.color&&{color:e.palette[I.color].main})}),(function(g){return"indeterminate"===g.ownerState.variant&&LI(Bo||(Bo=po||(po=RI(["\n      animation: "," 1.4s linear infinite;\n    "]))),Ro)})),ko=(0,ag.ZP)("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:function(g,I){return I.svg}})({display:"block"}),Jo=(0,ag.ZP)("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:function(g,I){var e=g.ownerState;return[I.circle,I["circle".concat((0,Rg.Z)(e.variant))],e.disableShrink&&I.circleDisableShrink]}})((function(g){var I=g.ownerState,e=g.theme;return(0,i.Z)({stroke:"currentColor"},"determinate"===I.variant&&{transition:e.transitions.create("stroke-dashoffset")},"indeterminate"===I.variant&&{strokeDasharray:"80px, 200px",strokeDashoffset:0})}),(function(g){var I=g.ownerState;return"indeterminate"===I.variant&&!I.disableShrink&&LI(Wo||(Wo=Go||(Go=RI(["\n      animation: "," 1.4s ease-in-out infinite;\n    "]))),Xo)})),Yo=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiCircularProgress"}),C=e.className,n=e.color,t=void 0===n?"primary":n,l=e.disableShrink,o=void 0!==l&&l,a=e.size,r=void 0===a?40:a,c=e.style,A=e.thickness,d=void 0===A?3.6:A,u=e.value,s=void 0===u?0:u,m=e.variant,Z=void 0===m?"indeterminate":m,b=(0,gg.Z)(e,Vo),p=(0,i.Z)({},e,{color:t,disableShrink:o,size:r,thickness:d,value:s,variant:Z}),G=function(g){var I=g.classes,e=g.variant,C=g.color,n=g.disableShrink,t={root:["root",e,"color".concat((0,Rg.Z)(C))],svg:["svg"],circle:["circle","circle".concat((0,Rg.Z)(e)),n&&"circleDisableShrink"]};return(0,og.Z)(t,mo,I)}(p),h={},y={},B={};if("determinate"===Z){var W=2*Math.PI*((vo-d)/2);h.strokeDasharray=W.toFixed(3),B["aria-valuenow"]=Math.round(s),h.strokeDashoffset="".concat(((100-s)/100*W).toFixed(3),"px"),y.transform="rotate(-90deg)"}return(0,mg.jsx)(fo,(0,i.Z)({className:(0,Ig.Z)(G.root,C),style:(0,i.Z)({width:r,height:r},y,c),ownerState:p,ref:I,role:"progressbar"},B,b,{children:(0,mg.jsx)(ko,{className:G.svg,ownerState:p,viewBox:"".concat(22," ").concat(22," ").concat(vo," ").concat(vo),children:(0,mg.jsx)(Jo,{className:G.circle,style:h,ownerState:p,cx:vo,cy:vo,r:(vo-d)/2,fill:"none",strokeWidth:d})})}))}));var Ho,wo=function(g){var I=g.loading,e=(0,ag.ZP)("div")(So||(So=RI(["\n        position: fixed;\n        top: 0;\n        left: 0;\n        width: 100%;\n        height: 100%;\n        background-color: rgba(0, 0, 0, 0.7);\n        z-index: 1000;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n        align-items: center;\n    "])));return(0,mg.jsx)(mg.Fragment,{children:I&&(0,mg.jsxs)(e,{children:[(0,mg.jsx)(Yo,{}),(0,mg.jsx)(Hg,{variant:"h6",color:"white",children:"Loading..."})]})})},Ko=function(I){I.cookies;var e=I.t,C=I.apiURL,t=g.useState(!0),l=(0,n.Z)(t,2),o=l[0],a=l[1],i=g.useState([]),r=(0,n.Z)(i,2),c=r[0],A=r[1],d=(0,ag.ZP)("div")(Ho||(Ho=RI(["\n      display: flex;\n      justify-content: end;\n      align-items: center;\n    "])));return fetch("".concat(C,"getCompnies?key=").concat("377307b0-fdf6-4762-8403-00084d164de5")).then((function(g){return g.json()})).then((function(g){o&&(A(g),a(!1))})),(0,mg.jsx)(mg.Fragment,{children:(0,mg.jsxs)(GI,{m:2,children:[(0,mg.jsx)(Hg,{variant:"h4",children:e("tractAdminPanel")}),(0,mg.jsx)("br",{}),(0,mg.jsx)(Hg,{variant:"h6",children:e("companies")}),(0,mg.jsx)(d,{children:(0,mg.jsx)(De,{style:{float:"left",marginBottom:"1rem",marginTop:"1rem"},variant:"outlined",component:_,to:"/admin/add-company",children:e("addCompany")})}),(0,mg.jsx)(wo,{loading:o}),(0,mg.jsx)(hg,{container:!0,spacing:10,children:c.map((function(g){return(0,mg.jsx)(hg,{item:!0,xs:12,md:4,children:(0,mg.jsxs)(dI,{children:[(0,mg.jsx)(so,{component:"img",alt:g.name,height:"140",image:"https://source.unsplash.com/random",title:g.name}),(0,mg.jsx)(WI,{children:(0,mg.jsx)(Hg,{gutterBottom:!0,variant:"h5",component:"h2",children:g.name})})]})},g.id)}))})]})})};function Fo(g){return(0,cg.Z)("MuiDivider",g)}var No=(0,Ag.Z)("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]),xo=["absolute","children","className","component","flexItem","light","orientation","role","textAlign","variant"],zo=(0,ag.ZP)("div",{name:"MuiDivider",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,e.absolute&&I.absolute,I[e.variant],e.light&&I.light,"vertical"===e.orientation&&I.vertical,e.flexItem&&I.flexItem,e.children&&I.withChildren,e.children&&"vertical"===e.orientation&&I.withChildrenVertical,"right"===e.textAlign&&"vertical"!==e.orientation&&I.textAlignRight,"left"===e.textAlign&&"vertical"!==e.orientation&&I.textAlignLeft]}})((function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({margin:0,flexShrink:0,borderWidth:0,borderStyle:"solid",borderColor:I.palette.divider,borderBottomWidth:"thin"},e.absolute&&{position:"absolute",bottom:0,left:0,width:"100%"},e.light&&{borderColor:(0,yg.Fq)(I.palette.divider,.08)},"inset"===e.variant&&{marginLeft:72},"middle"===e.variant&&"horizontal"===e.orientation&&{marginLeft:I.spacing(2),marginRight:I.spacing(2)},"middle"===e.variant&&"vertical"===e.orientation&&{marginTop:I.spacing(1),marginBottom:I.spacing(1)},"vertical"===e.orientation&&{height:"100%",borderBottomWidth:0,borderRightWidth:"thin"},e.flexItem&&{alignSelf:"stretch",height:"auto"})}),(function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({},e.children&&{display:"flex",whiteSpace:"nowrap",textAlign:"center",border:0,"&::before, &::after":{position:"relative",width:"100%",borderTop:"thin solid ".concat(I.palette.divider),top:"50%",content:'""',transform:"translateY(50%)"}})}),(function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({},e.children&&"vertical"===e.orientation&&{flexDirection:"column","&::before, &::after":{height:"100%",top:"0%",left:"50%",borderTop:0,borderLeft:"thin solid ".concat(I.palette.divider),transform:"translateX(0%)"}})}),(function(g){var I=g.ownerState;return(0,i.Z)({},"right"===I.textAlign&&"vertical"!==I.orientation&&{"&::before":{width:"90%"},"&::after":{width:"10%"}},"left"===I.textAlign&&"vertical"!==I.orientation&&{"&::before":{width:"10%"},"&::after":{width:"90%"}})})),Mo=(0,ag.ZP)("span",{name:"MuiDivider",slot:"Wrapper",overridesResolver:function(g,I){var e=g.ownerState;return[I.wrapper,"vertical"===e.orientation&&I.wrapperVertical]}})((function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({display:"inline-block",paddingLeft:"calc(".concat(I.spacing(1)," * 1.2)"),paddingRight:"calc(".concat(I.spacing(1)," * 1.2)")},"vertical"===e.orientation&&{paddingTop:"calc(".concat(I.spacing(1)," * 1.2)"),paddingBottom:"calc(".concat(I.spacing(1)," * 1.2)")})})),Eo=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiDivider"}),C=e.absolute,n=void 0!==C&&C,t=e.children,l=e.className,o=e.component,a=void 0===o?t?"div":"hr":o,r=e.flexItem,c=void 0!==r&&r,A=e.light,d=void 0!==A&&A,u=e.orientation,s=void 0===u?"horizontal":u,m=e.role,Z=void 0===m?"hr"!==a?"separator":void 0:m,b=e.textAlign,p=void 0===b?"center":b,G=e.variant,h=void 0===G?"fullWidth":G,y=(0,gg.Z)(e,xo),B=(0,i.Z)({},e,{absolute:n,component:a,flexItem:c,light:d,orientation:s,role:Z,textAlign:p,variant:h}),W=function(g){var I=g.absolute,e=g.children,C=g.classes,n=g.flexItem,t=g.light,l=g.orientation,o=g.textAlign,a={root:["root",I&&"absolute",g.variant,t&&"light","vertical"===l&&"vertical",n&&"flexItem",e&&"withChildren",e&&"vertical"===l&&"withChildrenVertical","right"===o&&"vertical"!==l&&"textAlignRight","left"===o&&"vertical"!==l&&"textAlignLeft"],wrapper:["wrapper","vertical"===l&&"wrapperVertical"]};return(0,og.Z)(a,Fo,C)}(B);return(0,mg.jsx)(zo,(0,i.Z)({as:a,className:(0,Ig.Z)(W.root,l),role:Z,ref:I,ownerState:B},y,{children:t?(0,mg.jsx)(Mo,{className:W.wrapper,ownerState:B,children:t}):null}))}));var Uo=function(I){var e=I.t,C=g.useState(""),t=(0,n.Z)(C,2),l=t[0],o=t[1],a=g.useState(""),i=(0,n.Z)(a,2),r=i[0],c=i[1],A=g.useState(""),d=(0,n.Z)(A,2),u=d[0],s=d[1],m=g.useState(""),Z=(0,n.Z)(m,2),b=Z[0],p=Z[1],G=g.useState(""),h=(0,n.Z)(G,2),y=h[0],B=h[1],W=g.useState(""),S=(0,n.Z)(W,2),V=S[0],v=S[1],R=g.useState(""),X=(0,n.Z)(R,2),f=X[0],k=X[1],J=g.useState(!1),Y=(0,n.Z)(J,2),H=Y[0],w=Y[1],K=function(){""===l||""===r||""===u||""===b||""===y||""===V||""===f?alert("Please fill all the fields"):(w(!0),fetch("http://localhost:9000/api/createCompany?key=".concat("377307b0-fdf6-4762-8403-00084d164de5","&name=").concat(l,"&email=").concat(r,"&phone=").concat(u,"&adminmail=").concat(b,"&adminfirstname=").concat(y,"&adminlastname=").concat(V,"&adminusername=").concat(f)).then((function(g){return g.json()})).then((function(g){console.log(g),"success"===g.status&&w(!1)})))};return(0,mg.jsxs)(GI,{m:2,children:[(0,mg.jsx)(wo,{loading:H}),(0,mg.jsx)(Hg,{variant:"h4",children:"Add Company"}),(0,mg.jsx)("br",{}),(0,mg.jsx)(Eo,{}),(0,mg.jsx)("br",{}),(0,mg.jsx)(Hg,{variant:"h6",children:e("companiesInformation")}),(0,mg.jsx)("br",{}),(0,mg.jsxs)(hg,{container:!0,spacing:3,children:[(0,mg.jsx)(hg,{item:!0,xs:12,md:4,children:(0,mg.jsx)(wl,{id:"outlined-basic",label:e("companyName"),variant:"outlined",style:{width:"100%"},onChange:function(g){return o(g.target.value)}})}),(0,mg.jsx)(hg,{item:!0,xs:12,md:4,children:(0,mg.jsx)(wl,{id:"outlined-basic",label:e("supportEmail"),variant:"outlined",style:{width:"100%"},onChange:function(g){return c(g.target.value)}})}),(0,mg.jsx)(hg,{item:!0,xs:12,md:4,children:(0,mg.jsx)(wl,{id:"outlined-basic",label:e("supportPhone"),variant:"outlined",style:{width:"100%"},onChange:function(g){return s(g.target.value)}})})]}),(0,mg.jsx)("br",{}),(0,mg.jsx)(Hg,{variant:"h6",children:e("companyAdminInformation")}),(0,mg.jsx)("br",{}),(0,mg.jsxs)(hg,{container:!0,spacing:3,children:[(0,mg.jsx)(hg,{item:!0,xs:12,md:6,children:(0,mg.jsx)(wl,{id:"outlined-basic",label:e("adminFirstName"),variant:"outlined",style:{width:"100%"},onChange:function(g){return B(g.target.value)}})}),(0,mg.jsx)(hg,{item:!0,xs:12,md:6,children:(0,mg.jsx)(wl,{id:"outlined-basic",label:e("adminLastName"),variant:"outlined",style:{width:"100%"},onChange:function(g){return v(g.target.value)}})}),(0,mg.jsx)(hg,{item:!0,xs:12,md:6,children:(0,mg.jsx)(wl,{id:"outlined-basic",label:e("adminMail"),variant:"outlined",style:{width:"100%"},onChange:function(g){return p(g.target.value)}})}),(0,mg.jsx)(hg,{item:!0,xs:12,md:6,children:(0,mg.jsx)(wl,{id:"outlined-basic",label:e("adminUsername"),variant:"outlined",style:{width:"100%"},onChange:function(g){return k(g.target.value)}})})]}),(0,mg.jsx)("br",{}),(0,mg.jsx)(De,{variant:"contained",style:{width:"100%"},color:"primary",onClick:function(){return K()},children:e("addCompany")})]})};function Qo(g){return Qo=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)},Qo(g)}function Lo(g){return Lo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(g){return typeof g}:function(g){return g&&"function"==typeof Symbol&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},Lo(g)}function To(g,I){if(I&&("object"===Lo(I)||"function"===typeof I))return I;if(void 0!==I)throw new TypeError("Derived constructors may only return object or undefined");return XI(g)}function Do(g){var I=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(g){return!1}}();return function(){var e,C=Qo(g);if(I){var n=Qo(this).constructor;e=Reflect.construct(C,arguments,n)}else e=C.apply(this,arguments);return To(this,e)}}function jo(g){return(0,cg.Z)("MuiListItemIcon",g)}var Po=(0,Ag.Z)("MuiListItemIcon",["root","alignItemsFlexStart"]);function Oo(g){return(0,cg.Z)("MuiListItemText",g)}var qo=(0,Ag.Z)("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);function _o(g){return(0,cg.Z)("MuiMenuItem",g)}var $o,ga=(0,Ag.Z)("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]),Ia=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex"],ea=(0,ag.ZP)(Ze,{shouldForwardProp:function(g){return(0,ag.FO)(g)||"classes"===g},name:"MuiMenuItem",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,e.dense&&I.dense,e.divider&&I.divider,!e.disableGutters&&I.gutters]}})((function(g){var I,e=g.theme,C=g.ownerState;return(0,i.Z)({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!C.disableGutters&&{paddingLeft:16,paddingRight:16},C.divider&&{borderBottom:"1px solid ".concat(e.palette.divider),backgroundClip:"padding-box"},(I={"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},(0,t.Z)(I,"&.".concat(ga.selected),(0,t.Z)({backgroundColor:(0,yg.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)},"&.".concat(ga.focusVisible),{backgroundColor:(0,yg.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)})),(0,t.Z)(I,"&.".concat(ga.selected,":hover"),{backgroundColor:(0,yg.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,yg.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}}),(0,t.Z)(I,"&.".concat(ga.focusVisible),{backgroundColor:e.palette.action.focus}),(0,t.Z)(I,"&.".concat(ga.disabled),{opacity:e.palette.action.disabledOpacity}),(0,t.Z)(I,"& + .".concat(No.root),{marginTop:e.spacing(1),marginBottom:e.spacing(1)}),(0,t.Z)(I,"& + .".concat(No.inset),{marginLeft:52}),(0,t.Z)(I,"& .".concat(qo.root),{marginTop:0,marginBottom:0}),(0,t.Z)(I,"& .".concat(qo.inset),{paddingLeft:36}),(0,t.Z)(I,"& .".concat(Po.root),{minWidth:36}),I),!C.dense&&(0,t.Z)({},e.breakpoints.up("sm"),{minHeight:"auto"}),C.dense&&(0,i.Z)({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,(0,t.Z)({},"& .".concat(Po.root," svg"),{fontSize:"1.25rem"})))})),Ca=g.forwardRef((function(I,e){var C=(0,ig.Z)({props:I,name:"MuiMenuItem"}),n=C.autoFocus,t=void 0!==n&&n,l=C.component,o=void 0===l?"li":l,a=C.dense,r=void 0!==a&&a,c=C.divider,A=void 0!==c&&c,d=C.disableGutters,u=void 0!==d&&d,s=C.focusVisibleClassName,m=C.role,Z=void 0===m?"menuitem":m,b=C.tabIndex,p=(0,gg.Z)(C,Ia),G=g.useContext(Jt),h={dense:r||G.dense||!1,disableGutters:u},y=g.useRef(null);(0,Wn.Z)((function(){t&&y.current&&y.current.focus()}),[t]);var B,W=(0,i.Z)({},C,{dense:h.dense,divider:A,disableGutters:u}),S=function(g){var I=g.disabled,e=g.dense,C=g.divider,n=g.disableGutters,t=g.selected,l=g.classes,o={root:["root",e&&"dense",I&&"disabled",!n&&"gutters",C&&"divider",t&&"selected"]},a=(0,og.Z)(o,_o,l);return(0,i.Z)({},l,a)}(C),V=(0,SI.Z)(y,e);return C.disabled||(B=void 0!==b?b:-1),(0,mg.jsx)(Jt.Provider,{value:h,children:(0,mg.jsx)(ea,(0,i.Z)({ref:V,role:Z,tabIndex:B,component:o,focusVisibleClassName:(0,Ig.Z)(S.focusVisible,s)},p,{ownerState:W,classes:S}))})})),na=e(9008),ta=e.n(na),la=function(g){!function(g,I){if("function"!==typeof I&&null!==I)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(I&&I.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),Object.defineProperty(g,"prototype",{writable:!1}),I&&fI(g,I)}(e,g);var I=Do(e);function e(g){var C;return BC(this,e),(C=I.call(this,g)).state={delay:500,result:"No result"},C.getDeviceId=g.getDeviceId,C.handleScan=C.handleScan.bind(XI(C)),C.handleError=C.handleError.bind(XI(C)),C}return SC(e,[{key:"handleScan",value:function(g){g&&(this.setState({result:g}),this.getDeviceId(g.text))}},{key:"handleError",value:function(g){console.error(g)}},{key:"render",value:function(){return(0,mg.jsxs)(GI,{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,mg.jsx)(ta(),{delay:this.state.delay,onError:this.handleError,onScan:this.handleScan,style:{height:"100%",width:"100%",borderRadius:"1rem"}}),(0,mg.jsx)("p",{children:null!==this.state.result&&(0,mg.jsxs)(Hg,{variant:"h6",children:["Device Id: ",this.state.result.text]})})]})}}]),e}(g.Component),oa=(0,ag.ZP)("div")($o||($o=RI(["\n        display: flex;\n        flex-direction: column;\n        align-items: center;\n        justify-content: center;\n        height: 30%;\n        width: 30%;\n        @media (max-width: 600px) {\n            height: 100%;\n            width: 100%;\n        }\n        "])));var aa=function(I){var e=I.t,C=I.apiURL,t=g.useState(""),l=(0,n.Z)(t,2),o=l[0],a=l[1],i=g.useState(""),r=(0,n.Z)(i,2),c=r[0],A=r[1],d=g.useState([]),u=(0,n.Z)(d,2),s=u[0],m=u[1],Z=g.useState(""),b=(0,n.Z)(Z,2),p=b[0],G=b[1];return 0===s.length&&fetch("".concat(C,"getCompnies?key=").concat("377307b0-fdf6-4762-8403-00084d164de5")).then((function(g){return g.json()})).then((function(g){m(g)}),(function(g){console.log(g)})),(0,mg.jsxs)(GI,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,mg.jsxs)(oa,{children:[(0,mg.jsx)(Hg,{variant:"h5",style:{textAlign:"center"},gutterBottom:!0,children:"Scan Qr to add node"}),(0,mg.jsx)(la,{getDeviceId:function(g){G(g)}})]}),(0,mg.jsxs)("div",{children:[(0,mg.jsx)(Hg,{variant:"h5",gutterBottom:!0,children:"Node sensor type"}),(0,mg.jsxs)(St,{fullWidth:!0,children:[(0,mg.jsx)(Gt,{style:{backgroundColor:"white"},id:"node-type",children:"Node type"}),(0,mg.jsxs)(Xl,{labelId:"node-type",id:"node-type",value:o,onChange:function(g){a(g.target.value)},children:[(0,mg.jsx)(Ca,{value:1,children:"Temperature"}),(0,mg.jsx)(Ca,{value:2,children:"Humidity"}),(0,mg.jsx)(Ca,{value:3,children:"Switch"}),(0,mg.jsx)(Ca,{value:4,children:"Wheel thingy (i dont remember the name)"})]})]}),(0,mg.jsx)("br",{}),(0,mg.jsx)("br",{}),(0,mg.jsx)(Hg,{variant:"h5",gutterBottom:!0,children:"Company of node"}),(0,mg.jsx)(St,{fullWidth:!0,children:s.length>0?(0,mg.jsxs)(mg.Fragment,{children:[(0,mg.jsx)(Gt,{style:{backgroundColor:"white"},id:"company-id",children:"Company"}),(0,mg.jsx)(Xl,{labelId:"company-id",id:"company-id",value:c,onChange:function(g){A(g.target.value)},children:s.map((function(g){return(0,mg.jsx)(Ca,{value:g.id,children:g.name},g.id)}))})]}):(0,mg.jsx)(Yo,{})}),(0,mg.jsx)(De,{variant:"outlined",color:"primary",style:{width:"100%",marginTop:"1rem"},onClick:function(){fetch("".concat(C,"addNode?key=").concat("377307b0-fdf6-4762-8403-00084d164de5","&deviceid=").concat(p,"&devicetype=").concat(o,"&companyid=").concat(c)).then((function(g){return g.json()})).then((function(g){console.log(g)}),(function(g){console.log(g)}))},children:e("addNode")})]})]})};function ia(g){return(0,cg.Z)("MuiTableHead",g)}(0,Ag.Z)("MuiTableHead",["root"]);var ra=["className","component"],ca=(0,ag.ZP)("thead",{name:"MuiTableHead",slot:"Root",overridesResolver:function(g,I){return I.root}})({display:"table-header-group"}),Aa={variant:"head"},da="thead",ua=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiTableHead"}),C=e.className,n=e.component,t=void 0===n?da:n,l=(0,gg.Z)(e,ra),o=(0,i.Z)({},e,{component:t}),a=function(g){var I=g.classes;return(0,og.Z)({root:["root"]},ia,I)}(o);return(0,mg.jsx)(Lg.Provider,{value:Aa,children:(0,mg.jsx)(ca,(0,i.Z)({as:t,className:(0,Ig.Z)(a.root,C),ref:I,role:t===da?null:"rowgroup",ownerState:o},l))})}));var sa=function(I){var e=I.t,C=I.apiURL,t=g.useState([]),l=(0,n.Z)(t,2),o=l[0],a=l[1],i=g.useState(!1),r=(0,n.Z)(i,2),c=r[0],A=r[1];return c||fetch("".concat(C,"getNodes?key=").concat("377307b0-fdf6-4762-8403-00084d164de5")).then((function(g){return g.json()})).then((function(g){a(g),console.log(g),A(!0)})),(0,mg.jsxs)(GI,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[(0,mg.jsx)(Hg,{variant:"h3",gutterBottom:!0,children:e("nodes")}),(0,mg.jsx)(De,{variant:"outlined",style:{marginBottom:"1rem"},component:_,to:"/admin/add-node",children:e("addNode")}),o.length>0?(0,mg.jsx)(mg.Fragment,{children:(0,mg.jsx)(Ng,{component:vg,children:(0,mg.jsxs)(Qg,{"aria-label":"simple table",children:[(0,mg.jsx)(ua,{children:(0,mg.jsxs)(CI,{children:[(0,mg.jsx)(iI,{children:e("nodeId")}),(0,mg.jsx)(iI,{children:e("nodeType")}),(0,mg.jsx)(iI,{children:e("nodeCompany")})]})}),(0,mg.jsx)(qg,{children:o.map((function(g){return(0,mg.jsxs)(CI,{children:[(0,mg.jsx)(iI,{component:"th",scope:"row",children:g.uid}),(0,mg.jsx)(iI,{children:g.type}),(0,mg.jsx)(iI,{children:g.company_id})]},g.uid)}))})]})})}):(0,mg.jsx)(Hg,{variant:"h4",children:e("noNodes")})]})},ma=bI(),Za=(0,e(4046).ZP)(),ba=function(g,I){return ba=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var e in I)I.hasOwnProperty(e)&&(g[e]=I[e])},ba(g,I)};var pa=function(){return pa=Object.assign||function(g){for(var I,e=1,C=arguments.length;e<C;e++)for(var n in I=arguments[e])Object.prototype.hasOwnProperty.call(I,n)&&(g[n]=I[n]);return g},pa.apply(this,arguments)};function Ga(g,I){var e={};for(var C in g)Object.prototype.hasOwnProperty.call(g,C)&&I.indexOf(C)<0&&(e[C]=g[C]);if(null!=g&&"function"===typeof Object.getOwnPropertySymbols){var n=0;for(C=Object.getOwnPropertySymbols(g);n<C.length;n++)I.indexOf(C[n])<0&&Object.prototype.propertyIsEnumerable.call(g,C[n])&&(e[C[n]]=g[C[n]])}return e}function ha(g,I,e,C){return new(e||(e=Promise))((function(n,t){function l(g){try{a(C.next(g))}catch(I){t(I)}}function o(g){try{a(C.throw(g))}catch(I){t(I)}}function a(g){var I;g.done?n(g.value):(I=g.value,I instanceof e?I:new e((function(g){g(I)}))).then(l,o)}a((C=C.apply(g,I||[])).next())}))}function ya(g,I){var e,C,n,t,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return t={next:o(0),throw:o(1),return:o(2)},"function"===typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function o(t){return function(o){return function(t){if(e)throw new TypeError("Generator is already executing.");for(;l;)try{if(e=1,C&&(n=2&t[0]?C.return:t[0]?C.throw||((n=C.return)&&n.call(C),0):C.next)&&!(n=n.call(C,t[1])).done)return n;switch(C=0,n&&(t=[2&t[0],n.value]),t[0]){case 0:case 1:n=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,C=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!(n=(n=l.trys).length>0&&n[n.length-1])&&(6===t[0]||2===t[0])){l=0;continue}if(3===t[0]&&(!n||t[1]>n[0]&&t[1]<n[3])){l.label=t[1];break}if(6===t[0]&&l.label<n[1]){l.label=n[1],n=t;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(t);break}n[2]&&l.ops.pop(),l.trys.pop();continue}t=I.call(g,l)}catch(o){t=[6,o],C=0}finally{e=n=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,o])}}}var Ba=function(g,I){return(Ba=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,I){g.__proto__=I}||function(g,I){for(var e in I)Object.prototype.hasOwnProperty.call(I,e)&&(g[e]=I[e])})(g,I)};function Wa(g,I){if("function"!=typeof I&&null!==I)throw new TypeError("Class extends value "+String(I)+" is not a constructor or null");function e(){this.constructor=g}Ba(g,I),g.prototype=null===I?Object.create(I):(e.prototype=I.prototype,new e)}var Sa=function(){return(Sa=Object.assign||function(g){for(var I,e=1,C=arguments.length;e<C;e++)for(var n in I=arguments[e])Object.prototype.hasOwnProperty.call(I,n)&&(g[n]=I[n]);return g}).apply(this,arguments)};function Va(g,I){var e={};for(var C in g)Object.prototype.hasOwnProperty.call(g,C)&&I.indexOf(C)<0&&(e[C]=g[C]);if(null!=g&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(C=Object.getOwnPropertySymbols(g);n<C.length;n++)I.indexOf(C[n])<0&&Object.prototype.propertyIsEnumerable.call(g,C[n])&&(e[C[n]]=g[C[n]])}return e}function va(g,I,e,C){return new(e||(e=Promise))((function(n,t){function l(g){try{a(C.next(g))}catch(g){t(g)}}function o(g){try{a(C.throw(g))}catch(g){t(g)}}function a(g){var I;g.done?n(g.value):(I=g.value,I instanceof e?I:new e((function(g){g(I)}))).then(l,o)}a((C=C.apply(g,I||[])).next())}))}function Ra(g,I){var e,C,n,t,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return t={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function o(t){return function(o){return function(t){if(e)throw new TypeError("Generator is already executing.");for(;l;)try{if(e=1,C&&(n=2&t[0]?C.return:t[0]?C.throw||((n=C.return)&&n.call(C),0):C.next)&&!(n=n.call(C,t[1])).done)return n;switch(C=0,n&&(t=[2&t[0],n.value]),t[0]){case 0:case 1:n=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,C=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!((n=(n=l.trys).length>0&&n[n.length-1])||6!==t[0]&&2!==t[0])){l=0;continue}if(3===t[0]&&(!n||t[1]>n[0]&&t[1]<n[3])){l.label=t[1];break}if(6===t[0]&&l.label<n[1]){l.label=n[1],n=t;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(t);break}n[2]&&l.ops.pop(),l.trys.pop();continue}t=I.call(g,l)}catch(g){t=[6,g],C=0}finally{e=n=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,o])}}}function Xa(g,I){var e="function"==typeof Symbol&&g[Symbol.iterator];if(!e)return g;var C,n,t=e.call(g),l=[];try{for(;(void 0===I||I-- >0)&&!(C=t.next()).done;)l.push(C.value)}catch(g){n={error:g}}finally{try{C&&!C.done&&(e=t.return)&&e.call(t)}finally{if(n)throw n.error}}return l}function fa(g,I,e){if(e||2===arguments.length)for(var C,n=0,t=I.length;n<t;n++)!C&&n in I||(C||(C=Array.prototype.slice.call(I,0,n)),C[n]=I[n]);return g.concat(C||Array.prototype.slice.call(I))}var ka="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof e.g?e.g:"undefined"!=typeof self?self:{};function Ja(g){return g&&g.__esModule&&Object.prototype.hasOwnProperty.call(g,"default")?g.default:g}function Ya(g,I){return g(I={exports:{}},I.exports),I.exports}var Ha,wa,Ka=function(g){return g&&g.Math==Math&&g},Fa=Ka("object"==typeof globalThis&&globalThis)||Ka("object"==typeof window&&window)||Ka("object"==typeof self&&self)||Ka("object"==typeof ka&&ka)||function(){return this}()||Function("return this")(),Na=function(g){try{return!!g()}catch(g){return!0}},xa=!Na((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),za=Function.prototype.call,Ma=za.bind?za.bind(za):function(){return za.apply(za,arguments)},Ea={}.propertyIsEnumerable,Ua=Object.getOwnPropertyDescriptor,Qa={f:Ua&&!Ea.call({1:2},1)?function(g){var I=Ua(this,g);return!!I&&I.enumerable}:Ea},La=function(g,I){return{enumerable:!(1&g),configurable:!(2&g),writable:!(4&g),value:I}},Ta=Function.prototype,Da=Ta.bind,ja=Ta.call,Pa=Da&&Da.bind(ja),Oa=Da?function(g){return g&&Pa(ja,g)}:function(g){return g&&function(){return ja.apply(g,arguments)}},qa=Oa({}.toString),_a=Oa("".slice),$a=function(g){return _a(qa(g),8,-1)},gi=Fa.Object,Ii=Oa("".split),ei=Na((function(){return!gi("z").propertyIsEnumerable(0)}))?function(g){return"String"==$a(g)?Ii(g,""):gi(g)}:gi,Ci=Fa.TypeError,ni=function(g){if(null==g)throw Ci("Can't call method on "+g);return g},ti=function(g){return ei(ni(g))},li=function(g){return"function"==typeof g},oi=function(g){return"object"==typeof g?null!==g:li(g)},ai=function(g){return li(g)?g:void 0},ii=function(g,I){return arguments.length<2?ai(Fa[g]):Fa[g]&&Fa[g][I]},ri=Oa({}.isPrototypeOf),ci=ii("navigator","userAgent")||"",Ai=Fa.process,di=Fa.Deno,ui=Ai&&Ai.versions||di&&di.version,si=ui&&ui.v8;si&&(wa=(Ha=si.split("."))[0]>0&&Ha[0]<4?1:+(Ha[0]+Ha[1])),!wa&&ci&&(!(Ha=ci.match(/Edge\/(\d+)/))||Ha[1]>=74)&&(Ha=ci.match(/Chrome\/(\d+)/))&&(wa=+Ha[1]);var mi=wa,Zi=!!Object.getOwnPropertySymbols&&!Na((function(){var g=Symbol();return!String(g)||!(Object(g)instanceof Symbol)||!Symbol.sham&&mi&&mi<41})),bi=Zi&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,pi=Fa.Object,Gi=bi?function(g){return"symbol"==typeof g}:function(g){var I=ii("Symbol");return li(I)&&ri(I.prototype,pi(g))},hi=Fa.String,yi=function(g){try{return hi(g)}catch(g){return"Object"}},Bi=Fa.TypeError,Wi=function(g){if(li(g))return g;throw Bi(yi(g)+" is not a function")},Si=function(g,I){var e=g[I];return null==e?void 0:Wi(e)},Vi=Fa.TypeError,vi=Object.defineProperty,Ri=function(g,I){try{vi(Fa,g,{value:I,configurable:!0,writable:!0})}catch(e){Fa[g]=I}return I},Xi=Fa["__core-js_shared__"]||Ri("__core-js_shared__",{}),fi=Ya((function(g){(g.exports=function(g,I){return Xi[g]||(Xi[g]=void 0!==I?I:{})})("versions",[]).push({version:"3.19.1",mode:"global",copyright:"\xa9 2021 Denis Pushkarev (zloirock.ru)"})})),ki=Fa.Object,Ji=function(g){return ki(ni(g))},Yi=Oa({}.hasOwnProperty),Hi=Object.hasOwn||function(g,I){return Yi(Ji(g),I)},wi=0,Ki=Math.random(),Fi=Oa(1..toString),Ni=function(g){return"Symbol("+(void 0===g?"":g)+")_"+Fi(++wi+Ki,36)},xi=fi("wks"),zi=Fa.Symbol,Mi=zi&&zi.for,Ei=bi?zi:zi&&zi.withoutSetter||Ni,Ui=function(g){if(!Hi(xi,g)||!Zi&&"string"!=typeof xi[g]){var I="Symbol."+g;Zi&&Hi(zi,g)?xi[g]=zi[g]:xi[g]=bi&&Mi?Mi(I):Ei(I)}return xi[g]},Qi=Fa.TypeError,Li=Ui("toPrimitive"),Ti=function(g){var I=function(g,I){if(!oi(g)||Gi(g))return g;var e,C=Si(g,Li);if(C){if(void 0===I&&(I="default"),e=Ma(C,g,I),!oi(e)||Gi(e))return e;throw Qi("Can't convert object to primitive value")}return void 0===I&&(I="number"),function(g,I){var e,C;if("string"===I&&li(e=g.toString)&&!oi(C=Ma(e,g)))return C;if(li(e=g.valueOf)&&!oi(C=Ma(e,g)))return C;if("string"!==I&&li(e=g.toString)&&!oi(C=Ma(e,g)))return C;throw Vi("Can't convert object to primitive value")}(g,I)}(g,"string");return Gi(I)?I:I+""},Di=Fa.document,ji=oi(Di)&&oi(Di.createElement),Pi=function(g){return ji?Di.createElement(g):{}},Oi=!xa&&!Na((function(){return 7!=Object.defineProperty(Pi("div"),"a",{get:function(){return 7}}).a})),qi=Object.getOwnPropertyDescriptor,_i={f:xa?qi:function(g,I){if(g=ti(g),I=Ti(I),Oi)try{return qi(g,I)}catch(g){}if(Hi(g,I))return La(!Ma(Qa.f,g,I),g[I])}},$i=Fa.String,gr=Fa.TypeError,Ir=function(g){if(oi(g))return g;throw gr($i(g)+" is not an object")},er=Fa.TypeError,Cr=Object.defineProperty,nr={f:xa?Cr:function(g,I,e){if(Ir(g),I=Ti(I),Ir(e),Oi)try{return Cr(g,I,e)}catch(g){}if("get"in e||"set"in e)throw er("Accessors not supported");return"value"in e&&(g[I]=e.value),g}},tr=xa?function(g,I,e){return nr.f(g,I,La(1,e))}:function(g,I,e){return g[I]=e,g},lr=Oa(Function.toString);li(Xi.inspectSource)||(Xi.inspectSource=function(g){return lr(g)});var or,ar,ir,rr=Xi.inspectSource,cr=Fa.WeakMap,Ar=li(cr)&&/native code/.test(rr(cr)),dr=fi("keys"),ur=function(g){return dr[g]||(dr[g]=Ni(g))},sr={},mr=Fa.TypeError,Zr=Fa.WeakMap;if(Ar||Xi.state){var br=Xi.state||(Xi.state=new Zr),pr=Oa(br.get),Gr=Oa(br.has),hr=Oa(br.set);or=function(g,I){if(Gr(br,g))throw new mr("Object already initialized");return I.facade=g,hr(br,g,I),I},ar=function(g){return pr(br,g)||{}},ir=function(g){return Gr(br,g)}}else{var yr=ur("state");sr[yr]=!0,or=function(g,I){if(Hi(g,yr))throw new mr("Object already initialized");return I.facade=g,tr(g,yr,I),I},ar=function(g){return Hi(g,yr)?g[yr]:{}},ir=function(g){return Hi(g,yr)}}var Br={set:or,get:ar,has:ir,enforce:function(g){return ir(g)?ar(g):or(g,{})},getterFor:function(g){return function(I){var e;if(!oi(I)||(e=ar(I)).type!==g)throw mr("Incompatible receiver, "+g+" required");return e}}},Wr=Function.prototype,Sr=xa&&Object.getOwnPropertyDescriptor,Vr=Hi(Wr,"name"),vr={EXISTS:Vr,PROPER:Vr&&"something"===function(){}.name,CONFIGURABLE:Vr&&(!xa||xa&&Sr(Wr,"name").configurable)},Rr=Ya((function(g){var I=vr.CONFIGURABLE,e=Br.get,C=Br.enforce,n=String(String).split("String");(g.exports=function(g,e,t,l){var o,a=!!l&&!!l.unsafe,i=!!l&&!!l.enumerable,r=!!l&&!!l.noTargetGet,c=l&&void 0!==l.name?l.name:e;li(t)&&("Symbol("===String(c).slice(0,7)&&(c="["+String(c).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!Hi(t,"name")||I&&t.name!==c)&&tr(t,"name",c),(o=C(t)).source||(o.source=n.join("string"==typeof c?c:""))),g!==Fa?(a?!r&&g[e]&&(i=!0):delete g[e],i?g[e]=t:tr(g,e,t)):i?g[e]=t:Ri(e,t)})(Function.prototype,"toString",(function(){return li(this)&&e(this).source||rr(this)}))})),Xr=Math.ceil,fr=Math.floor,kr=function(g){var I=+g;return I!=I||0===I?0:(I>0?fr:Xr)(I)},Jr=Math.max,Yr=Math.min,Hr=Math.min,wr=function(g){return g>0?Hr(kr(g),9007199254740991):0},Kr=function(g){return wr(g.length)},Fr=function(g){return function(I,e,C){var n,t=ti(I),l=Kr(t),o=function(g,I){var e=kr(g);return e<0?Jr(e+I,0):Yr(e,I)}(C,l);if(g&&e!=e){for(;l>o;)if((n=t[o++])!=n)return!0}else for(;l>o;o++)if((g||o in t)&&t[o]===e)return g||o||0;return!g&&-1}},Nr={includes:Fr(!0),indexOf:Fr(!1)},xr=Nr.indexOf,zr=Oa([].push),Mr=function(g,I){var e,C=ti(g),n=0,t=[];for(e in C)!Hi(sr,e)&&Hi(C,e)&&zr(t,e);for(;I.length>n;)Hi(C,e=I[n++])&&(~xr(t,e)||zr(t,e));return t},Er=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Ur=Er.concat("length","prototype"),Qr={f:Object.getOwnPropertyNames||function(g){return Mr(g,Ur)}},Lr={f:Object.getOwnPropertySymbols},Tr=Oa([].concat),Dr=ii("Reflect","ownKeys")||function(g){var I=Qr.f(Ir(g)),e=Lr.f;return e?Tr(I,e(g)):I},jr=function(g,I){for(var e=Dr(I),C=nr.f,n=_i.f,t=0;t<e.length;t++){var l=e[t];Hi(g,l)||C(g,l,n(I,l))}},Pr=/#|\.prototype\./,Or=function(g,I){var e=_r[qr(g)];return e==gc||e!=$r&&(li(I)?Na(I):!!I)},qr=Or.normalize=function(g){return String(g).replace(Pr,".").toLowerCase()},_r=Or.data={},$r=Or.NATIVE="N",gc=Or.POLYFILL="P",Ic=Or,ec=_i.f,Cc=function(g,I){var e,C,n,t,l,o=g.target,a=g.global,i=g.stat;if(e=a?Fa:i?Fa[o]||Ri(o,{}):(Fa[o]||{}).prototype)for(C in I){if(t=I[C],n=g.noTargetGet?(l=ec(e,C))&&l.value:e[C],!Ic(a?C:o+(i?".":"#")+C,g.forced)&&void 0!==n){if(typeof t==typeof n)continue;jr(t,n)}(g.sham||n&&n.sham)&&tr(t,"sham",!0),Rr(e,C,t,g)}},nc={};nc[Ui("toStringTag")]="z";var tc,lc="[object z]"===String(nc),oc=Ui("toStringTag"),ac=Fa.Object,ic="Arguments"==$a(function(){return arguments}()),rc=lc?$a:function(g){var I,e,C;return void 0===g?"Undefined":null===g?"Null":"string"==typeof(e=function(g,I){try{return g[I]}catch(g){}}(I=ac(g),oc))?e:ic?$a(I):"Object"==(C=$a(I))&&li(I.callee)?"Arguments":C},cc=Fa.String,Ac=function(g){if("Symbol"===rc(g))throw TypeError("Cannot convert a Symbol value to a string");return cc(g)},dc=Ui("match"),uc=Fa.TypeError,sc=function(g){if(function(g){var I;return oi(g)&&(void 0!==(I=g[dc])?!!I:"RegExp"==$a(g))}(g))throw uc("The method doesn't accept regular expressions");return g},mc=Ui("match"),Zc=function(g){var I=/./;try{"/./"[g](I)}catch(e){try{return I[mc]=!1,"/./"[g](I)}catch(g){}}return!1},bc=_i.f,pc=Oa("".startsWith),Gc=Oa("".slice),hc=Math.min,yc=Zc("startsWith"),Bc=!(yc||(tc=bc(String.prototype,"startsWith"),!tc||tc.writable));Cc({target:"String",proto:!0,forced:!Bc&&!yc},{startsWith:function(g){var I=Ac(ni(this));sc(g);var e=wr(hc(arguments.length>1?arguments[1]:void 0,I.length)),C=Ac(g);return pc?pc(I,C,e):Gc(I,e,e+C.length)===C}});var Wc=function(g,I){return Oa(Fa[g].prototype[I])};Wc("String","startsWith");var Sc=Array.isArray||function(g){return"Array"==$a(g)},Vc=function(g,I,e){var C=Ti(I);C in g?nr.f(g,C,La(0,e)):g[C]=e},vc=function(){},Rc=[],Xc=ii("Reflect","construct"),fc=/^\s*(?:class|function)\b/,kc=Oa(fc.exec),Jc=!fc.exec(vc),Yc=function(g){if(!li(g))return!1;try{return Xc(vc,Rc,g),!0}catch(g){return!1}},Hc=!Xc||Na((function(){var g;return Yc(Yc.call)||!Yc(Object)||!Yc((function(){g=!0}))||g}))?function(g){if(!li(g))return!1;switch(rc(g)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}return Jc||!!kc(fc,rr(g))}:Yc,wc=Ui("species"),Kc=Fa.Array,Fc=function(g,I){return new(function(g){var I;return Sc(g)&&(I=g.constructor,(Hc(I)&&(I===Kc||Sc(I.prototype))||oi(I)&&null===(I=I[wc]))&&(I=void 0)),void 0===I?Kc:I}(g))(0===I?0:I)},Nc=Ui("species"),xc=Ui("isConcatSpreadable"),zc=Fa.TypeError,Mc=mi>=51||!Na((function(){var g=[];return g[xc]=!1,g.concat()[0]!==g})),Ec=("concat",mi>=51||!Na((function(){var g=[];return(g.constructor={})[Nc]=function(){return{foo:1}},1!==g.concat(Boolean).foo}))),Uc=function(g){if(!oi(g))return!1;var I=g[xc];return void 0!==I?!!I:Sc(g)};Cc({target:"Array",proto:!0,forced:!Mc||!Ec},{concat:function(g){var I,e,C,n,t,l=Ji(this),o=Fc(l,0),a=0;for(I=-1,C=arguments.length;I<C;I++)if(Uc(t=-1===I?l:arguments[I])){if(a+(n=Kr(t))>9007199254740991)throw zc("Maximum allowed index exceeded");for(e=0;e<n;e++,a++)e in t&&Vc(o,a,t[e])}else{if(a>=9007199254740991)throw zc("Maximum allowed index exceeded");Vc(o,a++,t)}return o.length=a,o}});var Qc=lc?{}.toString:function(){return"[object "+rc(this)+"]"};lc||Rr(Object.prototype,"toString",Qc,{unsafe:!0});var Lc,Tc=Function.prototype,Dc=Tc.apply,jc=Tc.bind,Pc=Tc.call,Oc="object"==typeof Reflect&&Reflect.apply||(jc?Pc.bind(Dc):function(){return Pc.apply(Dc,arguments)}),qc=Object.keys||function(g){return Mr(g,Er)},_c=xa?Object.defineProperties:function(g,I){Ir(g);for(var e,C=ti(I),n=qc(I),t=n.length,l=0;t>l;)nr.f(g,e=n[l++],C[e]);return g},$c=ii("document","documentElement"),gA=ur("IE_PROTO"),IA=function(){},eA=function(g){return"<script>"+g+"<\/script>"},CA=function(g){g.write(eA("")),g.close();var I=g.parentWindow.Object;return g=null,I},nA=function(){try{Lc=new ActiveXObject("htmlfile")}catch(g){}var g,I;nA="undefined"!=typeof document?document.domain&&Lc?CA(Lc):((I=Pi("iframe")).style.display="none",$c.appendChild(I),I.src=String("javascript:"),(g=I.contentWindow.document).open(),g.write(eA("document.F=Object")),g.close(),g.F):CA(Lc);for(var e=Er.length;e--;)delete nA.prototype[Er[e]];return nA()};sr[gA]=!0;var tA=Object.create||function(g,I){var e;return null!==g?(IA.prototype=Ir(g),e=new IA,IA.prototype=null,e[gA]=g):e=nA(),void 0===I?e:_c(e,I)},lA=Oa([].slice),oA=Qr.f,aA="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],iA={f:function(g){return aA&&"Window"==$a(g)?function(g){try{return oA(g)}catch(g){return lA(aA)}}(g):oA(ti(g))}},rA={f:Ui},cA=Fa,AA=nr.f,dA=function(g){var I=cA.Symbol||(cA.Symbol={});Hi(I,g)||AA(I,g,{value:rA.f(g)})},uA=nr.f,sA=Ui("toStringTag"),mA=function(g,I,e){g&&!Hi(g=e?g:g.prototype,sA)&&uA(g,sA,{configurable:!0,value:I})},ZA=Oa(Oa.bind),bA=function(g,I){return Wi(g),void 0===I?g:ZA?ZA(g,I):function(){return g.apply(I,arguments)}},pA=Oa([].push),GA=function(g){var I=1==g,e=2==g,C=3==g,n=4==g,t=6==g,l=7==g,o=5==g||t;return function(a,i,r,c){for(var A,d,u=Ji(a),s=ei(u),m=bA(i,r),Z=Kr(s),b=0,p=c||Fc,G=I?p(a,Z):e||l?p(a,0):void 0;Z>b;b++)if((o||b in s)&&(d=m(A=s[b],b,u),g))if(I)G[b]=d;else if(d)switch(g){case 3:return!0;case 5:return A;case 6:return b;case 2:pA(G,A)}else switch(g){case 4:return!1;case 7:pA(G,A)}return t?-1:C||n?n:G}},hA=[GA(0),GA(1),GA(2),GA(3),GA(4),GA(5),GA(6),GA(7)][0],yA=ur("hidden"),BA=Ui("toPrimitive"),WA=Br.set,SA=Br.getterFor("Symbol"),VA=Object.prototype,vA=Fa.Symbol,RA=vA&&vA.prototype,XA=Fa.TypeError,fA=Fa.QObject,kA=ii("JSON","stringify"),JA=_i.f,YA=nr.f,HA=iA.f,wA=Qa.f,KA=Oa([].push),FA=fi("symbols"),NA=fi("op-symbols"),xA=fi("string-to-symbol-registry"),zA=fi("symbol-to-string-registry"),MA=fi("wks"),EA=!fA||!fA.prototype||!fA.prototype.findChild,UA=xa&&Na((function(){return 7!=tA(YA({},"a",{get:function(){return YA(this,"a",{value:7}).a}})).a}))?function(g,I,e){var C=JA(VA,I);C&&delete VA[I],YA(g,I,e),C&&g!==VA&&YA(VA,I,C)}:YA,QA=function(g,I){var e=FA[g]=tA(RA);return WA(e,{type:"Symbol",tag:g,description:I}),xa||(e.description=I),e},LA=function g(I,e,C){I===VA&&g(NA,e,C),Ir(I);var n=Ti(e);return Ir(C),Hi(FA,n)?(C.enumerable?(Hi(I,yA)&&I[yA][n]&&(I[yA][n]=!1),C=tA(C,{enumerable:La(0,!1)})):(Hi(I,yA)||YA(I,yA,La(1,{})),I[yA][n]=!0),UA(I,n,C)):YA(I,n,C)},TA=function(g,I){Ir(g);var e=ti(I),C=qc(e).concat(OA(e));return hA(C,(function(I){xa&&!Ma(DA,e,I)||LA(g,I,e[I])})),g},DA=function(g){var I=Ti(g),e=Ma(wA,this,I);return!(this===VA&&Hi(FA,I)&&!Hi(NA,I))&&(!(e||!Hi(this,I)||!Hi(FA,I)||Hi(this,yA)&&this[yA][I])||e)},jA=function(g,I){var e=ti(g),C=Ti(I);if(e!==VA||!Hi(FA,C)||Hi(NA,C)){var n=JA(e,C);return!n||!Hi(FA,C)||Hi(e,yA)&&e[yA][C]||(n.enumerable=!0),n}},PA=function(g){var I=HA(ti(g)),e=[];return hA(I,(function(g){Hi(FA,g)||Hi(sr,g)||KA(e,g)})),e},OA=function(g){var I=g===VA,e=HA(I?NA:ti(g)),C=[];return hA(e,(function(g){!Hi(FA,g)||I&&!Hi(VA,g)||KA(C,FA[g])})),C};if(Zi||(RA=(vA=function(){if(ri(RA,this))throw XA("Symbol is not a constructor");var g=arguments.length&&void 0!==arguments[0]?Ac(arguments[0]):void 0,I=Ni(g),e=function g(e){this===VA&&Ma(g,NA,e),Hi(this,yA)&&Hi(this[yA],I)&&(this[yA][I]=!1),UA(this,I,La(1,e))};return xa&&EA&&UA(VA,I,{configurable:!0,set:e}),QA(I,g)}).prototype,Rr(RA,"toString",(function(){return SA(this).tag})),Rr(vA,"withoutSetter",(function(g){return QA(Ni(g),g)})),Qa.f=DA,nr.f=LA,_i.f=jA,Qr.f=iA.f=PA,Lr.f=OA,rA.f=function(g){return QA(Ui(g),g)},xa&&(YA(RA,"description",{configurable:!0,get:function(){return SA(this).description}}),Rr(VA,"propertyIsEnumerable",DA,{unsafe:!0}))),Cc({global:!0,wrap:!0,forced:!Zi,sham:!Zi},{Symbol:vA}),hA(qc(MA),(function(g){dA(g)})),Cc({target:"Symbol",stat:!0,forced:!Zi},{for:function(g){var I=Ac(g);if(Hi(xA,I))return xA[I];var e=vA(I);return xA[I]=e,zA[e]=I,e},keyFor:function(g){if(!Gi(g))throw XA(g+" is not a symbol");if(Hi(zA,g))return zA[g]},useSetter:function(){EA=!0},useSimple:function(){EA=!1}}),Cc({target:"Object",stat:!0,forced:!Zi,sham:!xa},{create:function(g,I){return void 0===I?tA(g):TA(tA(g),I)},defineProperty:LA,defineProperties:TA,getOwnPropertyDescriptor:jA}),Cc({target:"Object",stat:!0,forced:!Zi},{getOwnPropertyNames:PA,getOwnPropertySymbols:OA}),Cc({target:"Object",stat:!0,forced:Na((function(){Lr.f(1)}))},{getOwnPropertySymbols:function(g){return Lr.f(Ji(g))}}),kA){var qA=!Zi||Na((function(){var g=vA();return"[null]"!=kA([g])||"{}"!=kA({a:g})||"{}"!=kA(Object(g))}));Cc({target:"JSON",stat:!0,forced:qA},{stringify:function(g,I,e){var C=lA(arguments),n=I;if((oi(I)||void 0!==g)&&!Gi(g))return Sc(I)||(I=function(g,I){if(li(n)&&(I=Ma(n,this,g,I)),!Gi(I))return I}),C[1]=I,Oc(kA,null,C)}})}if(!RA[BA]){var _A=RA.valueOf;Rr(RA,BA,(function(g){return Ma(_A,this)}))}mA(vA,"Symbol"),sr[yA]=!0,dA("asyncIterator");var $A=nr.f,gd=Fa.Symbol,Id=gd&&gd.prototype;if(xa&&li(gd)&&(!("description"in Id)||void 0!==gd().description)){var ed={},Cd=function(){var g=arguments.length<1||void 0===arguments[0]?void 0:Ac(arguments[0]),I=ri(Id,this)?new gd(g):void 0===g?gd():gd(g);return""===g&&(ed[I]=!0),I};jr(Cd,gd),Cd.prototype=Id,Id.constructor=Cd;var nd="Symbol(test)"==String(gd("test")),td=Oa(Id.toString),ld=Oa(Id.valueOf),od=/^Symbol\((.*)\)[^)]+$/,ad=Oa("".replace),id=Oa("".slice);$A(Id,"description",{configurable:!0,get:function(){var g=ld(this),I=td(g);if(Hi(ed,g))return"";var e=nd?id(I,7,-1):ad(I,od,"$1");return""===e?void 0:e}}),Cc({global:!0,forced:!0},{Symbol:Cd})}dA("hasInstance"),dA("isConcatSpreadable"),dA("iterator"),dA("match"),dA("matchAll"),dA("replace"),dA("search"),dA("species"),dA("split"),dA("toPrimitive"),dA("toStringTag"),dA("unscopables"),mA(Fa.JSON,"JSON",!0),mA(Math,"Math",!0),Cc({global:!0},{Reflect:{}}),mA(Fa.Reflect,"Reflect",!0),cA.Symbol;var rd,cd,Ad,dd=Oa("".charAt),ud=Oa("".charCodeAt),sd=Oa("".slice),md=function(g){return function(I,e){var C,n,t=Ac(ni(I)),l=kr(e),o=t.length;return l<0||l>=o?g?"":void 0:(C=ud(t,l))<55296||C>56319||l+1===o||(n=ud(t,l+1))<56320||n>57343?g?dd(t,l):C:g?sd(t,l,l+2):n-56320+(C-55296<<10)+65536}},Zd={codeAt:md(!1),charAt:md(!0)},bd=!Na((function(){function g(){}return g.prototype.constructor=null,Object.getPrototypeOf(new g)!==g.prototype})),pd=ur("IE_PROTO"),Gd=Fa.Object,hd=Gd.prototype,yd=bd?Gd.getPrototypeOf:function(g){var I=Ji(g);if(Hi(I,pd))return I[pd];var e=I.constructor;return li(e)&&I instanceof e?e.prototype:I instanceof Gd?hd:null},Bd=Ui("iterator"),Wd=!1;[].keys&&("next"in(Ad=[].keys())?(cd=yd(yd(Ad)))!==Object.prototype&&(rd=cd):Wd=!0),(null==rd||Na((function(){var g={};return rd[Bd].call(g)!==g})))&&(rd={}),li(rd[Bd])||Rr(rd,Bd,(function(){return this}));var Sd={IteratorPrototype:rd,BUGGY_SAFARI_ITERATORS:Wd},Vd={},vd=Sd.IteratorPrototype,Rd=function(){return this},Xd=Fa.String,fd=Fa.TypeError,kd=Object.setPrototypeOf||("__proto__"in{}?function(){var g,I=!1,e={};try{(g=Oa(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set))(e,[]),I=e instanceof Array}catch(g){}return function(e,C){return Ir(e),function(g){if("object"==typeof g||li(g))return g;throw fd("Can't set "+Xd(g)+" as a prototype")}(C),I?g(e,C):e.__proto__=C,e}}():void 0),Jd=vr.PROPER,Yd=vr.CONFIGURABLE,Hd=Sd.IteratorPrototype,wd=Sd.BUGGY_SAFARI_ITERATORS,Kd=Ui("iterator"),Fd=function(){return this},Nd=function(g,I,e,C,n,t,l){!function(g,I,e){var C=I+" Iterator";g.prototype=tA(vd,{next:La(1,e)}),mA(g,C,!1),Vd[C]=Rd}(e,I,C);var o,a,i,r=function(g){if(g===n&&s)return s;if(!wd&&g in d)return d[g];switch(g){case"keys":case"values":case"entries":return function(){return new e(this,g)}}return function(){return new e(this)}},c=I+" Iterator",A=!1,d=g.prototype,u=d[Kd]||d["@@iterator"]||n&&d[n],s=!wd&&u||r(n),m="Array"==I&&d.entries||u;if(m&&(o=yd(m.call(new g)))!==Object.prototype&&o.next&&(yd(o)!==Hd&&(kd?kd(o,Hd):li(o[Kd])||Rr(o,Kd,Fd)),mA(o,c,!0)),Jd&&"values"==n&&u&&"values"!==u.name&&(Yd?tr(d,"name","values"):(A=!0,s=function(){return Ma(u,this)})),n)if(a={values:r("values"),keys:t?s:r("keys"),entries:r("entries")},l)for(i in a)(wd||A||!(i in d))&&Rr(d,i,a[i]);else Cc({target:I,proto:!0,forced:wd||A},a);return d[Kd]!==s&&Rr(d,Kd,s,{name:n}),Vd[I]=s,a},xd=Zd.charAt,zd=Br.set,Md=Br.getterFor("String Iterator");Nd(String,"String",(function(g){zd(this,{type:"String Iterator",string:Ac(g),index:0})}),(function(){var g,I=Md(this),e=I.string,C=I.index;return C>=e.length?{value:void 0,done:!0}:(g=xd(e,C),I.index+=g.length,{value:g,done:!1})}));var Ed=function(g,I,e){var C,n;Ir(g);try{if(!(C=Si(g,"return"))){if("throw"===I)throw e;return e}C=Ma(C,g)}catch(g){n=!0,C=g}if("throw"===I)throw e;if(n)throw C;return Ir(C),e},Ud=function(g,I,e,C){try{return C?I(Ir(e)[0],e[1]):I(e)}catch(I){Ed(g,"throw",I)}},Qd=Ui("iterator"),Ld=Array.prototype,Td=function(g){return void 0!==g&&(Vd.Array===g||Ld[Qd]===g)},Dd=Ui("iterator"),jd=function(g){if(null!=g)return Si(g,Dd)||Si(g,"@@iterator")||Vd[rc(g)]},Pd=Fa.TypeError,Od=function(g,I){var e=arguments.length<2?jd(g):I;if(Wi(e))return Ir(Ma(e,g));throw Pd(yi(g)+" is not iterable")},qd=Fa.Array,_d=Ui("iterator"),$d=!1;try{var gu=0,Iu={next:function(){return{done:!!gu++}},return:function(){$d=!0}};Iu[_d]=function(){return this},Array.from(Iu,(function(){throw 2}))}catch(mp){}var eu=function(g,I){if(!I&&!$d)return!1;var e=!1;try{var C={};C[_d]=function(){return{next:function(){return{done:e=!0}}}},g(C)}catch(g){}return e},Cu=!eu((function(g){Array.from(g)}));Cc({target:"Array",stat:!0,forced:Cu},{from:function(g){var I=Ji(g),e=Hc(this),C=arguments.length,n=C>1?arguments[1]:void 0,t=void 0!==n;t&&(n=bA(n,C>2?arguments[2]:void 0));var l,o,a,i,r,c,A=jd(I),d=0;if(!A||this==qd&&Td(A))for(l=Kr(I),o=e?new this(l):qd(l);l>d;d++)c=t?n(I[d],d):I[d],Vc(o,d,c);else for(r=(i=Od(I,A)).next,o=e?new this:[];!(a=Ma(r,i)).done;d++)c=t?Ud(i,n,[a.value,d],!0):a.value,Vc(o,d,c);return o.length=d,o}}),cA.Array.from;var nu,tu,lu,ou="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,au=nr.f,iu=Fa.Int8Array,ru=iu&&iu.prototype,cu=Fa.Uint8ClampedArray,Au=cu&&cu.prototype,du=iu&&yd(iu),uu=ru&&yd(ru),su=Object.prototype,mu=Fa.TypeError,Zu=Ui("toStringTag"),bu=Ni("TYPED_ARRAY_TAG"),pu=Ni("TYPED_ARRAY_CONSTRUCTOR"),Gu=ou&&!!kd&&"Opera"!==rc(Fa.opera),hu=!1,yu={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8},Bu={BigInt64Array:8,BigUint64Array:8},Wu=function(g){if(!oi(g))return!1;var I=rc(g);return Hi(yu,I)||Hi(Bu,I)};for(nu in yu)(lu=(tu=Fa[nu])&&tu.prototype)?tr(lu,pu,tu):Gu=!1;for(nu in Bu)(lu=(tu=Fa[nu])&&tu.prototype)&&tr(lu,pu,tu);if((!Gu||!li(du)||du===Function.prototype)&&(du=function(){throw mu("Incorrect invocation")},Gu))for(nu in yu)Fa[nu]&&kd(Fa[nu],du);if((!Gu||!uu||uu===su)&&(uu=du.prototype,Gu))for(nu in yu)Fa[nu]&&kd(Fa[nu].prototype,uu);if(Gu&&yd(Au)!==uu&&kd(Au,uu),xa&&!Hi(uu,Zu))for(nu in hu=!0,au(uu,Zu,{get:function(){return oi(this)?this[bu]:void 0}}),yu)Fa[nu]&&tr(Fa[nu],bu,nu);var Su={NATIVE_ARRAY_BUFFER_VIEWS:Gu,TYPED_ARRAY_CONSTRUCTOR:pu,TYPED_ARRAY_TAG:hu&&bu,aTypedArray:function(g){if(Wu(g))return g;throw mu("Target is not a typed array")},aTypedArrayConstructor:function(g){if(li(g)&&(!kd||ri(du,g)))return g;throw mu(yi(g)+" is not a typed array constructor")},exportTypedArrayMethod:function(g,I,e){if(xa){if(e)for(var C in yu){var n=Fa[C];if(n&&Hi(n.prototype,g))try{delete n.prototype[g]}catch(g){}}uu[g]&&!e||Rr(uu,g,e?I:Gu&&ru[g]||I)}},exportTypedArrayStaticMethod:function(g,I,e){var C,n;if(xa){if(kd){if(e)for(C in yu)if((n=Fa[C])&&Hi(n,g))try{delete n[g]}catch(g){}if(du[g]&&!e)return;try{return Rr(du,g,e?I:Gu&&du[g]||I)}catch(g){}}for(C in yu)!(n=Fa[C])||n[g]&&!e||Rr(n,g,I)}},isView:function(g){if(!oi(g))return!1;var I=rc(g);return"DataView"===I||Hi(yu,I)||Hi(Bu,I)},isTypedArray:Wu,TypedArray:du,TypedArrayPrototype:uu},Vu=Fa.TypeError,vu=Ui("species"),Ru=Su.TYPED_ARRAY_CONSTRUCTOR,Xu=Su.aTypedArrayConstructor,fu=Su.aTypedArray;(0,Su.exportTypedArrayMethod)("slice",(function(g,I){for(var e=lA(fu(this),g,I),C=Xu(function(g,I){var e,C=Ir(g).constructor;return void 0===C||null==(e=Ir(C)[vu])?I:function(g){if(Hc(g))return g;throw Vu(yi(g)+" is not a constructor")}(e)}(this,this[Ru])),n=0,t=e.length,l=new C(t);t>n;)l[n]=e[n++];return l}),Na((function(){new Int8Array(1).slice()})));var ku=Ui("unscopables"),Ju=Array.prototype;null==Ju[ku]&&nr.f(Ju,ku,{configurable:!0,value:tA(null)});var Yu=function(g){Ju[ku][g]=!0},Hu=Nr.includes;Cc({target:"Array",proto:!0},{includes:function(g){return Hu(this,g,arguments.length>1?arguments[1]:void 0)}}),Yu("includes"),Wc("Array","includes");var wu=Oa("".indexOf);Cc({target:"String",proto:!0,forced:!Zc("includes")},{includes:function(g){return!!~wu(Ac(ni(this)),Ac(sc(g)),arguments.length>1?arguments[1]:void 0)}}),Wc("String","includes");var Ku=Br.set,Fu=Br.getterFor("Array Iterator");Nd(Array,"Array",(function(g,I){Ku(this,{type:"Array Iterator",target:ti(g),index:0,kind:I})}),(function(){var g=Fu(this),I=g.target,e=g.kind,C=g.index++;return!I||C>=I.length?(g.target=void 0,{value:void 0,done:!0}):"keys"==e?{value:C,done:!1}:"values"==e?{value:I[C],done:!1}:{value:[C,I[C]],done:!1}}),"values"),Vd.Arguments=Vd.Array,Yu("keys"),Yu("values"),Yu("entries");var Nu=Na((function(){if("function"==typeof ArrayBuffer){var g=new ArrayBuffer(8);Object.isExtensible(g)&&Object.defineProperty(g,"a",{value:8})}})),xu=Object.isExtensible,zu=Na((function(){xu(1)}))||Nu?function(g){return!!oi(g)&&(!Nu||"ArrayBuffer"!=$a(g))&&(!xu||xu(g))}:xu,Mu=!Na((function(){return Object.isExtensible(Object.preventExtensions({}))})),Eu=Ya((function(g){var I=nr.f,e=!1,C=Ni("meta"),n=0,t=function(g){I(g,C,{value:{objectID:"O"+n++,weakData:{}}})},l=g.exports={enable:function(){l.enable=function(){},e=!0;var g=Qr.f,I=Oa([].splice),n={};n[C]=1,g(n).length&&(Qr.f=function(e){for(var n=g(e),t=0,l=n.length;t<l;t++)if(n[t]===C){I(n,t,1);break}return n},Cc({target:"Object",stat:!0,forced:!0},{getOwnPropertyNames:iA.f}))},fastKey:function(g,I){if(!oi(g))return"symbol"==typeof g?g:("string"==typeof g?"S":"P")+g;if(!Hi(g,C)){if(!zu(g))return"F";if(!I)return"E";t(g)}return g[C].objectID},getWeakData:function(g,I){if(!Hi(g,C)){if(!zu(g))return!0;if(!I)return!1;t(g)}return g[C].weakData},onFreeze:function(g){return Mu&&e&&zu(g)&&!Hi(g,C)&&t(g),g}};sr[C]=!0}));Eu.enable,Eu.fastKey,Eu.getWeakData,Eu.onFreeze;var Uu=Fa.TypeError,Qu=function(g,I){this.stopped=g,this.result=I},Lu=Qu.prototype,Tu=function(g,I,e){var C,n,t,l,o,a,i,r=e&&e.that,c=!(!e||!e.AS_ENTRIES),A=!(!e||!e.IS_ITERATOR),d=!(!e||!e.INTERRUPTED),u=bA(I,r),s=function(g){return C&&Ed(C,"normal",g),new Qu(!0,g)},m=function(g){return c?(Ir(g),d?u(g[0],g[1],s):u(g[0],g[1])):d?u(g,s):u(g)};if(A)C=g;else{if(!(n=jd(g)))throw Uu(yi(g)+" is not iterable");if(Td(n)){for(t=0,l=Kr(g);l>t;t++)if((o=m(g[t]))&&ri(Lu,o))return o;return new Qu(!1)}C=Od(g,n)}for(a=C.next;!(i=Ma(a,C)).done;){try{o=m(i.value)}catch(g){Ed(C,"throw",g)}if("object"==typeof o&&o&&ri(Lu,o))return o}return new Qu(!1)},Du=Fa.TypeError,ju=function(g,I){if(ri(I,g))return g;throw Du("Incorrect invocation")},Pu=function(g,I,e){for(var C in I)Rr(g,C,I[C],e);return g},Ou=Ui("species"),qu=nr.f,_u=Eu.fastKey,$u=Br.set,gs=Br.getterFor,Is={getConstructor:function(g,I,e,C){var n=g((function(g,n){ju(g,t),$u(g,{type:I,index:tA(null),first:void 0,last:void 0,size:0}),xa||(g.size=0),null!=n&&Tu(n,g[C],{that:g,AS_ENTRIES:e})})),t=n.prototype,l=gs(I),o=function(g,I,e){var C,n,t=l(g),o=a(g,I);return o?o.value=e:(t.last=o={index:n=_u(I,!0),key:I,value:e,previous:C=t.last,next:void 0,removed:!1},t.first||(t.first=o),C&&(C.next=o),xa?t.size++:g.size++,"F"!==n&&(t.index[n]=o)),g},a=function(g,I){var e,C=l(g),n=_u(I);if("F"!==n)return C.index[n];for(e=C.first;e;e=e.next)if(e.key==I)return e};return Pu(t,{clear:function(){for(var g=l(this),I=g.index,e=g.first;e;)e.removed=!0,e.previous&&(e.previous=e.previous.next=void 0),delete I[e.index],e=e.next;g.first=g.last=void 0,xa?g.size=0:this.size=0},delete:function(g){var I=this,e=l(I),C=a(I,g);if(C){var n=C.next,t=C.previous;delete e.index[C.index],C.removed=!0,t&&(t.next=n),n&&(n.previous=t),e.first==C&&(e.first=n),e.last==C&&(e.last=t),xa?e.size--:I.size--}return!!C},forEach:function(g){for(var I,e=l(this),C=bA(g,arguments.length>1?arguments[1]:void 0);I=I?I.next:e.first;)for(C(I.value,I.key,this);I&&I.removed;)I=I.previous},has:function(g){return!!a(this,g)}}),Pu(t,e?{get:function(g){var I=a(this,g);return I&&I.value},set:function(g,I){return o(this,0===g?0:g,I)}}:{add:function(g){return o(this,g=0===g?0:g,g)}}),xa&&qu(t,"size",{get:function(){return l(this).size}}),n},setStrong:function(g,I,e){var C=I+" Iterator",n=gs(I),t=gs(C);Nd(g,I,(function(g,I){$u(this,{type:C,target:g,state:n(g),kind:I,last:void 0})}),(function(){for(var g=t(this),I=g.kind,e=g.last;e&&e.removed;)e=e.previous;return g.target&&(g.last=e=e?e.next:g.state.first)?"keys"==I?{value:e.key,done:!1}:"values"==I?{value:e.value,done:!1}:{value:[e.key,e.value],done:!1}:(g.target=void 0,{value:void 0,done:!0})}),e?"entries":"values",!e,!0),function(g){var I=ii(g),e=nr.f;xa&&I&&!I[Ou]&&e(I,Ou,{configurable:!0,get:function(){return this}})}(I)}};function es(g){var I=this.constructor;return this.then((function(e){return I.resolve(g()).then((function(){return e}))}),(function(e){return I.resolve(g()).then((function(){return I.reject(e)}))}))}function Cs(g){return new this((function(I,e){if(!g||void 0===g.length)return e(new TypeError(typeof g+" "+g+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var C=Array.prototype.slice.call(g);if(0===C.length)return I([]);var n=C.length;function t(g,e){if(e&&("object"==typeof e||"function"==typeof e)){var l=e.then;if("function"==typeof l)return void l.call(e,(function(I){t(g,I)}),(function(e){C[g]={status:"rejected",reason:e},0==--n&&I(C)}))}C[g]={status:"fulfilled",value:e},0==--n&&I(C)}for(var l=0;l<C.length;l++)t(l,C[l])}))}!function(g,I,e){var C=-1!==g.indexOf("Map"),n=-1!==g.indexOf("Weak"),t=C?"set":"add",l=Fa[g],o=l&&l.prototype,a=l,i={},r=function(g){var I=Oa(o[g]);Rr(o,g,"add"==g?function(g){return I(this,0===g?0:g),this}:"delete"==g?function(g){return!(n&&!oi(g))&&I(this,0===g?0:g)}:"get"==g?function(g){return n&&!oi(g)?void 0:I(this,0===g?0:g)}:"has"==g?function(g){return!(n&&!oi(g))&&I(this,0===g?0:g)}:function(g,e){return I(this,0===g?0:g,e),this})};if(Ic(g,!li(l)||!(n||o.forEach&&!Na((function(){(new l).entries().next()})))))a=e.getConstructor(I,g,C,t),Eu.enable();else if(Ic(g,!0)){var c=new a,A=c[t](n?{}:-0,1)!=c,d=Na((function(){c.has(1)})),u=eu((function(g){new l(g)})),s=!n&&Na((function(){for(var g=new l,I=5;I--;)g[t](I,I);return!g.has(-0)}));u||((a=I((function(g,I){ju(g,o);var e=function(g,I,e){var C,n;return kd&&li(C=I.constructor)&&C!==e&&oi(n=C.prototype)&&n!==e.prototype&&kd(g,n),g}(new l,g,a);return null!=I&&Tu(I,e[t],{that:e,AS_ENTRIES:C}),e}))).prototype=o,o.constructor=a),(d||s)&&(r("delete"),r("has"),C&&r("get")),(s||A)&&r(t),n&&o.clear&&delete o.clear}i[g]=a,Cc({global:!0,forced:a!=l},i),mA(a,g),n||e.setStrong(a,g,C)}("Set",(function(g){return function(){return g(this,arguments.length?arguments[0]:void 0)}}),Is),cA.Set;var ns=setTimeout,ts="undefined"!=typeof setImmediate?setImmediate:null;function ls(g){return Boolean(g&&void 0!==g.length)}function os(){}function as(g){if(!(this instanceof as))throw new TypeError("Promises must be constructed via new");if("function"!=typeof g)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],us(g,this)}function is(g,I){for(;3===g._state;)g=g._value;0!==g._state?(g._handled=!0,as._immediateFn((function(){var e=1===g._state?I.onFulfilled:I.onRejected;if(null!==e){var C;try{C=e(g._value)}catch(g){return void cs(I.promise,g)}rs(I.promise,C)}else(1===g._state?rs:cs)(I.promise,g._value)}))):g._deferreds.push(I)}function rs(g,I){try{if(I===g)throw new TypeError("A promise cannot be resolved with itself.");if(I&&("object"==typeof I||"function"==typeof I)){var e=I.then;if(I instanceof as)return g._state=3,g._value=I,void As(g);if("function"==typeof e)return void us((C=e,n=I,function(){C.apply(n,arguments)}),g)}g._state=1,g._value=I,As(g)}catch(I){cs(g,I)}var C,n}function cs(g,I){g._state=2,g._value=I,As(g)}function As(g){2===g._state&&0===g._deferreds.length&&as._immediateFn((function(){g._handled||as._unhandledRejectionFn(g._value)}));for(var I=0,e=g._deferreds.length;I<e;I++)is(g,g._deferreds[I]);g._deferreds=null}function ds(g,I,e){this.onFulfilled="function"==typeof g?g:null,this.onRejected="function"==typeof I?I:null,this.promise=e}function us(g,I){var e=!1;try{g((function(g){e||(e=!0,rs(I,g))}),(function(g){e||(e=!0,cs(I,g))}))}catch(g){if(e)return;e=!0,cs(I,g)}}as.prototype.catch=function(g){return this.then(null,g)},as.prototype.then=function(g,I){var e=new this.constructor(os);return is(this,new ds(g,I,e)),e},as.prototype.finally=es,as.all=function(g){return new as((function(I,e){if(!ls(g))return e(new TypeError("Promise.all accepts an array"));var C=Array.prototype.slice.call(g);if(0===C.length)return I([]);var n=C.length;function t(g,l){try{if(l&&("object"==typeof l||"function"==typeof l)){var o=l.then;if("function"==typeof o)return void o.call(l,(function(I){t(g,I)}),e)}C[g]=l,0==--n&&I(C)}catch(g){e(g)}}for(var l=0;l<C.length;l++)t(l,C[l])}))},as.allSettled=Cs,as.resolve=function(g){return g&&"object"==typeof g&&g.constructor===as?g:new as((function(I){I(g)}))},as.reject=function(g){return new as((function(I,e){e(g)}))},as.race=function(g){return new as((function(I,e){if(!ls(g))return e(new TypeError("Promise.race accepts an array"));for(var C=0,n=g.length;C<n;C++)as.resolve(g[C]).then(I,e)}))},as._immediateFn="function"==typeof ts&&function(g){ts(g)}||function(g){ns(g,0)},as._unhandledRejectionFn=function(g){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",g)};var ss=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof e.g)return e.g;throw new Error("unable to locate global object")}();"function"!=typeof ss.Promise?ss.Promise=as:(ss.Promise.prototype.finally||(ss.Promise.prototype.finally=es),ss.Promise.allSettled||(ss.Promise.allSettled=Cs)),function(g){function I(){}function e(g,I){if(g=void 0===g?"utf-8":g,I=void 0===I?{fatal:!1}:I,-1===n.indexOf(g.toLowerCase()))throw new RangeError("Failed to construct 'TextDecoder': The encoding label provided ('"+g+"') is invalid.");if(I.fatal)throw Error("Failed to construct 'TextDecoder': the 'fatal' option is unsupported.")}function C(g){for(var I=0,e=Math.min(65536,g.length+1),C=new Uint16Array(e),n=[],t=0;;){var l=I<g.length;if(!l||t>=e-1){if(n.push(String.fromCharCode.apply(null,C.subarray(0,t))),!l)return n.join("");g=g.subarray(I),t=I=0}if(0==(128&(l=g[I++])))C[t++]=l;else if(192==(224&l)){var o=63&g[I++];C[t++]=(31&l)<<6|o}else if(224==(240&l)){o=63&g[I++];var a=63&g[I++];C[t++]=(31&l)<<12|o<<6|a}else 240==(248&l)&&(65535<(l=(7&l)<<18|(o=63&g[I++])<<12|(a=63&g[I++])<<6|63&g[I++])&&(l-=65536,C[t++]=l>>>10&1023|55296,l=56320|1023&l),C[t++]=l)}}if(g.TextEncoder&&g.TextDecoder)return!1;var n=["utf-8","utf8","unicode-1-1-utf-8"];Object.defineProperty(I.prototype,"encoding",{value:"utf-8"}),I.prototype.encode=function(g,I){if((I=void 0===I?{stream:!1}:I).stream)throw Error("Failed to encode: the 'stream' option is unsupported.");I=0;for(var e=g.length,C=0,n=Math.max(32,e+(e>>>1)+7),t=new Uint8Array(n>>>3<<3);I<e;){var l=g.charCodeAt(I++);if(55296<=l&&56319>=l){if(I<e){var o=g.charCodeAt(I);56320==(64512&o)&&(++I,l=((1023&l)<<10)+(1023&o)+65536)}if(55296<=l&&56319>=l)continue}if(C+4>t.length&&(n+=8,n=(n*=1+I/g.length*2)>>>3<<3,(o=new Uint8Array(n)).set(t),t=o),0==(4294967168&l))t[C++]=l;else{if(0==(4294965248&l))t[C++]=l>>>6&31|192;else if(0==(4294901760&l))t[C++]=l>>>12&15|224,t[C++]=l>>>6&63|128;else{if(0!=(4292870144&l))continue;t[C++]=l>>>18&7|240,t[C++]=l>>>12&63|128,t[C++]=l>>>6&63|128}t[C++]=63&l|128}}return t.slice?t.slice(0,C):t.subarray(0,C)},Object.defineProperty(e.prototype,"encoding",{value:"utf-8"}),Object.defineProperty(e.prototype,"fatal",{value:!1}),Object.defineProperty(e.prototype,"ignoreBOM",{value:!1});var t=C;"function"==typeof Buffer&&Buffer.from?t=function(g){return Buffer.from(g.buffer,g.byteOffset,g.byteLength).toString("utf-8")}:"function"==typeof Blob&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&(t=function(g){var I=URL.createObjectURL(new Blob([g],{type:"text/plain;charset=UTF-8"}));try{var e=new XMLHttpRequest;return e.open("GET",I,!1),e.send(),e.responseText}catch(I){return C(g)}finally{URL.revokeObjectURL(I)}}),e.prototype.decode=function(g,I){if((I=void 0===I?{stream:!1}:I).stream)throw Error("Failed to decode: the 'stream' option is unsupported.");return g=g instanceof Uint8Array?g:g.buffer instanceof ArrayBuffer?new Uint8Array(g.buffer):new Uint8Array(g),t(g)},g.TextEncoder=I,g.TextDecoder=e}("undefined"!=typeof window?window:ka),function(){function g(g,I){if(!(g instanceof I))throw new TypeError("Cannot call a class as a function")}function I(g,I){for(var e=0;e<I.length;e++){var C=I[e];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(g,C.key,C)}}function e(g,e,C){return e&&I(g.prototype,e),C&&I(g,C),g}function C(g,I){if("function"!=typeof I&&null!==I)throw new TypeError("Super expression must either be null or a function");g.prototype=Object.create(I&&I.prototype,{constructor:{value:g,writable:!0,configurable:!0}}),I&&t(g,I)}function n(g){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(g){return g.__proto__||Object.getPrototypeOf(g)})(g)}function t(g,I){return(t=Object.setPrototypeOf||function(g,I){return g.__proto__=I,g})(g,I)}function l(g){if(void 0===g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g}function o(g,I){return!I||"object"!=typeof I&&"function"!=typeof I?l(g):I}function a(g){var I=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(g){return!1}}();return function(){var e,C=n(g);if(I){var t=n(this).constructor;e=Reflect.construct(C,arguments,t)}else e=C.apply(this,arguments);return o(this,e)}}function i(g,I){for(;!Object.prototype.hasOwnProperty.call(g,I)&&null!==(g=n(g)););return g}function r(g,I,e){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(g,I,e){var C=i(g,I);if(C){var n=Object.getOwnPropertyDescriptor(C,I);return n.get?n.get.call(e):n.value}})(g,I,e||g)}var c=function(){function I(){g(this,I),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return e(I,[{key:"addEventListener",value:function(g,I,e){g in this.listeners||(this.listeners[g]=[]),this.listeners[g].push({callback:I,options:e})}},{key:"removeEventListener",value:function(g,I){if(g in this.listeners)for(var e=this.listeners[g],C=0,n=e.length;C<n;C++)if(e[C].callback===I)return void e.splice(C,1)}},{key:"dispatchEvent",value:function(g){if(g.type in this.listeners){for(var I=this.listeners[g.type].slice(),e=0,C=I.length;e<C;e++){var n=I[e];try{n.callback.call(this,g)}catch(g){Promise.resolve().then((function(){throw g}))}n.options&&n.options.once&&this.removeEventListener(g.type,n.callback)}return!g.defaultPrevented}}}]),I}(),A=function(I){C(o,I);var t=a(o);function o(){var I;return g(this,o),(I=t.call(this)).listeners||c.call(l(I)),Object.defineProperty(l(I),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(l(I),"onabort",{value:null,writable:!0,configurable:!0}),I}return e(o,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(g){"abort"===g.type&&(this.aborted=!0,"function"==typeof this.onabort&&this.onabort.call(this,g)),r(n(o.prototype),"dispatchEvent",this).call(this,g)}}]),o}(c),d=function(){function I(){g(this,I),Object.defineProperty(this,"signal",{value:new A,writable:!0,configurable:!0})}return e(I,[{key:"abort",value:function(){var g;try{g=new Event("abort")}catch(I){"undefined"!=typeof document?document.createEvent?(g=document.createEvent("Event")).initEvent("abort",!1,!1):(g=document.createEventObject()).type="abort":g={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(g)}},{key:"toString",value:function(){return"[object AbortController]"}}]),I}();"undefined"!=typeof Symbol&&Symbol.toStringTag&&(d.prototype[Symbol.toStringTag]="AbortController",A.prototype[Symbol.toStringTag]="AbortSignal"),function(g){(function(g){return g.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):"function"==typeof g.Request&&!g.Request.prototype.hasOwnProperty("signal")||!g.AbortController})(g)&&(g.AbortController=d,g.AbortSignal=A)}("undefined"!=typeof self?self:ka)}();var ms=Ya((function(g,I){Object.defineProperty(I,"__esModule",{value:!0});var e=function(){function g(){var g=this;this.locked=new Map,this.addToLocked=function(I,e){var C=g.locked.get(I);void 0===C?void 0===e?g.locked.set(I,[]):g.locked.set(I,[e]):void 0!==e&&(C.unshift(e),g.locked.set(I,C))},this.isLocked=function(I){return g.locked.has(I)},this.lock=function(I){return new Promise((function(e,C){g.isLocked(I)?g.addToLocked(I,e):(g.addToLocked(I),e())}))},this.unlock=function(I){var e=g.locked.get(I);if(void 0!==e&&0!==e.length){var C=e.pop();g.locked.set(I,e),void 0!==C&&setTimeout(C,0)}else g.locked.delete(I)}}return g.getInstance=function(){return void 0===g.instance&&(g.instance=new g),g.instance},g}();I.default=function(){return e.getInstance()}}));Ja(ms);var Zs=Ja(Ya((function(g,I){var e=ka&&ka.__awaiter||function(g,I,e,C){return new(e||(e=Promise))((function(n,t){function l(g){try{a(C.next(g))}catch(g){t(g)}}function o(g){try{a(C.throw(g))}catch(g){t(g)}}function a(g){g.done?n(g.value):new e((function(I){I(g.value)})).then(l,o)}a((C=C.apply(g,I||[])).next())}))},C=ka&&ka.__generator||function(g,I){var e,C,n,t,l={label:0,sent:function(){if(1&n[0])throw n[1];return n[1]},trys:[],ops:[]};return t={next:o(0),throw:o(1),return:o(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function o(t){return function(o){return function(t){if(e)throw new TypeError("Generator is already executing.");for(;l;)try{if(e=1,C&&(n=2&t[0]?C.return:t[0]?C.throw||((n=C.return)&&n.call(C),0):C.next)&&!(n=n.call(C,t[1])).done)return n;switch(C=0,n&&(t=[2&t[0],n.value]),t[0]){case 0:case 1:n=t;break;case 4:return l.label++,{value:t[1],done:!1};case 5:l.label++,C=t[1],t=[0];continue;case 7:t=l.ops.pop(),l.trys.pop();continue;default:if(!((n=(n=l.trys).length>0&&n[n.length-1])||6!==t[0]&&2!==t[0])){l=0;continue}if(3===t[0]&&(!n||t[1]>n[0]&&t[1]<n[3])){l.label=t[1];break}if(6===t[0]&&l.label<n[1]){l.label=n[1],n=t;break}if(n&&l.label<n[2]){l.label=n[2],l.ops.push(t);break}n[2]&&l.ops.pop(),l.trys.pop();continue}t=I.call(g,l)}catch(g){t=[6,g],C=0}finally{e=n=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,o])}}};Object.defineProperty(I,"__esModule",{value:!0});var n="browser-tabs-lock-key";function t(g){return new Promise((function(I){return setTimeout(I,g)}))}function l(g){for(var I="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",e="",C=0;C<g;C++)e+=I[Math.floor(Math.random()*I.length)];return e}var o=function(){function g(){this.acquiredIatSet=new Set,this.id=Date.now().toString()+l(15),this.acquireLock=this.acquireLock.bind(this),this.releaseLock=this.releaseLock.bind(this),this.releaseLock__private__=this.releaseLock__private__.bind(this),this.waitForSomethingToChange=this.waitForSomethingToChange.bind(this),this.refreshLockWhileAcquired=this.refreshLockWhileAcquired.bind(this),void 0===g.waiters&&(g.waiters=[])}return g.prototype.acquireLock=function(I,o){return void 0===o&&(o=5e3),e(this,void 0,void 0,(function(){var e,a,i,r,c,A;return C(this,(function(C){switch(C.label){case 0:e=Date.now()+l(4),a=Date.now()+o,i=n+"-"+I,r=window.localStorage,C.label=1;case 1:return Date.now()<a?[4,t(30)]:[3,8];case 2:return C.sent(),null!==r.getItem(i)?[3,5]:(c=this.id+"-"+I+"-"+e,[4,t(Math.floor(25*Math.random()))]);case 3:return C.sent(),r.setItem(i,JSON.stringify({id:this.id,iat:e,timeoutKey:c,timeAcquired:Date.now(),timeRefreshed:Date.now()})),[4,t(30)];case 4:return C.sent(),null!==(A=r.getItem(i))&&(A=JSON.parse(A)).id===this.id&&A.iat===e?(this.acquiredIatSet.add(e),this.refreshLockWhileAcquired(i,e),[2,!0]):[3,7];case 5:return g.lockCorrector(),[4,this.waitForSomethingToChange(a)];case 6:C.sent(),C.label=7;case 7:return e=Date.now()+l(4),[3,1];case 8:return[2,!1]}}))}))},g.prototype.refreshLockWhileAcquired=function(g,I){return e(this,void 0,void 0,(function(){var n=this;return C(this,(function(t){return setTimeout((function(){return e(n,void 0,void 0,(function(){var e,n;return C(this,(function(C){switch(C.label){case 0:return[4,ms.default().lock(I)];case 1:return C.sent(),this.acquiredIatSet.has(I)?(e=window.localStorage,null===(n=e.getItem(g))?(ms.default().unlock(I),[2]):((n=JSON.parse(n)).timeRefreshed=Date.now(),e.setItem(g,JSON.stringify(n)),ms.default().unlock(I),this.refreshLockWhileAcquired(g,I),[2])):(ms.default().unlock(I),[2])}}))}))}),1e3),[2]}))}))},g.prototype.waitForSomethingToChange=function(I){return e(this,void 0,void 0,(function(){return C(this,(function(e){switch(e.label){case 0:return[4,new Promise((function(e){var C=!1,n=Date.now(),t=!1;function l(){if(t||(window.removeEventListener("storage",l),g.removeFromWaiting(l),clearTimeout(o),t=!0),!C){C=!0;var I=50-(Date.now()-n);I>0?setTimeout(e,I):e()}}window.addEventListener("storage",l),g.addToWaiting(l);var o=setTimeout(l,Math.max(0,I-Date.now()))}))];case 1:return e.sent(),[2]}}))}))},g.addToWaiting=function(I){this.removeFromWaiting(I),void 0!==g.waiters&&g.waiters.push(I)},g.removeFromWaiting=function(I){void 0!==g.waiters&&(g.waiters=g.waiters.filter((function(g){return g!==I})))},g.notifyWaiters=function(){void 0!==g.waiters&&g.waiters.slice().forEach((function(g){return g()}))},g.prototype.releaseLock=function(g){return e(this,void 0,void 0,(function(){return C(this,(function(I){switch(I.label){case 0:return[4,this.releaseLock__private__(g)];case 1:return[2,I.sent()]}}))}))},g.prototype.releaseLock__private__=function(I){return e(this,void 0,void 0,(function(){var e,t,l;return C(this,(function(C){switch(C.label){case 0:return e=window.localStorage,t=n+"-"+I,null===(l=e.getItem(t))?[2]:(l=JSON.parse(l)).id!==this.id?[3,2]:[4,ms.default().lock(l.iat)];case 1:C.sent(),this.acquiredIatSet.delete(l.iat),e.removeItem(t),ms.default().unlock(l.iat),g.notifyWaiters(),C.label=2;case 2:return[2]}}))}))},g.lockCorrector=function(){for(var I=Date.now()-5e3,e=window.localStorage,C=Object.keys(e),t=!1,l=0;l<C.length;l++){var o=C[l];if(o.includes(n)){var a=e.getItem(o);null!==a&&(void 0===(a=JSON.parse(a)).timeRefreshed&&a.timeAcquired<I||void 0!==a.timeRefreshed&&a.timeRefreshed<I)&&(e.removeItem(o),t=!0)}}t&&g.notifyWaiters()},g.waiters=void 0,g}();I.default=o}))),bs={timeoutInSeconds:60},ps=["login_required","consent_required","interaction_required","account_selection_required","access_denied"],Gs={name:"auth0-spa-js",version:"1.19.3"},hs=function(){return Date.now()},ys=function(g){function I(e,C){var n=g.call(this,C)||this;return n.error=e,n.error_description=C,Object.setPrototypeOf(n,I.prototype),n}return Wa(I,g),I.fromPayload=function(g){return new I(g.error,g.error_description)},I}(Error),Bs=function(g){function I(e,C,n,t){void 0===t&&(t=null);var l=g.call(this,e,C)||this;return l.state=n,l.appState=t,Object.setPrototypeOf(l,I.prototype),l}return Wa(I,g),I}(ys),Ws=function(g){function I(){var e=g.call(this,"timeout","Timeout")||this;return Object.setPrototypeOf(e,I.prototype),e}return Wa(I,g),I}(ys),Ss=function(g){function I(e){var C=g.call(this)||this;return C.popup=e,Object.setPrototypeOf(C,I.prototype),C}return Wa(I,g),I}(Ws),Vs=function(g){function I(e){var C=g.call(this,"cancelled","Popup closed")||this;return C.popup=e,Object.setPrototypeOf(C,I.prototype),C}return Wa(I,g),I}(ys),vs=function(g){function I(e,C,n){var t=g.call(this,e,C)||this;return t.mfa_token=n,Object.setPrototypeOf(t,I.prototype),t}return Wa(I,g),I}(ys),Rs=function(g){return new Promise((function(I,e){var C,n=setInterval((function(){g.popup&&g.popup.closed&&(clearInterval(n),clearTimeout(t),window.removeEventListener("message",C,!1),e(new Vs(g.popup)))}),1e3),t=setTimeout((function(){clearInterval(n),e(new Ss(g.popup)),window.removeEventListener("message",C,!1)}),1e3*(g.timeoutInSeconds||60));C=function(l){if(l.data&&"authorization_response"===l.data.type){if(clearTimeout(t),clearInterval(n),window.removeEventListener("message",C,!1),g.popup.close(),l.data.response.error)return e(ys.fromPayload(l.data.response));I(l.data.response)}},window.addEventListener("message",C)}))},Xs=function(){return window.crypto||window.msCrypto},fs=function(){var g=Xs();return g.subtle||g.webkitSubtle},ks=function(){var g="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_~.",I="";return Array.from(Xs().getRandomValues(new Uint8Array(43))).forEach((function(e){return I+=g[e%g.length]})),I},Js=function(g){return btoa(g)},Ys=function(g){return Object.keys(g).filter((function(I){return void 0!==g[I]})).map((function(I){return encodeURIComponent(I)+"="+encodeURIComponent(g[I])})).join("&")},Hs=function(g){return va(void 0,void 0,void 0,(function(){var I;return Ra(this,(function(e){switch(e.label){case 0:return I=fs().digest({name:"SHA-256"},(new TextEncoder).encode(g)),window.msCrypto?[2,new Promise((function(g,e){I.oncomplete=function(I){g(I.target.result)},I.onerror=function(g){e(g.error)},I.onabort=function(){e("The digest operation was aborted")}}))]:[4,I];case 1:return[2,e.sent()]}}))}))},ws=function(g){return function(g){return decodeURIComponent(atob(g).split("").map((function(g){return"%"+("00"+g.charCodeAt(0).toString(16)).slice(-2)})).join(""))}(g.replace(/_/g,"/").replace(/-/g,"+"))},Ks=function(g){var I=new Uint8Array(g);return function(g){var I={"+":"-","/":"_","=":""};return g.replace(/[+/=]/g,(function(g){return I[g]}))}(window.btoa(String.fromCharCode.apply(String,fa([],Xa(Array.from(I)),!1))))},Fs=function(g,I){return va(void 0,void 0,void 0,(function(){var e,C;return Ra(this,(function(n){switch(n.label){case 0:return[4,(t=g,l=I,l=l||{},new Promise((function(g,I){var e=new XMLHttpRequest,C=[],n=[],o={},a=function g(){return{ok:2==(e.status/100|0),statusText:e.statusText,status:e.status,url:e.responseURL,text:function(){return Promise.resolve(e.responseText)},json:function(){return Promise.resolve(e.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([e.response]))},clone:g,headers:{keys:function(){return C},entries:function(){return n},get:function(g){return o[g.toLowerCase()]},has:function(g){return g.toLowerCase()in o}}}};for(var i in e.open(l.method||"get",t,!0),e.onload=function(){e.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,(function(g,I,e){C.push(I=I.toLowerCase()),n.push([I,e]),o[I]=o[I]?o[I]+","+e:e})),g(a())},e.onerror=I,e.withCredentials="include"==l.credentials,l.headers)e.setRequestHeader(i,l.headers[i]);e.send(l.body||null)})))];case 1:return e=n.sent(),C={ok:e.ok},[4,e.json()];case 2:return[2,(C.json=n.sent(),C)]}var t,l}))}))},Ns=function(g,I,e){return va(void 0,void 0,void 0,(function(){var C,n;return Ra(this,(function(t){return C=new AbortController,I.signal=C.signal,[2,Promise.race([Fs(g,I),new Promise((function(g,I){n=setTimeout((function(){C.abort(),I(new Error("Timeout when executing 'fetch'"))}),e)}))]).finally((function(){clearTimeout(n)}))]}))}))},xs=function(g,I,e,C,n,t,l){return va(void 0,void 0,void 0,(function(){return Ra(this,(function(o){return[2,(a={auth:{audience:I,scope:e},timeout:n,fetchUrl:g,fetchOptions:C,useFormData:l},i=t,new Promise((function(g,I){var e=new MessageChannel;e.port1.onmessage=function(e){e.data.error?I(new Error(e.data.error)):g(e.data)},i.postMessage(a,[e.port2])})))];var a,i}))}))},zs=function(g,I,e,C,n,t,l){return void 0===l&&(l=1e4),va(void 0,void 0,void 0,(function(){return Ra(this,(function(o){return n?[2,xs(g,I,e,C,l,n,t)]:[2,Ns(g,C,l)]}))}))};function Ms(g,I,e,C,n,t,l){return va(this,void 0,void 0,(function(){var o,a,i,r,c,A,d,u,s;return Ra(this,(function(m){switch(m.label){case 0:o=null,i=0,m.label=1;case 1:if(!(i<3))return[3,6];m.label=2;case 2:return m.trys.push([2,4,,5]),[4,zs(g,e,C,n,t,l,I)];case 3:return a=m.sent(),o=null,[3,6];case 4:return r=m.sent(),o=r,[3,5];case 5:return i++,[3,1];case 6:if(o)throw o.message=o.message||"Failed to fetch",o;if(c=a.json,A=c.error,d=c.error_description,u=Va(c,["error","error_description"]),!a.ok){if(s=d||"HTTP error. Unable to fetch "+g,"mfa_required"===A)throw new vs(A,s,u.mfa_token);throw new ys(A||"request_error",s)}return[2,u]}}))}))}function Es(g,I){var e=g.baseUrl,C=g.timeout,n=g.audience,t=g.scope,l=g.auth0Client,o=g.useFormData,a=Va(g,["baseUrl","timeout","audience","scope","auth0Client","useFormData"]);return va(this,void 0,void 0,(function(){var g;return Ra(this,(function(i){switch(i.label){case 0:return g=o?Ys(a):JSON.stringify(a),[4,Ms(e+"/oauth/token",C,n||"default",t,{method:"POST",body:g,headers:{"Content-Type":o?"application/x-www-form-urlencoded":"application/json","Auth0-Client":btoa(JSON.stringify(l||Gs))}},I,o)];case 1:return[2,i.sent()]}}))}))}var Us=function(g){return Array.from(new Set(g))},Qs=function(){for(var g=[],I=0;I<arguments.length;I++)g[I]=arguments[I];return Us(g.join(" ").trim().split(/\s+/)).join(" ")},Ls=function(){function g(g,I){void 0===I&&(I="@@auth0spajs@@"),this.prefix=I,this.client_id=g.client_id,this.scope=g.scope,this.audience=g.audience}return g.prototype.toKey=function(){return this.prefix+"::"+this.client_id+"::"+this.audience+"::"+this.scope},g.fromKey=function(I){var e=Xa(I.split("::"),4),C=e[0],n=e[1],t=e[2];return new g({client_id:n,scope:e[3],audience:t},C)},g.fromCacheEntry=function(I){return new g({scope:I.scope,audience:I.audience,client_id:I.client_id})},g}(),Ts=function(){function g(){}return g.prototype.set=function(g,I){localStorage.setItem(g,JSON.stringify(I))},g.prototype.get=function(g){var I=window.localStorage.getItem(g);if(I)try{return JSON.parse(I)}catch(g){return}},g.prototype.remove=function(g){localStorage.removeItem(g)},g.prototype.allKeys=function(){return Object.keys(window.localStorage).filter((function(g){return g.startsWith("@@auth0spajs@@")}))},g}(),Ds=function(){var g;this.enclosedCache=(g={},{set:function(I,e){g[I]=e},get:function(I){var e=g[I];if(e)return e},remove:function(I){delete g[I]},allKeys:function(){return Object.keys(g)}})},js=function(){function g(g,I,e){this.cache=g,this.keyManifest=I,this.nowProvider=e,this.nowProvider=this.nowProvider||hs}return g.prototype.get=function(g,I){var e;return void 0===I&&(I=0),va(this,void 0,void 0,(function(){var C,n,t,l,o;return Ra(this,(function(a){switch(a.label){case 0:return[4,this.cache.get(g.toKey())];case 1:return(C=a.sent())?[3,4]:[4,this.getCacheKeys()];case 2:return(n=a.sent())?(t=this.matchExistingCacheKey(g,n),[4,this.cache.get(t)]):[2];case 3:C=a.sent(),a.label=4;case 4:return C?[4,this.nowProvider()]:[2];case 5:return l=a.sent(),o=Math.floor(l/1e3),C.expiresAt-I<o?C.body.refresh_token?(C.body={refresh_token:C.body.refresh_token},[4,this.cache.set(g.toKey(),C)]):[3,7]:[3,10];case 6:return a.sent(),[2,C.body];case 7:return[4,this.cache.remove(g.toKey())];case 8:return a.sent(),[4,null===(e=this.keyManifest)||void 0===e?void 0:e.remove(g.toKey())];case 9:return a.sent(),[2];case 10:return[2,C.body]}}))}))},g.prototype.set=function(g){var I;return va(this,void 0,void 0,(function(){var e,C;return Ra(this,(function(n){switch(n.label){case 0:return e=new Ls({client_id:g.client_id,scope:g.scope,audience:g.audience}),[4,this.wrapCacheEntry(g)];case 1:return C=n.sent(),[4,this.cache.set(e.toKey(),C)];case 2:return n.sent(),[4,null===(I=this.keyManifest)||void 0===I?void 0:I.add(e.toKey())];case 3:return n.sent(),[2]}}))}))},g.prototype.clear=function(g){var I;return va(this,void 0,void 0,(function(){var e,C=this;return Ra(this,(function(n){switch(n.label){case 0:return[4,this.getCacheKeys()];case 1:return(e=n.sent())?[4,e.filter((function(I){return!g||I.includes(g)})).reduce((function(g,I){return va(C,void 0,void 0,(function(){return Ra(this,(function(e){switch(e.label){case 0:return[4,g];case 1:return e.sent(),[4,this.cache.remove(I)];case 2:return e.sent(),[2]}}))}))}),Promise.resolve())]:[2];case 2:return n.sent(),[4,null===(I=this.keyManifest)||void 0===I?void 0:I.clear()];case 3:return n.sent(),[2]}}))}))},g.prototype.clearSync=function(g){var I=this,e=this.cache.allKeys();e&&e.filter((function(I){return!g||I.includes(g)})).forEach((function(g){I.cache.remove(g)}))},g.prototype.wrapCacheEntry=function(g){return va(this,void 0,void 0,(function(){var I,e,C;return Ra(this,(function(n){switch(n.label){case 0:return[4,this.nowProvider()];case 1:return I=n.sent(),e=Math.floor(I/1e3)+g.expires_in,C=Math.min(e,g.decodedToken.claims.exp),[2,{body:g,expiresAt:C}]}}))}))},g.prototype.getCacheKeys=function(){var g;return va(this,void 0,void 0,(function(){var I;return Ra(this,(function(e){switch(e.label){case 0:return this.keyManifest?[4,this.keyManifest.get()]:[3,2];case 1:return I=null===(g=e.sent())||void 0===g?void 0:g.keys,[3,4];case 2:return[4,this.cache.allKeys()];case 3:I=e.sent(),e.label=4;case 4:return[2,I]}}))}))},g.prototype.matchExistingCacheKey=function(g,I){return I.filter((function(I){var e=Ls.fromKey(I),C=new Set(e.scope&&e.scope.split(" ")),n=g.scope.split(" "),t=e.scope&&n.reduce((function(g,I){return g&&C.has(I)}),!0);return"@@auth0spajs@@"===e.prefix&&e.client_id===g.client_id&&e.audience===g.audience&&t}))[0]},g}(),Ps=function(){function g(g,I){this.storage=g,this.clientId=I,this.storageKey="a0.spajs.txs."+this.clientId,this.transaction=this.storage.get(this.storageKey)}return g.prototype.create=function(g){this.transaction=g,this.storage.save(this.storageKey,g,{daysUntilExpire:1})},g.prototype.get=function(){return this.transaction},g.prototype.remove=function(){delete this.transaction,this.storage.remove(this.storageKey)},g}(),Os=function(g){return"number"==typeof g},qs=["iss","aud","exp","nbf","iat","jti","azp","nonce","auth_time","at_hash","c_hash","acr","amr","sub_jwk","cnf","sip_from_tag","sip_date","sip_callid","sip_cseq_num","sip_via_branch","orig","dest","mky","events","toe","txn","rph","sid","vot","vtm"],_s=function(g){if(!g.id_token)throw new Error("ID token is required but missing");var I=function(g){var I=g.split("."),e=Xa(I,3),C=e[0],n=e[1],t=e[2];if(3!==I.length||!C||!n||!t)throw new Error("ID token could not be decoded");var l=JSON.parse(ws(n)),o={__raw:g},a={};return Object.keys(l).forEach((function(g){o[g]=l[g],qs.includes(g)||(a[g]=l[g])})),{encoded:{header:C,payload:n,signature:t},header:JSON.parse(ws(C)),claims:o,user:a}}(g.id_token);if(!I.claims.iss)throw new Error("Issuer (iss) claim must be a string present in the ID token");if(I.claims.iss!==g.iss)throw new Error('Issuer (iss) claim mismatch in the ID token; expected "'+g.iss+'", found "'+I.claims.iss+'"');if(!I.user.sub)throw new Error("Subject (sub) claim must be a string present in the ID token");if("RS256"!==I.header.alg)throw new Error('Signature algorithm of "'+I.header.alg+'" is not supported. Expected the ID token to be signed with "RS256".');if(!I.claims.aud||"string"!=typeof I.claims.aud&&!Array.isArray(I.claims.aud))throw new Error("Audience (aud) claim must be a string or array of strings present in the ID token");if(Array.isArray(I.claims.aud)){if(!I.claims.aud.includes(g.aud))throw new Error('Audience (aud) claim mismatch in the ID token; expected "'+g.aud+'" but was not one of "'+I.claims.aud.join(", ")+'"');if(I.claims.aud.length>1){if(!I.claims.azp)throw new Error("Authorized Party (azp) claim must be a string present in the ID token when Audience (aud) claim has multiple values");if(I.claims.azp!==g.aud)throw new Error('Authorized Party (azp) claim mismatch in the ID token; expected "'+g.aud+'", found "'+I.claims.azp+'"')}}else if(I.claims.aud!==g.aud)throw new Error('Audience (aud) claim mismatch in the ID token; expected "'+g.aud+'" but found "'+I.claims.aud+'"');if(g.nonce){if(!I.claims.nonce)throw new Error("Nonce (nonce) claim must be a string present in the ID token");if(I.claims.nonce!==g.nonce)throw new Error('Nonce (nonce) claim mismatch in the ID token; expected "'+g.nonce+'", found "'+I.claims.nonce+'"')}if(g.max_age&&!Os(I.claims.auth_time))throw new Error("Authentication Time (auth_time) claim must be a number present in the ID token when Max Age (max_age) is specified");if(!Os(I.claims.exp))throw new Error("Expiration Time (exp) claim must be a number present in the ID token");if(!Os(I.claims.iat))throw new Error("Issued At (iat) claim must be a number present in the ID token");var e=g.leeway||60,C=new Date(g.now||Date.now()),n=new Date(0),t=new Date(0),l=new Date(0);if(l.setUTCSeconds(parseInt(I.claims.auth_time)+g.max_age+e),n.setUTCSeconds(I.claims.exp+e),t.setUTCSeconds(I.claims.nbf-e),C>n)throw new Error("Expiration Time (exp) claim error in the ID token; current time ("+C+") is after expiration time ("+n+")");if(Os(I.claims.nbf)&&C<t)throw new Error("Not Before time (nbf) claim in the ID token indicates that this token can't be used just yet. Currrent time ("+C+") is before "+t);if(Os(I.claims.auth_time)&&C>l)throw new Error("Authentication Time (auth_time) claim in the ID token indicates that too much time has passed since the last end-user authentication. Currrent time ("+C+") is after last auth at "+l);if(g.organizationId){if(!I.claims.org_id)throw new Error("Organization ID (org_id) claim must be a string present in the ID token");if(g.organizationId!==I.claims.org_id)throw new Error('Organization ID (org_id) claim mismatch in the ID token; expected "'+g.organizationId+'", found "'+I.claims.org_id+'"')}return I},$s=Ya((function(g,I){var e=ka&&ka.__assign||function(){return(e=Object.assign||function(g){for(var I,e=1,C=arguments.length;e<C;e++)for(var n in I=arguments[e])Object.prototype.hasOwnProperty.call(I,n)&&(g[n]=I[n]);return g}).apply(this,arguments)};function C(g,I){if(!I)return"";var e="; "+g;return!0===I?e:e+"="+I}function n(g,I,e){return encodeURIComponent(g).replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent).replace(/\(/g,"%28").replace(/\)/g,"%29")+"="+encodeURIComponent(I).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)+function(g){if("number"==typeof g.expires){var I=new Date;I.setMilliseconds(I.getMilliseconds()+864e5*g.expires),g.expires=I}return C("Expires",g.expires?g.expires.toUTCString():"")+C("Domain",g.domain)+C("Path",g.path)+C("Secure",g.secure)+C("SameSite",g.sameSite)}(e)}function t(g){for(var I={},e=g?g.split("; "):[],C=/(%[\dA-F]{2})+/gi,n=0;n<e.length;n++){var t=e[n].split("="),l=t.slice(1).join("=");'"'===l.charAt(0)&&(l=l.slice(1,-1));try{I[t[0].replace(C,decodeURIComponent)]=l.replace(C,decodeURIComponent)}catch(g){}}return I}function l(){return t(document.cookie)}function o(g,I,C){document.cookie=n(g,I,e({path:"/"},C))}I.__esModule=!0,I.encode=n,I.parse=t,I.getAll=l,I.get=function(g){return l()[g]},I.set=o,I.remove=function(g,I){o(g,"",e(e({},I),{expires:-1}))}}));Ja($s),$s.encode,$s.parse,$s.getAll;var gm=$s.get,Im=$s.set,em=$s.remove,Cm={get:function(g){var I=gm(g);if(void 0!==I)return JSON.parse(I)},save:function(g,I,e){var C={};"https:"===window.location.protocol&&(C={secure:!0,sameSite:"none"}),(null==e?void 0:e.daysUntilExpire)&&(C.expires=e.daysUntilExpire),Im(g,JSON.stringify(I),C)},remove:function(g){em(g)}},nm={get:function(g){return Cm.get(g)||Cm.get("_legacy_"+g)},save:function(g,I,e){var C={};"https:"===window.location.protocol&&(C={secure:!0}),(null==e?void 0:e.daysUntilExpire)&&(C.expires=e.daysUntilExpire),Im("_legacy_"+g,JSON.stringify(I),C),Cm.save(g,I,e)},remove:function(g){Cm.remove(g),Cm.remove("_legacy_"+g)}},tm={get:function(g){if("undefined"!=typeof sessionStorage){var I=sessionStorage.getItem(g);if(void 0!==I)return JSON.parse(I)}},save:function(g,I){sessionStorage.setItem(g,JSON.stringify(I))},remove:function(g){sessionStorage.removeItem(g)}};var lm,om,am=("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Ci8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uCgogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55CiAgICBwdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuCgogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgKICAgIFJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQogICAgQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULAogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NCiAgICBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUgogICAgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUgogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4KICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovdmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4oZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHIsdD0xLG49YXJndW1lbnRzLmxlbmd0aDt0PG47dCsrKWZvcih2YXIgbyBpbiByPWFyZ3VtZW50c1t0XSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixvKSYmKGVbb109cltvXSk7cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIHIoZSxyLHQsbil7cmV0dXJuIG5ldyh0fHwodD1Qcm9taXNlKSkoKGZ1bmN0aW9uKG8sYSl7ZnVuY3Rpb24gcyhlKXt0cnl7dShuLm5leHQoZSkpfWNhdGNoKGUpe2EoZSl9fWZ1bmN0aW9uIGkoZSl7dHJ5e3Uobi50aHJvdyhlKSl9Y2F0Y2goZSl7YShlKX19ZnVuY3Rpb24gdShlKXt2YXIgcjtlLmRvbmU/byhlLnZhbHVlKToocj1lLnZhbHVlLHIgaW5zdGFuY2VvZiB0P3I6bmV3IHQoKGZ1bmN0aW9uKGUpe2Uocil9KSkpLnRoZW4ocyxpKX11KChuPW4uYXBwbHkoZSxyfHxbXSkpLm5leHQoKSl9KSl9ZnVuY3Rpb24gdChlLHIpe3ZhciB0LG4sbyxhLHM9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmb1swXSl0aHJvdyBvWzFdO3JldHVybiBvWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIGE9e25leHQ6aSgwKSx0aHJvdzppKDEpLHJldHVybjppKDIpfSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYoYVtTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxhO2Z1bmN0aW9uIGkoYSl7cmV0dXJuIGZ1bmN0aW9uKGkpe3JldHVybiBmdW5jdGlvbihhKXtpZih0KXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO3M7KXRyeXtpZih0PTEsbiYmKG89MiZhWzBdP24ucmV0dXJuOmFbMF0/bi50aHJvd3x8KChvPW4ucmV0dXJuKSYmby5jYWxsKG4pLDApOm4ubmV4dCkmJiEobz1vLmNhbGwobixhWzFdKSkuZG9uZSlyZXR1cm4gbztzd2l0Y2gobj0wLG8mJihhPVsyJmFbMF0sby52YWx1ZV0pLGFbMF0pe2Nhc2UgMDpjYXNlIDE6bz1hO2JyZWFrO2Nhc2UgNDpyZXR1cm4gcy5sYWJlbCsrLHt2YWx1ZTphWzFdLGRvbmU6ITF9O2Nhc2UgNTpzLmxhYmVsKyssbj1hWzFdLGE9WzBdO2NvbnRpbnVlO2Nhc2UgNzphPXMub3BzLnBvcCgpLHMudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEobz1zLnRyeXMsKG89by5sZW5ndGg+MCYmb1tvLmxlbmd0aC0xXSl8fDYhPT1hWzBdJiYyIT09YVswXSkpe3M9MDtjb250aW51ZX1pZigzPT09YVswXSYmKCFvfHxhWzFdPm9bMF0mJmFbMV08b1szXSkpe3MubGFiZWw9YVsxXTticmVha31pZig2PT09YVswXSYmcy5sYWJlbDxvWzFdKXtzLmxhYmVsPW9bMV0sbz1hO2JyZWFrfWlmKG8mJnMubGFiZWw8b1syXSl7cy5sYWJlbD1vWzJdLHMub3BzLnB1c2goYSk7YnJlYWt9b1syXSYmcy5vcHMucG9wKCkscy50cnlzLnBvcCgpO2NvbnRpbnVlfWE9ci5jYWxsKGUscyl9Y2F0Y2goZSl7YT1bNixlXSxuPTB9ZmluYWxseXt0PW89MH1pZig1JmFbMF0pdGhyb3cgYVsxXTtyZXR1cm57dmFsdWU6YVswXT9hWzFdOnZvaWQgMCxkb25lOiEwfX0oW2EsaV0pfX19dmFyIG49e30sbz1mdW5jdGlvbihlLHIpe3JldHVybiBlKyJ8IityfTthZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwoZnVuY3Rpb24oYSl7dmFyIHM9YS5kYXRhLGk9cy50aW1lb3V0LHU9cy5hdXRoLGM9cy5mZXRjaFVybCxmPXMuZmV0Y2hPcHRpb25zLGw9cy51c2VGb3JtRGF0YSxoPWZ1bmN0aW9uKGUscil7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdO2lmKCF0KXJldHVybiBlO3ZhciBuLG8sYT10LmNhbGwoZSkscz1bXTt0cnl7Zm9yKDsodm9pZCAwPT09cnx8ci0tID4wKSYmIShuPWEubmV4dCgpKS5kb25lOylzLnB1c2gobi52YWx1ZSl9Y2F0Y2goZSl7bz17ZXJyb3I6ZX19ZmluYWxseXt0cnl7biYmIW4uZG9uZSYmKHQ9YS5yZXR1cm4pJiZ0LmNhbGwoYSl9ZmluYWxseXtpZihvKXRocm93IG8uZXJyb3J9fXJldHVybiBzfShhLnBvcnRzLDEpWzBdO3JldHVybiByKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciByLGEscyxwLHksYixkLHYsdyxnO3JldHVybiB0KHRoaXMsKGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cz0oYT11fHx7fSkuYXVkaWVuY2UscD1hLnNjb3BlLHQubGFiZWw9MTtjYXNlIDE6aWYodC50cnlzLnB1c2goWzEsNywsOF0pLCEoeT1sPyhrPWYuYm9keSxTPW5ldyBVUkxTZWFyY2hQYXJhbXMoayksXz17fSxTLmZvckVhY2goKGZ1bmN0aW9uKGUscil7X1tyXT1lfSkpLF8pOkpTT04ucGFyc2UoZi5ib2R5KSkucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09eS5ncmFudF90eXBlKXtpZighKGI9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gbltvKGUscildfShzLHApKSl0aHJvdyBuZXcgRXJyb3IoIlRoZSB3ZWIgd29ya2VyIGlzIG1pc3NpbmcgdGhlIHJlZnJlc2ggdG9rZW4iKTtmLmJvZHk9bD9uZXcgVVJMU2VhcmNoUGFyYW1zKGUoZSh7fSx5KSx7cmVmcmVzaF90b2tlbjpifSkpLnRvU3RyaW5nKCk6SlNPTi5zdHJpbmdpZnkoZShlKHt9LHkpLHtyZWZyZXNoX3Rva2VuOmJ9KSl9ZD12b2lkIDAsImZ1bmN0aW9uIj09dHlwZW9mIEFib3J0Q29udHJvbGxlciYmKGQ9bmV3IEFib3J0Q29udHJvbGxlcixmLnNpZ25hbD1kLnNpZ25hbCksdj12b2lkIDAsdC5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gdC50cnlzLnB1c2goWzIsNCwsNV0pLFs0LFByb21pc2UucmFjZShbKG09aSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7cmV0dXJuIHNldFRpbWVvdXQoZSxtKX0pKSksZmV0Y2goYyxlKHt9LGYpKV0pXTtjYXNlIDM6cmV0dXJuIHY9dC5zZW50KCksWzMsNV07Y2FzZSA0OnJldHVybiB3PXQuc2VudCgpLGgucG9zdE1lc3NhZ2Uoe2Vycm9yOncubWVzc2FnZX0pLFsyXTtjYXNlIDU6cmV0dXJuIHY/WzQsdi5qc29uKCldOihkJiZkLmFib3J0KCksaC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KSxbMl0pO2Nhc2UgNjpyZXR1cm4ocj10LnNlbnQoKSkucmVmcmVzaF90b2tlbj8oZnVuY3Rpb24oZSxyLHQpe25bbyhyLHQpXT1lfShyLnJlZnJlc2hfdG9rZW4scyxwKSxkZWxldGUgci5yZWZyZXNoX3Rva2VuKTpmdW5jdGlvbihlLHIpe2RlbGV0ZSBuW28oZSxyKV19KHMscCksaC5wb3N0TWVzc2FnZSh7b2s6di5vayxqc29uOnJ9KSxbMyw4XTtjYXNlIDc6cmV0dXJuIGc9dC5zZW50KCksaC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3JfZGVzY3JpcHRpb246Zy5tZXNzYWdlfX0pLFszLDhdO2Nhc2UgODpyZXR1cm5bMl19dmFyIG0sayxTLF99KSl9KSl9KSl9KCk7Cgo=",null,!1,function(g){return lm=lm||function(g,I,e){var C=void 0===I?null:I,n=function(g,I){var e=atob(g);if(I){for(var C=new Uint8Array(e.length),n=0,t=e.length;n<t;++n)C[n]=e.charCodeAt(n);return String.fromCharCode.apply(null,new Uint16Array(C.buffer))}return e}(g,void 0!==e&&e),t=n.indexOf("\n",10)+1,l=n.substring(t)+(C?"//# sourceMappingURL="+C:""),o=new Blob([l],{type:"application/javascript"});return URL.createObjectURL(o)}("Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwohZnVuY3Rpb24oKXsidXNlIHN0cmljdCI7Ci8qISAqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKgogICAgQ29weXJpZ2h0IChjKSBNaWNyb3NvZnQgQ29ycG9yYXRpb24uCgogICAgUGVybWlzc2lvbiB0byB1c2UsIGNvcHksIG1vZGlmeSwgYW5kL29yIGRpc3RyaWJ1dGUgdGhpcyBzb2Z0d2FyZSBmb3IgYW55CiAgICBwdXJwb3NlIHdpdGggb3Igd2l0aG91dCBmZWUgaXMgaGVyZWJ5IGdyYW50ZWQuCgogICAgVEhFIFNPRlRXQVJFIElTIFBST1ZJREVEICJBUyBJUyIgQU5EIFRIRSBBVVRIT1IgRElTQ0xBSU1TIEFMTCBXQVJSQU5USUVTIFdJVEgKICAgIFJFR0FSRCBUTyBUSElTIFNPRlRXQVJFIElOQ0xVRElORyBBTEwgSU1QTElFRCBXQVJSQU5USUVTIE9GIE1FUkNIQU5UQUJJTElUWQogICAgQU5EIEZJVE5FU1MuIElOIE5PIEVWRU5UIFNIQUxMIFRIRSBBVVRIT1IgQkUgTElBQkxFIEZPUiBBTlkgU1BFQ0lBTCwgRElSRUNULAogICAgSU5ESVJFQ1QsIE9SIENPTlNFUVVFTlRJQUwgREFNQUdFUyBPUiBBTlkgREFNQUdFUyBXSEFUU09FVkVSIFJFU1VMVElORyBGUk9NCiAgICBMT1NTIE9GIFVTRSwgREFUQSBPUiBQUk9GSVRTLCBXSEVUSEVSIElOIEFOIEFDVElPTiBPRiBDT05UUkFDVCwgTkVHTElHRU5DRSBPUgogICAgT1RIRVIgVE9SVElPVVMgQUNUSU9OLCBBUklTSU5HIE9VVCBPRiBPUiBJTiBDT05ORUNUSU9OIFdJVEggVEhFIFVTRSBPUgogICAgUEVSRk9STUFOQ0UgT0YgVEhJUyBTT0ZUV0FSRS4KICAgICoqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqKioqICovdmFyIGU9ZnVuY3Rpb24oKXtyZXR1cm4oZT1PYmplY3QuYXNzaWdufHxmdW5jdGlvbihlKXtmb3IodmFyIHIsdD0xLG49YXJndW1lbnRzLmxlbmd0aDt0PG47dCsrKWZvcih2YXIgbyBpbiByPWFyZ3VtZW50c1t0XSlPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocixvKSYmKGVbb109cltvXSk7cmV0dXJuIGV9KS5hcHBseSh0aGlzLGFyZ3VtZW50cyl9O2Z1bmN0aW9uIHIoZSxyLHQsbil7cmV0dXJuIG5ldyh0fHwodD1Qcm9taXNlKSkoKGZ1bmN0aW9uKG8sYSl7ZnVuY3Rpb24gcyhlKXt0cnl7dShuLm5leHQoZSkpfWNhdGNoKGUpe2EoZSl9fWZ1bmN0aW9uIGkoZSl7dHJ5e3Uobi50aHJvdyhlKSl9Y2F0Y2goZSl7YShlKX19ZnVuY3Rpb24gdShlKXt2YXIgcjtlLmRvbmU/byhlLnZhbHVlKToocj1lLnZhbHVlLHIgaW5zdGFuY2VvZiB0P3I6bmV3IHQoKGZ1bmN0aW9uKGUpe2Uocil9KSkpLnRoZW4ocyxpKX11KChuPW4uYXBwbHkoZSxyfHxbXSkpLm5leHQoKSl9KSl9ZnVuY3Rpb24gdChlLHIpe3ZhciB0LG4sbyxhLHM9e2xhYmVsOjAsc2VudDpmdW5jdGlvbigpe2lmKDEmb1swXSl0aHJvdyBvWzFdO3JldHVybiBvWzFdfSx0cnlzOltdLG9wczpbXX07cmV0dXJuIGE9e25leHQ6aSgwKSx0aHJvdzppKDEpLHJldHVybjppKDIpfSwiZnVuY3Rpb24iPT10eXBlb2YgU3ltYm9sJiYoYVtTeW1ib2wuaXRlcmF0b3JdPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXN9KSxhO2Z1bmN0aW9uIGkoYSl7cmV0dXJuIGZ1bmN0aW9uKGkpe3JldHVybiBmdW5jdGlvbihhKXtpZih0KXRocm93IG5ldyBUeXBlRXJyb3IoIkdlbmVyYXRvciBpcyBhbHJlYWR5IGV4ZWN1dGluZy4iKTtmb3IoO3M7KXRyeXtpZih0PTEsbiYmKG89MiZhWzBdP24ucmV0dXJuOmFbMF0/bi50aHJvd3x8KChvPW4ucmV0dXJuKSYmby5jYWxsKG4pLDApOm4ubmV4dCkmJiEobz1vLmNhbGwobixhWzFdKSkuZG9uZSlyZXR1cm4gbztzd2l0Y2gobj0wLG8mJihhPVsyJmFbMF0sby52YWx1ZV0pLGFbMF0pe2Nhc2UgMDpjYXNlIDE6bz1hO2JyZWFrO2Nhc2UgNDpyZXR1cm4gcy5sYWJlbCsrLHt2YWx1ZTphWzFdLGRvbmU6ITF9O2Nhc2UgNTpzLmxhYmVsKyssbj1hWzFdLGE9WzBdO2NvbnRpbnVlO2Nhc2UgNzphPXMub3BzLnBvcCgpLHMudHJ5cy5wb3AoKTtjb250aW51ZTtkZWZhdWx0OmlmKCEobz1zLnRyeXMsKG89by5sZW5ndGg+MCYmb1tvLmxlbmd0aC0xXSl8fDYhPT1hWzBdJiYyIT09YVswXSkpe3M9MDtjb250aW51ZX1pZigzPT09YVswXSYmKCFvfHxhWzFdPm9bMF0mJmFbMV08b1szXSkpe3MubGFiZWw9YVsxXTticmVha31pZig2PT09YVswXSYmcy5sYWJlbDxvWzFdKXtzLmxhYmVsPW9bMV0sbz1hO2JyZWFrfWlmKG8mJnMubGFiZWw8b1syXSl7cy5sYWJlbD1vWzJdLHMub3BzLnB1c2goYSk7YnJlYWt9b1syXSYmcy5vcHMucG9wKCkscy50cnlzLnBvcCgpO2NvbnRpbnVlfWE9ci5jYWxsKGUscyl9Y2F0Y2goZSl7YT1bNixlXSxuPTB9ZmluYWxseXt0PW89MH1pZig1JmFbMF0pdGhyb3cgYVsxXTtyZXR1cm57dmFsdWU6YVswXT9hWzFdOnZvaWQgMCxkb25lOiEwfX0oW2EsaV0pfX19dmFyIG49e30sbz1mdW5jdGlvbihlLHIpe3JldHVybiBlKyJ8IityfTthZGRFdmVudExpc3RlbmVyKCJtZXNzYWdlIiwoZnVuY3Rpb24oYSl7dmFyIHM9YS5kYXRhLGk9cy50aW1lb3V0LHU9cy5hdXRoLGM9cy5mZXRjaFVybCxmPXMuZmV0Y2hPcHRpb25zLGw9cy51c2VGb3JtRGF0YSxoPWZ1bmN0aW9uKGUscil7dmFyIHQ9ImZ1bmN0aW9uIj09dHlwZW9mIFN5bWJvbCYmZVtTeW1ib2wuaXRlcmF0b3JdO2lmKCF0KXJldHVybiBlO3ZhciBuLG8sYT10LmNhbGwoZSkscz1bXTt0cnl7Zm9yKDsodm9pZCAwPT09cnx8ci0tID4wKSYmIShuPWEubmV4dCgpKS5kb25lOylzLnB1c2gobi52YWx1ZSl9Y2F0Y2goZSl7bz17ZXJyb3I6ZX19ZmluYWxseXt0cnl7biYmIW4uZG9uZSYmKHQ9YS5yZXR1cm4pJiZ0LmNhbGwoYSl9ZmluYWxseXtpZihvKXRocm93IG8uZXJyb3J9fXJldHVybiBzfShhLnBvcnRzLDEpWzBdO3JldHVybiByKHZvaWQgMCx2b2lkIDAsdm9pZCAwLChmdW5jdGlvbigpe3ZhciByLGEscyxwLHksYixkLHYsdyxnO3JldHVybiB0KHRoaXMsKGZ1bmN0aW9uKHQpe3N3aXRjaCh0LmxhYmVsKXtjYXNlIDA6cz0oYT11fHx7fSkuYXVkaWVuY2UscD1hLnNjb3BlLHQubGFiZWw9MTtjYXNlIDE6aWYodC50cnlzLnB1c2goWzEsNywsOF0pLCEoeT1sPyhrPWYuYm9keSxTPW5ldyBVUkxTZWFyY2hQYXJhbXMoayksXz17fSxTLmZvckVhY2goKGZ1bmN0aW9uKGUscil7X1tyXT1lfSkpLF8pOkpTT04ucGFyc2UoZi5ib2R5KSkucmVmcmVzaF90b2tlbiYmInJlZnJlc2hfdG9rZW4iPT09eS5ncmFudF90eXBlKXtpZighKGI9ZnVuY3Rpb24oZSxyKXtyZXR1cm4gbltvKGUscildfShzLHApKSl0aHJvdyBuZXcgRXJyb3IoIlRoZSB3ZWIgd29ya2VyIGlzIG1pc3NpbmcgdGhlIHJlZnJlc2ggdG9rZW4iKTtmLmJvZHk9bD9uZXcgVVJMU2VhcmNoUGFyYW1zKGUoZSh7fSx5KSx7cmVmcmVzaF90b2tlbjpifSkpLnRvU3RyaW5nKCk6SlNPTi5zdHJpbmdpZnkoZShlKHt9LHkpLHtyZWZyZXNoX3Rva2VuOmJ9KSl9ZD12b2lkIDAsImZ1bmN0aW9uIj09dHlwZW9mIEFib3J0Q29udHJvbGxlciYmKGQ9bmV3IEFib3J0Q29udHJvbGxlcixmLnNpZ25hbD1kLnNpZ25hbCksdj12b2lkIDAsdC5sYWJlbD0yO2Nhc2UgMjpyZXR1cm4gdC50cnlzLnB1c2goWzIsNCwsNV0pLFs0LFByb21pc2UucmFjZShbKG09aSxuZXcgUHJvbWlzZSgoZnVuY3Rpb24oZSl7cmV0dXJuIHNldFRpbWVvdXQoZSxtKX0pKSksZmV0Y2goYyxlKHt9LGYpKV0pXTtjYXNlIDM6cmV0dXJuIHY9dC5zZW50KCksWzMsNV07Y2FzZSA0OnJldHVybiB3PXQuc2VudCgpLGgucG9zdE1lc3NhZ2Uoe2Vycm9yOncubWVzc2FnZX0pLFsyXTtjYXNlIDU6cmV0dXJuIHY/WzQsdi5qc29uKCldOihkJiZkLmFib3J0KCksaC5wb3N0TWVzc2FnZSh7ZXJyb3I6IlRpbWVvdXQgd2hlbiBleGVjdXRpbmcgJ2ZldGNoJyJ9KSxbMl0pO2Nhc2UgNjpyZXR1cm4ocj10LnNlbnQoKSkucmVmcmVzaF90b2tlbj8oZnVuY3Rpb24oZSxyLHQpe25bbyhyLHQpXT1lfShyLnJlZnJlc2hfdG9rZW4scyxwKSxkZWxldGUgci5yZWZyZXNoX3Rva2VuKTpmdW5jdGlvbihlLHIpe2RlbGV0ZSBuW28oZSxyKV19KHMscCksaC5wb3N0TWVzc2FnZSh7b2s6di5vayxqc29uOnJ9KSxbMyw4XTtjYXNlIDc6cmV0dXJuIGc9dC5zZW50KCksaC5wb3N0TWVzc2FnZSh7b2s6ITEsanNvbjp7ZXJyb3JfZGVzY3JpcHRpb246Zy5tZXNzYWdlfX0pLFszLDhdO2Nhc2UgODpyZXR1cm5bMl19dmFyIG0sayxTLF99KSl9KSl9KSl9KCk7Cgo=",null,false),new Worker(lm,g)}),im={},rm=function(){function g(g,I){this.cache=g,this.clientId=I,this.manifestKey=this.createManifestKeyFrom(this.clientId)}return g.prototype.add=function(g){var I;return va(this,void 0,void 0,(function(){var e,C;return Ra(this,(function(n){switch(n.label){case 0:return C=Set.bind,[4,this.cache.get(this.manifestKey)];case 1:return(e=new(C.apply(Set,[void 0,(null===(I=n.sent())||void 0===I?void 0:I.keys)||[]]))).add(g),[4,this.cache.set(this.manifestKey,{keys:fa([],Xa(e),!1)})];case 2:return n.sent(),[2]}}))}))},g.prototype.remove=function(g){return va(this,void 0,void 0,(function(){var I,e;return Ra(this,(function(C){switch(C.label){case 0:return[4,this.cache.get(this.manifestKey)];case 1:return(I=C.sent())?((e=new Set(I.keys)).delete(g),e.size>0?[4,this.cache.set(this.manifestKey,{keys:fa([],Xa(e),!1)})]:[3,3]):[3,5];case 2:case 4:return[2,C.sent()];case 3:return[4,this.cache.remove(this.manifestKey)];case 5:return[2]}}))}))},g.prototype.get=function(){return this.cache.get(this.manifestKey)},g.prototype.clear=function(){return this.cache.remove(this.manifestKey)},g.prototype.createManifestKeyFrom=function(g){return"@@auth0spajs@@::"+g},g}(),cm=new Zs,Am={memory:function(){return(new Ds).enclosedCache},localstorage:function(){return new Ts}},dm=function(g){return Am[g]},um=function(){function g(g){var I,e,C;if(this.options=g,"undefined"!=typeof window&&function(){if(!Xs())throw new Error("For security reasons, `window.crypto` is required to run `auth0-spa-js`.");if(void 0===fs())throw new Error("\n      auth0-spa-js must run on a secure origin. See https://github.com/auth0/auth0-spa-js/blob/master/FAQ.md#why-do-i-get-auth0-spa-js-must-run-on-a-secure-origin for more information.\n    ")}(),g.cache&&g.cacheLocation&&console.warn("Both `cache` and `cacheLocation` options have been specified in the Auth0Client configuration; ignoring `cacheLocation` and using `cache`."),g.cache)C=g.cache;else{if(this.cacheLocation=g.cacheLocation||"memory",!dm(this.cacheLocation))throw new Error('Invalid cache location "'+this.cacheLocation+'"');C=dm(this.cacheLocation)()}this.cookieStorage=!1===g.legacySameSiteCookie?Cm:nm,this.orgHintCookieName="auth0."+this.options.client_id+".organization_hint",this.isAuthenticatedCookieName=function(g){return"auth0."+g+".is.authenticated"}(this.options.client_id),this.sessionCheckExpiryDays=g.sessionCheckExpiryDays||1;var n,t=g.useCookiesForTransactions?this.cookieStorage:tm;this.scope=this.options.scope,this.transactionManager=new Ps(t,this.options.client_id),this.nowProvider=this.options.nowProvider||hs,this.cacheManager=new js(C,C.allKeys?null:new rm(C,this.options.client_id),this.nowProvider),this.domainUrl=(n=this.options.domain,/^https?:\/\//.test(n)?n:"https://"+n),this.tokenIssuer=function(g,I){return g?g.startsWith("https://")?g:"https://"+g+"/":I+"/"}(this.options.issuer,this.domainUrl),this.defaultScope=Qs("openid",void 0!==(null===(e=null===(I=this.options)||void 0===I?void 0:I.advancedOptions)||void 0===e?void 0:e.defaultScope)?this.options.advancedOptions.defaultScope:"openid profile email"),this.options.useRefreshTokens&&(this.scope=Qs(this.scope,"offline_access")),"undefined"!=typeof window&&window.Worker&&this.options.useRefreshTokens&&"memory"===this.cacheLocation&&!/Trident.*rv:11\.0/.test(navigator.userAgent)&&(this.worker=new am),this.customOptions=function(g){return g.advancedOptions,g.audience,g.auth0Client,g.authorizeTimeoutInSeconds,g.cacheLocation,g.client_id,g.domain,g.issuer,g.leeway,g.max_age,g.redirect_uri,g.scope,g.useRefreshTokens,g.useCookiesForTransactions,g.useFormData,Va(g,["advancedOptions","audience","auth0Client","authorizeTimeoutInSeconds","cacheLocation","client_id","domain","issuer","leeway","max_age","redirect_uri","scope","useRefreshTokens","useCookiesForTransactions","useFormData"])}(g)}return g.prototype._url=function(g){var I=encodeURIComponent(btoa(JSON.stringify(this.options.auth0Client||Gs)));return""+this.domainUrl+g+"&auth0Client="+I},g.prototype._getParams=function(g,I,e,C,n){var t=this.options;t.useRefreshTokens,t.useCookiesForTransactions,t.useFormData,t.auth0Client,t.cacheLocation,t.advancedOptions,t.detailedResponse,t.nowProvider,t.authorizeTimeoutInSeconds,t.legacySameSiteCookie,t.sessionCheckExpiryDays,t.domain,t.leeway;var l=Va(t,["useRefreshTokens","useCookiesForTransactions","useFormData","auth0Client","cacheLocation","advancedOptions","detailedResponse","nowProvider","authorizeTimeoutInSeconds","legacySameSiteCookie","sessionCheckExpiryDays","domain","leeway"]);return Sa(Sa(Sa({},l),g),{scope:Qs(this.defaultScope,this.scope,g.scope),response_type:"code",response_mode:"query",state:I,nonce:e,redirect_uri:n||this.options.redirect_uri,code_challenge:C,code_challenge_method:"S256"})},g.prototype._authorizeUrl=function(g){return this._url("/authorize?"+Ys(g))},g.prototype._verifyIdToken=function(g,I,e){return va(this,void 0,void 0,(function(){var C;return Ra(this,(function(n){switch(n.label){case 0:return[4,this.nowProvider()];case 1:return C=n.sent(),[2,_s({iss:this.tokenIssuer,aud:this.options.client_id,id_token:g,nonce:I,organizationId:e,leeway:this.options.leeway,max_age:this._parseNumber(this.options.max_age),now:C})]}}))}))},g.prototype._parseNumber=function(g){return"string"!=typeof g?g:parseInt(g,10)||void 0},g.prototype._processOrgIdHint=function(g){g?this.cookieStorage.save(this.orgHintCookieName,g):this.cookieStorage.remove(this.orgHintCookieName)},g.prototype.buildAuthorizeUrl=function(g){return void 0===g&&(g={}),va(this,void 0,void 0,(function(){var I,e,C,n,t,l,o,a,i,r,c,A;return Ra(this,(function(d){switch(d.label){case 0:return I=g.redirect_uri,e=g.appState,C=Va(g,["redirect_uri","appState"]),n=Js(ks()),t=Js(ks()),l=ks(),[4,Hs(l)];case 1:return o=d.sent(),a=Ks(o),i=g.fragment?"#"+g.fragment:"",r=this._getParams(C,n,t,a,I),c=this._authorizeUrl(r),A=g.organization||this.options.organization,this.transactionManager.create(Sa({nonce:t,code_verifier:l,appState:e,scope:r.scope,audience:r.audience||"default",redirect_uri:r.redirect_uri,state:n},A&&{organizationId:A})),[2,c+i]}}))}))},g.prototype.loginWithPopup=function(g,I){return va(this,void 0,void 0,(function(){var e,C,n,t,l,o,a,i,r,c,A,d,u;return Ra(this,(function(s){switch(s.label){case 0:return g=g||{},(I=I||{}).popup||(I.popup=function(g){var I=window.screenX+(window.innerWidth-400)/2,e=window.screenY+(window.innerHeight-600)/2;return window.open("","auth0:authorize:popup","left="+I+",top="+e+",width=400,height=600,resizable,scrollbars=yes,status=1")}()),e=Va(g,[]),C=Js(ks()),n=Js(ks()),t=ks(),[4,Hs(t)];case 1:return l=s.sent(),o=Ks(l),a=this._getParams(e,C,n,o,this.options.redirect_uri||window.location.origin),i=this._authorizeUrl(Sa(Sa({},a),{response_mode:"web_message"})),I.popup.location.href=i,[4,Rs(Sa(Sa({},I),{timeoutInSeconds:I.timeoutInSeconds||this.options.authorizeTimeoutInSeconds||60}))];case 2:if(r=s.sent(),C!==r.state)throw new Error("Invalid state");return[4,Es({audience:a.audience,scope:a.scope,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:t,code:r.code,grant_type:"authorization_code",redirect_uri:a.redirect_uri,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData},this.worker)];case 3:return c=s.sent(),A=g.organization||this.options.organization,[4,this._verifyIdToken(c.id_token,n,A)];case 4:return d=s.sent(),u=Sa(Sa({},c),{decodedToken:d,scope:a.scope,audience:a.audience||"default",client_id:this.options.client_id}),[4,this.cacheManager.set(u)];case 5:return s.sent(),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays}),this._processOrgIdHint(d.claims.org_id),[2]}}))}))},g.prototype.getUser=function(g){return void 0===g&&(g={}),va(this,void 0,void 0,(function(){var I,e,C;return Ra(this,(function(n){switch(n.label){case 0:return I=g.audience||this.options.audience||"default",e=Qs(this.defaultScope,this.scope,g.scope),[4,this.cacheManager.get(new Ls({client_id:this.options.client_id,audience:I,scope:e}))];case 1:return[2,(C=n.sent())&&C.decodedToken&&C.decodedToken.user]}}))}))},g.prototype.getIdTokenClaims=function(g){return void 0===g&&(g={}),va(this,void 0,void 0,(function(){var I,e,C;return Ra(this,(function(n){switch(n.label){case 0:return I=g.audience||this.options.audience||"default",e=Qs(this.defaultScope,this.scope,g.scope),[4,this.cacheManager.get(new Ls({client_id:this.options.client_id,audience:I,scope:e}))];case 1:return[2,(C=n.sent())&&C.decodedToken&&C.decodedToken.claims]}}))}))},g.prototype.loginWithRedirect=function(g){return void 0===g&&(g={}),va(this,void 0,void 0,(function(){var I,e,C;return Ra(this,(function(n){switch(n.label){case 0:return I=g.redirectMethod,e=Va(g,["redirectMethod"]),[4,this.buildAuthorizeUrl(e)];case 1:return C=n.sent(),window.location[I||"assign"](C),[2]}}))}))},g.prototype.handleRedirectCallback=function(g){return void 0===g&&(g=window.location.href),va(this,void 0,void 0,(function(){var I,e,C,n,t,l,o,a,i,r;return Ra(this,(function(c){switch(c.label){case 0:if(0===(I=g.split("?").slice(1)).length)throw new Error("There are no query params available for parsing.");if(e=function(g){g.indexOf("#")>-1&&(g=g.substr(0,g.indexOf("#")));var I=g.split("&"),e={};return I.forEach((function(g){var I=Xa(g.split("="),2),C=I[0],n=I[1];e[C]=decodeURIComponent(n)})),e.expires_in&&(e.expires_in=parseInt(e.expires_in)),e}(I.join("")),C=e.state,n=e.code,t=e.error,l=e.error_description,!(o=this.transactionManager.get()))throw new Error("Invalid state");if(this.transactionManager.remove(),t)throw new Bs(t,l,C,o.appState);if(!o.code_verifier||o.state&&o.state!==C)throw new Error("Invalid state");return a={audience:o.audience,scope:o.scope,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:o.code_verifier,grant_type:"authorization_code",code:n,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData},void 0!==o.redirect_uri&&(a.redirect_uri=o.redirect_uri),[4,Es(a,this.worker)];case 1:return i=c.sent(),[4,this._verifyIdToken(i.id_token,o.nonce,o.organizationId)];case 2:return r=c.sent(),[4,this.cacheManager.set(Sa(Sa(Sa(Sa({},i),{decodedToken:r,audience:o.audience,scope:o.scope}),i.scope?{oauthTokenScope:i.scope}:null),{client_id:this.options.client_id}))];case 3:return c.sent(),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays}),this._processOrgIdHint(r.claims.org_id),[2,{appState:o.appState}]}}))}))},g.prototype.checkSession=function(g){return va(this,void 0,void 0,(function(){var I;return Ra(this,(function(e){switch(e.label){case 0:if(!this.cookieStorage.get(this.isAuthenticatedCookieName)){if(!this.cookieStorage.get("auth0.is.authenticated"))return[2];this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays}),this.cookieStorage.remove("auth0.is.authenticated")}e.label=1;case 1:return e.trys.push([1,3,,4]),[4,this.getTokenSilently(g)];case 2:return e.sent(),[3,4];case 3:if(I=e.sent(),!ps.includes(I.error))throw I;return[3,4];case 4:return[2]}}))}))},g.prototype.getTokenSilently=function(g){return void 0===g&&(g={}),va(this,void 0,void 0,(function(){var I,e,C,n=this;return Ra(this,(function(t){return I=Sa(Sa({audience:this.options.audience,ignoreCache:!1},g),{scope:Qs(this.defaultScope,this.scope,g.scope)}),e=I.ignoreCache,C=Va(I,["ignoreCache"]),[2,(l=function(){return n._getTokenSilently(Sa({ignoreCache:e},C))},o=this.options.client_id+"::"+C.audience+"::"+C.scope,a=im[o],a||(a=l().finally((function(){delete im[o],a=null})),im[o]=a),a)];var l,o,a}))}))},g.prototype._getTokenSilently=function(g){return void 0===g&&(g={}),va(this,void 0,void 0,(function(){var I,e,C,n,t,l,o,a,i;return Ra(this,(function(r){switch(r.label){case 0:return I=g.ignoreCache,e=Va(g,["ignoreCache"]),I?[3,2]:[4,this._getEntryFromCache({scope:e.scope,audience:e.audience||"default",client_id:this.options.client_id,getDetailedEntry:g.detailedResponse})];case 1:if(C=r.sent())return[2,C];r.label=2;case 2:return[4,(c=function(){return cm.acquireLock("auth0.lock.getTokenSilently",5e3)},A=10,void 0===A&&(A=3),va(void 0,void 0,void 0,(function(){var g;return Ra(this,(function(I){switch(I.label){case 0:g=0,I.label=1;case 1:return g<A?[4,c()]:[3,4];case 2:if(I.sent())return[2,!0];I.label=3;case 3:return g++,[3,1];case 4:return[2,!1]}}))})))];case 3:if(!r.sent())return[3,15];r.label=4;case 4:return r.trys.push([4,,12,14]),I?[3,6]:[4,this._getEntryFromCache({scope:e.scope,audience:e.audience||"default",client_id:this.options.client_id,getDetailedEntry:g.detailedResponse})];case 5:if(C=r.sent())return[2,C];r.label=6;case 6:return this.options.useRefreshTokens?[4,this._getTokenUsingRefreshToken(e)]:[3,8];case 7:return t=r.sent(),[3,10];case 8:return[4,this._getTokenFromIFrame(e)];case 9:t=r.sent(),r.label=10;case 10:return n=t,[4,this.cacheManager.set(Sa({client_id:this.options.client_id},n))];case 11:return r.sent(),this.cookieStorage.save(this.isAuthenticatedCookieName,!0,{daysUntilExpire:this.sessionCheckExpiryDays}),g.detailedResponse?(l=n.id_token,o=n.access_token,a=n.oauthTokenScope,i=n.expires_in,[2,Sa(Sa({id_token:l,access_token:o},a?{scope:a}:null),{expires_in:i})]):[2,n.access_token];case 12:return[4,cm.releaseLock("auth0.lock.getTokenSilently")];case 13:return r.sent(),[7];case 14:return[3,16];case 15:throw new Ws;case 16:return[2]}var c,A}))}))},g.prototype.getTokenWithPopup=function(g,I){return void 0===g&&(g={}),void 0===I&&(I={}),va(this,void 0,void 0,(function(){return Ra(this,(function(e){switch(e.label){case 0:return g.audience=g.audience||this.options.audience,g.scope=Qs(this.defaultScope,this.scope,g.scope),I=Sa(Sa({},bs),I),[4,this.loginWithPopup(g,I)];case 1:return e.sent(),[4,this.cacheManager.get(new Ls({scope:g.scope,audience:g.audience||"default",client_id:this.options.client_id}))];case 2:return[2,e.sent().access_token]}}))}))},g.prototype.isAuthenticated=function(){return va(this,void 0,void 0,(function(){return Ra(this,(function(g){switch(g.label){case 0:return[4,this.getUser()];case 1:return[2,!!g.sent()]}}))}))},g.prototype.buildLogoutUrl=function(g){void 0===g&&(g={}),null!==g.client_id?g.client_id=g.client_id||this.options.client_id:delete g.client_id;var I=g.federated,e=Va(g,["federated"]),C=I?"&federated":"";return this._url("/v2/logout?"+Ys(e))+C},g.prototype.logout=function(g){var I=this;void 0===g&&(g={});var e=g.localOnly,C=Va(g,["localOnly"]);if(e&&C.federated)throw new Error("It is invalid to set both the `federated` and `localOnly` options to `true`");var n=function(){if(I.cookieStorage.remove(I.orgHintCookieName),I.cookieStorage.remove(I.isAuthenticatedCookieName),!e){var g=I.buildLogoutUrl(C);window.location.assign(g)}};if(this.options.cache)return this.cacheManager.clear().then((function(){return n()}));this.cacheManager.clearSync(),n()},g.prototype._getTokenFromIFrame=function(g){return va(this,void 0,void 0,(function(){var I,e,C,n,t,l,o,a,i,r,c,A,d,u,s,m,Z;return Ra(this,(function(b){switch(b.label){case 0:return I=Js(ks()),e=Js(ks()),C=ks(),[4,Hs(C)];case 1:n=b.sent(),t=Ks(n),l=Va(g,["detailedResponse"]),o=this._getParams(l,I,e,t,g.redirect_uri||this.options.redirect_uri||window.location.origin),(a=this.cookieStorage.get(this.orgHintCookieName))&&!o.organization&&(o.organization=a),i=this._authorizeUrl(Sa(Sa({},o),{prompt:"none",response_mode:"web_message"})),r=g.timeoutInSeconds||this.options.authorizeTimeoutInSeconds,b.label=2;case 2:if(b.trys.push([2,6,,7]),window.crossOriginIsolated)throw new ys("login_required","The application is running in a Cross-Origin Isolated context, silently retrieving a token without refresh token is not possible.");return[4,(p=i,G=this.domainUrl,h=r,void 0===h&&(h=60),new Promise((function(g,I){var e=window.document.createElement("iframe");e.setAttribute("width","0"),e.setAttribute("height","0"),e.style.display="none";var C,n=function(){window.document.body.contains(e)&&(window.document.body.removeChild(e),window.removeEventListener("message",C,!1))},t=setTimeout((function(){I(new Ws),n()}),1e3*h);C=function(e){if(e.origin==G&&e.data&&"authorization_response"===e.data.type){var l=e.source;l&&l.close(),e.data.response.error?I(ys.fromPayload(e.data.response)):g(e.data.response),clearTimeout(t),window.removeEventListener("message",C,!1),setTimeout(n,2e3)}},window.addEventListener("message",C,!1),window.document.body.appendChild(e),e.setAttribute("src",p)})))];case 3:if(c=b.sent(),I!==c.state)throw new Error("Invalid state");return A=g.scope,d=g.audience,u=Va(g,["scope","audience","redirect_uri","ignoreCache","timeoutInSeconds","detailedResponse"]),[4,Es(Sa(Sa(Sa({},this.customOptions),u),{scope:A,audience:d,baseUrl:this.domainUrl,client_id:this.options.client_id,code_verifier:C,code:c.code,grant_type:"authorization_code",redirect_uri:o.redirect_uri,auth0Client:this.options.auth0Client,useFormData:this.options.useFormData}),this.worker)];case 4:return s=b.sent(),[4,this._verifyIdToken(s.id_token,e)];case 5:return m=b.sent(),this._processOrgIdHint(m.claims.org_id),[2,Sa(Sa({},s),{decodedToken:m,scope:o.scope,oauthTokenScope:s.scope,audience:o.audience||"default"})];case 6:throw"login_required"===(Z=b.sent()).error&&this.logout({localOnly:!0}),Z;case 7:return[2]}var p,G,h}))}))},g.prototype._getTokenUsingRefreshToken=function(g){return va(this,void 0,void 0,(function(){var I,e,C,n,t,l,o,a,i;return Ra(this,(function(r){switch(r.label){case 0:return g.scope=Qs(this.defaultScope,this.options.scope,g.scope),[4,this.cacheManager.get(new Ls({scope:g.scope,audience:g.audience||"default",client_id:this.options.client_id}))];case 1:return(I=r.sent())&&I.refresh_token||this.worker?[3,3]:[4,this._getTokenFromIFrame(g)];case 2:return[2,r.sent()];case 3:e=g.redirect_uri||this.options.redirect_uri||window.location.origin,n=g.scope,t=g.audience,l=Va(g,["scope","audience","ignoreCache","timeoutInSeconds","detailedResponse"]),o="number"==typeof g.timeoutInSeconds?1e3*g.timeoutInSeconds:null,r.label=4;case 4:return r.trys.push([4,6,,9]),[4,Es(Sa(Sa(Sa(Sa(Sa({},this.customOptions),l),{audience:t,scope:n,baseUrl:this.domainUrl,client_id:this.options.client_id,grant_type:"refresh_token",refresh_token:I&&I.refresh_token,redirect_uri:e}),o&&{timeout:o}),{auth0Client:this.options.auth0Client,useFormData:this.options.useFormData}),this.worker)];case 5:return C=r.sent(),[3,9];case 6:return"The web worker is missing the refresh token"===(a=r.sent()).message||a.message&&a.message.indexOf("invalid refresh token")>-1?[4,this._getTokenFromIFrame(g)]:[3,8];case 7:return[2,r.sent()];case 8:throw a;case 9:return[4,this._verifyIdToken(C.id_token)];case 10:return i=r.sent(),[2,Sa(Sa({},C),{decodedToken:i,scope:g.scope,oauthTokenScope:C.scope,audience:g.audience||"default"})]}}))}))},g.prototype._getEntryFromCache=function(g){var I=g.scope,e=g.audience,C=g.client_id,n=g.getDetailedEntry,t=void 0!==n&&n;return va(this,void 0,void 0,(function(){var g,n,l,o,a;return Ra(this,(function(i){switch(i.label){case 0:return[4,this.cacheManager.get(new Ls({scope:I,audience:e,client_id:C}),60)];case 1:return(g=i.sent())&&g.access_token?t?(n=g.id_token,l=g.access_token,o=g.oauthTokenScope,a=g.expires_in,[2,Sa(Sa({id_token:n,access_token:l},o?{scope:o}:null),{expires_in:a})]):[2,g.access_token]:[2]}}))}))},g}(),sm={isAuthenticated:!1,isLoading:!0},mm=function(){throw new Error("You forgot to wrap your component in <Auth0Provider>.")},Zm=pa(pa({},sm),{buildAuthorizeUrl:mm,buildLogoutUrl:mm,getAccessTokenSilently:mm,getAccessTokenWithPopup:mm,getIdTokenClaims:mm,loginWithRedirect:mm,loginWithPopup:mm,logout:mm,handleRedirectCallback:mm}),bm=(0,g.createContext)(Zm),pm=function(g){function I(I,e){var C=g.call(this,e||I)||this;return C.error=I,C.error_description=e,C}return function(g,I){function e(){this.constructor=g}ba(g,I),g.prototype=null===I?Object.create(I):(e.prototype=I.prototype,new e)}(I,g),I}(Error),Gm=/[?&]code=[^&]+/,hm=/[?&]state=[^&]+/,ym=/[?&]error=[^&]+/,Bm=function(g){return function(I){return"error"in I?new pm(I.error,I.error_description):I instanceof Error?I:new Error(g)}},Wm=Bm("Login failed"),Sm=Bm("Get access token failed"),Vm=function(g,I){var e,C;switch(I.type){case"LOGIN_POPUP_STARTED":return pa(pa({},g),{isLoading:!0});case"LOGIN_POPUP_COMPLETE":case"INITIALISED":return pa(pa({},g),{isAuthenticated:!!I.user,user:I.user,isLoading:!1,error:void 0});case"HANDLE_REDIRECT_COMPLETE":case"GET_ACCESS_TOKEN_COMPLETE":return(null===(e=g.user)||void 0===e?void 0:e.updated_at)===(null===(C=I.user)||void 0===C?void 0:C.updated_at)?g:pa(pa({},g),{isAuthenticated:!!I.user,user:I.user});case"LOGOUT":return pa(pa({},g),{isAuthenticated:!1,user:void 0});case"ERROR":return pa(pa({},g),{isLoading:!1,error:I.error})}},vm=function(g){if(g){var I=g.redirectUri,e=Ga(g,["redirectUri"]);return pa(pa({},e),{redirect_uri:I})}},Rm=function(g){window.history.replaceState({},document.title,(null===g||void 0===g?void 0:g.returnTo)||window.location.pathname)},Xm=function(I){var e=I.children,C=I.skipRedirectCallback,n=I.onRedirectCallback,t=void 0===n?Rm:n,l=Ga(I,["children","skipRedirectCallback","onRedirectCallback"]),o=(0,g.useState)((function(){return new um(function(g){var I=g.clientId,e=g.redirectUri,C=g.maxAge,n=Ga(g,["clientId","redirectUri","maxAge"]);return pa(pa({},n),{client_id:I,redirect_uri:e,max_age:C,auth0Client:{name:"auth0-react",version:"1.9.0"}})}(l))}))[0],a=(0,g.useReducer)(Vm,sm),i=a[0],r=a[1];(0,g.useEffect)((function(){ha(void 0,void 0,void 0,(function(){var g,I,e;return ya(this,(function(n){switch(n.label){case 0:return n.trys.push([0,6,,7]),void 0===l&&(l=window.location.search),!Gm.test(l)&&!ym.test(l)||!hm.test(l)||C?[3,2]:[4,o.handleRedirectCallback()];case 1:return g=n.sent().appState,t(g),[3,4];case 2:return[4,o.checkSession()];case 3:n.sent(),n.label=4;case 4:return[4,o.getUser()];case 5:return I=n.sent(),r({type:"INITIALISED",user:I}),[3,7];case 6:return e=n.sent(),r({type:"ERROR",error:Wm(e)}),[3,7];case 7:return[2]}var l}))}))}),[o,t,C]);var c=(0,g.useCallback)((function(g){return o.buildAuthorizeUrl(vm(g))}),[o]),A=(0,g.useCallback)((function(g){return o.buildLogoutUrl(g)}),[o]),d=(0,g.useCallback)((function(g){return o.loginWithRedirect(vm(g))}),[o]),u=(0,g.useCallback)((function(g,I){return ha(void 0,void 0,void 0,(function(){var e,C;return ya(this,(function(n){switch(n.label){case 0:r({type:"LOGIN_POPUP_STARTED"}),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,o.loginWithPopup(g,I)];case 2:return n.sent(),[3,4];case 3:return e=n.sent(),r({type:"ERROR",error:Wm(e)}),[2];case 4:return[4,o.getUser()];case 5:return C=n.sent(),r({type:"LOGIN_POPUP_COMPLETE",user:C}),[2]}}))}))}),[o]),s=(0,g.useCallback)((function(g){void 0===g&&(g={});var I=o.logout(g);if(g.localOnly){if(I&&"function"===typeof I.then)return I.then((function(){return r({type:"LOGOUT"})}));r({type:"LOGOUT"})}return I}),[o]),m=(0,g.useCallback)((function(g){return ha(void 0,void 0,void 0,(function(){var I,e,C,n;return ya(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,3,5]),[4,o.getTokenSilently(g)];case 1:return I=t.sent(),[3,5];case 2:throw e=t.sent(),Sm(e);case 3:return C=r,n={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,o.getUser()];case 4:return C.apply(void 0,[(n.user=t.sent(),n)]),[7];case 5:return[2,I]}}))}))}),[o]),Z=(0,g.useCallback)((function(g,I){return ha(void 0,void 0,void 0,(function(){var e,C,n,t;return ya(this,(function(l){switch(l.label){case 0:return l.trys.push([0,2,3,5]),[4,o.getTokenWithPopup(g,I)];case 1:return e=l.sent(),[3,5];case 2:throw C=l.sent(),Sm(C);case 3:return n=r,t={type:"GET_ACCESS_TOKEN_COMPLETE"},[4,o.getUser()];case 4:return n.apply(void 0,[(t.user=l.sent(),t)]),[7];case 5:return[2,e]}}))}))}),[o]),b=(0,g.useCallback)((function(g){return o.getIdTokenClaims(g)}),[o]),p=(0,g.useCallback)((function(g){return ha(void 0,void 0,void 0,(function(){var I,e,C;return ya(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,3,5]),[4,o.handleRedirectCallback(g)];case 1:return[2,n.sent()];case 2:throw I=n.sent(),Sm(I);case 3:return e=r,C={type:"HANDLE_REDIRECT_COMPLETE"},[4,o.getUser()];case 4:return e.apply(void 0,[(C.user=n.sent(),C)]),[7];case 5:return[2]}}))}))}),[o]),G=(0,g.useMemo)((function(){return pa(pa({},i),{buildAuthorizeUrl:c,buildLogoutUrl:A,getAccessTokenSilently:m,getAccessTokenWithPopup:Z,getIdTokenClaims:b,loginWithRedirect:d,loginWithPopup:u,logout:s,handleRedirectCallback:p})}),[i,c,A,m,Z,b,d,u,s,p]);return g.createElement(bm.Provider,{value:G},e)},fm=function(){return(0,g.useContext)(bm)},km=function(g){var I=g.loading,C=(g.cookies,Za("div")(om||(om=RI(["\n    background-color: #e7ebf0;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;'\n  "])))),n=fm(),t=n.loginWithPopup;n.isAuthenticated,n.user;return(0,mg.jsx)(C,{style:{height:"100vh"},children:(0,mg.jsxs)(dI,{style:{padding:"5rem",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:[(0,mg.jsx)("img",{src:e(9495),style:{height:"8%",marginBottom:"1rem"}}),I?(0,mg.jsxs)(mg.Fragment,{children:[(0,mg.jsx)("h3",{children:"Loading"}),(0,mg.jsx)(Yo,{})]}):(0,mg.jsx)(De,{onClick:function(){return t()},variant:"contained",style:{padding:"1rem",width:"100%"},children:"Login"})]})})};function Jm(g){return(0,cg.Z)("PrivateSwitchBase",g)}(0,Ag.Z)("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);var Ym=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],Hm=(0,ag.ZP)(Ze)((function(g){var I=g.ownerState;return(0,i.Z)({padding:9,borderRadius:"50%"},"start"===I.edge&&{marginLeft:"small"===I.size?-3:-12},"end"===I.edge&&{marginRight:"small"===I.size?-3:-12})})),wm=(0,ag.ZP)("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Km=g.forwardRef((function(g,I){var e=g.autoFocus,C=g.checked,t=g.checkedIcon,l=g.className,o=g.defaultChecked,a=g.disabled,r=g.disableFocusRipple,c=void 0!==r&&r,A=g.edge,d=void 0!==A&&A,u=g.icon,s=g.id,m=g.inputProps,Z=g.inputRef,b=g.name,p=g.onBlur,G=g.onChange,h=g.onFocus,y=g.readOnly,B=g.required,W=g.tabIndex,S=g.type,V=g.value,v=(0,gg.Z)(g,Ym),R=(0,ol.Z)({controlled:C,default:Boolean(o),name:"SwitchBase",state:"checked"}),X=(0,n.Z)(R,2),f=X[0],k=X[1],J=Bn(),Y=a;J&&"undefined"===typeof Y&&(Y=J.disabled);var H="checkbox"===S||"radio"===S,w=(0,i.Z)({},g,{checked:f,disabled:Y,disableFocusRipple:c,edge:d}),K=function(g){var I=g.classes,e=g.checked,C=g.disabled,n=g.edge,t={root:["root",e&&"checked",C&&"disabled",n&&"edge".concat((0,Rg.Z)(n))],input:["input"]};return(0,og.Z)(t,Jm,I)}(w);return(0,mg.jsxs)(Hm,(0,i.Z)({component:"span",className:(0,Ig.Z)(K.root,l),centerRipple:!0,focusRipple:!c,disabled:Y,tabIndex:null,role:void 0,onFocus:function(g){h&&h(g),J&&J.onFocus&&J.onFocus(g)},onBlur:function(g){p&&p(g),J&&J.onBlur&&J.onBlur(g)},ownerState:w,ref:I},v,{children:[(0,mg.jsx)(wm,(0,i.Z)({autoFocus:e,checked:C,defaultChecked:o,className:K.input,disabled:Y,id:H&&s,name:b,onChange:function(g){if(!g.nativeEvent.defaultPrevented){var I=g.target.checked;k(I),G&&G(g,I)}},readOnly:y,ref:Z,required:B,ownerState:w,tabIndex:W,type:S},"checkbox"===S&&void 0===V?{}:{value:V},m)),f?t:u]}))})),Fm=Km,Nm=(0,hl.Z)((0,mg.jsx)("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),xm=(0,hl.Z)((0,mg.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),zm=(0,hl.Z)((0,mg.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Mm(g){return(0,cg.Z)("MuiCheckbox",g)}var Em=(0,Ag.Z)("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]),Um=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size"],Qm=(0,ag.ZP)(Fm,{shouldForwardProp:function(g){return(0,ag.FO)(g)||"classes"===g},name:"MuiCheckbox",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,e.indeterminate&&I.indeterminate,"default"!==e.color&&I["color".concat((0,Rg.Z)(e.color))]]}})((function(g){var I,e=g.theme,C=g.ownerState;return(0,i.Z)({color:e.palette.text.secondary},!C.disableRipple&&{"&:hover":{backgroundColor:(0,yg.Fq)("default"===C.color?e.palette.action.active:e.palette[C.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==C.color&&(I={},(0,t.Z)(I,"&.".concat(Em.checked,", &.").concat(Em.indeterminate),{color:e.palette[C.color].main}),(0,t.Z)(I,"&.".concat(Em.disabled),{color:e.palette.action.disabled}),I))})),Lm=(0,mg.jsx)(xm,{}),Tm=(0,mg.jsx)(Nm,{}),Dm=(0,mg.jsx)(zm,{}),jm=g.forwardRef((function(I,e){var C,n,t=(0,ig.Z)({props:I,name:"MuiCheckbox"}),l=t.checkedIcon,o=void 0===l?Lm:l,a=t.color,r=void 0===a?"primary":a,c=t.icon,A=void 0===c?Tm:c,d=t.indeterminate,u=void 0!==d&&d,s=t.indeterminateIcon,m=void 0===s?Dm:s,Z=t.inputProps,b=t.size,p=void 0===b?"medium":b,G=(0,gg.Z)(t,Um),h=u?m:A,y=u?m:o,B=(0,i.Z)({},t,{color:r,indeterminate:u,size:p}),W=function(g){var I=g.classes,e=g.indeterminate,C=g.color,n={root:["root",e&&"indeterminate","color".concat((0,Rg.Z)(C))]},t=(0,og.Z)(n,Mm,I);return(0,i.Z)({},I,t)}(B);return(0,mg.jsx)(Qm,(0,i.Z)({type:"checkbox",inputProps:(0,i.Z)({"data-indeterminate":u},Z),icon:g.cloneElement(h,{fontSize:null!=(C=h.props.fontSize)?C:p}),checkedIcon:g.cloneElement(y,{fontSize:null!=(n=y.props.fontSize)?n:p}),ownerState:B,ref:e},G,{classes:W}))})),Pm=["children","className","disableTypography","inset","primary","primaryTypographyProps","secondary","secondaryTypographyProps"],Om=(0,ag.ZP)("div",{name:"MuiListItemText",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[(0,t.Z)({},"& .".concat(qo.primary),I.primary),(0,t.Z)({},"& .".concat(qo.secondary),I.secondary),I.root,e.inset&&I.inset,e.primary&&e.secondary&&I.multiline,e.dense&&I.dense]}})((function(g){var I=g.ownerState;return(0,i.Z)({flex:"1 1 auto",minWidth:0,marginTop:4,marginBottom:4},I.primary&&I.secondary&&{marginTop:6,marginBottom:6},I.inset&&{paddingLeft:56})})),qm=g.forwardRef((function(I,e){var C=(0,ig.Z)({props:I,name:"MuiListItemText"}),n=C.children,t=C.className,l=C.disableTypography,o=void 0!==l&&l,a=C.inset,r=void 0!==a&&a,c=C.primary,A=C.primaryTypographyProps,d=C.secondary,u=C.secondaryTypographyProps,s=(0,gg.Z)(C,Pm),m=g.useContext(Jt).dense,Z=null!=c?c:n,b=d,p=(0,i.Z)({},C,{disableTypography:o,inset:r,primary:!!Z,secondary:!!b,dense:m}),G=function(g){var I=g.classes,e=g.inset,C=g.primary,n=g.secondary,t={root:["root",e&&"inset",g.dense&&"dense",C&&n&&"multiline"],primary:["primary"],secondary:["secondary"]};return(0,og.Z)(t,Oo,I)}(p);return null==Z||Z.type===Hg||o||(Z=(0,mg.jsx)(Hg,(0,i.Z)({variant:m?"body2":"body1",className:G.primary,component:"span",display:"block"},A,{children:Z}))),null==b||b.type===Hg||o||(b=(0,mg.jsx)(Hg,(0,i.Z)({variant:"body2",className:G.secondary,color:"text.secondary",display:"block"},u,{children:b}))),(0,mg.jsxs)(Om,(0,i.Z)({className:(0,Ig.Z)(G.root,t),ownerState:p,ref:e},s,{children:[Z,b]}))})),_m=(0,hl.Z)((0,mg.jsx)("path",{d:"M12 2C6.47 2 2 6.47 2 12s4.47 10 10 10 10-4.47 10-10S17.53 2 12 2zm5 13.59L15.59 17 12 13.41 8.41 17 7 15.59 10.59 12 7 8.41 8.41 7 12 10.59 15.59 7 17 8.41 13.41 12 17 15.59z"}),"Cancel");function $m(g){return(0,cg.Z)("MuiChip",g)}var gZ=(0,Ag.Z)("MuiChip",["root","sizeSmall","sizeMedium","colorPrimary","colorSecondary","disabled","clickable","clickableColorPrimary","clickableColorSecondary","deletable","deletableColorPrimary","deletableColorSecondary","outlined","filled","outlinedPrimary","outlinedSecondary","avatar","avatarSmall","avatarMedium","avatarColorPrimary","avatarColorSecondary","icon","iconSmall","iconMedium","iconColorPrimary","iconColorSecondary","label","labelSmall","labelMedium","deleteIcon","deleteIconSmall","deleteIconMedium","deleteIconColorPrimary","deleteIconColorSecondary","deleteIconOutlinedColorPrimary","deleteIconOutlinedColorSecondary","focusVisible"]),IZ=["avatar","className","clickable","color","component","deleteIcon","disabled","icon","label","onClick","onDelete","onKeyDown","onKeyUp","size","variant"],eZ=(0,ag.ZP)("div",{name:"MuiChip",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState,C=e.color,n=e.clickable,l=e.onDelete,o=e.size,a=e.variant;return[(0,t.Z)({},"& .".concat(gZ.avatar),I.avatar),(0,t.Z)({},"& .".concat(gZ.avatar),I["avatar".concat((0,Rg.Z)(o))]),(0,t.Z)({},"& .".concat(gZ.avatar),I["avatarColor".concat((0,Rg.Z)(C))]),(0,t.Z)({},"& .".concat(gZ.icon),I.icon),(0,t.Z)({},"& .".concat(gZ.icon),I["icon".concat((0,Rg.Z)(o))]),(0,t.Z)({},"& .".concat(gZ.icon),I["iconColor".concat((0,Rg.Z)(C))]),(0,t.Z)({},"& .".concat(gZ.deleteIcon),I.deleteIcon),(0,t.Z)({},"& .".concat(gZ.deleteIcon),I["deleteIcon".concat((0,Rg.Z)(o))]),(0,t.Z)({},"& .".concat(gZ.deleteIcon),I["deleteIconColor".concat((0,Rg.Z)(C))]),(0,t.Z)({},"& .".concat(gZ.deleteIcon),I["deleteIconOutlinedColor".concat((0,Rg.Z)(C))]),I.root,I["size".concat((0,Rg.Z)(o))],I["color".concat((0,Rg.Z)(C))],n&&I.clickable,n&&"default"!==C&&I["clickableColor".concat((0,Rg.Z)(C),")")],l&&I.deletable,l&&"default"!==C&&I["deletableColor".concat((0,Rg.Z)(C))],I[a],"outlined"===a&&I["outlined".concat((0,Rg.Z)(C))]]}})((function(g){var I,e=g.theme,C=g.ownerState,n=(0,yg.Fq)(e.palette.text.primary,.26);return(0,i.Z)((I={fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(13),display:"inline-flex",alignItems:"center",justifyContent:"center",height:32,color:e.palette.text.primary,backgroundColor:e.palette.action.selected,borderRadius:16,whiteSpace:"nowrap",transition:e.transitions.create(["background-color","box-shadow"]),cursor:"default",outline:0,textDecoration:"none",border:0,padding:0,verticalAlign:"middle",boxSizing:"border-box"},(0,t.Z)(I,"&.".concat(gZ.disabled),{opacity:e.palette.action.disabledOpacity,pointerEvents:"none"}),(0,t.Z)(I,"& .".concat(gZ.avatar),{marginLeft:5,marginRight:-6,width:24,height:24,color:"light"===e.palette.mode?e.palette.grey[700]:e.palette.grey[300],fontSize:e.typography.pxToRem(12)}),(0,t.Z)(I,"& .".concat(gZ.avatarColorPrimary),{color:e.palette.primary.contrastText,backgroundColor:e.palette.primary.dark}),(0,t.Z)(I,"& .".concat(gZ.avatarColorSecondary),{color:e.palette.secondary.contrastText,backgroundColor:e.palette.secondary.dark}),(0,t.Z)(I,"& .".concat(gZ.avatarSmall),{marginLeft:4,marginRight:-4,width:18,height:18,fontSize:e.typography.pxToRem(10)}),(0,t.Z)(I,"& .".concat(gZ.icon),(0,i.Z)({color:"light"===e.palette.mode?e.palette.grey[700]:e.palette.grey[300],marginLeft:5,marginRight:-6},"small"===C.size&&{fontSize:18,marginLeft:4,marginRight:-4},"default"!==C.color&&{color:"inherit"})),(0,t.Z)(I,"& .".concat(gZ.deleteIcon),(0,i.Z)({WebkitTapHighlightColor:"transparent",color:n,fontSize:22,cursor:"pointer",margin:"0 5px 0 -6px","&:hover":{color:(0,yg.Fq)(n,.4)}},"small"===C.size&&{fontSize:16,marginRight:4,marginLeft:-4},"default"!==C.color&&{color:(0,yg.Fq)(e.palette[C.color].contrastText,.7),"&:hover, &:active":{color:e.palette[C.color].contrastText}})),I),"small"===C.size&&{height:24},"default"!==C.color&&{backgroundColor:e.palette[C.color].main,color:e.palette[C.color].contrastText},C.onDelete&&(0,t.Z)({},"&.".concat(gZ.focusVisible),{backgroundColor:(0,yg.Fq)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}),C.onDelete&&"default"!==C.color&&(0,t.Z)({},"&.".concat(gZ.focusVisible),{backgroundColor:e.palette[C.color].dark}))}),(function(g){var I,e=g.theme,C=g.ownerState;return(0,i.Z)({},C.clickable&&(I={userSelect:"none",WebkitTapHighlightColor:"transparent",cursor:"pointer","&:hover":{backgroundColor:(0,yg.Fq)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity)}},(0,t.Z)(I,"&.".concat(gZ.focusVisible),{backgroundColor:(0,yg.Fq)(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}),(0,t.Z)(I,"&:active",{boxShadow:e.shadows[1]}),I),C.clickable&&"default"!==C.color&&(0,t.Z)({},"&:hover, &.".concat(gZ.focusVisible),{backgroundColor:e.palette[C.color].dark}))}),(function(g){var I,e,C=g.theme,n=g.ownerState;return(0,i.Z)({},"outlined"===n.variant&&(I={backgroundColor:"transparent",border:"1px solid ".concat("light"===C.palette.mode?C.palette.grey[400]:C.palette.grey[700])},(0,t.Z)(I,"&.".concat(gZ.clickable,":hover"),{backgroundColor:C.palette.action.hover}),(0,t.Z)(I,"&.".concat(gZ.focusVisible),{backgroundColor:C.palette.action.focus}),(0,t.Z)(I,"& .".concat(gZ.avatar),{marginLeft:4}),(0,t.Z)(I,"& .".concat(gZ.avatarSmall),{marginLeft:2}),(0,t.Z)(I,"& .".concat(gZ.icon),{marginLeft:4}),(0,t.Z)(I,"& .".concat(gZ.iconSmall),{marginLeft:2}),(0,t.Z)(I,"& .".concat(gZ.deleteIcon),{marginRight:5}),(0,t.Z)(I,"& .".concat(gZ.deleteIconSmall),{marginRight:3}),I),"outlined"===n.variant&&"default"!==n.color&&(e={color:C.palette[n.color].main,border:"1px solid ".concat((0,yg.Fq)(C.palette[n.color].main,.7))},(0,t.Z)(e,"&.".concat(gZ.clickable,":hover"),{backgroundColor:(0,yg.Fq)(C.palette[n.color].main,C.palette.action.hoverOpacity)}),(0,t.Z)(e,"&.".concat(gZ.focusVisible),{backgroundColor:(0,yg.Fq)(C.palette[n.color].main,C.palette.action.focusOpacity)}),(0,t.Z)(e,"& .".concat(gZ.deleteIcon),{color:(0,yg.Fq)(C.palette[n.color].main,.7),"&:hover, &:active":{color:C.palette[n.color].main}}),e))})),CZ=(0,ag.ZP)("span",{name:"MuiChip",slot:"Label",overridesResolver:function(g,I){var e=g.ownerState.size;return[I.label,I["label".concat((0,Rg.Z)(e))]]}})((function(g){var I=g.ownerState;return(0,i.Z)({overflow:"hidden",textOverflow:"ellipsis",paddingLeft:12,paddingRight:12,whiteSpace:"nowrap"},"small"===I.size&&{paddingLeft:8,paddingRight:8})}));function nZ(g){return"Backspace"===g.key||"Delete"===g.key}var tZ=g.forwardRef((function(I,e){var C=(0,ig.Z)({props:I,name:"MuiChip"}),n=C.avatar,t=C.className,l=C.clickable,o=C.color,a=void 0===o?"default":o,r=C.component,c=C.deleteIcon,A=C.disabled,d=void 0!==A&&A,u=C.icon,s=C.label,m=C.onClick,Z=C.onDelete,b=C.onKeyDown,p=C.onKeyUp,G=C.size,h=void 0===G?"medium":G,y=C.variant,B=void 0===y?"filled":y,W=(0,gg.Z)(C,IZ),S=g.useRef(null),V=(0,SI.Z)(S,e),v=function(g){g.stopPropagation(),Z&&Z(g)},R=!(!1===l||!m)||l,X="small"===h,f=R||Z?Ze:r||"div",k=(0,i.Z)({},C,{component:f,disabled:d,size:h,color:a,onDelete:!!Z,clickable:R,variant:B}),J=function(g){var I=g.classes,e=g.disabled,C=g.size,n=g.color,t=g.onDelete,l=g.clickable,o=g.variant,a={root:["root",o,e&&"disabled","size".concat((0,Rg.Z)(C)),"color".concat((0,Rg.Z)(n)),l&&"clickable",l&&"clickableColor".concat((0,Rg.Z)(n)),t&&"deletable",t&&"deletableColor".concat((0,Rg.Z)(n)),"".concat(o).concat((0,Rg.Z)(n))],label:["label","label".concat((0,Rg.Z)(C))],avatar:["avatar","avatar".concat((0,Rg.Z)(C)),"avatarColor".concat((0,Rg.Z)(n))],icon:["icon","icon".concat((0,Rg.Z)(C)),"iconColor".concat((0,Rg.Z)(n))],deleteIcon:["deleteIcon","deleteIcon".concat((0,Rg.Z)(C)),"deleteIconColor".concat((0,Rg.Z)(n)),"deleteIconOutlinedColor".concat((0,Rg.Z)(n))]};return(0,og.Z)(a,$m,I)}(k),Y=f===Ze?(0,i.Z)({component:r||"div",focusVisibleClassName:J.focusVisible},Z&&{disableRipple:!0}):{},H=null;if(Z){var w=(0,Ig.Z)("default"!==a&&("outlined"===B?J["deleteIconOutlinedColor".concat((0,Rg.Z)(a))]:J["deleteIconColor".concat((0,Rg.Z)(a))]),X&&J.deleteIconSmall);H=c&&g.isValidElement(c)?g.cloneElement(c,{className:(0,Ig.Z)(c.props.className,J.deleteIcon,w),onClick:v}):(0,mg.jsx)(_m,{className:(0,Ig.Z)(J.deleteIcon,w),onClick:v})}var K=null;n&&g.isValidElement(n)&&(K=g.cloneElement(n,{className:(0,Ig.Z)(J.avatar,n.props.className)}));var F=null;return u&&g.isValidElement(u)&&(F=g.cloneElement(u,{className:(0,Ig.Z)(J.icon,u.props.className)})),(0,mg.jsxs)(eZ,(0,i.Z)({as:f,className:(0,Ig.Z)(J.root,t),disabled:!(!R||!d)||void 0,onClick:m,onKeyDown:function(g){g.currentTarget===g.target&&nZ(g)&&g.preventDefault(),b&&b(g)},onKeyUp:function(g){g.currentTarget===g.target&&(Z&&nZ(g)?Z(g):"Escape"===g.key&&S.current&&S.current.blur()),p&&p(g)},ref:V,ownerState:k},Y,W,{children:[K||F,(0,mg.jsx)(CZ,{className:(0,Ig.Z)(J.label),ownerState:k,children:s}),H]}))}));function lZ(g){return(0,cg.Z)("MuiSlider",g)}var oZ=(0,Ag.Z)("MuiSlider",["root","active","focusVisible","disabled","dragging","marked","vertical","trackInverted","trackFalse","rail","track","mark","markActive","markLabel","markLabelActive","thumb","valueLabel","valueLabelOpen","valueLabelCircle","valueLabelLabel"]);var aZ=function(I){var e=I.children,C=I.className,n=I.value,t=I.theme,l=function(g){var I=g.open;return{offset:(0,Ig.Z)(I&&oZ.valueLabelOpen),circle:oZ.valueLabelCircle,label:oZ.valueLabelLabel}}(I);return g.cloneElement(e,{className:(0,Ig.Z)(e.props.className)},(0,mg.jsxs)(g.Fragment,{children:[e.props.children,(0,mg.jsx)("span",{className:(0,Ig.Z)(l.offset,C),theme:t,"aria-hidden":!0,children:(0,mg.jsx)("span",{className:l.circle,children:(0,mg.jsx)("span",{className:l.label,children:n})})})]}))};function iZ(g){var I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0;return sC(g)?I:(0,i.Z)({},I,{ownerState:(0,i.Z)({},I.ownerState,e)})}var rZ=e(8959),cZ=e(5372),AZ={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:-1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:"1px"};function dZ(g,I){return g-I}function uZ(g,I,e){return null==g?I:Math.min(Math.max(I,g),e)}function sZ(g,I){var e;return(null!=(e=g.reduce((function(g,e,C){var n=Math.abs(I-e);return null===g||n<g.distance||n===g.distance?{distance:n,index:C}:g}),null))?e:{}).index}function mZ(g,I){if(void 0!==I.current&&g.changedTouches){for(var e=g,C=0;C<e.changedTouches.length;C+=1){var n=e.changedTouches[C];if(n.identifier===I.current)return{x:n.clientX,y:n.clientY}}return!1}return{x:g.clientX,y:g.clientY}}function ZZ(g,I,e){return 100*(g-I)/(e-I)}function bZ(g,I,e){var C=Math.round((g-e)/I)*I+e;return Number(C.toFixed(function(g){if(Math.abs(g)<1){var I=g.toExponential().split("e-"),e=I[0].split(".")[1];return(e?e.length:0)+parseInt(I[1],10)}var C=g.toString().split(".")[1];return C?C.length:0}(I)))}function pZ(g){var I=g.values,e=g.newValue,C=g.index,n=I.slice();return n[C]=e,n.sort(dZ)}function GZ(g){var I,e,C,n=g.sliderRef,t=g.activeIndex,l=g.setActive,o=(0,ZC.Z)(n.current);null!=(I=n.current)&&I.contains(o.activeElement)&&Number(null==o||null==(e=o.activeElement)?void 0:e.getAttribute("data-index"))===t||(null==(C=n.current)||C.querySelector('[type="range"][data-index="'.concat(t,'"]')).focus());l&&l(t)}var hZ,yZ={horizontal:{offset:function(g){return{left:"".concat(g,"%")}},leap:function(g){return{width:"".concat(g,"%")}}},"horizontal-reverse":{offset:function(g){return{right:"".concat(g,"%")}},leap:function(g){return{width:"".concat(g,"%")}}},vertical:{offset:function(g){return{bottom:"".concat(g,"%")}},leap:function(g){return{height:"".concat(g,"%")}}}},BZ=function(g){return g};function WZ(){return void 0===hZ&&(hZ="undefined"===typeof CSS||"function"!==typeof CSS.supports||CSS.supports("touch-action","none")),hZ}function SZ(I){var e=I.ref,C=I["aria-labelledby"],t=I.defaultValue,l=I.disableSwap,o=void 0!==l&&l,a=I.disabled,r=void 0!==a&&a,c=I.marks,A=void 0!==c&&c,d=I.max,u=void 0===d?100:d,s=I.min,m=void 0===s?0:s,Z=I.name,b=I.onChange,p=I.onChangeCommitted,G=I.orientation,h=void 0===G?"horizontal":G,y=I.scale,B=void 0===y?BZ:y,W=I.step,S=void 0===W?1:W,V=I.tabIndex,v=I.value,R=I.isRtl,X=void 0!==R&&R,f=g.useRef(),k=g.useState(-1),J=(0,n.Z)(k,2),Y=J[0],H=J[1],w=g.useState(-1),K=(0,n.Z)(w,2),F=K[0],N=K[1],x=g.useState(!1),z=(0,n.Z)(x,2),M=z[0],E=z[1],U=g.useRef(0),Q=(0,rZ.Z)({controlled:v,default:null!=t?t:m,name:"Slider"}),L=(0,n.Z)(Q,2),T=L[0],D=L[1],j=b&&function(g,I,e){var C=g.nativeEvent||g,n=new C.constructor(C.type,C);Object.defineProperty(n,"target",{writable:!0,value:{value:I,name:Z}}),b(n,I,e)},P=Array.isArray(T),O=P?T.slice().sort(dZ):[T];O=O.map((function(g){return uZ(g,m,u)}));var q=!0===A&&null!==S?(0,$.Z)(Array(Math.floor((u-m)/S)+1)).map((function(g,I){return{value:m+S*I}})):A||[],_=q.map((function(g){return g.value})),gg=(0,cZ.Z)(),Ig=gg.isFocusVisibleRef,eg=gg.onBlur,Cg=gg.onFocus,ng=gg.ref,tg=g.useState(-1),lg=(0,n.Z)(tg,2),og=lg[0],ag=lg[1],ig=g.useRef(),rg=(0,mC.Z)(ng,ig),cg=(0,mC.Z)(e,rg),Ag=function(g){return function(I){var e,C=Number(I.currentTarget.getAttribute("data-index"));Cg(I),!0===Ig.current&&ag(C),N(C),null==g||null==(e=g.onFocus)||e.call(g,I)}},dg=function(g){return function(I){var e;eg(I),!1===Ig.current&&ag(-1),N(-1),null==g||null==(e=g.onBlur)||e.call(g,I)}};(0,GC.Z)((function(){var g;r&&ig.current.contains(document.activeElement)&&(null==(g=document.activeElement)||g.blur())}),[r]),r&&-1!==Y&&H(-1),r&&-1!==og&&ag(-1);var ug=function(g){return function(I){var e;null==(e=g.onChange)||e.call(g,I);var C=Number(I.currentTarget.getAttribute("data-index")),n=O[C],t=_.indexOf(n),l=I.target.valueAsNumber;if(q&&null==S&&(l=l<n?_[t-1]:_[t+1]),l=uZ(l,m,u),q&&null==S){var a=_.indexOf(O[C]);l=l<O[C]?_[a-1]:_[a+1]}if(P){o&&(l=uZ(l,O[C-1]||-1/0,O[C+1]||1/0));var i=l;l=pZ({values:O,newValue:l,index:C});var r=C;o||(r=l.indexOf(i)),GZ({sliderRef:ig,activeIndex:r})}D(l),ag(C),j&&j(I,l,C),p&&p(I,l)}},sg=g.useRef(),mg=h;X&&"horizontal"===h&&(mg+="-reverse");var Zg=function(g){var I,e,C=g.finger,n=g.move,t=void 0!==n&&n,l=g.values,a=ig.current.getBoundingClientRect(),i=a.width,r=a.height,c=a.bottom,A=a.left;if(I=0===mg.indexOf("vertical")?(c-C.y)/r:(C.x-A)/i,-1!==mg.indexOf("-reverse")&&(I=1-I),e=function(g,I,e){return(e-I)*g+I}(I,m,u),S)e=bZ(e,S,m);else{var d=sZ(_,e);e=_[d]}e=uZ(e,m,u);var s=0;if(P){s=t?sg.current:sZ(l,e),o&&(e=uZ(e,l[s-1]||-1/0,l[s+1]||1/0));var Z=e;e=pZ({values:l,newValue:e,index:s}),o&&t||(s=e.indexOf(Z),sg.current=s)}return{newValue:e,activeIndex:s}},bg=(0,bC.Z)((function(g){var I=mZ(g,f);if(I)if(U.current+=1,"mousemove"!==g.type||0!==g.buttons){var e=Zg({finger:I,move:!0,values:O}),C=e.newValue,n=e.activeIndex;GZ({sliderRef:ig,activeIndex:n,setActive:H}),D(C),!M&&U.current>2&&E(!0),j&&j(g,C,n)}else pg(g)})),pg=(0,bC.Z)((function(g){var I=mZ(g,f);if(E(!1),I){var e=Zg({finger:I,values:O}).newValue;H(-1),"touchend"===g.type&&N(-1),p&&p(g,e),f.current=void 0,hg()}})),Gg=(0,bC.Z)((function(g){WZ()||g.preventDefault();var I=g.changedTouches[0];null!=I&&(f.current=I.identifier);var e=mZ(g,f);if(!1!==e){var C=Zg({finger:e,values:O}),n=C.newValue,t=C.activeIndex;GZ({sliderRef:ig,activeIndex:t,setActive:H}),D(n),j&&j(g,n,t)}U.current=0;var l=(0,ZC.Z)(ig.current);l.addEventListener("touchmove",bg),l.addEventListener("touchend",pg)})),hg=g.useCallback((function(){var g=(0,ZC.Z)(ig.current);g.removeEventListener("mousemove",bg),g.removeEventListener("mouseup",pg),g.removeEventListener("touchmove",bg),g.removeEventListener("touchend",pg)}),[pg,bg]);g.useEffect((function(){var g=ig.current;return g.addEventListener("touchstart",Gg,{passive:WZ()}),function(){g.removeEventListener("touchstart",Gg,{passive:WZ()}),hg()}}),[hg,Gg]),g.useEffect((function(){r&&hg()}),[r,hg]);var yg=function(g){return function(I){var e;if(null==(e=g.onMouseDown)||e.call(g,I),!I.defaultPrevented&&0===I.button){I.preventDefault();var C=mZ(I,f);if(!1!==C){var n=Zg({finger:C,values:O}),t=n.newValue,l=n.activeIndex;GZ({sliderRef:ig,activeIndex:l,setActive:H}),D(t),j&&j(I,t,l)}U.current=0;var o=(0,ZC.Z)(ig.current);o.addEventListener("mousemove",bg),o.addEventListener("mouseup",pg)}}},Bg=ZZ(P?O[0]:m,m,u),Wg=ZZ(O[O.length-1],m,u)-Bg,Sg=function(g){return function(I){var e;null==(e=g.onMouseOver)||e.call(g,I);var C=Number(I.currentTarget.getAttribute("data-index"));N(C)}},Vg=function(g){return function(I){var e;null==(e=g.onMouseLeave)||e.call(g,I),N(-1)}};return{axis:mg,axisProps:yZ,getRootProps:function(g){var I={onMouseDown:yg(g||{})},e=(0,i.Z)({},g,I);return(0,i.Z)({ref:cg},e)},getHiddenInputProps:function(g){var e={onChange:ug(g||{}),onFocus:Ag(g||{}),onBlur:dg(g||{})},n=(0,i.Z)({},g,e);return(0,i.Z)({tabIndex:V,"aria-labelledby":C,"aria-orientation":h,"aria-valuemax":B(u),"aria-valuemin":B(m),name:Z,type:"range",min:I.min,max:I.max,step:I.step,disabled:r},n,{style:(0,i.Z)({},AZ,{direction:X?"rtl":"ltr",width:"100%",height:"100%"})})},getThumbProps:function(g){var I={onMouseOver:Sg(g||{}),onMouseLeave:Vg(g||{})},e=(0,i.Z)({},g,I);return(0,i.Z)({},e)},dragging:M,marks:q,values:O,active:Y,focusVisible:og,open:F,range:P,trackOffset:Bg,trackLeap:Wg}}var VZ=["aria-label","aria-valuetext","className","component","classes","disableSwap","disabled","getAriaLabel","getAriaValueText","marks","max","min","name","onChange","onChangeCommitted","onMouseDown","orientation","scale","step","tabIndex","track","value","valueLabelDisplay","valueLabelFormat","isRtl","components","componentsProps"],vZ=function(g){return g},RZ=function(g){return g.children},XZ=g.forwardRef((function(I,e){var C,n,t,l,o,a,r,c=I["aria-label"],A=I["aria-valuetext"],d=I.className,u=I.component,s=I.classes,m=I.disableSwap,Z=void 0!==m&&m,b=I.disabled,p=void 0!==b&&b,G=I.getAriaLabel,h=I.getAriaValueText,y=I.marks,B=void 0!==y&&y,W=I.max,S=void 0===W?100:W,V=I.min,v=void 0===V?0:V,R=I.onMouseDown,X=I.orientation,f=void 0===X?"horizontal":X,k=I.scale,J=void 0===k?vZ:k,Y=I.step,H=void 0===Y?1:Y,w=I.track,K=void 0===w?"normal":w,F=I.valueLabelDisplay,N=void 0===F?"off":F,x=I.valueLabelFormat,z=void 0===x?vZ:x,M=I.isRtl,E=void 0!==M&&M,U=I.components,Q=void 0===U?{}:U,L=I.componentsProps,T=void 0===L?{}:L,D=(0,gg.Z)(I,VZ),j=(0,i.Z)({},I,{mark:B,classes:s,disabled:p,isRtl:E,max:S,min:v,orientation:f,scale:J,step:H,track:K,valueLabelDisplay:N,valueLabelFormat:z}),P=SZ((0,i.Z)({},j,{ref:e})),O=P.axisProps,q=P.getRootProps,_=P.getHiddenInputProps,$=P.getThumbProps,eg=P.open,Cg=P.active,ng=P.axis,tg=P.range,lg=P.focusVisible,ag=P.dragging,ig=P.marks,rg=P.values,cg=P.trackOffset,Ag=P.trackLeap;j.marked=ig.length>0&&ig.some((function(g){return g.label})),j.dragging=ag;var dg=null!=(C=null!=u?u:Q.Root)?C:"span",ug=iZ(dg,(0,i.Z)({},D,T.root),j),sg=null!=(n=Q.Rail)?n:"span",Zg=iZ(sg,T.rail,j),bg=null!=(t=Q.Track)?t:"span",pg=iZ(bg,T.track,j),Gg=(0,i.Z)({},O[ng].offset(cg),O[ng].leap(Ag)),hg=null!=(l=Q.Thumb)?l:"span",yg=iZ(hg,T.thumb,j),Bg=null!=(o=Q.ValueLabel)?o:aZ,Wg=iZ(Bg,T.valueLabel,j),Sg=null!=(a=Q.Mark)?a:"span",Vg=iZ(Sg,T.mark,j),vg=null!=(r=Q.MarkLabel)?r:"span",Rg=iZ(vg,T.markLabel,j),Xg=Q.Input||"input",fg=iZ(Xg,T.input,j),kg=_(),Jg=function(g){var I=g.disabled,e=g.dragging,C=g.marked,n=g.orientation,t=g.track,l=g.classes,o={root:["root",I&&"disabled",e&&"dragging",C&&"marked","vertical"===n&&"vertical","inverted"===t&&"trackInverted",!1===t&&"trackFalse"],rail:["rail"],track:["track"],mark:["mark"],markActive:["markActive"],markLabel:["markLabel"],markLabelActive:["markLabelActive"],valueLabel:["valueLabel"],thumb:["thumb",I&&"disabled"],active:["active"],disabled:["disabled"],focusVisible:["focusVisible"]};return(0,og.Z)(o,lZ,l)}(j);return(0,mg.jsxs)(dg,(0,i.Z)({},ug,q({onMouseDown:R}),{className:(0,Ig.Z)(Jg.root,ug.className,d),children:[(0,mg.jsx)(sg,(0,i.Z)({},Zg,{className:(0,Ig.Z)(Jg.rail,Zg.className)})),(0,mg.jsx)(bg,(0,i.Z)({},pg,{className:(0,Ig.Z)(Jg.track,pg.className),style:(0,i.Z)({},Gg,pg.style)})),ig.map((function(I,e){var C,n=ZZ(I.value,v,S),t=O[ng].offset(n);return C=!1===K?-1!==rg.indexOf(I.value):"normal"===K&&(tg?I.value>=rg[0]&&I.value<=rg[rg.length-1]:I.value<=rg[0])||"inverted"===K&&(tg?I.value<=rg[0]||I.value>=rg[rg.length-1]:I.value>=rg[0]),(0,mg.jsxs)(g.Fragment,{children:[(0,mg.jsx)(Sg,(0,i.Z)({"data-index":e},Vg,!sC(Sg)&&{markActive:C},{style:(0,i.Z)({},t,Vg.style),className:(0,Ig.Z)(Jg.mark,Vg.className,C&&Jg.markActive)})),null!=I.label?(0,mg.jsx)(vg,(0,i.Z)({"aria-hidden":!0,"data-index":e},Rg,!sC(vg)&&{markLabelActive:C},{style:(0,i.Z)({},t,Rg.style),className:(0,Ig.Z)(Jg.markLabel,Rg.className,C&&Jg.markLabelActive),children:I.label})):null]},I.value)})),rg.map((function(I,e){var C=ZZ(I,v,S),n=O[ng].offset(C),t="off"===N?RZ:Bg;return(0,mg.jsx)(g.Fragment,{children:(0,mg.jsx)(t,(0,i.Z)({},!sC(t)&&{valueLabelFormat:z,valueLabelDisplay:N,value:"function"===typeof z?z(J(I),e):z,index:e,open:eg===e||Cg===e||"on"===N,disabled:p},Wg,{className:(0,Ig.Z)(Jg.valueLabel,Wg.className),children:(0,mg.jsx)(hg,(0,i.Z)({"data-index":e},yg,$(),{className:(0,Ig.Z)(Jg.thumb,yg.className,Cg===e&&Jg.active,lg===e&&Jg.focusVisible)},!sC(hg)&&{ownerState:(0,i.Z)({},j,yg.ownerState)},{style:(0,i.Z)({},n,{pointerEvents:Z&&Cg!==e?"none":void 0},yg.style),children:(0,mg.jsx)(Xg,(0,i.Z)({},kg,{"data-index":e,"aria-label":G?G(e):c,"aria-valuenow":J(I),"aria-valuetext":h?h(J(I),e):A,value:rg[e]},!sC(Xg)&&{ownerState:(0,i.Z)({},j,fg.ownerState)},fg,{style:(0,i.Z)({},kg.style,fg.style)}))}))}))},e)}))]}))})),fZ=XZ,kZ=function(g){return!g||!sC(g)},JZ=["component","components","componentsProps","color","size"],YZ=(0,i.Z)({},oZ,(0,Ag.Z)("MuiSlider",["colorPrimary","colorSecondary","thumbColorPrimary","thumbColorSecondary","sizeSmall","thumbSizeSmall"])),HZ=(0,ag.ZP)("span",{name:"MuiSlider",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState,C=!0===e.marksProp&&null!==e.step?(0,$.Z)(Array(Math.floor((e.max-e.min)/e.step)+1)).map((function(g,I){return{value:e.min+e.step*I}})):e.marksProp||[],n=C.length>0&&C.some((function(g){return g.label}));return[I.root,I["color".concat((0,Rg.Z)(e.color))],"medium"!==e.size&&I["size".concat((0,Rg.Z)(e.size))],n&&I.marked,"vertical"===e.orientation&&I.vertical,"inverted"===e.track&&I.trackInverted,!1===e.track&&I.trackFalse]}})((function(g){var I,e=g.theme,C=g.ownerState;return(0,i.Z)({borderRadius:12,boxSizing:"content-box",display:"inline-block",position:"relative",cursor:"pointer",touchAction:"none",color:e.palette[C.color].main,WebkitTapHighlightColor:"transparent"},"horizontal"===C.orientation&&(0,i.Z)({height:4,width:"100%",padding:"13px 0","@media (pointer: coarse)":{padding:"20px 0"}},"small"===C.size&&{height:2},C.marked&&{marginBottom:20}),"vertical"===C.orientation&&(0,i.Z)({height:"100%",width:4,padding:"0 13px","@media (pointer: coarse)":{padding:"0 20px"}},"small"===C.size&&{width:2},C.marked&&{marginRight:44}),(I={"@media print":{colorAdjust:"exact"}},(0,t.Z)(I,"&.".concat(YZ.disabled),{pointerEvents:"none",cursor:"default",color:e.palette.grey[400]}),(0,t.Z)(I,"&.".concat(YZ.dragging),(0,t.Z)({},"& .".concat(YZ.thumb,", & .").concat(YZ.track),{transition:"none"})),I))})),wZ=(0,ag.ZP)("span",{name:"MuiSlider",slot:"Rail",overridesResolver:function(g,I){return I.rail}})((function(g){var I=g.ownerState;return(0,i.Z)({display:"block",position:"absolute",borderRadius:"inherit",backgroundColor:"currentColor",opacity:.38},"horizontal"===I.orientation&&{width:"100%",height:"inherit",top:"50%",transform:"translateY(-50%)"},"vertical"===I.orientation&&{height:"100%",width:"inherit",left:"50%",transform:"translateX(-50%)"},"inverted"===I.track&&{opacity:1})})),KZ=(0,ag.ZP)("span",{name:"MuiSlider",slot:"Track",overridesResolver:function(g,I){return I.track}})((function(g){var I=g.theme,e=g.ownerState,C="light"===I.palette.mode?(0,yg.$n)(I.palette[e.color].main,.62):(0,yg._j)(I.palette[e.color].main,.5);return(0,i.Z)({display:"block",position:"absolute",borderRadius:"inherit",border:"1px solid currentColor",backgroundColor:"currentColor",transition:I.transitions.create(["left","width","bottom","height"],{duration:I.transitions.duration.shortest})},"small"===e.size&&{border:"none"},"horizontal"===e.orientation&&{height:"inherit",top:"50%",transform:"translateY(-50%)"},"vertical"===e.orientation&&{width:"inherit",left:"50%",transform:"translateX(-50%)"},!1===e.track&&{display:"none"},"inverted"===e.track&&{backgroundColor:C,borderColor:C})})),FZ=(0,ag.ZP)("span",{name:"MuiSlider",slot:"Thumb",overridesResolver:function(g,I){var e=g.ownerState;return[I.thumb,I["thumbColor".concat((0,Rg.Z)(e.color))],"medium"!==e.size&&I["thumbSize".concat((0,Rg.Z)(e.size))]]}})((function(g){var I,e=g.theme,C=g.ownerState;return(0,i.Z)({position:"absolute",width:20,height:20,boxSizing:"border-box",borderRadius:"50%",outline:0,backgroundColor:"currentColor",display:"flex",alignItems:"center",justifyContent:"center",transition:e.transitions.create(["box-shadow","left","bottom"],{duration:e.transitions.duration.shortest})},"small"===C.size&&{width:12,height:12},"horizontal"===C.orientation&&{top:"50%",transform:"translate(-50%, -50%)"},"vertical"===C.orientation&&{left:"50%",transform:"translate(-50%, 50%)"},(I={"&:before":(0,i.Z)({position:"absolute",content:'""',borderRadius:"inherit",width:"100%",height:"100%",boxShadow:e.shadows[2]},"small"===C.size&&{boxShadow:"none"}),"&::after":{position:"absolute",content:'""',borderRadius:"50%",width:42,height:42,top:"50%",left:"50%",transform:"translate(-50%, -50%)"}},(0,t.Z)(I,"&:hover, &.".concat(YZ.focusVisible),{boxShadow:"0px 0px 0px 8px ".concat((0,yg.Fq)(e.palette[C.color].main,.16)),"@media (hover: none)":{boxShadow:"none"}}),(0,t.Z)(I,"&.".concat(YZ.active),{boxShadow:"0px 0px 0px 14px ".concat((0,yg.Fq)(e.palette[C.color].main,.16))}),(0,t.Z)(I,"&.".concat(YZ.disabled),{"&:hover":{boxShadow:"none"}}),I))})),NZ=(0,ag.ZP)(aZ,{name:"MuiSlider",slot:"ValueLabel",overridesResolver:function(g,I){return I.valueLabel}})((function(g){var I,e=g.theme,C=g.ownerState;return(0,i.Z)((I={},(0,t.Z)(I,"&.".concat(YZ.valueLabelOpen),{transform:"translateY(-100%) scale(1)"}),(0,t.Z)(I,"zIndex",1),(0,t.Z)(I,"whiteSpace","nowrap"),I),e.typography.body2,{fontWeight:500,transition:e.transitions.create(["transform"],{duration:e.transitions.duration.shortest}),top:-10,transformOrigin:"bottom center",transform:"translateY(-100%) scale(0)",position:"absolute",backgroundColor:e.palette.grey[600],borderRadius:2,color:e.palette.common.white,display:"flex",alignItems:"center",justifyContent:"center",padding:"0.25rem 0.75rem"},"small"===C.size&&{fontSize:e.typography.pxToRem(12),padding:"0.25rem 0.5rem"},{"&:before":{position:"absolute",content:'""',width:8,height:8,bottom:0,left:"50%",transform:"translate(-50%, 50%) rotate(45deg)",backgroundColor:"inherit"}})})),xZ=(0,ag.ZP)("span",{name:"MuiSlider",slot:"Mark",shouldForwardProp:function(g){return(0,ag.Dz)(g)&&"markActive"!==g},overridesResolver:function(g,I){return I.mark}})((function(g){var I=g.theme,e=g.ownerState,C=g.markActive;return(0,i.Z)({position:"absolute",width:2,height:2,borderRadius:1,backgroundColor:"currentColor"},"horizontal"===e.orientation&&{top:"50%",transform:"translate(-1px, -50%)"},"vertical"===e.orientation&&{left:"50%",transform:"translate(-50%, 1px)"},C&&{backgroundColor:I.palette.background.paper,opacity:.8})})),zZ=(0,ag.ZP)("span",{name:"MuiSlider",slot:"MarkLabel",shouldForwardProp:function(g){return(0,ag.Dz)(g)&&"markLabelActive"!==g},overridesResolver:function(g,I){return I.markLabel}})((function(g){var I=g.theme,e=g.ownerState,C=g.markLabelActive;return(0,i.Z)({},I.typography.body2,{color:I.palette.text.secondary,position:"absolute",whiteSpace:"nowrap"},"horizontal"===e.orientation&&{top:30,transform:"translateX(-50%)","@media (pointer: coarse)":{top:40}},"vertical"===e.orientation&&{left:36,transform:"translateY(50%)","@media (pointer: coarse)":{left:44}},C&&{color:I.palette.text.primary})})),MZ=g.forwardRef((function(g,I){var e,C,n,t,l=(0,ig.Z)({props:g,name:"MuiSlider"}),o="rtl"===oC().direction,a=l.component,r=void 0===a?"span":a,c=l.components,A=void 0===c?{}:c,d=l.componentsProps,u=void 0===d?{}:d,s=l.color,m=void 0===s?"primary":s,Z=l.size,b=void 0===Z?"medium":Z,p=(0,gg.Z)(l,JZ),G=function(g){var I=g.color,e=g.size,C=g.classes,n=void 0===C?{}:C;return(0,i.Z)({},n,{root:(0,Ig.Z)(n.root,lZ("color".concat((0,Rg.Z)(I))),n["color".concat((0,Rg.Z)(I))],e&&[lZ("size".concat((0,Rg.Z)(e))),n["size".concat((0,Rg.Z)(e))]]),thumb:(0,Ig.Z)(n.thumb,lZ("thumbColor".concat((0,Rg.Z)(I))),n["thumbColor".concat((0,Rg.Z)(I))],e&&[lZ("thumbSize".concat((0,Rg.Z)(e))),n["thumbSize".concat((0,Rg.Z)(e))]])})}((0,i.Z)({},l,{color:m,size:b}));return(0,mg.jsx)(fZ,(0,i.Z)({},p,{isRtl:o,components:(0,i.Z)({Root:HZ,Rail:wZ,Track:KZ,Thumb:FZ,ValueLabel:NZ,Mark:xZ,MarkLabel:zZ},A),componentsProps:(0,i.Z)({},u,{root:(0,i.Z)({},u.root,kZ(A.Root)&&{as:r,ownerState:(0,i.Z)({},null==(e=u.root)?void 0:e.ownerState,{color:m,size:b})}),thumb:(0,i.Z)({},u.thumb,kZ(A.Thumb)&&{ownerState:(0,i.Z)({},null==(C=u.thumb)?void 0:C.ownerState,{color:m,size:b})}),track:(0,i.Z)({},u.track,kZ(A.Track)&&{ownerState:(0,i.Z)({},null==(n=u.track)?void 0:n.ownerState,{color:m,size:b})}),valueLabel:(0,i.Z)({},u.valueLabel,kZ(A.ValueLabel)&&{ownerState:(0,i.Z)({},null==(t=u.valueLabel)?void 0:t.ownerState,{color:m,size:b})})}),classes:G,ref:I}))})),EZ=e(9265),UZ={PaperProps:{style:{maxHeight:224,width:250}}};function QZ(g,I,e){return{fontWeight:-1===I.indexOf(g)?e.typography.fontWeightRegular:e.typography.fontWeightMedium}}var LZ=function(){var I,e,C=oC(),l=[{value:0,label:"0\xb0C"},{value:20,label:"20\xb0C"},{value:37,label:"37\xb0C"},{value:100,label:"100\xb0C"}],o=(0,ag.ZP)("div")({display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:"90%",height:"100%",padding:"0px 20px",backgroundColor:"#fafafa"}),a=(0,ag.ZP)("div")({display:"flex",flexDirection:"column",width:"80%"}),i=(0,ag.ZP)("div")({display:"flex",flexDirection:"column",width:"10%"}),r=(0,ag.ZP)("div")({display:"flex",flexDirection:"row",width:"100%",justifyContent:"center",alignItems:"center"}),c=["Oliver Hansen","Van Henry","April Tucker","Ralph Hubbard","Omar Alexander","Carlos Abbott","Miriam Wagner","Bradley Wilkerson","Virginia Andrews","Kelly Snyder"],A=g.useState([]),d=(0,n.Z)(A,2),u=d[0],s=d[1],m=function(g){var I=g.target.value;s("string"===typeof I?I.split(","):I)};return(0,mg.jsxs)(o,{children:[(0,mg.jsxs)(a,{children:[(0,mg.jsx)(Hg,{variant:"h2",gutterBottom:!0,children:"Rules for development"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:"This page is for developers working on this project where we are going to go over the rules and guidelines for both front-end and back-end development."}),(0,mg.jsx)("br",{}),(0,mg.jsx)(Eo,{}),(0,mg.jsx)("br",{}),(0,mg.jsx)(Hg,{variant:"h1",gutterBottom:!0,id:"setup",children:"Setting up the project"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:"First after cloning the project, we need to install the dependencies. We can do this by running the following command in the terminal:"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:(0,mg.jsx)("code",{children:"npm install"})}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:"This will install all the dependencies for the project."}),(0,mg.jsxs)(Hg,{variant:"body1",gutterBottom:!0,children:["After installing the dependencies, we need to setup the environment variables. We can do this by creating a file called ",(0,mg.jsx)("code",{children:"env.js"})," in the root directory of the project. This file will contain the environment variables for the project."]}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:(0,mg.jsx)("pre",{children:(0,mg.jsx)("code",{children:"\n  DB_HOST= [Database host]\n  DB_LOGIN= [Database username]\n  DB_PASSWORD= [Database password]\n  DB_NAME= [Database name]\n  DB_CHAR= utf8mb4\n  DB_MULTI= true\n  REACT_APP_TRACT_API_KEY= [Tract API key]\n              "})})}),(0,mg.jsx)("br",{}),(0,mg.jsx)(Eo,{}),(0,mg.jsx)("br",{}),(0,mg.jsxs)("div",{id:"frontend",children:[(0,mg.jsx)(Hg,{variant:"h1",gutterBottom:!0,children:"Front-end"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:"In this section we are going to go throw the rules and guidelines for front-end development."}),(0,mg.jsx)("br",{}),(0,mg.jsx)(Hg,{variant:"h2",gutterBottom:!0,id:"basicelements",children:" Basic Elements "}),(0,mg.jsx)(Hg,{variant:"h4",gutterBottom:!0,id:"button",children:"Buttons"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:"The buttons that are to be used in this project are going to be devided into text buttons, primary buttons and secondary buttons."}),(0,mg.jsxs)(r,{children:[(0,mg.jsx)(De,{style:{margin:"1rem"},variant:"text",children:"Text Button"}),(0,mg.jsx)(De,{style:{margin:"1rem"},variant:"contained",children:"Primary Button"}),(0,mg.jsx)(De,{style:{margin:"1rem"},variant:"outlined",children:"Secondary Button"})]}),(0,mg.jsx)("pre",{style:{border:".5px black solid",borderRadius:".5rem"},children:(0,mg.jsx)("code",{children:'\n  <Button variant="text">Text Button</Button>\n  <Button variant="contained">Primary Button</Button>\n  <Button variant="outlined">Secondary Button</Button>\n              '})})]}),(0,mg.jsx)(Hg,{variant:"h5",gutterBottom:!0,id:"buttoncolor",children:"Buttons Color"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:"Buttons can have diffrent colors depending on the state of the button or the meaning of the button."}),(0,mg.jsxs)(r,{children:[(0,mg.jsx)(De,{style:{margin:"1rem"},variant:"contained",color:"success",children:"Success Button"}),(0,mg.jsx)(De,{style:{margin:"1rem"},variant:"contained",color:"warning",children:"Warning Button"}),(0,mg.jsx)(De,{style:{margin:"1rem"},variant:"contained",color:"error",children:"Error Button"}),(0,mg.jsx)(De,{style:{margin:"1rem"},variant:"contained",color:"info",children:"Info Button"}),(0,mg.jsx)(De,{style:{margin:"1rem"},variant:"contained",color:"primary",children:"Primary Button"}),(0,mg.jsx)(De,{style:{margin:"1rem"},variant:"contained",color:"secondary",children:"Secondary Button"})]}),(0,mg.jsx)("pre",{style:{border:".5px black solid",borderRadius:".5rem"},children:(0,mg.jsx)("code",{children:'\n  <Button variant="contained" color="success">Success Button</Button>\n  <Button variant="contained" color="warning">Warning Button</Button>\n  <Button variant="contained" color="error">Error Button</Button>\n  <Button variant="contained" color="info">Info Button</Button>\n  <Button variant="contained" color="primary">Primary Button</Button>\n  <Button variant="contained" color="secondary">Secondary Button</Button>\n            '})}),(0,mg.jsx)(Hg,{variant:"h4",gutterBottom:!0,id:"buttonsize",children:"Buttons Size"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:"Buttons can have diffrent sizes depending on the state of the button or the meaning of the button."}),(0,mg.jsxs)(r,{children:[(0,mg.jsx)(De,{style:{margin:"1rem"},variant:"contained",color:"primary",size:"small",children:"Small Button"}),(0,mg.jsx)(De,{style:{margin:"1rem"},variant:"contained",color:"primary",children:"Normal Button"}),(0,mg.jsx)(De,{style:{margin:"1rem"},variant:"contained",color:"primary",size:"large",children:"Large Button"})]}),(0,mg.jsx)("pre",{style:{border:".5px black solid",borderRadius:".5rem"},children:(0,mg.jsx)("code",{children:'\n  <Button variant="contained" color="primary" size="small">Small Button</Button>\n  <Button variant="contained" color="primary">Normal Button</Button>\n  <Button variant="contained" color="primary" size="large">Large Button</Button>\n            '})}),(0,mg.jsx)(Hg,{variant:"h4",gutterBottom:!0,id:"buttonstatus",children:"Buttons status"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:"Buttons can have diffrent states depending on the state of the button or the meaning of the button."}),(0,mg.jsxs)(r,{children:[(0,mg.jsx)(De,{style:{margin:"1rem"},variant:"contained",color:"primary",children:"Active Button"}),(0,mg.jsx)(De,{style:{margin:"1rem"},variant:"contained",color:"primary",disabled:!0,children:"Disabled Button"})]}),(0,mg.jsx)("pre",{style:{border:".5px black solid",borderRadius:".5rem"},children:(0,mg.jsx)("code",{children:'\n  <Button variant="contained" color="primary">Active Button</Button>\n  <Button variant="contained" color="primary" disabled>Disabled Button</Button>\n            '})}),(0,mg.jsx)(Hg,{variant:"h4",gutterBottom:!0,id:"buttonwithicon",children:"Buttons With Icon"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:"Buttons can have diffrent icons depending on the state of the button or the meaning of the button."}),(0,mg.jsxs)(r,{children:[(0,mg.jsx)(ye,{style:{margin:"1rem"},variant:"contained",color:"primary",startIcon:(0,mg.jsx)("i",{className:"fas fa-user-circle"}),children:(0,mg.jsx)(An.Z,{})}),(0,mg.jsx)(ye,{style:{margin:"1rem"},variant:"contained",color:"primary",endIcon:(0,mg.jsx)("i",{className:"fas fa-user-circle"}),children:(0,mg.jsx)(EZ.Z,{})})]}),(0,mg.jsx)("pre",{style:{border:".5px black solid",borderRadius:".5rem"},children:(0,mg.jsx)("code",{children:'\n  <Button variant="contained" color="primary" startIcon={<i className="fas fa-user-circle"></i>}>Icon Button</Button>\n  <Button variant="contained" color="primary" endIcon={<i className="fas fa-user-circle"></i>}>Icon Button</Button>\n            '})}),(0,mg.jsx)(Hg,{variant:"h4",gutterBottom:!0,id:"buttonwithiconandtext",children:"Buttons With Icon and Text"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:"Buttons can have diffrent icons depending on the state of the button or the meaning of the button."}),(0,mg.jsxs)(r,{children:[(0,mg.jsx)(De,(I={style:{margin:"1rem"},variant:"contained",color:"primary",startIcon:(0,mg.jsx)("i",{className:"fas fa-user-circle"})},(0,t.Z)(I,"startIcon",(0,mg.jsx)(An.Z,{})),(0,t.Z)(I,"children","Icon in the start"),I)),(0,mg.jsx)(De,(e={style:{margin:"1rem"},variant:"contained",color:"primary",endIcon:(0,mg.jsx)("i",{className:"fas fa-user-circle"})},(0,t.Z)(e,"endIcon",(0,mg.jsx)(EZ.Z,{})),(0,t.Z)(e,"children","Icon in the end"),e))]}),(0,mg.jsx)("pre",{style:{border:".5px black solid",borderRadius:".5rem"},children:(0,mg.jsx)("code",{children:'\n  <Button variant="contained" color="primary" startIcon={<i className="fas fa-user-circle"></i>}>Icon in the start</Button>\n  <Button variant="contained" color="primary" endIcon={<i className="fas fa-user-circle"></i>}>Icon in the end</Button>\n            '})}),(0,mg.jsx)("br",{}),(0,mg.jsx)(Eo,{}),(0,mg.jsx)("br",{}),(0,mg.jsx)(Hg,{variant:"h3",gutterBottom:!0,id:"forms",children:"Forms"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:"Forms are used to collect data from the user. and they are an essential part of the web application."}),(0,mg.jsx)(Hg,{variant:"h4",gutterBottom:!0,id:"textinputs",children:"Text Inputs"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:"The main variant of the text input that we are going to be using is the outlined text input."}),(0,mg.jsx)(r,{children:(0,mg.jsx)(wl,{style:{margin:"1rem"},variant:"outlined",label:"Text Field"})}),(0,mg.jsx)("pre",{style:{border:".5px black solid",borderRadius:".5rem"},children:(0,mg.jsx)("code",{children:'\n  <TextField variant="outlined" label="Text Field" />\n            '})}),(0,mg.jsx)(Hg,{variant:"h5",gutterBottom:!0,id:"textinputstates",children:"Text Input States"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:"Text inputs can have diffrent states depending on the state of the text input or the meaning of the text input."}),(0,mg.jsxs)(r,{children:[(0,mg.jsx)(wl,{style:{margin:"1rem"},required:!0,id:"outlined-required",label:"Required",defaultValue:"Hello World"}),(0,mg.jsx)(wl,{style:{margin:"1rem"},disabled:!0,id:"outlined-disabled",label:"Disabled",defaultValue:"Hello World"}),(0,mg.jsx)(wl,{style:{margin:"1rem"},id:"outlined-password-input",label:"Password",type:"password",autoComplete:"current-password"}),(0,mg.jsx)(wl,{style:{margin:"1rem"},id:"outlined-read-only-input",label:"Read Only",defaultValue:"Hello World",InputProps:{readOnly:!0}}),(0,mg.jsx)(wl,{style:{margin:"1rem"},id:"outlined-number",label:"Number",type:"number",InputLabelProps:{shrink:!0}}),(0,mg.jsx)(wl,{style:{margin:"1rem"},id:"outlined-search",label:"Search field",type:"search"}),(0,mg.jsx)(wl,{style:{margin:"1rem"},id:"outlined-helperText",label:"Helper text",defaultValue:"Default Value",helperText:"Some important text"})]}),(0,mg.jsx)("pre",{style:{border:".5px black solid",borderRadius:".5rem"},children:(0,mg.jsx)("code",{children:'\n  <TextField style={{margin: \'1rem\'}}\n    required\n    id="outlined-required"\n    label="Required"\n    defaultValue="Hello World"\n  />\n  <TextField style={{margin: \'1rem\'}}\n    disabled\n    id="outlined-disabled"\n    label="Disabled"\n    defaultValue="Hello World"\n  />\n  <TextField style={{margin: \'1rem\'}}\n    id="outlined-password-input"\n    label="Password"\n    type="password"\n    autoComplete="current-password"\n  />\n  <TextField style={{margin: \'1rem\'}}\n    id="outlined-read-only-input"\n    label="Read Only"\n    defaultValue="Hello World"\n    InputProps={{\n      readOnly: true,\n    }}\n  />\n  <TextField style={{margin: \'1rem\'}}\n    id="outlined-number"\n    label="Number"\n    type="number"\n    InputLabelProps={{\n      shrink: true,\n    }}\n  />\n  <TextField style={{margin: \'1rem\'}} id="outlined-search" label="Search field" type="search" />\n  <TextField style={{margin: \'1rem\'}}\n    id="outlined-helperText"\n    label="Helper text"\n    defaultValue="Default Value"\n    helperText="Some important text"  \n  />\n          '})}),(0,mg.jsx)(Hg,{variant:"h5",gutterBottom:!0,id:"textinputvalidation",children:"Text Input validation"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:"Text inputs should always have text validation to make sure the user is entering the correct information."}),(0,mg.jsxs)(r,{children:[(0,mg.jsx)(wl,{style:{margin:"1rem"},error:!0,id:"outlined-error",label:"Error",defaultValue:"Hello World"}),(0,mg.jsx)(wl,{style:{margin:"1rem"},error:!0,id:"outlined-error-helper-text",label:"Error",defaultValue:"Hello World",helperText:"Incorrect entry."})]}),(0,mg.jsx)("pre",{style:{border:".5px black solid",borderRadius:".5rem"},children:(0,mg.jsx)("code",{children:'\n  <TextField\n    error\n    id="outlined-error"\n    label="Error"\n    defaultValue="Hello World"\n  />\n  <TextField\n    error\n    id="outlined-error-helper-text"\n    label="Error"\n    defaultValue="Hello World"\n    helperText="Incorrect entry."\n  />\n            '})}),(0,mg.jsx)(Hg,{variant:"h5",gutterBottom:!0,id:"multiline",children:"Multi line"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:"Multiline are text inputs that can be used to enter more than one line of text."}),(0,mg.jsxs)(r,{children:[(0,mg.jsx)(wl,{style:{margin:"1rem"},id:"outlined-multiline-flexible",label:"Multiline",multiline:!0,maxRows:4}),(0,mg.jsx)(wl,{style:{margin:"1rem"},id:"outlined-textarea",label:"Multiline Placeholder",placeholder:"Placeholder",multiline:!0}),(0,mg.jsx)(wl,{style:{margin:"1rem"},id:"outlined-multiline-static",label:"Multiline",multiline:!0,rows:4,defaultValue:"Default Value"})]}),(0,mg.jsx)("pre",{style:{border:".5px black solid",borderRadius:".5rem"},children:(0,mg.jsx)("code",{children:'\n  <TextField\n    id="outlined-multiline-flexible"\n    label="Multiline"\n    multiline\n    maxRows={4}\n  />\n  <TextField\n    id="outlined-textarea"\n    label="Multiline Placeholder"\n    placeholder="Placeholder"\n    multiline\n  />\n  <TextField\n    id="outlined-multiline-static"\n    label="Multiline"\n    multiline\n    rows={4}\n    defaultValue="Default Value"\n  />\n            '})}),(0,mg.jsx)(Hg,{variant:"h4",gutterBottom:!0,id:"select",children:"Selects"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:"Selects are used to select a value from a list of options."}),(0,mg.jsx)(r,{children:(0,mg.jsxs)(St,{fullWidth:!0,children:[(0,mg.jsx)(Gt,{id:"demo-simple-select-label",children:"Age"}),(0,mg.jsxs)(Xl,{labelId:"demo-simple-select-label",id:"demo-simple-select",label:"Age",children:[(0,mg.jsx)(Ca,{value:10,children:"Ten"}),(0,mg.jsx)(Ca,{value:20,children:"Twenty"}),(0,mg.jsx)(Ca,{value:30,children:"Thirty"})]})]})}),(0,mg.jsx)("pre",{style:{border:".5px black solid",borderRadius:".5rem"},children:(0,mg.jsx)("code",{children:'\n  <FormControl fullWidth>\n  <InputLabel id="demo-simple-select-label">Age</InputLabel>\n  <Select\n    labelId="demo-simple-select-label"\n    id="demo-simple-select"\n    label="Age"\n  >\n    <MenuItem value={10}>Ten</MenuItem>\n    <MenuItem value={20}>Twenty</MenuItem>\n    <MenuItem value={30}>Thirty</MenuItem>\n  </Select>\n  </FormControl>\n          '})}),(0,mg.jsxs)(Hg,{variant:"body1",gutterBottom:!0,children:["The ",(0,mg.jsx)("code",{children:"FormControl"})," is used to wrap the select so that when we add the ",(0,mg.jsx)("code",{children:"InputLabel"}),", it will be displayed above the select."]}),(0,mg.jsx)(Hg,{variant:"h5",gutterBottom:!0,id:"selecttypes",children:"Select Types"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:"There is multiple types of select that can be used depending on the use case."}),(0,mg.jsx)(Hg,{variant:"h6",gutterBottom:!0,id:"selecttypes",children:"Checkbox Select"}),(0,mg.jsx)(r,{children:(0,mg.jsxs)(St,{sx:{m:1,width:300},children:[(0,mg.jsx)(Gt,{id:"demo-multiple-checkbox-label",children:"Tag"}),(0,mg.jsx)(Xl,{labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",multiple:!0,value:u,onChange:m,input:(0,mg.jsx)(rt,{label:"Tag"}),renderValue:function(g){return g.join(", ")},MenuProps:UZ,children:c.map((function(g){return(0,mg.jsxs)(Ca,{value:g,children:[(0,mg.jsx)(jm,{checked:u.indexOf(g)>-1}),(0,mg.jsx)(qm,{primary:g})]},g)}))})]})}),(0,mg.jsx)("pre",{style:{border:".5px black solid",borderRadius:".5rem"},children:(0,mg.jsx)("code",{children:"\n  // Outside the render method\n  const ITEM_HEIGHT = 48;\n  const ITEM_PADDING_TOP = 8;\n  const MenuProps = {\n    PaperProps: {\n      style: {\n        maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n        width: 250,\n      },\n    },\n  };\n  const names = [\n      'Oliver Hansen',\n      'Van Henry',\n      'April Tucker',\n      'Ralph Hubbard',\n      'Omar Alexander',\n      'Carlos Abbott',\n      'Miriam Wagner',\n      'Bradley Wilkerson',\n      'Virginia Andrews',\n      'Kelly Snyder',\n    ];\n\n    const [personName, setPersonName] = React.useState([]);\n\n    const handleChange = (event) => {\n      const {\n        target: { value },\n      } = event;\n      setPersonName(\n        // On autofill we get a stringified value.\n        typeof value === 'string' ? value.split(',') : value,\n      );\n    };\n\n    // in the render method\n    <FormControl sx={{ m: 1, width: 300 }}>\n      <InputLabel id=\"demo-multiple-checkbox-label\">Tag</InputLabel>\n      <Select\n        labelId=\"demo-multiple-checkbox-label\"\n        id=\"demo-multiple-checkbox\"\n        multiple\n        value={personName}\n        onChange={handleChange}\n        input={<OutlinedInput label=\"Tag\" />}\n        renderValue={(selected) => selected.join(', ')}\n        MenuProps={MenuProps}\n      >\n        {names.map((name) => (\n          <MenuItem key={name} value={name}>\n            <Checkbox checked={personName.indexOf(name) > -1} />\n            <ListItemText primary={name} />\n          </MenuItem>\n        ))}\n      </Select>\n    </FormControl>\n            "})}),(0,mg.jsx)(Hg,{variant:"h6",gutterBottom:!0,id:"selecttypes",children:"Chip Select"}),(0,mg.jsx)(r,{children:(0,mg.jsxs)(St,{sx:{m:1,width:300},children:[(0,mg.jsx)(Gt,{id:"demo-multiple-chip-label",children:"Chip"}),(0,mg.jsx)(Xl,{labelId:"demo-multiple-chip-label",id:"demo-multiple-chip",multiple:!0,value:u,onChange:m,input:(0,mg.jsx)(rt,{id:"select-multiple-chip",label:"Chip"}),renderValue:function(g){return(0,mg.jsx)(GI,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:g.map((function(g){return(0,mg.jsx)(tZ,{label:g},g)}))})},MenuProps:UZ,children:c.map((function(g){return(0,mg.jsx)(Ca,{value:g,style:QZ(g,u,C),children:g},g)}))})]})}),(0,mg.jsx)("pre",{style:{border:".5px black solid",borderRadius:".5rem"},children:(0,mg.jsx)("code",{children:'\n  <FormControl sx={{ m: 1, width: 300 }}>\n  <InputLabel id="demo-multiple-chip-label">Chip</InputLabel>\n    <Select\n      labelId="demo-multiple-chip-label"\n      id="demo-multiple-chip"\n      multiple\n      value={personName}\n      onChange={handleChange}\n      input={<OutlinedInput id="select-multiple-chip" label="Chip" />}\n      renderValue={(selected) => (\n        <Box sx={{ display: \'flex\', flexWrap: \'wrap\', gap: 0.5 }}>\n          {selected.map((value) => (\n            <Chip key={value} label={value} />\n          ))}\n        </Box>\n      )}\n      MenuProps={MenuProps}\n    >\n      {names.map((name) => (\n        <MenuItem\n          key={name}\n          value={name}\n          style={getStyles(name, personName, theme)}\n        >\n          {name}\n        </MenuItem>\n      ))}\n    </Select>\n  </FormControl>\n  '})}),(0,mg.jsx)("br",{}),(0,mg.jsx)(Eo,{}),(0,mg.jsx)("br",{}),(0,mg.jsx)(Hg,{variant:"h3",gutterBottom:!0,id:"valuesliders",children:"Value Sliders"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:"Values slider are sliders that allow you to select a number value from a range."}),(0,mg.jsx)(Hg,{variant:"h5",gutterBottom:!0,id:"valuesliders",children:"Basic Slider"}),(0,mg.jsx)(r,{children:(0,mg.jsx)(MZ,{defaultValue:50,"aria-label":"Default",valueLabelDisplay:"auto"})}),(0,mg.jsx)("pre",{style:{border:".5px black solid",borderRadius:".5rem"},children:(0,mg.jsx)("code",{children:'\n  <Slider defaultValue={50} aria-label="Default" valueLabelDisplay="auto" />\n            '})}),(0,mg.jsx)(Hg,{variant:"h5",gutterBottom:!0,id:"discretesliders",children:"Discrete sliders"}),(0,mg.jsx)(r,{children:(0,mg.jsx)(MZ,{"aria-label":"Temperature",defaultValue:30,valueLabelDisplay:"auto",step:10,marks:!0,min:10,max:110})}),(0,mg.jsx)("pre",{style:{border:".5px black solid",borderRadius:".5rem"},children:(0,mg.jsx)("code",{children:'\n  <Slider\n    aria-label="Temperature"\n    defaultValue={30}\n    valueLabelDisplay="auto"\n    step={10}\n    marks\n    min={10}\n    max={110}\n  />\n            '})}),(0,mg.jsx)("br",{}),(0,mg.jsx)(r,{children:(0,mg.jsx)(MZ,{"aria-label":"Restricted values",defaultValue:20,valueLabelFormat:function(g){return l.findIndex((function(I){return I.value===g}))+1},getAriaValueText:function(g){return"".concat(g,"\xb0C")},step:null,valueLabelDisplay:"auto",marks:l})}),(0,mg.jsx)("pre",{style:{border:".5px black solid",borderRadius:".5rem"},children:(0,mg.jsx)("code",{children:"\n  const Rules = () => {\n    const names = [\n      'Oliver Hansen',\n      'Van Henry',\n      'April Tucker',\n      'Ralph Hubbard',\n      'Omar Alexander',\n      'Carlos Abbott',\n      'Miriam Wagner',\n      'Bradley Wilkerson',\n      'Virginia Andrews',\n      'Kelly Snyder',\n    ];\n    function valuetext(value) {\n      return value + \"\xb0C\";\n    }\n\n    function valueLabelFormat(value) {\n      return marks.findIndex((mark) => mark.value === value) + 1;\n    }\n\n    return(\n      <Slider\n              aria-label=\"Restricted values\"\n              defaultValue={20}\n              valueLabelFormat={valueLabelFormat}\n              getAriaValueText={valuetext}\n              step={null}\n              valueLabelDisplay=\"auto\"\n              marks={marks}\n      />\n    )\n  }\n  "})}),(0,mg.jsx)("br",{}),(0,mg.jsx)(Eo,{}),(0,mg.jsx)("br",{}),(0,mg.jsx)(Hg,{variant:"h1",gutterBottom:!0,id:"backend",children:"Back-end"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:"The back-end is the part of the application and how everything works."}),(0,mg.jsx)(Hg,{variant:"h3",gutterBottom:!0,id:"api",children:"API"}),(0,mg.jsxs)(Hg,{variant:"body1",gutterBottom:!0,children:["The way the front end communicates with the back end is through an API. All the API files are located in the ",(0,mg.jsx)("code",{children:"API"})," folder. The API folder also contains the ",(0,mg.jsx)("code",{children:"index.js"})," file and the ",(0,mg.jsx)("code",{children:"/src"})," directory.",(0,mg.jsx)("br",{}),(0,mg.jsx)("br",{}),"The ",(0,mg.jsx)("code",{children:"index.js"})," file is the entry point of the API. It is the file that is called when the application is run. It is the file that is responsible for setting up the server and the routes.",(0,mg.jsx)("br",{}),(0,mg.jsx)("br",{}),"The ",(0,mg.jsx)("code",{children:"/src"})," directory contains all the files that are used to create the API.",(0,mg.jsx)("br",{}),(0,mg.jsx)("br",{}),"The ",(0,mg.jsx)("code",{children:"/src/dbConnection.js"})," file is the file that is responsible for connecting to the database and getting the information needed from the database."]}),(0,mg.jsx)("br",{}),(0,mg.jsx)(Hg,{variant:"h3",gutterBottom:!0,id:"callingapi",children:"Calling the API from the front-end"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:"The front-end calls the API by using a simple fetch call. where in the fetch call you can pass the route that you want to call and then the API key and the data that you want to send to the API as a query."})]}),(0,mg.jsx)(Eo,{orientation:"vertical",variant:"middle",flexItem:!0}),(0,mg.jsx)(i,{children:(0,mg.jsxs)("div",{style:{position:"fixed",top:"30%",right:"3%"},children:[(0,mg.jsx)(Hg,{variant:"h3",gutterBottom:!0,children:"Table of content"}),(0,mg.jsx)(Hg,{variant:"body1",gutterBottom:!0,children:(0,mg.jsxs)("ul",{children:[(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#top",children:"About this"})}),(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#setup",children:"Setting Up The Project"})}),(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#frontend",children:"Front-end"})}),(0,mg.jsxs)("ul",{children:[(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#basicelements",children:"Basic Elements"})}),(0,mg.jsxs)("ul",{children:[(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#button",children:"Button"})}),(0,mg.jsxs)("ul",{children:[(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#buttoncolor",children:"Button Color"})}),(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#buttonsize",children:"Button Size"})}),(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#buttonstatus",children:"Button Status"})}),(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#buttonwithicon",children:"Button With Icon"})}),(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#buttonwithiconandtext",children:"Button With Icon and Text"})})]}),(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#forms",children:"Forms"})}),(0,mg.jsxs)("ul",{children:[(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#textinputs",children:"Text Inputes"})}),(0,mg.jsxs)("ul",{children:[(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#textinputstates",children:"Text Inputs States"})}),(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#textinputvalidation",children:"Text Inputs Validation"})}),(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#multiline",children:"Multiline"})})]})]}),(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#select",children:"select"})}),(0,mg.jsx)("ul",{children:(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#selecttypes",children:"Select Types"})})}),(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#slider",children:"Slider"})}),(0,mg.jsx)("ul",{children:(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#discretesliders",children:"Discrete Sliders"})})})]})]}),(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#backend",children:"Back-end"})}),(0,mg.jsxs)("ul",{children:[(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#api",children:"API"})}),(0,mg.jsx)("ul",{children:(0,mg.jsx)("li",{children:(0,mg.jsx)("a",{href:"#callingapi",children:"Calling the API from the front-end"})})})]})]})})]})})]})},TZ=e(9702);function DZ(g,I){void 0===I&&(I={});var e=function(g){if(g&&"j"===g[0]&&":"===g[1])return g.substr(2);return g}(g);if(function(g,I){return"undefined"===typeof I&&(I=!g||"{"!==g[0]&&"["!==g[0]&&'"'!==g[0]),!I}(e,I.doNotParse))try{return JSON.parse(e)}catch(mp){}return g}var jZ=function(){return jZ=Object.assign||function(g){for(var I,e=1,C=arguments.length;e<C;e++)for(var n in I=arguments[e])Object.prototype.hasOwnProperty.call(I,n)&&(g[n]=I[n]);return g},jZ.apply(this,arguments)},PZ=function(){function g(g,I){var e=this;this.changeListeners=[],this.HAS_DOCUMENT_COOKIE=!1,this.cookies=function(g,I){return"string"===typeof g?TZ.Q(g,I):"object"===typeof g&&null!==g?g:{}}(g,I),new Promise((function(){e.HAS_DOCUMENT_COOKIE="object"===typeof document&&"string"===typeof document.cookie})).catch((function(){}))}return g.prototype._updateBrowserValues=function(g){this.HAS_DOCUMENT_COOKIE&&(this.cookies=TZ.Q(document.cookie,g))},g.prototype._emitChange=function(g){for(var I=0;I<this.changeListeners.length;++I)this.changeListeners[I](g)},g.prototype.get=function(g,I,e){return void 0===I&&(I={}),this._updateBrowserValues(e),DZ(this.cookies[g],I)},g.prototype.getAll=function(g,I){void 0===g&&(g={}),this._updateBrowserValues(I);var e={};for(var C in this.cookies)e[C]=DZ(this.cookies[C],g);return e},g.prototype.set=function(g,I,e){var C;"object"===typeof I&&(I=JSON.stringify(I)),this.cookies=jZ(jZ({},this.cookies),((C={})[g]=I,C)),this.HAS_DOCUMENT_COOKIE&&(document.cookie=TZ.q(g,I,e)),this._emitChange({name:g,value:I,options:e})},g.prototype.remove=function(g,I){var e=I=jZ(jZ({},I),{expires:new Date(1970,1,1,0,0,1),maxAge:0});this.cookies=jZ({},this.cookies),delete this.cookies[g],this.HAS_DOCUMENT_COOKIE&&(document.cookie=TZ.q(g,"",e)),this._emitChange({name:g,value:void 0,options:I})},g.prototype.addChangeListener=function(g){this.changeListeners.push(g)},g.prototype.removeChangeListener=function(g){var I=this.changeListeners.indexOf(g);I>=0&&this.changeListeners.splice(I,1)},g}(),OZ=PZ,qZ=e(7078);var _Z=function(I){var e=I.children,C=I.defer,t=void 0!==C&&C,l=I.fallback,o=void 0===l?null:l,a=g.useState(!1),i=(0,n.Z)(a,2),r=i[0],c=i[1];return(0,GC.Z)((function(){t||c(!0)}),[t]),g.useEffect((function(){t&&c(!0)}),[t]),(0,mg.jsx)(g.Fragment,{children:r?e:o})},$Z=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function gb(g,I,e){var C,n=function(g,I,e){var C,n=I.getBoundingClientRect(),t=e&&e.getBoundingClientRect(),l=(0,Oe.Z)(I);if(I.fakeTransform)C=I.fakeTransform;else{var o=l.getComputedStyle(I);C=o.getPropertyValue("-webkit-transform")||o.getPropertyValue("transform")}var a=0,i=0;if(C&&"none"!==C&&"string"===typeof C){var r=C.split("(")[1].split(")")[0].split(",");a=parseInt(r[4],10),i=parseInt(r[5],10)}return"left"===g?"translateX(".concat(t?t.right+a-n.left:l.innerWidth+a-n.left,"px)"):"right"===g?"translateX(-".concat(t?n.right-t.left-a:n.left+n.width-a,"px)"):"up"===g?"translateY(".concat(t?t.bottom+i-n.top:l.innerHeight+i-n.top,"px)"):"translateY(-".concat(t?n.top-t.top+n.height-i:n.top+n.height-i,"px)")}(g,I,"function"===typeof(C=e)?C():C);n&&(I.style.webkitTransform=n,I.style.transform=n)}var Ib=g.forwardRef((function(I,e){var C=oC(),n={enter:C.transitions.easing.easeOut,exit:C.transitions.easing.sharp},t={enter:C.transitions.duration.enteringScreen,exit:C.transitions.duration.leavingScreen},l=I.addEndListener,o=I.appear,a=void 0===o||o,r=I.children,c=I.container,A=I.direction,d=void 0===A?"down":A,u=I.easing,s=void 0===u?n:u,m=I.in,Z=I.onEnter,b=I.onEntered,p=I.onEntering,G=I.onExit,h=I.onExited,y=I.onExiting,B=I.style,W=I.timeout,S=void 0===W?t:W,V=I.TransitionComponent,v=void 0===V?tC:V,R=(0,gg.Z)(I,$Z),X=g.useRef(null),f=(0,SI.Z)(r.ref,X),k=(0,SI.Z)(f,e),J=function(g){return function(I){g&&(void 0===I?g(X.current):g(X.current,I))}},Y=J((function(g,I){gb(d,g,c),aC(g),Z&&Z(g,I)})),H=J((function(g,I){var e=iC({timeout:S,style:B,easing:s},{mode:"enter"});g.style.webkitTransition=C.transitions.create("-webkit-transform",(0,i.Z)({},e)),g.style.transition=C.transitions.create("transform",(0,i.Z)({},e)),g.style.webkitTransform="none",g.style.transform="none",p&&p(g,I)})),w=J(b),K=J(y),F=J((function(g){var I=iC({timeout:S,style:B,easing:s},{mode:"exit"});g.style.webkitTransition=C.transitions.create("-webkit-transform",I),g.style.transition=C.transitions.create("transform",I),gb(d,g,c),G&&G(g)})),N=J((function(g){g.style.webkitTransition="",g.style.transition="",h&&h(g)})),x=g.useCallback((function(){X.current&&gb(d,X.current,c)}),[d,c]);return g.useEffect((function(){if(!m&&"down"!==d&&"right"!==d){var g=(0,je.Z)((function(){X.current&&gb(d,X.current,c)})),I=(0,Oe.Z)(X.current);return I.addEventListener("resize",g),function(){g.clear(),I.removeEventListener("resize",g)}}}),[d,m,c]),g.useEffect((function(){m||x()}),[m,x]),(0,mg.jsx)(v,(0,i.Z)({nodeRef:X,onEnter:Y,onEntered:w,onEntering:H,onExit:F,onExited:N,onExiting:K,addEndListener:function(g){l&&l(X.current,g)},appear:a,in:m,timeout:S},R,{children:function(I,e){return g.cloneElement(r,(0,i.Z)({ref:k,style:(0,i.Z)({visibility:"exited"!==I||m?void 0:"hidden"},B,r.props.style)},e))}}))}));function eb(g){return(0,cg.Z)("MuiDrawer",g)}(0,Ag.Z)("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);var Cb=["BackdropProps"],nb=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],tb=function(g,I){var e=g.ownerState;return[I.root,("permanent"===e.variant||"persistent"===e.variant)&&I.docked,I.modal]},lb=(0,ag.ZP)(gn,{name:"MuiDrawer",slot:"Root",overridesResolver:tb})((function(g){return{zIndex:g.theme.zIndex.drawer}})),ob=(0,ag.ZP)("div",{shouldForwardProp:ag.FO,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:tb})({flex:"0 0 auto"}),ab=(0,ag.ZP)(vg,{name:"MuiDrawer",slot:"Paper",overridesResolver:function(g,I){var e=g.ownerState;return[I.paper,I["paperAnchor".concat((0,Rg.Z)(e.anchor))],"temporary"!==e.variant&&I["paperAnchorDocked".concat((0,Rg.Z)(e.anchor))]]}})((function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:I.zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},"left"===e.anchor&&{left:0},"top"===e.anchor&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},"right"===e.anchor&&{right:0},"bottom"===e.anchor&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},"left"===e.anchor&&"temporary"!==e.variant&&{borderRight:"1px solid ".concat(I.palette.divider)},"top"===e.anchor&&"temporary"!==e.variant&&{borderBottom:"1px solid ".concat(I.palette.divider)},"right"===e.anchor&&"temporary"!==e.variant&&{borderLeft:"1px solid ".concat(I.palette.divider)},"bottom"===e.anchor&&"temporary"!==e.variant&&{borderTop:"1px solid ".concat(I.palette.divider)})})),ib={left:"right",right:"left",top:"down",bottom:"up"};function rb(g){return-1!==["left","right"].indexOf(g)}function cb(g,I){return"rtl"===g.direction&&rb(I)?ib[I]:I}var Ab=g.forwardRef((function(I,e){var C=(0,ig.Z)({props:I,name:"MuiDrawer"}),n=oC(),t={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},l=C.anchor,o=void 0===l?"left":l,a=C.BackdropProps,r=C.children,c=C.className,A=C.elevation,d=void 0===A?16:A,u=C.hideBackdrop,s=void 0!==u&&u,m=C.ModalProps,Z=(m=void 0===m?{}:m).BackdropProps,b=C.onClose,p=C.open,G=void 0!==p&&p,h=C.PaperProps,y=void 0===h?{}:h,B=C.SlideProps,W=C.TransitionComponent,S=void 0===W?Ib:W,V=C.transitionDuration,v=void 0===V?t:V,R=C.variant,X=void 0===R?"temporary":R,f=(0,gg.Z)(C.ModalProps,Cb),k=(0,gg.Z)(C,nb),J=g.useRef(!1);g.useEffect((function(){J.current=!0}),[]);var Y=cb(n,o),H=o,w=(0,i.Z)({},C,{anchor:H,elevation:d,open:G,variant:X},k),K=function(g){var I=g.classes,e=g.anchor,C=g.variant,n={root:["root"],docked:[("permanent"===C||"persistent"===C)&&"docked"],modal:["modal"],paper:["paper","paperAnchor".concat((0,Rg.Z)(e)),"temporary"!==C&&"paperAnchorDocked".concat((0,Rg.Z)(e))]};return(0,og.Z)(n,eb,I)}(w),F=(0,mg.jsx)(ab,(0,i.Z)({elevation:"temporary"===X?d:0,square:!0},y,{className:(0,Ig.Z)(K.paper,y.className),ownerState:w,children:r}));if("permanent"===X)return(0,mg.jsx)(ob,(0,i.Z)({className:(0,Ig.Z)(K.root,K.docked,c),ownerState:w,ref:e},k,{children:F}));var N=(0,mg.jsx)(S,(0,i.Z)({in:G,direction:ib[Y],timeout:v,appear:J.current},B,{children:F}));return"persistent"===X?(0,mg.jsx)(ob,(0,i.Z)({className:(0,Ig.Z)(K.root,K.docked,c),ownerState:w,ref:e},k,{children:N})):(0,mg.jsx)(lb,(0,i.Z)({BackdropProps:(0,i.Z)({},a,Z,{transitionDuration:v}),className:(0,Ig.Z)(K.root,K.modal,c),open:G,ownerState:w,onClose:b,hideBackdrop:s,ref:e},k,f,{children:N}))})),db=["anchor","classes","className","width","style"],ub=(0,ag.ZP)("div")((function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({position:"fixed",top:0,left:0,bottom:0,zIndex:I.zIndex.drawer-1},"left"===e.anchor&&{right:"auto"},"right"===e.anchor&&{left:"auto",right:0},"top"===e.anchor&&{bottom:"auto",right:0},"bottom"===e.anchor&&{top:"auto",bottom:0,right:0})})),sb=g.forwardRef((function(g,I){var e=g.anchor,C=g.classes,n=void 0===C?{}:C,l=g.className,o=g.width,a=g.style,r=(0,gg.Z)(g,db),c=g;return(0,mg.jsx)(ub,(0,i.Z)({className:(0,Ig.Z)("PrivateSwipeArea-root",n.root,n["anchor".concat((0,Rg.Z)(e))],l),ref:I,style:(0,i.Z)((0,t.Z)({},rb(e)?"width":"height",o),a),ownerState:c},r))})),mb=["BackdropProps"],Zb=["anchor","disableBackdropTransition","disableDiscovery","disableSwipeToOpen","hideBackdrop","hysteresis","minFlingVelocity","ModalProps","onClose","onOpen","open","PaperProps","SwipeAreaProps","swipeAreaWidth","transitionDuration","variant"],bb=null;function pb(g,I,e){return"right"===g?e.body.offsetWidth-I[0].pageX:I[0].pageX}function Gb(g,I,e){return"bottom"===g?e.innerHeight-I[0].clientY:I[0].clientY}function hb(g,I){return g?I.clientWidth:I.clientHeight}function yb(g,I,e,C){return Math.min(Math.max(e?I-g:C+I-g,0),C)}var Bb="undefined"!==typeof navigator&&/iPad|iPhone|iPod/.test(navigator.userAgent),Wb=g.forwardRef((function(I,e){var C=(0,qZ.Z)({name:"MuiSwipeableDrawer",props:I}),t=oC(),l={enter:t.transitions.duration.enteringScreen,exit:t.transitions.duration.leavingScreen},o=C.anchor,a=void 0===o?"left":o,r=C.disableBackdropTransition,c=void 0!==r&&r,A=C.disableDiscovery,d=void 0!==A&&A,u=C.disableSwipeToOpen,s=void 0===u?Bb:u,m=C.hideBackdrop,Z=C.hysteresis,b=void 0===Z?.52:Z,p=C.minFlingVelocity,G=void 0===p?450:p,h=C.ModalProps,y=(h=void 0===h?{}:h).BackdropProps,B=C.onClose,W=C.onOpen,S=C.open,V=C.PaperProps,v=void 0===V?{}:V,R=C.SwipeAreaProps,X=C.swipeAreaWidth,f=void 0===X?20:X,k=C.transitionDuration,J=void 0===k?l:k,Y=C.variant,H=void 0===Y?"temporary":Y,w=(0,gg.Z)(C.ModalProps,mb),K=(0,gg.Z)(C,Zb),F=g.useState(!1),N=(0,n.Z)(F,2),x=N[0],z=N[1],M=g.useRef({isSwiping:null}),E=g.useRef(),U=g.useRef(),Q=g.useRef(),L=g.useRef(!1),T=g.useRef();(0,Wn.Z)((function(){T.current=null}),[S]);var D=g.useCallback((function(g){var I=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=I.mode,C=void 0===e?null:e,n=I.changeTransition,l=void 0===n||n,o=cb(t,a),i=-1!==["right","bottom"].indexOf(o)?1:-1,r=rb(a),A=r?"translate(".concat(i*g,"px, 0)"):"translate(0, ".concat(i*g,"px)"),d=Q.current.style;d.webkitTransform=A,d.transform=A;var u="";if(C&&(u=t.transitions.create("all",iC({easing:void 0,style:void 0,timeout:J},{mode:C}))),l&&(d.webkitTransition=u,d.transition=u),!c&&!m){var s=U.current.style;s.opacity=1-g/hb(r,Q.current),l&&(s.webkitTransition=u,s.transition=u)}}),[a,c,m,t,J]),j=(0,VI.Z)((function(g){if(L.current)if(bb=null,L.current=!1,z(!1),M.current.isSwiping){M.current.isSwiping=null;var I,e=cb(t,a),C=rb(a);I=C?pb(e,g.changedTouches,(0,Pe.Z)(g.currentTarget)):Gb(e,g.changedTouches,(0,Oe.Z)(g.currentTarget));var n=C?M.current.startX:M.current.startY,l=hb(C,Q.current),o=yb(I,n,S,l),i=o/l;Math.abs(M.current.velocity)>G&&(T.current=1e3*Math.abs((l-o)/M.current.velocity)),S?M.current.velocity>G||i>b?B():D(0,{mode:"exit"}):M.current.velocity<-G||1-i>b?W():D(hb(C,Q.current),{mode:"enter"})}else M.current.isSwiping=null})),P=(0,VI.Z)((function(g){if(Q.current&&L.current&&(null===bb||bb===M.current)){var I=cb(t,a),e=rb(a),C=pb(I,g.touches,(0,Pe.Z)(g.currentTarget)),n=Gb(I,g.touches,(0,Oe.Z)(g.currentTarget));if(S&&Q.current.contains(g.target)&&null===bb){var l=function(g){var I=g.domTreeShapes,e=g.start,C=g.current,n=g.anchor,t={x:"scrollLeft",y:"scrollTop"},l={x:"scrollWidth",y:"scrollHeight"},o={x:"clientWidth",y:"clientHeight"};return I.some((function(g){var I=C>=e;"top"!==n&&"left"!==n||(I=!I);var a="left"===n||"right"===n?"x":"y",i=Math.round(g[t[a]]),r=i>0,c=i+g[o[a]]<g[l[a]];return!!(I&&c||!I&&r)}))}({domTreeShapes:function(g,I){for(var e=[];g&&g!==I.parentElement;){var C=(0,Oe.Z)(I).getComputedStyle(g);"absolute"===C.getPropertyValue("position")||"hidden"===C.getPropertyValue("overflow-x")||(g.clientWidth>0&&g.scrollWidth>g.clientWidth||g.clientHeight>0&&g.scrollHeight>g.clientHeight)&&e.push(g),g=g.parentElement}return e}(g.target,Q.current),start:e?M.current.startX:M.current.startY,current:e?C:n,anchor:a});if(l)return void(bb=!0);bb=M.current}if(null==M.current.isSwiping){var o=Math.abs(C-M.current.startX),i=Math.abs(n-M.current.startY),r=e?o>i&&o>3:i>o&&i>3;if(r&&g.cancelable&&g.preventDefault(),!0===r||(e?i>3:o>3)){if(M.current.isSwiping=r,!r)return void j(g);M.current.startX=C,M.current.startY=n,d||S||(e?M.current.startX-=20:M.current.startY-=20)}}if(M.current.isSwiping){var c=hb(e,Q.current),A=e?M.current.startX:M.current.startY;S&&!M.current.paperHit&&(A=Math.min(A,c));var u=yb(e?C:n,A,S,c);if(S)if(M.current.paperHit)0===u&&(M.current.startX=C,M.current.startY=n);else{if(!(e?C<c:n<c))return;M.current.paperHit=!0,M.current.startX=C,M.current.startY=n}null===M.current.lastTranslate&&(M.current.lastTranslate=u,M.current.lastTime=performance.now()+1);var s=(u-M.current.lastTranslate)/(performance.now()-M.current.lastTime)*1e3;M.current.velocity=.4*M.current.velocity+.6*s,M.current.lastTranslate=u,M.current.lastTime=performance.now(),g.cancelable&&g.preventDefault(),D(u)}}})),O=(0,VI.Z)((function(g){if(!g.defaultPrevented&&!g.defaultMuiPrevented&&(!S||!m&&U.current.contains(g.target)||Q.current.contains(g.target))){var I=cb(t,a),e=rb(a),C=pb(I,g.touches,(0,Pe.Z)(g.currentTarget)),n=Gb(I,g.touches,(0,Oe.Z)(g.currentTarget));if(!S){if(s||g.target!==E.current)return;if(e){if(C>f)return}else if(n>f)return}g.defaultMuiPrevented=!0,bb=null,M.current.startX=C,M.current.startY=n,z(!0),!S&&Q.current&&D(hb(e,Q.current)+(d?15:-20),{changeTransition:!1}),M.current.velocity=0,M.current.lastTime=null,M.current.lastTranslate=null,M.current.paperHit=!1,L.current=!0}}));return g.useEffect((function(){if("temporary"===H){var g=(0,Pe.Z)(Q.current);return g.addEventListener("touchstart",O),g.addEventListener("touchmove",P,{passive:!S}),g.addEventListener("touchend",j),function(){g.removeEventListener("touchstart",O),g.removeEventListener("touchmove",P,{passive:!S}),g.removeEventListener("touchend",j)}}}),[H,S,O,P,j]),g.useEffect((function(){return function(){bb===M.current&&(bb=null)}}),[]),g.useEffect((function(){S||z(!1)}),[S]),(0,mg.jsxs)(g.Fragment,{children:[(0,mg.jsx)(Ab,(0,i.Z)({open:!("temporary"!==H||!x)||S,variant:H,ModalProps:(0,i.Z)({BackdropProps:(0,i.Z)({},y,{ref:U})},w),hideBackdrop:m,PaperProps:(0,i.Z)({},v,{style:(0,i.Z)({pointerEvents:"temporary"!==H||S?"":"none"},v.style),ref:Q}),anchor:a,transitionDuration:T.current||J,onClose:B,ref:e},K)),!s&&"temporary"===H&&(0,mg.jsx)(_Z,{children:(0,mg.jsx)(sb,(0,i.Z)({anchor:a,ref:E,width:f},R))})]})})),Sb=Wb;function Vb(g){return(0,cg.Z)("MuiToolbar",g)}(0,Ag.Z)("MuiToolbar",["root","gutters","regular","dense"]);var vb=["className","component","disableGutters","variant"],Rb=(0,ag.ZP)("div",{name:"MuiToolbar",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,!e.disableGutters&&I.gutters,I[e.variant]]}})((function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({position:"relative",display:"flex",alignItems:"center"},!e.disableGutters&&(0,t.Z)({paddingLeft:I.spacing(2),paddingRight:I.spacing(2)},I.breakpoints.up("sm"),{paddingLeft:I.spacing(3),paddingRight:I.spacing(3)}),"dense"===e.variant&&{minHeight:48})}),(function(g){var I=g.theme;return"regular"===g.ownerState.variant&&I.mixins.toolbar})),Xb=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiToolbar"}),C=e.className,n=e.component,t=void 0===n?"div":n,l=e.disableGutters,o=void 0!==l&&l,a=e.variant,r=void 0===a?"regular":a,c=(0,gg.Z)(e,vb),A=(0,i.Z)({},e,{component:t,disableGutters:o,variant:r}),d=function(g){var I=g.classes,e={root:["root",!g.disableGutters&&"gutters",g.variant]};return(0,og.Z)(e,Vb,I)}(A);return(0,mg.jsx)(Rb,(0,i.Z)({as:t,className:(0,Ig.Z)(d.root,C),ref:I,ownerState:A},c))})),fb=(0,hl.Z)((0,mg.jsx)("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function kb(g){return(0,cg.Z)("MuiAvatar",g)}(0,Ag.Z)("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);var Jb=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],Yb=(0,ag.ZP)("div",{name:"MuiAvatar",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,I[e.variant],e.colorDefault&&I.colorDefault]}})((function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:I.typography.fontFamily,fontSize:I.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},"rounded"===e.variant&&{borderRadius:I.shape.borderRadius},"square"===e.variant&&{borderRadius:0},e.colorDefault&&{color:I.palette.background.default,backgroundColor:"light"===I.palette.mode?I.palette.grey[400]:I.palette.grey[600]})})),Hb=(0,ag.ZP)("img",{name:"MuiAvatar",slot:"Img",overridesResolver:function(g,I){return I.img}})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),wb=(0,ag.ZP)(fb,{name:"MuiAvatar",slot:"Fallback",overridesResolver:function(g,I){return I.fallback}})({width:"75%",height:"75%"});var Kb=g.forwardRef((function(I,e){var C=(0,ig.Z)({props:I,name:"MuiAvatar"}),t=C.alt,l=C.children,o=C.className,a=C.component,r=void 0===a?"div":a,c=C.imgProps,A=C.sizes,d=C.src,u=C.srcSet,s=C.variant,m=void 0===s?"circular":s,Z=(0,gg.Z)(C,Jb),b=null,p=function(I){var e=I.crossOrigin,C=I.referrerPolicy,t=I.src,l=I.srcSet,o=g.useState(!1),a=(0,n.Z)(o,2),i=a[0],r=a[1];return g.useEffect((function(){if(t||l){r(!1);var g=!0,I=new Image;return I.onload=function(){g&&r("loaded")},I.onerror=function(){g&&r("error")},I.crossOrigin=e,I.referrerPolicy=C,I.src=t,l&&(I.srcset=l),function(){g=!1}}}),[e,C,t,l]),i}((0,i.Z)({},c,{src:d,srcSet:u})),G=d||u,h=G&&"error"!==p,y=(0,i.Z)({},C,{colorDefault:!h,component:r,variant:m}),B=function(g){var I=g.classes,e={root:["root",g.variant,g.colorDefault&&"colorDefault"],img:["img"],fallback:["fallback"]};return(0,og.Z)(e,kb,I)}(y);return b=h?(0,mg.jsx)(Hb,(0,i.Z)({alt:t,src:d,srcSet:u,sizes:A,ownerState:y,className:B.img},c)):null!=l?l:G&&t?t[0]:(0,mg.jsx)(wb,{className:B.fallback}),(0,mg.jsx)(Yb,(0,i.Z)({as:r,ownerState:y,className:(0,Ig.Z)(B.root,o),ref:e},Z,{children:b}))})),Fb=Kb;function Nb(g){return(0,cg.Z)("MuiListItem",g)}var xb=(0,Ag.Z)("MuiListItem",["root","container","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","padding","button","secondaryAction","selected"]);var zb=(0,Ag.Z)("MuiListItemButton",["root","focusVisible","dense","alignItemsFlexStart","disabled","divider","gutters","selected"]);function Mb(g){return(0,cg.Z)("MuiListItemSecondaryAction",g)}(0,Ag.Z)("MuiListItemSecondaryAction",["root","disableGutters"]);var Eb=["className"],Ub=(0,ag.ZP)("div",{name:"MuiListItemSecondaryAction",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,e.disableGutters&&I.disableGutters]}})((function(g){var I=g.ownerState;return(0,i.Z)({position:"absolute",right:16,top:"50%",transform:"translateY(-50%)"},I.disableGutters&&{right:0})})),Qb=g.forwardRef((function(I,e){var C=(0,ig.Z)({props:I,name:"MuiListItemSecondaryAction"}),n=C.className,t=(0,gg.Z)(C,Eb),l=g.useContext(Jt),o=(0,i.Z)({},C,{disableGutters:l.disableGutters}),a=function(g){var I=g.disableGutters,e=g.classes,C={root:["root",I&&"disableGutters"]};return(0,og.Z)(C,Mb,e)}(o);return(0,mg.jsx)(Ub,(0,i.Z)({className:(0,Ig.Z)(a.root,n),ownerState:o,ref:e},t))}));Qb.muiName="ListItemSecondaryAction";var Lb=Qb,Tb=["className"],Db=["alignItems","autoFocus","button","children","className","component","components","componentsProps","ContainerComponent","ContainerProps","dense","disabled","disableGutters","disablePadding","divider","focusVisibleClassName","secondaryAction","selected"],jb=(0,ag.ZP)("div",{name:"MuiListItem",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,e.dense&&I.dense,"flex-start"===e.alignItems&&I.alignItemsFlexStart,e.divider&&I.divider,!e.disableGutters&&I.gutters,!e.disablePadding&&I.padding,e.button&&I.button,e.hasSecondaryAction&&I.secondaryAction]}})((function(g){var I,e=g.theme,C=g.ownerState;return(0,i.Z)({display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",width:"100%",boxSizing:"border-box",textAlign:"left"},!C.disablePadding&&(0,i.Z)({paddingTop:8,paddingBottom:8},C.dense&&{paddingTop:4,paddingBottom:4},!C.disableGutters&&{paddingLeft:16,paddingRight:16},!!C.secondaryAction&&{paddingRight:48}),!!C.secondaryAction&&(0,t.Z)({},"& > .".concat(zb.root),{paddingRight:48}),(I={},(0,t.Z)(I,"&.".concat(xb.focusVisible),{backgroundColor:e.palette.action.focus}),(0,t.Z)(I,"&.".concat(xb.selected),(0,t.Z)({backgroundColor:(0,yg.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)},"&.".concat(xb.focusVisible),{backgroundColor:(0,yg.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)})),(0,t.Z)(I,"&.".concat(xb.disabled),{opacity:e.palette.action.disabledOpacity}),I),"flex-start"===C.alignItems&&{alignItems:"flex-start"},C.divider&&{borderBottom:"1px solid ".concat(e.palette.divider),backgroundClip:"padding-box"},C.button&&(0,t.Z)({transition:e.transitions.create("background-color",{duration:e.transitions.duration.shortest}),"&:hover":{textDecoration:"none",backgroundColor:e.palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}}},"&.".concat(xb.selected,":hover"),{backgroundColor:(0,yg.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(0,yg.Fq)(e.palette.primary.main,e.palette.action.selectedOpacity)}}),C.hasSecondaryAction&&{paddingRight:48})})),Pb=(0,ag.ZP)("li",{name:"MuiListItem",slot:"Container",overridesResolver:function(g,I){return I.container}})({position:"relative"}),Ob=g.forwardRef((function(I,e){var C=(0,ig.Z)({props:I,name:"MuiListItem"}),n=C.alignItems,t=void 0===n?"center":n,l=C.autoFocus,o=void 0!==l&&l,a=C.button,r=void 0!==a&&a,c=C.children,A=C.className,d=C.component,u=C.components,s=void 0===u?{}:u,m=C.componentsProps,Z=void 0===m?{}:m,b=C.ContainerComponent,p=void 0===b?"li":b,G=C.ContainerProps,h=(G=void 0===G?{}:G).className,y=C.dense,B=void 0!==y&&y,W=C.disabled,S=void 0!==W&&W,V=C.disableGutters,v=void 0!==V&&V,R=C.disablePadding,X=void 0!==R&&R,f=C.divider,k=void 0!==f&&f,J=C.focusVisibleClassName,Y=C.secondaryAction,H=C.selected,w=void 0!==H&&H,K=(0,gg.Z)(C.ContainerProps,Tb),F=(0,gg.Z)(C,Db),N=g.useContext(Jt),x={dense:B||N.dense||!1,alignItems:t,disableGutters:v},z=g.useRef(null);(0,Wn.Z)((function(){o&&z.current&&z.current.focus()}),[o]);var M=g.Children.toArray(c),E=M.length&&(0,ht.Z)(M[M.length-1],["ListItemSecondaryAction"]),U=(0,i.Z)({},C,{alignItems:t,autoFocus:o,button:r,dense:x.dense,disabled:S,disableGutters:v,disablePadding:X,divider:k,hasSecondaryAction:E,selected:w}),Q=function(g){var I=g.alignItems,e=g.button,C=g.classes,n=g.dense,t=g.disabled,l={root:["root",n&&"dense",!g.disableGutters&&"gutters",!g.disablePadding&&"padding",g.divider&&"divider",t&&"disabled",e&&"button","flex-start"===I&&"alignItemsFlexStart",g.hasSecondaryAction&&"secondaryAction",g.selected&&"selected"],container:["container"]};return(0,og.Z)(l,Nb,C)}(U),L=(0,SI.Z)(z,e),T=s.Root||jb,D=Z.root||{},j=(0,i.Z)({className:(0,Ig.Z)(Q.root,D.className,A),disabled:S},F),P=d||"li";return r&&(j.component=d||"div",j.focusVisibleClassName=(0,Ig.Z)(xb.focusVisible,J),P=Ze),E?(P=j.component||d?P:"div","li"===p&&("li"===P?P="div":"li"===j.component&&(j.component="div")),(0,mg.jsx)(Jt.Provider,{value:x,children:(0,mg.jsxs)(Pb,(0,i.Z)({as:p,className:(0,Ig.Z)(Q.container,h),ref:L,ownerState:U},K,{children:[(0,mg.jsx)(T,(0,i.Z)({},D,!sC(T)&&{as:P,ownerState:(0,i.Z)({},U,D.ownerState)},j,{children:M})),M.pop()]}))})):(0,mg.jsx)(Jt.Provider,{value:x,children:(0,mg.jsxs)(T,(0,i.Z)({},D,{as:P,ref:L,ownerState:U},!sC(T)&&{ownerState:(0,i.Z)({},U,D.ownerState)},j,{children:[M,Y&&(0,mg.jsx)(Lb,{children:Y})]}))})})),qb=["className"],_b=(0,ag.ZP)("div",{name:"MuiListItemIcon",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,"flex-start"===e.alignItems&&I.alignItemsFlexStart]}})((function(g){var I=g.theme,e=g.ownerState;return(0,i.Z)({minWidth:56,color:I.palette.action.active,flexShrink:0,display:"inline-flex"},"flex-start"===e.alignItems&&{marginTop:8})})),$b=g.forwardRef((function(I,e){var C=(0,ig.Z)({props:I,name:"MuiListItemIcon"}),n=C.className,t=(0,gg.Z)(C,qb),l=g.useContext(Jt),o=(0,i.Z)({},C,{alignItems:l.alignItems}),a=function(g){var I=g.alignItems,e=g.classes,C={root:["root","flex-start"===I&&"alignItemsFlexStart"]};return(0,og.Z)(C,jo,e)}(o);return(0,mg.jsx)(_b,(0,i.Z)({className:(0,Ig.Z)(a.root,n),ownerState:o,ref:e},t))}));function gp(g){return(0,cg.Z)("MuiAppBar",g)}(0,Ag.Z)("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent"]);var Ip=["className","color","enableColorOnDark","position"],ep=(0,ag.ZP)(vg,{name:"MuiAppBar",slot:"Root",overridesResolver:function(g,I){var e=g.ownerState;return[I.root,I["position".concat((0,Rg.Z)(e.position))],I["color".concat((0,Rg.Z)(e.color))]]}})((function(g){var I=g.theme,e=g.ownerState,C="light"===I.palette.mode?I.palette.grey[100]:I.palette.grey[900];return(0,i.Z)({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0},"fixed"===e.position&&{position:"fixed",zIndex:I.zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}},"absolute"===e.position&&{position:"absolute",zIndex:I.zIndex.appBar,top:0,left:"auto",right:0},"sticky"===e.position&&{position:"sticky",zIndex:I.zIndex.appBar,top:0,left:"auto",right:0},"static"===e.position&&{position:"static"},"relative"===e.position&&{position:"relative"},"default"===e.color&&{backgroundColor:C,color:I.palette.getContrastText(C)},e.color&&"default"!==e.color&&"inherit"!==e.color&&"transparent"!==e.color&&{backgroundColor:I.palette[e.color].main,color:I.palette[e.color].contrastText},"inherit"===e.color&&{color:"inherit"},"dark"===I.palette.mode&&!e.enableColorOnDark&&{backgroundColor:null,color:null},"transparent"===e.color&&(0,i.Z)({backgroundColor:"transparent",color:"inherit"},"dark"===I.palette.mode&&{backgroundImage:"none"}))})),Cp=g.forwardRef((function(g,I){var e=(0,ig.Z)({props:g,name:"MuiAppBar"}),C=e.className,n=e.color,t=void 0===n?"primary":n,l=e.enableColorOnDark,o=void 0!==l&&l,a=e.position,r=void 0===a?"fixed":a,c=(0,gg.Z)(e,Ip),A=(0,i.Z)({},e,{color:t,position:r,enableColorOnDark:o}),d=function(g){var I=g.color,e=g.position,C=g.classes,n={root:["root","color".concat((0,Rg.Z)(I)),"position".concat((0,Rg.Z)(e))]};return(0,og.Z)(n,gp,C)}(A);return(0,mg.jsx)(ep,(0,i.Z)({square:!0,component:"header",ownerState:A,elevation:4,className:(0,Ig.Z)(d.root,C,"fixed"===r&&"mui-fixed"),ref:I},c))})),np=e(8008),tp=e(1009),lp=e(3607),op=e(2338),ap=e(8114),ip=e(7449),rp=e(8994),cp=e(2793),Ap=function(I){var e=I.setOpen,C=I.open,t=I.logout,l=I.image,a=I.cookies,i=I.t,r=(0,ag.ZP)("div")((function(g){var I=g.theme;return o(o({display:"flex",alignItems:"center",padding:I.spacing(0,1)},I.mixins.toolbar),{},{justifyContent:"flex-end"})})),c=(0,ag.ZP)(Cp,{shouldForwardProp:function(g){return"open"!==g}})((function(g){var I=g.theme,e=g.open;return o({transition:I.transitions.create(["margin","width"],{easing:I.transitions.easing.sharp,duration:I.transitions.duration.leavingScreen})},e&&{width:"calc(100% - ".concat(A,"px)"),marginLeft:"".concat(A,"px"),transition:I.transitions.create(["margin","width"],{easing:I.transitions.easing.easeOut,duration:I.transitions.duration.enteringScreen})})})),A=240,d=(oC(),function(){e(!C)}),u=g.useState(null),s=(0,n.Z)(u,2),m=s[0],Z=s[1],b=function(){Z(null)};return(0,mg.jsxs)(mg.Fragment,{children:[(0,mg.jsx)(c,{position:"fixed",open:C,children:(0,mg.jsxs)(Xb,{children:[(0,mg.jsx)(ye,{size:"large",edge:"start",color:"inherit","aria-label":"menu",onClick:d,sx:{mr:2},children:(0,mg.jsx)(np.Z,{})}),(0,mg.jsx)(Hg,{variant:"h6",sx:{flexGrow:1},children:"Tract"}),(0,mg.jsxs)("div",{children:[(0,mg.jsx)(ye,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(g){Z(g.currentTarget)},color:"inherit",id:"user-button",children:(0,mg.jsx)(Fb,{alt:"User",src:l})}),(0,mg.jsxs)(_t,{id:"menu-appbar",anchorEl:m,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:Boolean(m),onClose:b,style:{top:"3rem",right:"0",padding:"5rem",left:"auto"},children:[(0,mg.jsx)(Ca,{style:{paddingRight:"4rem"},onClick:b,children:i("profile")}),(0,mg.jsx)(Ca,{style:{paddingRight:"4rem"},onClick:function(){t({returnTo:window.location.origin}),a.remove("user")},children:i("logout")})]})]})]})}),(0,mg.jsxs)(Sb,{sx:{width:A,flexShrink:0,"& .MuiDrawer-paper":{width:A,boxSizing:"border-box"}},variant:"persistent",anchor:"left",open:C,onClose:d,onOpen:d,children:[(0,mg.jsx)(r,{children:(0,mg.jsx)(ye,{onClick:d,children:(0,mg.jsx)(tp.Z,{})})}),(0,mg.jsx)(Eo,{}),(0,mg.jsxs)(Kt,{children:[(0,mg.jsxs)(Ob,{button:!0,component:_,to:"/",children:[" ",(0,mg.jsxs)($b,{children:[(0,mg.jsx)(op.Z,{})," "]}),(0,mg.jsx)(qm,{primary:i("dashboard")})," "]}),(0,mg.jsxs)(Ob,{button:!0,component:_,to:"/devices",children:[(0,mg.jsx)($b,{children:(0,mg.jsx)(lp.Z,{})}),(0,mg.jsx)(qm,{primary:i("devices")})]}),(0,mg.jsxs)(Ob,{button:!0,component:_,to:"/users",children:[(0,mg.jsx)($b,{children:(0,mg.jsx)(ap.Z,{})}),(0,mg.jsx)(qm,{primary:i("users")})]})]}),a.get("user")&&Number(a.get("user").role)<2&&(0,mg.jsxs)(mg.Fragment,{children:[(0,mg.jsx)(Eo,{}),(0,mg.jsx)("br",{}),(0,mg.jsx)(Hg,{variant:"h6",sx:{textAlign:"center"},children:i("admin")}),(0,mg.jsx)(Kt,{children:0===a.get("user").role&&(0,mg.jsxs)(mg.Fragment,{children:[(0,mg.jsxs)(Ob,{button:!0,component:_,to:"/admin/",children:[(0,mg.jsx)($b,{children:(0,mg.jsx)(rp.Z,{})}),(0,mg.jsx)(qm,{primary:i("companies")})]}),(0,mg.jsxs)(Ob,{button:!0,component:_,to:"/admin/nodes/",children:[(0,mg.jsx)($b,{children:(0,mg.jsx)(cp.Z,{})}),(0,mg.jsx)(qm,{primary:i("nodes")})]})]})}),0===a.get("user").role&&(0,mg.jsxs)(mg.Fragment,{children:[(0,mg.jsx)("br",{}),(0,mg.jsx)(Hg,{variant:"h6",sx:{textAlign:"center"},children:i("rules")}),(0,mg.jsx)(Kt,{children:(0,mg.jsxs)(Ob,{button:!0,component:_,to:"/rules",children:[(0,mg.jsx)($b,{children:(0,mg.jsx)(ip.Z,{})}),(0,mg.jsx)(qm,{primary:i("rules")})]})})]})]})]})]})},dp=e(5299);var up=function(){var I,e="https://api.abodsakka.xyz/api/",C=new OZ,t=(0,ag.ZP)("main",{shouldForwardProp:function(g){return"open"!==g}})((function(g){var I=g.theme,e=g.open;return o({flexGrow:1,padding:I.spacing(3),transition:I.transitions.create("margin",{easing:I.transitions.easing.sharp,duration:I.transitions.duration.leavingScreen})},e&&{transition:I.transitions.create("margin",{easing:I.transitions.easing.easeOut,duration:I.transitions.duration.enteringScreen}),marginLeft:"".concat(240,"px")})})),l=(0,ag.ZP)("div")((function(g){var I=g.theme;return o(o({display:"flex",alignItems:"center",padding:I.spacing(0,1)},I.mixins.toolbar),{},{justifyContent:"flex-end"})})),a=fm(),i=a.user,r=a.isAuthenticated,c=a.isLoading,A=a.logout,d=(0,g.useState)(""),u=(0,n.Z)(d,2),s=u[0],m=(u[1],(0,g.useState)(!1)),Z=(0,n.Z)(m,2),b=Z[0],p=Z[1],G=(0,g.useState)({}),h=(0,n.Z)(G,2),y=(h[0],h[1]);if(void 0===C.get("user")&&r)try{I=i.sub.split("|")[1],fetch("".concat(e,"user?key=").concat("377307b0-fdf6-4762-8403-00084d164de5","&id=").concat(I)).then((function(g){return g.json()})).then((function(g){return C.set("user",g,{path:"/"}),y(g),g}))}catch(s){console.log("Error: ".concat(s))}return c||!r?(0,mg.jsx)(km,{loading:c,cookies:C}):(0,mg.jsxs)(q,{children:[(0,mg.jsx)(Ap,{setOpen:p,open:b,userName:i.name,image:i.picture,logout:A,cookies:C,t:dp.t}),(0,mg.jsx)(ma,{sx:{display:"flex",flexGrow:1},style:{height:"100vh"},children:(0,mg.jsxs)(t,{open:b,children:[(0,mg.jsx)(l,{}),(0,mg.jsx)("h1",{children:s}),(0,mg.jsxs)(v,{children:[(0,mg.jsx)(S,{path:"/",element:(0,mg.jsx)(ve,{cookies:C,t:dp.t})}),(0,mg.jsx)(S,{path:"/login",element:(0,mg.jsx)(km,{t:dp.t})}),(0,mg.jsx)(S,{path:"/devices",element:(0,mg.jsx)(Fe,{t:dp.t})}),(0,mg.jsx)(S,{path:"/devices/:category",element:(0,mg.jsx)(lo,{t:dp.t})}),(0,mg.jsx)(S,{path:"/users",element:(0,mg.jsx)(oo,{t:dp.t})}),C.get("user")&&0===C.get("user").role&&(0,mg.jsxs)(mg.Fragment,{children:[(0,mg.jsx)(S,{path:"/admin",element:(0,mg.jsx)(Ko,{t:dp.t,apiURL:e})}),(0,mg.jsx)(S,{path:"/admin/add-node",element:(0,mg.jsx)(aa,{t:dp.t,apiURL:e})}),(0,mg.jsx)(S,{path:"/admin/nodes",element:(0,mg.jsx)(sa,{t:dp.t,apiURL:e})}),(0,mg.jsx)(S,{path:"/admin/add-company",element:(0,mg.jsx)(Uo,{t:dp.t,apiURL:e})}),(0,mg.jsx)(S,{path:"/rules",element:(0,mg.jsx)(LZ,{})})]})," ",(0,mg.jsx)(S,{path:"/rules",element:(0,mg.jsx)(LZ,{})}),(0,mg.jsx)(S,{path:"*",element:(0,mg.jsx)(Hg,{variant:"h1",children:"404"})})]})]})})]})},sp=function(g){g&&g instanceof Function&&e.e(787).then(e.bind(e,787)).then((function(I){var e=I.getCLS,C=I.getFID,n=I.getFCP,t=I.getLCP,l=I.getTTFB;e(g),C(g),n(g),t(g),l(g)}))};C.render((0,mg.jsx)(Xm,{domain:"dev-dg2ss3q4.us.auth0.com",clientId:"J617d67gbcov1ixP8GUg6G8uH32YzBZO",redirectUri:window.location.origin,children:(0,mg.jsx)(up,{})}),document.getElementById("root")),sp()}()}();
//# sourceMappingURL=main.d368f6df.js.map